(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var n2={exports:{}},m0={},r2={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=Symbol.for("react.element"),W3=Symbol.for("react.portal"),$3=Symbol.for("react.fragment"),X3=Symbol.for("react.strict_mode"),j3=Symbol.for("react.profiler"),J3=Symbol.for("react.provider"),K3=Symbol.for("react.context"),Y3=Symbol.for("react.forward_ref"),Q3=Symbol.for("react.suspense"),Z3=Symbol.for("react.memo"),q3=Symbol.for("react.lazy"),cE=Symbol.iterator;function eF(n){return n===null||typeof n!="object"?null:(n=cE&&n[cE]||n["@@iterator"],typeof n=="function"?n:null)}var i2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s2=Object.assign,o2={};function mu(n,e,t){this.props=n,this.context=e,this.refs=o2,this.updater=t||i2}mu.prototype.isReactComponent={};mu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};mu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function a2(){}a2.prototype=mu.prototype;function K1(n,e,t){this.props=n,this.context=e,this.refs=o2,this.updater=t||i2}var Y1=K1.prototype=new a2;Y1.constructor=K1;s2(Y1,mu.prototype);Y1.isPureReactComponent=!0;var uE=Array.isArray,l2=Object.prototype.hasOwnProperty,Q1={current:null},c2={key:!0,ref:!0,__self:!0,__source:!0};function u2(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)l2.call(e,r)&&!c2.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Oh,type:n,key:s,ref:o,props:i,_owner:Q1.current}}function tF(n,e){return{$$typeof:Oh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Z1(n){return typeof n=="object"&&n!==null&&n.$$typeof===Oh}function nF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var fE=/\/+/g;function Fy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nF(""+n.key):e.toString(36)}function Rm(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Oh:case W3:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Fy(o,0):r,uE(i)?(t="",n!=null&&(t=n.replace(fE,"$&/")+"/"),Rm(i,e,t,"",function(f){return f})):i!=null&&(Z1(i)&&(i=tF(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fE,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",uE(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Fy(s,a);o+=Rm(s,e,t,l,i)}else if(l=eF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Fy(s,a++),o+=Rm(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hp(n,e,t){if(n==null)return n;var r=[],i=0;return Rm(n,r,"","",function(s){return e.call(t,s,i++)}),r}function rF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var br={current:null},Pm={transition:null},iF={ReactCurrentDispatcher:br,ReactCurrentBatchConfig:Pm,ReactCurrentOwner:Q1};function f2(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:hp,forEach:function(n,e,t){hp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return hp(n,function(){e++}),e},toArray:function(n){return hp(n,function(e){return e})||[]},only:function(n){if(!Z1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Lt.Component=mu;Lt.Fragment=$3;Lt.Profiler=j3;Lt.PureComponent=K1;Lt.StrictMode=X3;Lt.Suspense=Q3;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iF;Lt.act=f2;Lt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=s2({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Q1.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)l2.call(e,l)&&!c2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:Oh,type:n.type,key:i,ref:s,props:r,_owner:o}};Lt.createContext=function(n){return n={$$typeof:K3,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:J3,_context:n},n.Consumer=n};Lt.createElement=u2;Lt.createFactory=function(n){var e=u2.bind(null,n);return e.type=n,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(n){return{$$typeof:Y3,render:n}};Lt.isValidElement=Z1;Lt.lazy=function(n){return{$$typeof:q3,_payload:{_status:-1,_result:n},_init:rF}};Lt.memo=function(n,e){return{$$typeof:Z3,type:n,compare:e===void 0?null:e}};Lt.startTransition=function(n){var e=Pm.transition;Pm.transition={};try{n()}finally{Pm.transition=e}};Lt.unstable_act=f2;Lt.useCallback=function(n,e){return br.current.useCallback(n,e)};Lt.useContext=function(n){return br.current.useContext(n)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(n){return br.current.useDeferredValue(n)};Lt.useEffect=function(n,e){return br.current.useEffect(n,e)};Lt.useId=function(){return br.current.useId()};Lt.useImperativeHandle=function(n,e,t){return br.current.useImperativeHandle(n,e,t)};Lt.useInsertionEffect=function(n,e){return br.current.useInsertionEffect(n,e)};Lt.useLayoutEffect=function(n,e){return br.current.useLayoutEffect(n,e)};Lt.useMemo=function(n,e){return br.current.useMemo(n,e)};Lt.useReducer=function(n,e,t){return br.current.useReducer(n,e,t)};Lt.useRef=function(n){return br.current.useRef(n)};Lt.useState=function(n){return br.current.useState(n)};Lt.useSyncExternalStore=function(n,e,t){return br.current.useSyncExternalStore(n,e,t)};Lt.useTransition=function(){return br.current.useTransition()};Lt.version="18.3.1";r2.exports=Lt;var ce=r2.exports;const H=p0(ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF=ce,oF=Symbol.for("react.element"),aF=Symbol.for("react.fragment"),lF=Object.prototype.hasOwnProperty,cF=sF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uF={key:!0,ref:!0,__self:!0,__source:!0};function h2(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lF.call(e,r)&&!uF.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oF,type:n,key:s,ref:o,props:i,_owner:cF.current}}m0.Fragment=aF;m0.jsx=h2;m0.jsxs=h2;n2.exports=m0;var $e=n2.exports,d2={exports:{}},si={},p2={exports:{}},m2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,Q){var J=U.length;U.push(Q);e:for(;0<J;){var se=J-1>>>1,_e=U[se];if(0<i(_e,Q))U[se]=Q,U[J]=_e,J=se;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],J=U.pop();if(J!==Q){U[0]=J;e:for(var se=0,_e=U.length,De=_e>>>1;se<De;){var ie=2*(se+1)-1,ye=U[ie],Pe=ie+1,we=U[Pe];if(0>i(ye,J))Pe<_e&&0>i(we,ye)?(U[se]=we,U[Pe]=J,se=Pe):(U[se]=ye,U[ie]=J,se=ie);else if(Pe<_e&&0>i(we,J))U[se]=we,U[Pe]=J,se=Pe;else break e}}return Q}function i(U,Q){var J=U.sortIndex-Q.sortIndex;return J!==0?J:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,d=null,p=3,m=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(U){for(var Q=t(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=U)r(f),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(f)}}function E(U){if(_=!1,M(U),!y)if(t(l)!==null)y=!0,Z(P);else{var Q=t(f);Q!==null&&pe(E,Q.startTime-U)}}function P(U,Q){y=!1,_&&(_=!1,g(L),L=-1),m=!0;var J=p;try{for(M(Q),d=t(l);d!==null&&(!(d.expirationTime>Q)||U&&!R());){var se=d.callback;if(typeof se=="function"){d.callback=null,p=d.priorityLevel;var _e=se(d.expirationTime<=Q);Q=n.unstable_now(),typeof _e=="function"?d.callback=_e:d===t(l)&&r(l),M(Q)}else r(l);d=t(l)}if(d!==null)var De=!0;else{var ie=t(f);ie!==null&&pe(E,ie.startTime-Q),De=!1}return De}finally{d=null,p=J,m=!1}}var T=!1,B=null,L=-1,z=5,b=-1;function R(){return!(n.unstable_now()-b<z)}function $(){if(B!==null){var U=n.unstable_now();b=U;var Q=!0;try{Q=B(!0,U)}finally{Q?X():(T=!1,B=null)}}else T=!1}var X;if(typeof S=="function")X=function(){S($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,le=ee.port2;ee.port1.onmessage=$,X=function(){le.postMessage(null)}}else X=function(){x($,0)};function Z(U){B=U,T||(T=!0,X())}function pe(U,Q){L=x(function(){U(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Z(P))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var J=p;p=Q;try{return U()}finally{p=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=p;p=U;try{return Q()}finally{p=J}},n.unstable_scheduleCallback=function(U,Q,J){var se=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?se+J:se):J=se,U){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=J+_e,U={id:h++,callback:Q,priorityLevel:U,startTime:J,expirationTime:_e,sortIndex:-1},J>se?(U.sortIndex=J,e(f,U),t(l)===null&&U===t(f)&&(_?(g(L),L=-1):_=!0,pe(E,J-se))):(U.sortIndex=_e,e(l,U),y||m||(y=!0,Z(P))),U},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(U){var Q=p;return function(){var J=p;p=Q;try{return U.apply(this,arguments)}finally{p=J}}}})(m2);p2.exports=m2;var fF=p2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hF=ce,ni=fF;function Me(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g2=new Set,nh={};function pl(n,e){eu(n,e),eu(n+"Capture",e)}function eu(n,e){for(nh[n]=e,n=0;n<e.length;n++)g2.add(e[n])}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S_=Object.prototype.hasOwnProperty,dF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hE={},dE={};function pF(n){return S_.call(dE,n)?!0:S_.call(hE,n)?!1:dF.test(n)?dE[n]=!0:(hE[n]=!0,!1)}function mF(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gF(n,e,t,r){if(e===null||typeof e>"u"||mF(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){qn[n]=new Cr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];qn[e]=new Cr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){qn[n]=new Cr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){qn[n]=new Cr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){qn[n]=new Cr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){qn[n]=new Cr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){qn[n]=new Cr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){qn[n]=new Cr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){qn[n]=new Cr(n,5,!1,n.toLowerCase(),null,!1,!1)});var q1=/[\-:]([a-z])/g;function eA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(q1,eA);qn[e]=new Cr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(q1,eA);qn[e]=new Cr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(q1,eA);qn[e]=new Cr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){qn[n]=new Cr(n,1,!1,n.toLowerCase(),null,!1,!1)});qn.xlinkHref=new Cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){qn[n]=new Cr(n,1,!1,n.toLowerCase(),null,!0,!0)});function tA(n,e,t,r){var i=qn.hasOwnProperty(e)?qn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gF(e,t,i,r)&&(t=null),r||i===null?pF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ro=hF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dp=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),Pc=Symbol.for("react.fragment"),nA=Symbol.for("react.strict_mode"),M_=Symbol.for("react.profiler"),v2=Symbol.for("react.provider"),y2=Symbol.for("react.context"),rA=Symbol.for("react.forward_ref"),w_=Symbol.for("react.suspense"),E_=Symbol.for("react.suspense_list"),iA=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),x2=Symbol.for("react.offscreen"),pE=Symbol.iterator;function qu(n){return n===null||typeof n!="object"?null:(n=pE&&n[pE]||n["@@iterator"],typeof n=="function"?n:null)}var yn=Object.assign,Oy;function Tf(n){if(Oy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Oy=e&&e[1]||""}return`
`+Oy+n}var Ny=!1;function Uy(n,e){if(!n||Ny)return"";Ny=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){r=f}n.call(e.prototype)}else{try{throw Error()}catch(f){r=f}n()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ny=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Tf(n):""}function vF(n){switch(n.tag){case 5:return Tf(n.type);case 16:return Tf("Lazy");case 13:return Tf("Suspense");case 19:return Tf("SuspenseList");case 0:case 2:case 15:return n=Uy(n.type,!1),n;case 11:return n=Uy(n.type.render,!1),n;case 1:return n=Uy(n.type,!0),n;default:return""}}function b_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Pc:return"Fragment";case Rc:return"Portal";case M_:return"Profiler";case nA:return"StrictMode";case w_:return"Suspense";case E_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case y2:return(n.displayName||"Context")+".Consumer";case v2:return(n._context.displayName||"Context")+".Provider";case rA:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case iA:return e=n.displayName||null,e!==null?e:b_(n.type)||"Memo";case Ro:e=n._payload,n=n._init;try{return b_(n(e))}catch{}}return null}function yF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b_(e);case 8:return e===nA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _2(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xF(n){var e=_2(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function pp(n){n._valueTracker||(n._valueTracker=xF(n))}function A2(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=_2(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Xm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function C_(n,e){var t=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function mE(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Xo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S2(n,e){e=e.checked,e!=null&&tA(n,"checked",e,!1)}function T_(n,e){S2(n,e);var t=Xo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?R_(n,e.type,t):e.hasOwnProperty("defaultValue")&&R_(n,e.type,Xo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function gE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function R_(n,e,t){(e!=="number"||Xm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Rf=Array.isArray;function $c(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Xo(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function P_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Me(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Me(92));if(Rf(t)){if(1<t.length)throw Error(Me(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Xo(t)}}function M2(n,e){var t=Xo(e.value),r=Xo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function yE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function w2(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?w2(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mp,E2=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(mp=mp||document.createElement("div"),mp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function rh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_F=["Webkit","ms","Moz","O"];Object.keys(Nf).forEach(function(n){_F.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Nf[e]=Nf[n]})});function b2(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Nf.hasOwnProperty(n)&&Nf[n]?(""+e).trim():e+"px"}function C2(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=b2(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var AF=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I_(n,e){if(e){if(AF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Me(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Me(62))}}function L_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D_=null;function sA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var F_=null,Xc=null,jc=null;function xE(n){if(n=kh(n)){if(typeof F_!="function")throw Error(Me(280));var e=n.stateNode;e&&(e=_0(e),F_(n.stateNode,n.type,e))}}function T2(n){Xc?jc?jc.push(n):jc=[n]:Xc=n}function R2(){if(Xc){var n=Xc,e=jc;if(jc=Xc=null,xE(n),e)for(n=0;n<e.length;n++)xE(e[n])}}function P2(n,e){return n(e)}function B2(){}var ky=!1;function I2(n,e,t){if(ky)return n(e,t);ky=!0;try{return P2(n,e,t)}finally{ky=!1,(Xc!==null||jc!==null)&&(B2(),R2())}}function ih(n,e){var t=n.stateNode;if(t===null)return null;var r=_0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Me(231,e,typeof t));return t}var O_=!1;if(Ys)try{var ef={};Object.defineProperty(ef,"passive",{get:function(){O_=!0}}),window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{O_=!1}function SF(n,e,t,r,i,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(h){this.onError(h)}}var Uf=!1,jm=null,Jm=!1,N_=null,MF={onError:function(n){Uf=!0,jm=n}};function wF(n,e,t,r,i,s,o,a,l){Uf=!1,jm=null,SF.apply(MF,arguments)}function EF(n,e,t,r,i,s,o,a,l){if(wF.apply(this,arguments),Uf){if(Uf){var f=jm;Uf=!1,jm=null}else throw Error(Me(198));Jm||(Jm=!0,N_=f)}}function ml(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function L2(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function _E(n){if(ml(n)!==n)throw Error(Me(188))}function bF(n){var e=n.alternate;if(!e){if(e=ml(n),e===null)throw Error(Me(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return _E(i),n;if(s===r)return _E(i),e;s=s.sibling}throw Error(Me(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Me(189))}}if(t.alternate!==r)throw Error(Me(190))}if(t.tag!==3)throw Error(Me(188));return t.stateNode.current===t?n:e}function D2(n){return n=bF(n),n!==null?F2(n):null}function F2(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=F2(n);if(e!==null)return e;n=n.sibling}return null}var O2=ni.unstable_scheduleCallback,AE=ni.unstable_cancelCallback,CF=ni.unstable_shouldYield,TF=ni.unstable_requestPaint,Tn=ni.unstable_now,RF=ni.unstable_getCurrentPriorityLevel,oA=ni.unstable_ImmediatePriority,N2=ni.unstable_UserBlockingPriority,Km=ni.unstable_NormalPriority,PF=ni.unstable_LowPriority,U2=ni.unstable_IdlePriority,g0=null,ms=null;function BF(n){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(g0,n,void 0,(n.current.flags&128)===128)}catch{}}var Vi=Math.clz32?Math.clz32:DF,IF=Math.log,LF=Math.LN2;function DF(n){return n>>>=0,n===0?32:31-(IF(n)/LF|0)|0}var gp=64,vp=4194304;function Pf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ym(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Pf(a):(s&=o,s!==0&&(r=Pf(s)))}else o=t&~i,o!==0?r=Pf(o):s!==0&&(r=Pf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Vi(e),i=1<<t,r|=n[t],e&=~i;return r}function FF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OF(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Vi(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=FF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function U_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function k2(){var n=gp;return gp<<=1,!(gp&4194240)&&(gp=64),n}function Hy(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Nh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Vi(e),n[e]=t}function NF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Vi(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function aA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Vi(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Kt=0;function H2(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var z2,lA,G2,V2,W2,k_=!1,yp=[],No=null,Uo=null,ko=null,sh=new Map,oh=new Map,Io=[],UF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SE(n,e){switch(n){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Uo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":sh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oh.delete(e.pointerId)}}function tf(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kh(e),e!==null&&lA(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function kF(n,e,t,r,i){switch(e){case"focusin":return No=tf(No,n,e,t,r,i),!0;case"dragenter":return Uo=tf(Uo,n,e,t,r,i),!0;case"mouseover":return ko=tf(ko,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return sh.set(s,tf(sh.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,oh.set(s,tf(oh.get(s)||null,n,e,t,r,i)),!0}return!1}function $2(n){var e=Na(n.target);if(e!==null){var t=ml(e);if(t!==null){if(e=t.tag,e===13){if(e=L2(t),e!==null){n.blockedOn=e,W2(n.priority,function(){G2(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=H_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);D_=r,t.target.dispatchEvent(r),D_=null}else return e=kh(t),e!==null&&lA(e),n.blockedOn=t,!1;e.shift()}return!0}function ME(n,e,t){Bm(n)&&t.delete(e)}function HF(){k_=!1,No!==null&&Bm(No)&&(No=null),Uo!==null&&Bm(Uo)&&(Uo=null),ko!==null&&Bm(ko)&&(ko=null),sh.forEach(ME),oh.forEach(ME)}function nf(n,e){n.blockedOn===e&&(n.blockedOn=null,k_||(k_=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,HF)))}function ah(n){function e(i){return nf(i,n)}if(0<yp.length){nf(yp[0],n);for(var t=1;t<yp.length;t++){var r=yp[t];r.blockedOn===n&&(r.blockedOn=null)}}for(No!==null&&nf(No,n),Uo!==null&&nf(Uo,n),ko!==null&&nf(ko,n),sh.forEach(e),oh.forEach(e),t=0;t<Io.length;t++)r=Io[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Io.length&&(t=Io[0],t.blockedOn===null);)$2(t),t.blockedOn===null&&Io.shift()}var Jc=ro.ReactCurrentBatchConfig,Qm=!0;function zF(n,e,t,r){var i=Kt,s=Jc.transition;Jc.transition=null;try{Kt=1,cA(n,e,t,r)}finally{Kt=i,Jc.transition=s}}function GF(n,e,t,r){var i=Kt,s=Jc.transition;Jc.transition=null;try{Kt=4,cA(n,e,t,r)}finally{Kt=i,Jc.transition=s}}function cA(n,e,t,r){if(Qm){var i=H_(n,e,t,r);if(i===null)Yy(n,e,r,Zm,t),SE(n,r);else if(kF(i,n,e,t,r))r.stopPropagation();else if(SE(n,r),e&4&&-1<UF.indexOf(n)){for(;i!==null;){var s=kh(i);if(s!==null&&z2(s),s=H_(n,e,t,r),s===null&&Yy(n,e,r,Zm,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yy(n,e,r,null,t)}}var Zm=null;function H_(n,e,t,r){if(Zm=null,n=sA(r),n=Na(n),n!==null)if(e=ml(n),e===null)n=null;else if(t=e.tag,t===13){if(n=L2(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Zm=n,null}function X2(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RF()){case oA:return 1;case N2:return 4;case Km:case PF:return 16;case U2:return 536870912;default:return 16}default:return 16}}var Fo=null,uA=null,Im=null;function j2(){if(Im)return Im;var n,e=uA,t=e.length,r,i="value"in Fo?Fo.value:Fo.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Im=i.slice(n,1<r?1-r:void 0)}function Lm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function xp(){return!0}function wE(){return!1}function oi(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xp:wE,this.isPropagationStopped=wE,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=xp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=xp)},persist:function(){},isPersistent:xp}),e}var gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fA=oi(gu),Uh=yn({},gu,{view:0,detail:0}),VF=oi(Uh),zy,Gy,rf,v0=yn({},Uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rf&&(rf&&n.type==="mousemove"?(zy=n.screenX-rf.screenX,Gy=n.screenY-rf.screenY):Gy=zy=0,rf=n),zy)},movementY:function(n){return"movementY"in n?n.movementY:Gy}}),EE=oi(v0),WF=yn({},v0,{dataTransfer:0}),$F=oi(WF),XF=yn({},Uh,{relatedTarget:0}),Vy=oi(XF),jF=yn({},gu,{animationName:0,elapsedTime:0,pseudoElement:0}),JF=oi(jF),KF=yn({},gu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),YF=oi(KF),QF=yn({},gu,{data:0}),bE=oi(QF),ZF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tO(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=eO[n])?!!e[n]:!1}function hA(){return tO}var nO=yn({},Uh,{key:function(n){if(n.key){var e=ZF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Lm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hA,charCode:function(n){return n.type==="keypress"?Lm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Lm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),rO=oi(nO),iO=yn({},v0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CE=oi(iO),sO=yn({},Uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hA}),oO=oi(sO),aO=yn({},gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),lO=oi(aO),cO=yn({},v0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uO=oi(cO),fO=[9,13,27,32],dA=Ys&&"CompositionEvent"in window,kf=null;Ys&&"documentMode"in document&&(kf=document.documentMode);var hO=Ys&&"TextEvent"in window&&!kf,J2=Ys&&(!dA||kf&&8<kf&&11>=kf),TE=" ",RE=!1;function K2(n,e){switch(n){case"keyup":return fO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y2(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Bc=!1;function dO(n,e){switch(n){case"compositionend":return Y2(e);case"keypress":return e.which!==32?null:(RE=!0,TE);case"textInput":return n=e.data,n===TE&&RE?null:n;default:return null}}function pO(n,e){if(Bc)return n==="compositionend"||!dA&&K2(n,e)?(n=j2(),Im=uA=Fo=null,Bc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J2&&e.locale!=="ko"?null:e.data;default:return null}}var mO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!mO[n.type]:e==="textarea"}function Q2(n,e,t,r){T2(r),e=qm(e,"onChange"),0<e.length&&(t=new fA("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Hf=null,lh=null;function gO(n){lP(n,0)}function y0(n){var e=Dc(n);if(A2(e))return n}function vO(n,e){if(n==="change")return e}var Z2=!1;if(Ys){var Wy;if(Ys){var $y="oninput"in document;if(!$y){var BE=document.createElement("div");BE.setAttribute("oninput","return;"),$y=typeof BE.oninput=="function"}Wy=$y}else Wy=!1;Z2=Wy&&(!document.documentMode||9<document.documentMode)}function IE(){Hf&&(Hf.detachEvent("onpropertychange",q2),lh=Hf=null)}function q2(n){if(n.propertyName==="value"&&y0(lh)){var e=[];Q2(e,lh,n,sA(n)),I2(gO,e)}}function yO(n,e,t){n==="focusin"?(IE(),Hf=e,lh=t,Hf.attachEvent("onpropertychange",q2)):n==="focusout"&&IE()}function xO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return y0(lh)}function _O(n,e){if(n==="click")return y0(e)}function AO(n,e){if(n==="input"||n==="change")return y0(e)}function SO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $i=typeof Object.is=="function"?Object.is:SO;function ch(n,e){if($i(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!S_.call(e,i)||!$i(n[i],e[i]))return!1}return!0}function LE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function DE(n,e){var t=LE(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=LE(t)}}function eP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?eP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function tP(){for(var n=window,e=Xm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Xm(n.document)}return e}function pA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function MO(n){var e=tP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&eP(t.ownerDocument.documentElement,t)){if(r!==null&&pA(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=DE(t,s);var o=DE(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var wO=Ys&&"documentMode"in document&&11>=document.documentMode,Ic=null,z_=null,zf=null,G_=!1;function FE(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;G_||Ic==null||Ic!==Xm(r)||(r=Ic,"selectionStart"in r&&pA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zf&&ch(zf,r)||(zf=r,r=qm(z_,"onSelect"),0<r.length&&(e=new fA("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ic)))}function _p(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Lc={animationend:_p("Animation","AnimationEnd"),animationiteration:_p("Animation","AnimationIteration"),animationstart:_p("Animation","AnimationStart"),transitionend:_p("Transition","TransitionEnd")},Xy={},nP={};Ys&&(nP=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function x0(n){if(Xy[n])return Xy[n];if(!Lc[n])return n;var e=Lc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in nP)return Xy[n]=e[t];return n}var rP=x0("animationend"),iP=x0("animationiteration"),sP=x0("animationstart"),oP=x0("transitionend"),aP=new Map,OE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(n,e){aP.set(n,e),pl(e,[n])}for(var jy=0;jy<OE.length;jy++){var Jy=OE[jy],EO=Jy.toLowerCase(),bO=Jy[0].toUpperCase()+Jy.slice(1);qo(EO,"on"+bO)}qo(rP,"onAnimationEnd");qo(iP,"onAnimationIteration");qo(sP,"onAnimationStart");qo("dblclick","onDoubleClick");qo("focusin","onFocus");qo("focusout","onBlur");qo(oP,"onTransitionEnd");eu("onMouseEnter",["mouseout","mouseover"]);eu("onMouseLeave",["mouseout","mouseover"]);eu("onPointerEnter",["pointerout","pointerover"]);eu("onPointerLeave",["pointerout","pointerover"]);pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bf));function NE(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,EF(r,e,void 0,n),n.currentTarget=null}function lP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;NE(i,a,f),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;NE(i,a,f),s=l}}}if(Jm)throw n=N_,Jm=!1,N_=null,n}function rn(n,e){var t=e[j_];t===void 0&&(t=e[j_]=new Set);var r=n+"__bubble";t.has(r)||(cP(e,n,2,!1),t.add(r))}function Ky(n,e,t){var r=0;e&&(r|=4),cP(t,n,r,e)}var Ap="_reactListening"+Math.random().toString(36).slice(2);function uh(n){if(!n[Ap]){n[Ap]=!0,g2.forEach(function(t){t!=="selectionchange"&&(CO.has(t)||Ky(t,!1,n),Ky(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ap]||(e[Ap]=!0,Ky("selectionchange",!1,e))}}function cP(n,e,t,r){switch(X2(e)){case 1:var i=zF;break;case 4:i=GF;break;default:i=cA}t=i.bind(null,e,t,n),i=void 0,!O_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Yy(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Na(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}I2(function(){var f=s,h=sA(t),d=[];e:{var p=aP.get(n);if(p!==void 0){var m=fA,y=n;switch(n){case"keypress":if(Lm(t)===0)break e;case"keydown":case"keyup":m=rO;break;case"focusin":y="focus",m=Vy;break;case"focusout":y="blur",m=Vy;break;case"beforeblur":case"afterblur":m=Vy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=EE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$F;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oO;break;case rP:case iP:case sP:m=JF;break;case oP:m=lO;break;case"scroll":m=VF;break;case"wheel":m=uO;break;case"copy":case"cut":case"paste":m=YF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=CE}var _=(e&4)!==0,x=!_&&n==="scroll",g=_?p!==null?p+"Capture":null:p;_=[];for(var S=f,M;S!==null;){M=S;var E=M.stateNode;if(M.tag===5&&E!==null&&(M=E,g!==null&&(E=ih(S,g),E!=null&&_.push(fh(S,E,M)))),x)break;S=S.return}0<_.length&&(p=new m(p,y,null,t,h),d.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==D_&&(y=t.relatedTarget||t.fromElement)&&(Na(y)||y[Qs]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=f,y=y?Na(y):null,y!==null&&(x=ml(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=f),m!==y)){if(_=EE,E="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(_=CE,E="onPointerLeave",g="onPointerEnter",S="pointer"),x=m==null?p:Dc(m),M=y==null?p:Dc(y),p=new _(E,S+"leave",m,t,h),p.target=x,p.relatedTarget=M,E=null,Na(h)===f&&(_=new _(g,S+"enter",y,t,h),_.target=M,_.relatedTarget=x,E=_),x=E,m&&y)t:{for(_=m,g=y,S=0,M=_;M;M=Vl(M))S++;for(M=0,E=g;E;E=Vl(E))M++;for(;0<S-M;)_=Vl(_),S--;for(;0<M-S;)g=Vl(g),M--;for(;S--;){if(_===g||g!==null&&_===g.alternate)break t;_=Vl(_),g=Vl(g)}_=null}else _=null;m!==null&&UE(d,p,m,_,!1),y!==null&&x!==null&&UE(d,x,y,_,!0)}}e:{if(p=f?Dc(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=vO;else if(PE(p))if(Z2)P=AO;else{P=xO;var T=yO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=_O);if(P&&(P=P(n,f))){Q2(d,P,t,h);break e}T&&T(n,p,f),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&R_(p,"number",p.value)}switch(T=f?Dc(f):window,n){case"focusin":(PE(T)||T.contentEditable==="true")&&(Ic=T,z_=f,zf=null);break;case"focusout":zf=z_=Ic=null;break;case"mousedown":G_=!0;break;case"contextmenu":case"mouseup":case"dragend":G_=!1,FE(d,t,h);break;case"selectionchange":if(wO)break;case"keydown":case"keyup":FE(d,t,h)}var B;if(dA)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Bc?K2(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(J2&&t.locale!=="ko"&&(Bc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Bc&&(B=j2()):(Fo=h,uA="value"in Fo?Fo.value:Fo.textContent,Bc=!0)),T=qm(f,L),0<T.length&&(L=new bE(L,n,null,t,h),d.push({event:L,listeners:T}),B?L.data=B:(B=Y2(t),B!==null&&(L.data=B)))),(B=hO?dO(n,t):pO(n,t))&&(f=qm(f,"onBeforeInput"),0<f.length&&(h=new bE("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:f}),h.data=B))}lP(d,e)})}function fh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function qm(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ih(n,t),s!=null&&r.unshift(fh(n,s,i)),s=ih(n,e),s!=null&&r.push(fh(n,s,i))),n=n.return}return r}function Vl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function UE(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,f=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&f!==null&&(a=f,i?(l=ih(t,s),l!=null&&o.unshift(fh(t,l,a))):i||(l=ih(t,s),l!=null&&o.push(fh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var TO=/\r\n?/g,RO=/\u0000|\uFFFD/g;function kE(n){return(typeof n=="string"?n:""+n).replace(TO,`
`).replace(RO,"")}function Sp(n,e,t){if(e=kE(e),kE(n)!==e&&t)throw Error(Me(425))}function eg(){}var V_=null,W_=null;function $_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var X_=typeof setTimeout=="function"?setTimeout:void 0,PO=typeof clearTimeout=="function"?clearTimeout:void 0,HE=typeof Promise=="function"?Promise:void 0,BO=typeof queueMicrotask=="function"?queueMicrotask:typeof HE<"u"?function(n){return HE.resolve(null).then(n).catch(IO)}:X_;function IO(n){setTimeout(function(){throw n})}function Qy(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),ah(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);ah(e)}function Ho(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function zE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var vu=Math.random().toString(36).slice(2),ds="__reactFiber$"+vu,hh="__reactProps$"+vu,Qs="__reactContainer$"+vu,j_="__reactEvents$"+vu,LO="__reactListeners$"+vu,DO="__reactHandles$"+vu;function Na(n){var e=n[ds];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qs]||t[ds]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=zE(n);n!==null;){if(t=n[ds])return t;n=zE(n)}return e}n=t,t=n.parentNode}return null}function kh(n){return n=n[ds]||n[Qs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Dc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Me(33))}function _0(n){return n[hh]||null}var J_=[],Fc=-1;function ea(n){return{current:n}}function ln(n){0>Fc||(n.current=J_[Fc],J_[Fc]=null,Fc--)}function nn(n,e){Fc++,J_[Fc]=n.current,n.current=e}var jo={},hr=ea(jo),Or=ea(!1),el=jo;function tu(n,e){var t=n.type.contextTypes;if(!t)return jo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Nr(n){return n=n.childContextTypes,n!=null}function tg(){ln(Or),ln(hr)}function GE(n,e,t){if(hr.current!==jo)throw Error(Me(168));nn(hr,e),nn(Or,t)}function uP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Me(108,yF(n)||"Unknown",i));return yn({},t,r)}function ng(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||jo,el=hr.current,nn(hr,n),nn(Or,Or.current),!0}function VE(n,e,t){var r=n.stateNode;if(!r)throw Error(Me(169));t?(n=uP(n,e,el),r.__reactInternalMemoizedMergedChildContext=n,ln(Or),ln(hr),nn(hr,n)):ln(Or),nn(Or,t)}var ks=null,A0=!1,Zy=!1;function fP(n){ks===null?ks=[n]:ks.push(n)}function FO(n){A0=!0,fP(n)}function ta(){if(!Zy&&ks!==null){Zy=!0;var n=0,e=Kt;try{var t=ks;for(Kt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ks=null,A0=!1}catch(i){throw ks!==null&&(ks=ks.slice(n+1)),O2(oA,ta),i}finally{Kt=e,Zy=!1}}return null}var Oc=[],Nc=0,rg=null,ig=0,vi=[],yi=0,tl=null,Vs=1,Ws="";function Ra(n,e){Oc[Nc++]=ig,Oc[Nc++]=rg,rg=n,ig=e}function hP(n,e,t){vi[yi++]=Vs,vi[yi++]=Ws,vi[yi++]=tl,tl=n;var r=Vs;n=Ws;var i=32-Vi(r)-1;r&=~(1<<i),t+=1;var s=32-Vi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vs=1<<32-Vi(e)+i|t<<i|r,Ws=s+n}else Vs=1<<s|t<<i|r,Ws=n}function mA(n){n.return!==null&&(Ra(n,1),hP(n,1,0))}function gA(n){for(;n===rg;)rg=Oc[--Nc],Oc[Nc]=null,ig=Oc[--Nc],Oc[Nc]=null;for(;n===tl;)tl=vi[--yi],vi[yi]=null,Ws=vi[--yi],vi[yi]=null,Vs=vi[--yi],vi[yi]=null}var ei=null,Qr=null,hn=!1,Hi=null;function dP(n,e){var t=Ai(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function WE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ei=n,Qr=Ho(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ei=n,Qr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=tl!==null?{id:Vs,overflow:Ws}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ai(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ei=n,Qr=null,!0):!1;default:return!1}}function K_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Y_(n){if(hn){var e=Qr;if(e){var t=e;if(!WE(n,e)){if(K_(n))throw Error(Me(418));e=Ho(t.nextSibling);var r=ei;e&&WE(n,e)?dP(r,t):(n.flags=n.flags&-4097|2,hn=!1,ei=n)}}else{if(K_(n))throw Error(Me(418));n.flags=n.flags&-4097|2,hn=!1,ei=n}}}function $E(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ei=n}function Mp(n){if(n!==ei)return!1;if(!hn)return $E(n),hn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!$_(n.type,n.memoizedProps)),e&&(e=Qr)){if(K_(n))throw pP(),Error(Me(418));for(;e;)dP(n,e),e=Ho(e.nextSibling)}if($E(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Me(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Qr=Ho(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Qr=null}}else Qr=ei?Ho(n.stateNode.nextSibling):null;return!0}function pP(){for(var n=Qr;n;)n=Ho(n.nextSibling)}function nu(){Qr=ei=null,hn=!1}function vA(n){Hi===null?Hi=[n]:Hi.push(n)}var OO=ro.ReactCurrentBatchConfig;function sf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Me(309));var r=t.stateNode}if(!r)throw Error(Me(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Me(284));if(!t._owner)throw Error(Me(290,n))}return n}function wp(n,e){throw n=Object.prototype.toString.call(e),Error(Me(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function XE(n){var e=n._init;return e(n._payload)}function mP(n){function e(g,S){if(n){var M=g.deletions;M===null?(g.deletions=[S],g.flags|=16):M.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function r(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function i(g,S){return g=Wo(g,S),g.index=0,g.sibling=null,g}function s(g,S,M){return g.index=M,n?(M=g.alternate,M!==null?(M=M.index,M<S?(g.flags|=2,S):M):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,M,E){return S===null||S.tag!==6?(S=sx(M,g.mode,E),S.return=g,S):(S=i(S,M),S.return=g,S)}function l(g,S,M,E){var P=M.type;return P===Pc?h(g,S,M.props.children,E,M.key):S!==null&&(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ro&&XE(P)===S.type)?(E=i(S,M.props),E.ref=sf(g,S,M),E.return=g,E):(E=Hm(M.type,M.key,M.props,null,g.mode,E),E.ref=sf(g,S,M),E.return=g,E)}function f(g,S,M,E){return S===null||S.tag!==4||S.stateNode.containerInfo!==M.containerInfo||S.stateNode.implementation!==M.implementation?(S=ox(M,g.mode,E),S.return=g,S):(S=i(S,M.children||[]),S.return=g,S)}function h(g,S,M,E,P){return S===null||S.tag!==7?(S=Ja(M,g.mode,E,P),S.return=g,S):(S=i(S,M),S.return=g,S)}function d(g,S,M){if(typeof S=="string"&&S!==""||typeof S=="number")return S=sx(""+S,g.mode,M),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case dp:return M=Hm(S.type,S.key,S.props,null,g.mode,M),M.ref=sf(g,null,S),M.return=g,M;case Rc:return S=ox(S,g.mode,M),S.return=g,S;case Ro:var E=S._init;return d(g,E(S._payload),M)}if(Rf(S)||qu(S))return S=Ja(S,g.mode,M,null),S.return=g,S;wp(g,S)}return null}function p(g,S,M,E){var P=S!==null?S.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return P!==null?null:a(g,S,""+M,E);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case dp:return M.key===P?l(g,S,M,E):null;case Rc:return M.key===P?f(g,S,M,E):null;case Ro:return P=M._init,p(g,S,P(M._payload),E)}if(Rf(M)||qu(M))return P!==null?null:h(g,S,M,E,null);wp(g,M)}return null}function m(g,S,M,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(M)||null,a(S,g,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dp:return g=g.get(E.key===null?M:E.key)||null,l(S,g,E,P);case Rc:return g=g.get(E.key===null?M:E.key)||null,f(S,g,E,P);case Ro:var T=E._init;return m(g,S,M,T(E._payload),P)}if(Rf(E)||qu(E))return g=g.get(M)||null,h(S,g,E,P,null);wp(S,E)}return null}function y(g,S,M,E){for(var P=null,T=null,B=S,L=S=0,z=null;B!==null&&L<M.length;L++){B.index>L?(z=B,B=null):z=B.sibling;var b=p(g,B,M[L],E);if(b===null){B===null&&(B=z);break}n&&B&&b.alternate===null&&e(g,B),S=s(b,S,L),T===null?P=b:T.sibling=b,T=b,B=z}if(L===M.length)return t(g,B),hn&&Ra(g,L),P;if(B===null){for(;L<M.length;L++)B=d(g,M[L],E),B!==null&&(S=s(B,S,L),T===null?P=B:T.sibling=B,T=B);return hn&&Ra(g,L),P}for(B=r(g,B);L<M.length;L++)z=m(B,g,L,M[L],E),z!==null&&(n&&z.alternate!==null&&B.delete(z.key===null?L:z.key),S=s(z,S,L),T===null?P=z:T.sibling=z,T=z);return n&&B.forEach(function(R){return e(g,R)}),hn&&Ra(g,L),P}function _(g,S,M,E){var P=qu(M);if(typeof P!="function")throw Error(Me(150));if(M=P.call(M),M==null)throw Error(Me(151));for(var T=P=null,B=S,L=S=0,z=null,b=M.next();B!==null&&!b.done;L++,b=M.next()){B.index>L?(z=B,B=null):z=B.sibling;var R=p(g,B,b.value,E);if(R===null){B===null&&(B=z);break}n&&B&&R.alternate===null&&e(g,B),S=s(R,S,L),T===null?P=R:T.sibling=R,T=R,B=z}if(b.done)return t(g,B),hn&&Ra(g,L),P;if(B===null){for(;!b.done;L++,b=M.next())b=d(g,b.value,E),b!==null&&(S=s(b,S,L),T===null?P=b:T.sibling=b,T=b);return hn&&Ra(g,L),P}for(B=r(g,B);!b.done;L++,b=M.next())b=m(B,g,L,b.value,E),b!==null&&(n&&b.alternate!==null&&B.delete(b.key===null?L:b.key),S=s(b,S,L),T===null?P=b:T.sibling=b,T=b);return n&&B.forEach(function($){return e(g,$)}),hn&&Ra(g,L),P}function x(g,S,M,E){if(typeof M=="object"&&M!==null&&M.type===Pc&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case dp:e:{for(var P=M.key,T=S;T!==null;){if(T.key===P){if(P=M.type,P===Pc){if(T.tag===7){t(g,T.sibling),S=i(T,M.props.children),S.return=g,g=S;break e}}else if(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ro&&XE(P)===T.type){t(g,T.sibling),S=i(T,M.props),S.ref=sf(g,T,M),S.return=g,g=S;break e}t(g,T);break}else e(g,T);T=T.sibling}M.type===Pc?(S=Ja(M.props.children,g.mode,E,M.key),S.return=g,g=S):(E=Hm(M.type,M.key,M.props,null,g.mode,E),E.ref=sf(g,S,M),E.return=g,g=E)}return o(g);case Rc:e:{for(T=M.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===M.containerInfo&&S.stateNode.implementation===M.implementation){t(g,S.sibling),S=i(S,M.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=ox(M,g.mode,E),S.return=g,g=S}return o(g);case Ro:return T=M._init,x(g,S,T(M._payload),E)}if(Rf(M))return y(g,S,M,E);if(qu(M))return _(g,S,M,E);wp(g,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,S!==null&&S.tag===6?(t(g,S.sibling),S=i(S,M),S.return=g,g=S):(t(g,S),S=sx(M,g.mode,E),S.return=g,g=S),o(g)):t(g,S)}return x}var ru=mP(!0),gP=mP(!1),sg=ea(null),og=null,Uc=null,yA=null;function xA(){yA=Uc=og=null}function _A(n){var e=sg.current;ln(sg),n._currentValue=e}function Q_(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Kc(n,e){og=n,yA=Uc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Dr=!0),n.firstContext=null)}function Ei(n){var e=n._currentValue;if(yA!==n)if(n={context:n,memoizedValue:e,next:null},Uc===null){if(og===null)throw Error(Me(308));Uc=n,og.dependencies={lanes:0,firstContext:n}}else Uc=Uc.next=n;return e}var Ua=null;function AA(n){Ua===null?Ua=[n]:Ua.push(n)}function vP(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,AA(e)):(t.next=i.next,i.next=t),e.interleaved=t,Zs(n,r)}function Zs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Po=!1;function SA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function js(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function zo(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,zt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zs(n,t)}return i=r.interleaved,i===null?(e.next=e,AA(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zs(n,t)}function Dm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,aA(n,t)}}function jE(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ag(n,e,t,r){var i=n.updateQueue;Po=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=f:a.next=f,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=f=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,_=a;switch(p=e,m=t,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=yn({},d,p);break e;case 2:Po=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(f=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);rl|=o,n.lanes=o,n.memoizedState=d}}function JE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Me(191,i));i.call(r)}}}var Hh={},gs=ea(Hh),dh=ea(Hh),ph=ea(Hh);function ka(n){if(n===Hh)throw Error(Me(174));return n}function MA(n,e){switch(nn(ph,e),nn(dh,n),nn(gs,Hh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:B_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=B_(e,n)}ln(gs),nn(gs,e)}function iu(){ln(gs),ln(dh),ln(ph)}function xP(n){ka(ph.current);var e=ka(gs.current),t=B_(e,n.type);e!==t&&(nn(dh,n),nn(gs,t))}function wA(n){dh.current===n&&(ln(gs),ln(dh))}var mn=ea(0);function lg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qy=[];function EA(){for(var n=0;n<qy.length;n++)qy[n]._workInProgressVersionPrimary=null;qy.length=0}var Fm=ro.ReactCurrentDispatcher,ex=ro.ReactCurrentBatchConfig,nl=0,vn=null,On=null,$n=null,cg=!1,Gf=!1,mh=0,NO=0;function ir(){throw Error(Me(321))}function bA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!$i(n[t],e[t]))return!1;return!0}function CA(n,e,t,r,i,s){if(nl=s,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fm.current=n===null||n.memoizedState===null?zO:GO,n=t(r,i),Gf){s=0;do{if(Gf=!1,mh=0,25<=s)throw Error(Me(301));s+=1,$n=On=null,e.updateQueue=null,Fm.current=VO,n=t(r,i)}while(Gf)}if(Fm.current=ug,e=On!==null&&On.next!==null,nl=0,$n=On=vn=null,cg=!1,e)throw Error(Me(300));return n}function TA(){var n=mh!==0;return mh=0,n}function us(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?vn.memoizedState=$n=n:$n=$n.next=n,$n}function bi(){if(On===null){var n=vn.alternate;n=n!==null?n.memoizedState:null}else n=On.next;var e=$n===null?vn.memoizedState:$n.next;if(e!==null)$n=e,On=n;else{if(n===null)throw Error(Me(310));On=n,n={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},$n===null?vn.memoizedState=$n=n:$n=$n.next=n}return $n}function gh(n,e){return typeof e=="function"?e(n):e}function tx(n){var e=bi(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=n;var r=On,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,f=s;do{var h=f.lane;if((nl&h)===h)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:n(r,f.action);else{var d={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,vn.lanes|=h,rl|=h}f=f.next}while(f!==null&&f!==s);l===null?o=r:l.next=a,$i(r,e.memoizedState)||(Dr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,vn.lanes|=s,rl|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function nx(n){var e=bi(),t=e.queue;if(t===null)throw Error(Me(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);$i(s,e.memoizedState)||(Dr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function _P(){}function AP(n,e){var t=vn,r=bi(),i=e(),s=!$i(r.memoizedState,i);if(s&&(r.memoizedState=i,Dr=!0),r=r.queue,RA(wP.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||$n!==null&&$n.memoizedState.tag&1){if(t.flags|=2048,vh(9,MP.bind(null,t,r,i,e),void 0,null),Xn===null)throw Error(Me(349));nl&30||SP(t,e,i)}return i}function SP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function MP(n,e,t,r){e.value=t,e.getSnapshot=r,EP(e)&&bP(n)}function wP(n,e,t){return t(function(){EP(e)&&bP(n)})}function EP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!$i(n,t)}catch{return!0}}function bP(n){var e=Zs(n,1);e!==null&&Wi(e,n,1,-1)}function KE(n){var e=us();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gh,lastRenderedState:n},e.queue=n,n=n.dispatch=HO.bind(null,vn,n),[e.memoizedState,n]}function vh(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function CP(){return bi().memoizedState}function Om(n,e,t,r){var i=us();vn.flags|=n,i.memoizedState=vh(1|e,t,void 0,r===void 0?null:r)}function S0(n,e,t,r){var i=bi();r=r===void 0?null:r;var s=void 0;if(On!==null){var o=On.memoizedState;if(s=o.destroy,r!==null&&bA(r,o.deps)){i.memoizedState=vh(e,t,s,r);return}}vn.flags|=n,i.memoizedState=vh(1|e,t,s,r)}function YE(n,e){return Om(8390656,8,n,e)}function RA(n,e){return S0(2048,8,n,e)}function TP(n,e){return S0(4,2,n,e)}function RP(n,e){return S0(4,4,n,e)}function PP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function BP(n,e,t){return t=t!=null?t.concat([n]):null,S0(4,4,PP.bind(null,e,n),t)}function PA(){}function IP(n,e){var t=bi();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&bA(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function LP(n,e){var t=bi();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&bA(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function DP(n,e,t){return nl&21?($i(t,e)||(t=k2(),vn.lanes|=t,rl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Dr=!0),n.memoizedState=t)}function UO(n,e){var t=Kt;Kt=t!==0&&4>t?t:4,n(!0);var r=ex.transition;ex.transition={};try{n(!1),e()}finally{Kt=t,ex.transition=r}}function FP(){return bi().memoizedState}function kO(n,e,t){var r=Vo(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},OP(n))NP(e,t);else if(t=vP(n,e,t,r),t!==null){var i=Mr();Wi(t,n,r,i),UP(t,e,r)}}function HO(n,e,t){var r=Vo(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(OP(n))NP(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,$i(a,o)){var l=e.interleaved;l===null?(i.next=i,AA(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=vP(n,e,i,r),t!==null&&(i=Mr(),Wi(t,n,r,i),UP(t,e,r))}}function OP(n){var e=n.alternate;return n===vn||e!==null&&e===vn}function NP(n,e){Gf=cg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function UP(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,aA(n,t)}}var ug={readContext:Ei,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},zO={readContext:Ei,useCallback:function(n,e){return us().memoizedState=[n,e===void 0?null:e],n},useContext:Ei,useEffect:YE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Om(4194308,4,PP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Om(4194308,4,n,e)},useInsertionEffect:function(n,e){return Om(4,2,n,e)},useMemo:function(n,e){var t=us();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=us();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=kO.bind(null,vn,n),[r.memoizedState,n]},useRef:function(n){var e=us();return n={current:n},e.memoizedState=n},useState:KE,useDebugValue:PA,useDeferredValue:function(n){return us().memoizedState=n},useTransition:function(){var n=KE(!1),e=n[0];return n=UO.bind(null,n[1]),us().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=vn,i=us();if(hn){if(t===void 0)throw Error(Me(407));t=t()}else{if(t=e(),Xn===null)throw Error(Me(349));nl&30||SP(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,YE(wP.bind(null,r,s,n),[n]),r.flags|=2048,vh(9,MP.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=us(),e=Xn.identifierPrefix;if(hn){var t=Ws,r=Vs;t=(r&~(1<<32-Vi(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=mh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=NO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},GO={readContext:Ei,useCallback:IP,useContext:Ei,useEffect:RA,useImperativeHandle:BP,useInsertionEffect:TP,useLayoutEffect:RP,useMemo:LP,useReducer:tx,useRef:CP,useState:function(){return tx(gh)},useDebugValue:PA,useDeferredValue:function(n){var e=bi();return DP(e,On.memoizedState,n)},useTransition:function(){var n=tx(gh)[0],e=bi().memoizedState;return[n,e]},useMutableSource:_P,useSyncExternalStore:AP,useId:FP,unstable_isNewReconciler:!1},VO={readContext:Ei,useCallback:IP,useContext:Ei,useEffect:RA,useImperativeHandle:BP,useInsertionEffect:TP,useLayoutEffect:RP,useMemo:LP,useReducer:nx,useRef:CP,useState:function(){return nx(gh)},useDebugValue:PA,useDeferredValue:function(n){var e=bi();return On===null?e.memoizedState=n:DP(e,On.memoizedState,n)},useTransition:function(){var n=nx(gh)[0],e=bi().memoizedState;return[n,e]},useMutableSource:_P,useSyncExternalStore:AP,useId:FP,unstable_isNewReconciler:!1};function Ni(n,e){if(n&&n.defaultProps){e=yn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Z_(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:yn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var M0={isMounted:function(n){return(n=n._reactInternals)?ml(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Mr(),i=Vo(n),s=js(r,i);s.payload=e,t!=null&&(s.callback=t),e=zo(n,s,i),e!==null&&(Wi(e,n,i,r),Dm(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Mr(),i=Vo(n),s=js(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=zo(n,s,i),e!==null&&(Wi(e,n,i,r),Dm(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Mr(),r=Vo(n),i=js(t,r);i.tag=2,e!=null&&(i.callback=e),e=zo(n,i,r),e!==null&&(Wi(e,n,r,t),Dm(e,n,r))}};function QE(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ch(t,r)||!ch(i,s):!0}function kP(n,e,t){var r=!1,i=jo,s=e.contextType;return typeof s=="object"&&s!==null?s=Ei(s):(i=Nr(e)?el:hr.current,r=e.contextTypes,s=(r=r!=null)?tu(n,i):jo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=M0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function ZE(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&M0.enqueueReplaceState(e,e.state,null)}function q_(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},SA(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ei(s):(s=Nr(e)?el:hr.current,i.context=tu(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Z_(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&M0.enqueueReplaceState(i,i.state,null),ag(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function su(n,e){try{var t="",r=e;do t+=vF(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function rx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function e1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var WO=typeof WeakMap=="function"?WeakMap:Map;function HP(n,e,t){t=js(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){hg||(hg=!0,u1=r),e1(n,e)},t}function zP(n,e,t){t=js(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){e1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){e1(n,e),typeof r!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function qE(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new WO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=iN.bind(null,n,e,t),e.then(n,n))}function eb(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function tb(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=js(-1,1),e.tag=2,zo(t,e,1))),t.lanes|=1),n)}var $O=ro.ReactCurrentOwner,Dr=!1;function Ar(n,e,t,r){e.child=n===null?gP(e,null,t,r):ru(e,n.child,t,r)}function nb(n,e,t,r,i){t=t.render;var s=e.ref;return Kc(e,i),r=CA(n,e,t,r,s,i),t=TA(),n!==null&&!Dr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,qs(n,e,i)):(hn&&t&&mA(e),e.flags|=1,Ar(n,e,r,i),e.child)}function rb(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!UA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,GP(n,e,s,r,i)):(n=Hm(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ch,t(o,r)&&n.ref===e.ref)return qs(n,e,i)}return e.flags|=1,n=Wo(s,r),n.ref=e.ref,n.return=e,e.child=n}function GP(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ch(s,r)&&n.ref===e.ref)if(Dr=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Dr=!0);else return e.lanes=n.lanes,qs(n,e,i)}return t1(n,e,t,r,i)}function VP(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(Hc,Kr),Kr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,nn(Hc,Kr),Kr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,nn(Hc,Kr),Kr|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,nn(Hc,Kr),Kr|=r;return Ar(n,e,i,t),e.child}function WP(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function t1(n,e,t,r,i){var s=Nr(t)?el:hr.current;return s=tu(e,s),Kc(e,i),t=CA(n,e,t,r,s,i),r=TA(),n!==null&&!Dr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,qs(n,e,i)):(hn&&r&&mA(e),e.flags|=1,Ar(n,e,t,i),e.child)}function ib(n,e,t,r,i){if(Nr(t)){var s=!0;ng(e)}else s=!1;if(Kc(e,i),e.stateNode===null)Nm(n,e),kP(e,t,r),q_(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=Ei(f):(f=Nr(t)?el:hr.current,f=tu(e,f));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==f)&&ZE(e,o,r,f),Po=!1;var p=e.memoizedState;o.state=p,ag(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Or.current||Po?(typeof h=="function"&&(Z_(e,t,h,r),l=e.memoizedState),(a=Po||QE(e,t,a,r,p,l,f))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=f,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yP(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:Ni(e.type,a),o.props=f,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ei(l):(l=Nr(t)?el:hr.current,l=tu(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&ZE(e,o,r,l),Po=!1,p=e.memoizedState,o.state=p,ag(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||Or.current||Po?(typeof m=="function"&&(Z_(e,t,m,r),y=e.memoizedState),(f=Po||QE(e,t,f,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return n1(n,e,t,r,s,i)}function n1(n,e,t,r,i,s){WP(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&VE(e,t,!1),qs(n,e,s);r=e.stateNode,$O.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=ru(e,n.child,null,s),e.child=ru(e,null,a,s)):Ar(n,e,a,s),e.memoizedState=r.state,i&&VE(e,t,!0),e.child}function $P(n){var e=n.stateNode;e.pendingContext?GE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&GE(n,e.context,!1),MA(n,e.containerInfo)}function sb(n,e,t,r,i){return nu(),vA(i),e.flags|=256,Ar(n,e,t,r),e.child}var r1={dehydrated:null,treeContext:null,retryLane:0};function i1(n){return{baseLanes:n,cachePool:null,transitions:null}}function XP(n,e,t){var r=e.pendingProps,i=mn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),nn(mn,i&1),n===null)return Y_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=b0(o,r,0,null),n=Ja(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=i1(t),e.memoizedState=r1,n):BA(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return XO(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Wo(a,s):(s=Ja(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?i1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=r1,r}return s=n.child,n=s.sibling,r=Wo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function BA(n,e){return e=b0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ep(n,e,t,r){return r!==null&&vA(r),ru(e,n.child,null,t),n=BA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function XO(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=rx(Error(Me(422))),Ep(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=b0({mode:"visible",children:r.children},i,0,null),s=Ja(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ru(e,n.child,null,o),e.child.memoizedState=i1(o),e.memoizedState=r1,s);if(!(e.mode&1))return Ep(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Me(419)),r=rx(s,r,void 0),Ep(n,e,o,r)}if(a=(o&n.childLanes)!==0,Dr||a){if(r=Xn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zs(n,i),Wi(r,n,i,-1))}return NA(),r=rx(Error(Me(421))),Ep(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=sN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Qr=Ho(i.nextSibling),ei=e,hn=!0,Hi=null,n!==null&&(vi[yi++]=Vs,vi[yi++]=Ws,vi[yi++]=tl,Vs=n.id,Ws=n.overflow,tl=e),e=BA(e,r.children),e.flags|=4096,e)}function ob(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Q_(n.return,e,t)}function ix(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function jP(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ar(n,e,r.children,t),r=mn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ob(n,t,e);else if(n.tag===19)ob(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(nn(mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&lg(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),ix(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&lg(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}ix(e,!0,t,null,s);break;case"together":ix(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function qs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),rl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Me(153));if(e.child!==null){for(n=e.child,t=Wo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Wo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function jO(n,e,t){switch(e.tag){case 3:$P(e),nu();break;case 5:xP(e);break;case 1:Nr(e.type)&&ng(e);break;case 4:MA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;nn(sg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nn(mn,mn.current&1),e.flags|=128,null):t&e.child.childLanes?XP(n,e,t):(nn(mn,mn.current&1),n=qs(n,e,t),n!==null?n.sibling:null);nn(mn,mn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return jP(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nn(mn,mn.current),r)break;return null;case 22:case 23:return e.lanes=0,VP(n,e,t)}return qs(n,e,t)}var JP,s1,KP,YP;JP=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};s1=function(){};KP=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,ka(gs.current);var s=null;switch(t){case"input":i=C_(n,i),r=C_(n,r),s=[];break;case"select":i=yn({},i,{value:void 0}),r=yn({},r,{value:void 0}),s=[];break;case"textarea":i=P_(n,i),r=P_(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=eg)}I_(t,r);var o;t=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(nh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(f,t)),t=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(nh.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&rn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(f,l))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};YP=function(n,e,t,r){t!==r&&(e.flags|=4)};function of(n,e){if(!hn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function sr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function JO(n,e,t){var r=e.pendingProps;switch(gA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(e),null;case 1:return Nr(e.type)&&tg(),sr(e),null;case 3:return r=e.stateNode,iu(),ln(Or),ln(hr),EA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Mp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hi!==null&&(d1(Hi),Hi=null))),s1(n,e),sr(e),null;case 5:wA(e);var i=ka(ph.current);if(t=e.type,n!==null&&e.stateNode!=null)KP(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Me(166));return sr(e),null}if(n=ka(gs.current),Mp(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[ds]=e,r[hh]=s,n=(e.mode&1)!==0,t){case"dialog":rn("cancel",r),rn("close",r);break;case"iframe":case"object":case"embed":rn("load",r);break;case"video":case"audio":for(i=0;i<Bf.length;i++)rn(Bf[i],r);break;case"source":rn("error",r);break;case"img":case"image":case"link":rn("error",r),rn("load",r);break;case"details":rn("toggle",r);break;case"input":mE(r,s),rn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rn("invalid",r);break;case"textarea":vE(r,s),rn("invalid",r)}I_(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Sp(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Sp(r.textContent,a,n),i=["children",""+a]):nh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rn("scroll",r)}switch(t){case"input":pp(r),gE(r,s,!0);break;case"textarea":pp(r),yE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=eg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=w2(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ds]=e,n[hh]=r,JP(n,e,!1,!1),e.stateNode=n;e:{switch(o=L_(t,r),t){case"dialog":rn("cancel",n),rn("close",n),i=r;break;case"iframe":case"object":case"embed":rn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Bf.length;i++)rn(Bf[i],n);i=r;break;case"source":rn("error",n),i=r;break;case"img":case"image":case"link":rn("error",n),rn("load",n),i=r;break;case"details":rn("toggle",n),i=r;break;case"input":mE(n,r),i=C_(n,r),rn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=yn({},r,{value:void 0}),rn("invalid",n);break;case"textarea":vE(n,r),i=P_(n,r),rn("invalid",n);break;default:i=r}I_(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?C2(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&E2(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&rh(n,l):typeof l=="number"&&rh(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rn("scroll",n):l!=null&&tA(n,s,l,o))}switch(t){case"input":pp(n),gE(n,r,!1);break;case"textarea":pp(n),yE(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Xo(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?$c(n,!!r.multiple,s,!1):r.defaultValue!=null&&$c(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=eg)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sr(e),null;case 6:if(n&&e.stateNode!=null)YP(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Me(166));if(t=ka(ph.current),ka(gs.current),Mp(e)){if(r=e.stateNode,t=e.memoizedProps,r[ds]=e,(s=r.nodeValue!==t)&&(n=ei,n!==null))switch(n.tag){case 3:Sp(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Sp(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ds]=e,e.stateNode=r}return sr(e),null;case 13:if(ln(mn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(hn&&Qr!==null&&e.mode&1&&!(e.flags&128))pP(),nu(),e.flags|=98560,s=!1;else if(s=Mp(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Me(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Me(317));s[ds]=e}else nu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sr(e),s=!1}else Hi!==null&&(d1(Hi),Hi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||mn.current&1?Nn===0&&(Nn=3):NA())),e.updateQueue!==null&&(e.flags|=4),sr(e),null);case 4:return iu(),s1(n,e),n===null&&uh(e.stateNode.containerInfo),sr(e),null;case 10:return _A(e.type._context),sr(e),null;case 17:return Nr(e.type)&&tg(),sr(e),null;case 19:if(ln(mn),s=e.memoizedState,s===null)return sr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)of(s,!1);else{if(Nn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=lg(n),o!==null){for(e.flags|=128,of(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return nn(mn,mn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Tn()>ou&&(e.flags|=128,r=!0,of(s,!1),e.lanes=4194304)}else{if(!r)if(n=lg(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),of(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hn)return sr(e),null}else 2*Tn()-s.renderingStartTime>ou&&t!==1073741824&&(e.flags|=128,r=!0,of(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tn(),e.sibling=null,t=mn.current,nn(mn,r?t&1|2:t&1),e):(sr(e),null);case 22:case 23:return OA(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kr&1073741824&&(sr(e),e.subtreeFlags&6&&(e.flags|=8192)):sr(e),null;case 24:return null;case 25:return null}throw Error(Me(156,e.tag))}function KO(n,e){switch(gA(e),e.tag){case 1:return Nr(e.type)&&tg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return iu(),ln(Or),ln(hr),EA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return wA(e),null;case 13:if(ln(mn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Me(340));nu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ln(mn),null;case 4:return iu(),null;case 10:return _A(e.type._context),null;case 22:case 23:return OA(),null;case 24:return null;default:return null}}var bp=!1,cr=!1,YO=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function kc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Sn(n,e,r)}else t.current=null}function o1(n,e,t){try{t()}catch(r){Sn(n,e,r)}}var ab=!1;function QO(n,e){if(V_=Qm,n=tP(),pA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,f=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++f===i&&(a=o),p===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(W_={focusedElem:n,selectionRange:t},Qm=!1,Ye=e;Ye!==null;)if(e=Ye,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ye=n;else for(;Ye!==null;){e=Ye;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,x=y.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ni(e.type,_),x);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(E){Sn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}return y=ab,ab=!1,y}function Vf(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&o1(e,t,s)}i=i.next}while(i!==r)}}function w0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function a1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function QP(n){var e=n.alternate;e!==null&&(n.alternate=null,QP(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ds],delete e[hh],delete e[j_],delete e[LO],delete e[DO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ZP(n){return n.tag===5||n.tag===3||n.tag===4}function lb(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ZP(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function l1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=eg));else if(r!==4&&(n=n.child,n!==null))for(l1(n,e,t),n=n.sibling;n!==null;)l1(n,e,t),n=n.sibling}function c1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(c1(n,e,t),n=n.sibling;n!==null;)c1(n,e,t),n=n.sibling}var Yn=null,ki=!1;function xo(n,e,t){for(t=t.child;t!==null;)qP(n,e,t),t=t.sibling}function qP(n,e,t){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(g0,t)}catch{}switch(t.tag){case 5:cr||kc(t,e);case 6:var r=Yn,i=ki;Yn=null,xo(n,e,t),Yn=r,ki=i,Yn!==null&&(ki?(n=Yn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Yn.removeChild(t.stateNode));break;case 18:Yn!==null&&(ki?(n=Yn,t=t.stateNode,n.nodeType===8?Qy(n.parentNode,t):n.nodeType===1&&Qy(n,t),ah(n)):Qy(Yn,t.stateNode));break;case 4:r=Yn,i=ki,Yn=t.stateNode.containerInfo,ki=!0,xo(n,e,t),Yn=r,ki=i;break;case 0:case 11:case 14:case 15:if(!cr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&o1(t,e,o),i=i.next}while(i!==r)}xo(n,e,t);break;case 1:if(!cr&&(kc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Sn(t,e,a)}xo(n,e,t);break;case 21:xo(n,e,t);break;case 22:t.mode&1?(cr=(r=cr)||t.memoizedState!==null,xo(n,e,t),cr=r):xo(n,e,t);break;default:xo(n,e,t)}}function cb(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new YO),e.forEach(function(r){var i=oN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ii(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yn=a.stateNode,ki=!1;break e;case 3:Yn=a.stateNode.containerInfo,ki=!0;break e;case 4:Yn=a.stateNode.containerInfo,ki=!0;break e}a=a.return}if(Yn===null)throw Error(Me(160));qP(s,o,i),Yn=null,ki=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(f){Sn(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eB(e,n),e=e.sibling}function eB(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ii(e,n),cs(n),r&4){try{Vf(3,n,n.return),w0(3,n)}catch(_){Sn(n,n.return,_)}try{Vf(5,n,n.return)}catch(_){Sn(n,n.return,_)}}break;case 1:Ii(e,n),cs(n),r&512&&t!==null&&kc(t,t.return);break;case 5:if(Ii(e,n),cs(n),r&512&&t!==null&&kc(t,t.return),n.flags&32){var i=n.stateNode;try{rh(i,"")}catch(_){Sn(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&S2(i,s),L_(a,o);var f=L_(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?C2(i,d):h==="dangerouslySetInnerHTML"?E2(i,d):h==="children"?rh(i,d):tA(i,h,d,f)}switch(a){case"input":T_(i,s);break;case"textarea":M2(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?$c(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?$c(i,!!s.multiple,s.defaultValue,!0):$c(i,!!s.multiple,s.multiple?[]:"",!1))}i[hh]=s}catch(_){Sn(n,n.return,_)}}break;case 6:if(Ii(e,n),cs(n),r&4){if(n.stateNode===null)throw Error(Me(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(_){Sn(n,n.return,_)}}break;case 3:if(Ii(e,n),cs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ah(e.containerInfo)}catch(_){Sn(n,n.return,_)}break;case 4:Ii(e,n),cs(n);break;case 13:Ii(e,n),cs(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(DA=Tn())),r&4&&cb(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(cr=(f=cr)||h,Ii(e,n),cr=f):Ii(e,n),cs(n),r&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!h&&n.mode&1)for(Ye=n,h=n.child;h!==null;){for(d=Ye=h;Ye!==null;){switch(p=Ye,m=p.child,p.tag){case 0:case 11:case 14:case 15:Vf(4,p,p.return);break;case 1:kc(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){Sn(r,t,_)}}break;case 5:kc(p,p.return);break;case 22:if(p.memoizedState!==null){fb(d);continue}}m!==null?(m.return=p,Ye=m):fb(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=b2("display",o))}catch(_){Sn(n,n.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(_){Sn(n,n.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ii(e,n),cs(n),r&4&&cb(n);break;case 21:break;default:Ii(e,n),cs(n)}}function cs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(ZP(t)){var r=t;break e}t=t.return}throw Error(Me(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rh(i,""),r.flags&=-33);var s=lb(n);c1(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=lb(n);l1(n,a,o);break;default:throw Error(Me(161))}}catch(l){Sn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function ZO(n,e,t){Ye=n,tB(n)}function tB(n,e,t){for(var r=(n.mode&1)!==0;Ye!==null;){var i=Ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||cr;a=bp;var f=cr;if(bp=o,(cr=l)&&!f)for(Ye=i;Ye!==null;)o=Ye,l=o.child,o.tag===22&&o.memoizedState!==null?hb(i):l!==null?(l.return=o,Ye=l):hb(i);for(;s!==null;)Ye=s,tB(s),s=s.sibling;Ye=i,bp=a,cr=f}ub(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ye=s):ub(n)}}function ub(n){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cr||w0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ni(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&JE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}JE(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ah(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}cr||e.flags&512&&a1(e)}catch(p){Sn(e,e.return,p)}}if(e===n){Ye=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function fb(n){for(;Ye!==null;){var e=Ye;if(e===n){Ye=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ye=t;break}Ye=e.return}}function hb(n){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{w0(4,e)}catch(l){Sn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Sn(e,i,l)}}var s=e.return;try{a1(e)}catch(l){Sn(e,s,l)}break;case 5:var o=e.return;try{a1(e)}catch(l){Sn(e,o,l)}}}catch(l){Sn(e,e.return,l)}if(e===n){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var qO=Math.ceil,fg=ro.ReactCurrentDispatcher,IA=ro.ReactCurrentOwner,wi=ro.ReactCurrentBatchConfig,zt=0,Xn=null,In=null,Qn=0,Kr=0,Hc=ea(0),Nn=0,yh=null,rl=0,E0=0,LA=0,Wf=null,Ir=null,DA=0,ou=1/0,Ns=null,hg=!1,u1=null,Go=null,Cp=!1,Oo=null,dg=0,$f=0,f1=null,Um=-1,km=0;function Mr(){return zt&6?Tn():Um!==-1?Um:Um=Tn()}function Vo(n){return n.mode&1?zt&2&&Qn!==0?Qn&-Qn:OO.transition!==null?(km===0&&(km=k2()),km):(n=Kt,n!==0||(n=window.event,n=n===void 0?16:X2(n.type)),n):1}function Wi(n,e,t,r){if(50<$f)throw $f=0,f1=null,Error(Me(185));Nh(n,t,r),(!(zt&2)||n!==Xn)&&(n===Xn&&(!(zt&2)&&(E0|=t),Nn===4&&Lo(n,Qn)),Ur(n,r),t===1&&zt===0&&!(e.mode&1)&&(ou=Tn()+500,A0&&ta()))}function Ur(n,e){var t=n.callbackNode;OF(n,e);var r=Ym(n,n===Xn?Qn:0);if(r===0)t!==null&&AE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&AE(t),e===1)n.tag===0?FO(db.bind(null,n)):fP(db.bind(null,n)),BO(function(){!(zt&6)&&ta()}),t=null;else{switch(H2(r)){case 1:t=oA;break;case 4:t=N2;break;case 16:t=Km;break;case 536870912:t=U2;break;default:t=Km}t=cB(t,nB.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function nB(n,e){if(Um=-1,km=0,zt&6)throw Error(Me(327));var t=n.callbackNode;if(Yc()&&n.callbackNode!==t)return null;var r=Ym(n,n===Xn?Qn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=pg(n,r);else{e=r;var i=zt;zt|=2;var s=iB();(Xn!==n||Qn!==e)&&(Ns=null,ou=Tn()+500,ja(n,e));do try{nN();break}catch(a){rB(n,a)}while(!0);xA(),fg.current=s,zt=i,In!==null?e=0:(Xn=null,Qn=0,e=Nn)}if(e!==0){if(e===2&&(i=U_(n),i!==0&&(r=i,e=h1(n,i))),e===1)throw t=yh,ja(n,0),Lo(n,r),Ur(n,Tn()),t;if(e===6)Lo(n,r);else{if(i=n.current.alternate,!(r&30)&&!eN(i)&&(e=pg(n,r),e===2&&(s=U_(n),s!==0&&(r=s,e=h1(n,s))),e===1))throw t=yh,ja(n,0),Lo(n,r),Ur(n,Tn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Me(345));case 2:Pa(n,Ir,Ns);break;case 3:if(Lo(n,r),(r&130023424)===r&&(e=DA+500-Tn(),10<e)){if(Ym(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Mr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=X_(Pa.bind(null,n,Ir,Ns),e);break}Pa(n,Ir,Ns);break;case 4:if(Lo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Vi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qO(r/1960))-r,10<r){n.timeoutHandle=X_(Pa.bind(null,n,Ir,Ns),r);break}Pa(n,Ir,Ns);break;case 5:Pa(n,Ir,Ns);break;default:throw Error(Me(329))}}}return Ur(n,Tn()),n.callbackNode===t?nB.bind(null,n):null}function h1(n,e){var t=Wf;return n.current.memoizedState.isDehydrated&&(ja(n,e).flags|=256),n=pg(n,e),n!==2&&(e=Ir,Ir=t,e!==null&&d1(e)),n}function d1(n){Ir===null?Ir=n:Ir.push.apply(Ir,n)}function eN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!$i(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lo(n,e){for(e&=~LA,e&=~E0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Vi(e),r=1<<t;n[t]=-1,e&=~r}}function db(n){if(zt&6)throw Error(Me(327));Yc();var e=Ym(n,0);if(!(e&1))return Ur(n,Tn()),null;var t=pg(n,e);if(n.tag!==0&&t===2){var r=U_(n);r!==0&&(e=r,t=h1(n,r))}if(t===1)throw t=yh,ja(n,0),Lo(n,e),Ur(n,Tn()),t;if(t===6)throw Error(Me(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Pa(n,Ir,Ns),Ur(n,Tn()),null}function FA(n,e){var t=zt;zt|=1;try{return n(e)}finally{zt=t,zt===0&&(ou=Tn()+500,A0&&ta())}}function il(n){Oo!==null&&Oo.tag===0&&!(zt&6)&&Yc();var e=zt;zt|=1;var t=wi.transition,r=Kt;try{if(wi.transition=null,Kt=1,n)return n()}finally{Kt=r,wi.transition=t,zt=e,!(zt&6)&&ta()}}function OA(){Kr=Hc.current,ln(Hc)}function ja(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,PO(t)),In!==null)for(t=In.return;t!==null;){var r=t;switch(gA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tg();break;case 3:iu(),ln(Or),ln(hr),EA();break;case 5:wA(r);break;case 4:iu();break;case 13:ln(mn);break;case 19:ln(mn);break;case 10:_A(r.type._context);break;case 22:case 23:OA()}t=t.return}if(Xn=n,In=n=Wo(n.current,null),Qn=Kr=e,Nn=0,yh=null,LA=E0=rl=0,Ir=Wf=null,Ua!==null){for(e=0;e<Ua.length;e++)if(t=Ua[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Ua=null}return n}function rB(n,e){do{var t=In;try{if(xA(),Fm.current=ug,cg){for(var r=vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cg=!1}if(nl=0,$n=On=vn=null,Gf=!1,mh=0,IA.current=null,t===null||t.return===null){Nn=1,yh=e,In=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Qn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=eb(o);if(m!==null){m.flags&=-257,tb(m,o,a,s,e),m.mode&1&&qE(s,f,e),e=m,l=f;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){qE(s,f,e),NA();break e}l=Error(Me(426))}}else if(hn&&a.mode&1){var x=eb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),tb(x,o,a,s,e),vA(su(l,a));break e}}s=l=su(l,a),Nn!==4&&(Nn=2),Wf===null?Wf=[s]:Wf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=HP(s,l,e);jE(s,g);break e;case 1:a=l;var S=s.type,M=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Go===null||!Go.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=zP(s,a,e);jE(s,E);break e}}s=s.return}while(s!==null)}oB(t)}catch(P){e=P,In===t&&t!==null&&(In=t=t.return);continue}break}while(!0)}function iB(){var n=fg.current;return fg.current=ug,n===null?ug:n}function NA(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Xn===null||!(rl&268435455)&&!(E0&268435455)||Lo(Xn,Qn)}function pg(n,e){var t=zt;zt|=2;var r=iB();(Xn!==n||Qn!==e)&&(Ns=null,ja(n,e));do try{tN();break}catch(i){rB(n,i)}while(!0);if(xA(),zt=t,fg.current=r,In!==null)throw Error(Me(261));return Xn=null,Qn=0,Nn}function tN(){for(;In!==null;)sB(In)}function nN(){for(;In!==null&&!CF();)sB(In)}function sB(n){var e=lB(n.alternate,n,Kr);n.memoizedProps=n.pendingProps,e===null?oB(n):In=e,IA.current=null}function oB(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=KO(t,e),t!==null){t.flags&=32767,In=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Nn=6,In=null;return}}else if(t=JO(t,e,Kr),t!==null){In=t;return}if(e=e.sibling,e!==null){In=e;return}In=e=n}while(e!==null);Nn===0&&(Nn=5)}function Pa(n,e,t){var r=Kt,i=wi.transition;try{wi.transition=null,Kt=1,rN(n,e,t,r)}finally{wi.transition=i,Kt=r}return null}function rN(n,e,t,r){do Yc();while(Oo!==null);if(zt&6)throw Error(Me(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Me(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(NF(n,s),n===Xn&&(In=Xn=null,Qn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Cp||(Cp=!0,cB(Km,function(){return Yc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=wi.transition,wi.transition=null;var o=Kt;Kt=1;var a=zt;zt|=4,IA.current=null,QO(n,t),eB(t,n),MO(W_),Qm=!!V_,W_=V_=null,n.current=t,ZO(t),TF(),zt=a,Kt=o,wi.transition=s}else n.current=t;if(Cp&&(Cp=!1,Oo=n,dg=i),s=n.pendingLanes,s===0&&(Go=null),BF(t.stateNode),Ur(n,Tn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(hg)throw hg=!1,n=u1,u1=null,n;return dg&1&&n.tag!==0&&Yc(),s=n.pendingLanes,s&1?n===f1?$f++:($f=0,f1=n):$f=0,ta(),null}function Yc(){if(Oo!==null){var n=H2(dg),e=wi.transition,t=Kt;try{if(wi.transition=null,Kt=16>n?16:n,Oo===null)var r=!1;else{if(n=Oo,Oo=null,dg=0,zt&6)throw Error(Me(331));var i=zt;for(zt|=4,Ye=n.current;Ye!==null;){var s=Ye,o=s.child;if(Ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(Ye=f;Ye!==null;){var h=Ye;switch(h.tag){case 0:case 11:case 15:Vf(8,h,s)}var d=h.child;if(d!==null)d.return=h,Ye=d;else for(;Ye!==null;){h=Ye;var p=h.sibling,m=h.return;if(QP(h),h===f){Ye=null;break}if(p!==null){p.return=m,Ye=p;break}Ye=m}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}Ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ye=o;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ye=g;break e}Ye=s.return}}var S=n.current;for(Ye=S;Ye!==null;){o=Ye;var M=o.child;if(o.subtreeFlags&2064&&M!==null)M.return=o,Ye=M;else e:for(o=S;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:w0(9,a)}}catch(P){Sn(a,a.return,P)}if(a===o){Ye=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Ye=E;break e}Ye=a.return}}if(zt=i,ta(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(g0,n)}catch{}r=!0}return r}finally{Kt=t,wi.transition=e}}return!1}function pb(n,e,t){e=su(t,e),e=HP(n,e,1),n=zo(n,e,1),e=Mr(),n!==null&&(Nh(n,1,e),Ur(n,e))}function Sn(n,e,t){if(n.tag===3)pb(n,n,t);else for(;e!==null;){if(e.tag===3){pb(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Go===null||!Go.has(r))){n=su(t,n),n=zP(e,n,1),e=zo(e,n,1),n=Mr(),e!==null&&(Nh(e,1,n),Ur(e,n));break}}e=e.return}}function iN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Mr(),n.pingedLanes|=n.suspendedLanes&t,Xn===n&&(Qn&t)===t&&(Nn===4||Nn===3&&(Qn&130023424)===Qn&&500>Tn()-DA?ja(n,0):LA|=t),Ur(n,e)}function aB(n,e){e===0&&(n.mode&1?(e=vp,vp<<=1,!(vp&130023424)&&(vp=4194304)):e=1);var t=Mr();n=Zs(n,e),n!==null&&(Nh(n,e,t),Ur(n,t))}function sN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),aB(n,t)}function oN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Me(314))}r!==null&&r.delete(e),aB(n,t)}var lB;lB=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Or.current)Dr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Dr=!1,jO(n,e,t);Dr=!!(n.flags&131072)}else Dr=!1,hn&&e.flags&1048576&&hP(e,ig,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Nm(n,e),n=e.pendingProps;var i=tu(e,hr.current);Kc(e,t),i=CA(null,e,r,n,i,t);var s=TA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nr(r)?(s=!0,ng(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,SA(e),i.updater=M0,e.stateNode=i,i._reactInternals=e,q_(e,r,n,t),e=n1(null,e,r,!0,s,t)):(e.tag=0,hn&&s&&mA(e),Ar(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Nm(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lN(r),n=Ni(r,n),i){case 0:e=t1(null,e,r,n,t);break e;case 1:e=ib(null,e,r,n,t);break e;case 11:e=nb(null,e,r,n,t);break e;case 14:e=rb(null,e,r,Ni(r.type,n),t);break e}throw Error(Me(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),t1(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),ib(n,e,r,i,t);case 3:e:{if($P(e),n===null)throw Error(Me(387));r=e.pendingProps,s=e.memoizedState,i=s.element,yP(n,e),ag(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=su(Error(Me(423)),e),e=sb(n,e,r,t,i);break e}else if(r!==i){i=su(Error(Me(424)),e),e=sb(n,e,r,t,i);break e}else for(Qr=Ho(e.stateNode.containerInfo.firstChild),ei=e,hn=!0,Hi=null,t=gP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(nu(),r===i){e=qs(n,e,t);break e}Ar(n,e,r,t)}e=e.child}return e;case 5:return xP(e),n===null&&Y_(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,$_(r,i)?o=null:s!==null&&$_(r,s)&&(e.flags|=32),WP(n,e),Ar(n,e,o,t),e.child;case 6:return n===null&&Y_(e),null;case 13:return XP(n,e,t);case 4:return MA(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ru(e,null,r,t):Ar(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),nb(n,e,r,i,t);case 7:return Ar(n,e,e.pendingProps,t),e.child;case 8:return Ar(n,e,e.pendingProps.children,t),e.child;case 12:return Ar(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,nn(sg,r._currentValue),r._currentValue=o,s!==null)if($i(s.value,o)){if(s.children===i.children&&!Or.current){e=qs(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=js(-1,t&-t),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?l.next=l:(l.next=h.next,h.next=l),f.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Q_(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Me(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Q_(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ar(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Kc(e,t),i=Ei(i),r=r(i),e.flags|=1,Ar(n,e,r,t),e.child;case 14:return r=e.type,i=Ni(r,e.pendingProps),i=Ni(r.type,i),rb(n,e,r,i,t);case 15:return GP(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),Nm(n,e),e.tag=1,Nr(r)?(n=!0,ng(e)):n=!1,Kc(e,t),kP(e,r,i),q_(e,r,i,t),n1(null,e,r,!0,n,t);case 19:return jP(n,e,t);case 22:return VP(n,e,t)}throw Error(Me(156,e.tag))};function cB(n,e){return O2(n,e)}function aN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(n,e,t,r){return new aN(n,e,t,r)}function UA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function lN(n){if(typeof n=="function")return UA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===rA)return 11;if(n===iA)return 14}return 2}function Wo(n,e){var t=n.alternate;return t===null?(t=Ai(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Hm(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")UA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Pc:return Ja(t.children,i,s,e);case nA:o=8,i|=8;break;case M_:return n=Ai(12,t,e,i|2),n.elementType=M_,n.lanes=s,n;case w_:return n=Ai(13,t,e,i),n.elementType=w_,n.lanes=s,n;case E_:return n=Ai(19,t,e,i),n.elementType=E_,n.lanes=s,n;case x2:return b0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case v2:o=10;break e;case y2:o=9;break e;case rA:o=11;break e;case iA:o=14;break e;case Ro:o=16,r=null;break e}throw Error(Me(130,n==null?n:typeof n,""))}return e=Ai(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ja(n,e,t,r){return n=Ai(7,n,r,e),n.lanes=t,n}function b0(n,e,t,r){return n=Ai(22,n,r,e),n.elementType=x2,n.lanes=t,n.stateNode={isHidden:!1},n}function sx(n,e,t){return n=Ai(6,n,null,e),n.lanes=t,n}function ox(n,e,t){return e=Ai(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function cN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hy(0),this.expirationTimes=Hy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kA(n,e,t,r,i,s,o,a,l){return n=new cN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ai(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},SA(s),n}function uN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function uB(n){if(!n)return jo;n=n._reactInternals;e:{if(ml(n)!==n||n.tag!==1)throw Error(Me(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Me(171))}if(n.tag===1){var t=n.type;if(Nr(t))return uP(n,t,e)}return e}function fB(n,e,t,r,i,s,o,a,l){return n=kA(t,r,!0,n,i,s,o,a,l),n.context=uB(null),t=n.current,r=Mr(),i=Vo(t),s=js(r,i),s.callback=e??null,zo(t,s,i),n.current.lanes=i,Nh(n,i,r),Ur(n,r),n}function C0(n,e,t,r){var i=e.current,s=Mr(),o=Vo(i);return t=uB(t),e.context===null?e.context=t:e.pendingContext=t,e=js(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=zo(i,e,o),n!==null&&(Wi(n,i,o,s),Dm(n,i,o)),o}function mg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function mb(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function HA(n,e){mb(n,e),(n=n.alternate)&&mb(n,e)}function fN(){return null}var hB=typeof reportError=="function"?reportError:function(n){console.error(n)};function zA(n){this._internalRoot=n}T0.prototype.render=zA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Me(409));C0(n,e,null,null)};T0.prototype.unmount=zA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;il(function(){C0(null,n,null,null)}),e[Qs]=null}};function T0(n){this._internalRoot=n}T0.prototype.unstable_scheduleHydration=function(n){if(n){var e=V2();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Io.length&&e!==0&&e<Io[t].priority;t++);Io.splice(t,0,n),t===0&&$2(n)}};function GA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function R0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function gb(){}function hN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=mg(o);s.call(f)}}var o=fB(e,r,n,0,null,!1,!1,"",gb);return n._reactRootContainer=o,n[Qs]=o.current,uh(n.nodeType===8?n.parentNode:n),il(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=mg(l);a.call(f)}}var l=kA(n,0,!1,null,null,!1,!1,"",gb);return n._reactRootContainer=l,n[Qs]=l.current,uh(n.nodeType===8?n.parentNode:n),il(function(){C0(e,l,t,r)}),l}function P0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=mg(o);a.call(l)}}C0(e,o,n,i)}else o=hN(t,e,n,i,r);return mg(o)}z2=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Pf(e.pendingLanes);t!==0&&(aA(e,t|1),Ur(e,Tn()),!(zt&6)&&(ou=Tn()+500,ta()))}break;case 13:il(function(){var r=Zs(n,1);if(r!==null){var i=Mr();Wi(r,n,1,i)}}),HA(n,1)}};lA=function(n){if(n.tag===13){var e=Zs(n,134217728);if(e!==null){var t=Mr();Wi(e,n,134217728,t)}HA(n,134217728)}};G2=function(n){if(n.tag===13){var e=Vo(n),t=Zs(n,e);if(t!==null){var r=Mr();Wi(t,n,e,r)}HA(n,e)}};V2=function(){return Kt};W2=function(n,e){var t=Kt;try{return Kt=n,e()}finally{Kt=t}};F_=function(n,e,t){switch(e){case"input":if(T_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=_0(r);if(!i)throw Error(Me(90));A2(r),T_(r,i)}}}break;case"textarea":M2(n,t);break;case"select":e=t.value,e!=null&&$c(n,!!t.multiple,e,!1)}};P2=FA;B2=il;var dN={usingClientEntryPoint:!1,Events:[kh,Dc,_0,T2,R2,FA]},af={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pN={bundleType:af.bundleType,version:af.version,rendererPackageName:af.rendererPackageName,rendererConfig:af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=D2(n),n===null?null:n.stateNode},findFiberByHostInstance:af.findFiberByHostInstance||fN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{g0=Tp.inject(pN),ms=Tp}catch{}}si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dN;si.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!GA(e))throw Error(Me(200));return uN(n,e,null,t)};si.createRoot=function(n,e){if(!GA(n))throw Error(Me(299));var t=!1,r="",i=hB;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kA(n,1,!1,null,null,t,!1,r,i),n[Qs]=e.current,uh(n.nodeType===8?n.parentNode:n),new zA(e)};si.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Me(188)):(n=Object.keys(n).join(","),Error(Me(268,n)));return n=D2(e),n=n===null?null:n.stateNode,n};si.flushSync=function(n){return il(n)};si.hydrate=function(n,e,t){if(!R0(e))throw Error(Me(200));return P0(null,n,e,!0,t)};si.hydrateRoot=function(n,e,t){if(!GA(n))throw Error(Me(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=hB;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=fB(e,null,n,1,t??null,i,!1,s,o),n[Qs]=e.current,uh(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new T0(e)};si.render=function(n,e,t){if(!R0(e))throw Error(Me(200));return P0(null,n,e,!1,t)};si.unmountComponentAtNode=function(n){if(!R0(n))throw Error(Me(40));return n._reactRootContainer?(il(function(){P0(null,null,n,!1,function(){n._reactRootContainer=null,n[Qs]=null})}),!0):!1};si.unstable_batchedUpdates=FA;si.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!R0(t))throw Error(Me(200));if(n==null||n._reactInternals===void 0)throw Error(Me(38));return P0(n,e,t,!1,r)};si.version="18.3.1-next-f1338f8080-20240426";function dB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dB)}catch(n){console.error(n)}}dB(),d2.exports=si;var mN=d2.exports,VA,vb=mN;VA=vb.createRoot,vb.hydrateRoot;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zh="169",Ba={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ia={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},pB=0,p1=1,mB=2,gN=3,gB=0,B0=1,Xf=2,Ui=3,As=0,wr=1,xi=2,Js=0,Ka=1,m1=2,g1=3,v1=4,vB=5,Do=100,yB=101,xB=102,_B=103,AB=104,SB=200,MB=201,wB=202,EB=203,gg=204,vg=205,bB=206,CB=207,TB=208,RB=209,PB=210,BB=211,IB=212,LB=213,DB=214,yg=0,xg=1,_g=2,sl=3,Ag=4,Sg=5,Mg=6,wg=7,Gh=0,FB=1,OB=2,vs=0,NB=1,UB=2,kB=3,WA=4,HB=5,zB=6,GB=7,y1="attached",VB="detached",I0=300,eo=301,Jo=302,xh=303,_h=304,yu=306,Ko=1e3,Zr=1001,au=1002,Un=1003,L0=1004,vN=1004,Ha=1005,yN=1005,wn=1006,Qc=1007,xN=1007,Si=1008,_N=1008,Xi=1009,$A=1010,XA=1011,lu=1012,D0=1013,to=1014,Fr=1015,xu=1016,F0=1017,O0=1018,ol=1020,jA=35902,JA=1021,KA=1022,ur=1023,YA=1024,QA=1025,Ya=1026,al=1027,N0=1028,Vh=1029,ZA=1030,U0=1031,AN=1032,k0=1033,jf=33776,Jf=33777,Kf=33778,Yf=33779,Eg=35840,bg=35841,Cg=35842,Tg=35843,Rg=36196,Pg=37492,Bg=37496,Ig=37808,Lg=37809,Dg=37810,Fg=37811,Og=37812,Ng=37813,Ug=37814,kg=37815,Hg=37816,zg=37817,Gg=37818,Vg=37819,Wg=37820,$g=37821,Qf=36492,Xg=36494,jg=36495,qA=36283,Jg=36284,Kg=36285,Yg=36286,WB=2200,$B=2201,XB=2202,cu=2300,uu=2301,zm=2302,za=2400,Ga=2401,Ah=2402,H0=2500,eS=2501,jB=0,tS=1,Qg=2,JB=3200,KB=3201,SN=3202,MN=3203,na=0,YB=1,zs="",Yr="srgb",io="srgb-linear",z0="display-p3",Wh="display-p3-linear",Sh="linear",en="srgb",Mh="rec709",wh="p3",wN=0,La=7680,EN=7681,bN=7682,CN=7683,TN=34055,RN=34056,PN=5386,BN=512,IN=513,LN=514,DN=515,FN=516,ON=517,NN=518,x1=519,QB=512,ZB=513,qB=514,nS=515,eI=516,tI=517,nI=518,rI=519,Eh=35044,UN=35048,kN=35040,HN=35045,zN=35049,GN=35041,VN=35046,WN=35050,$N=35042,XN="100",_1="300 es",ps=2e3,bh=2001;class Ki{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let yb=1234567;const Qa=Math.PI/180,fu=180/Math.PI;function ti(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(or[n&255]+or[n>>8&255]+or[n>>16&255]+or[n>>24&255]+"-"+or[e&255]+or[e>>8&255]+"-"+or[e>>16&15|64]+or[e>>24&255]+"-"+or[t&63|128]+or[t>>8&255]+"-"+or[t>>16&255]+or[t>>24&255]+or[r&255]+or[r>>8&255]+or[r>>16&255]+or[r>>24&255]).toLowerCase()}function Mn(n,e,t){return Math.max(e,Math.min(t,n))}function rS(n,e){return(n%e+e)%e}function jN(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function JN(n,e,t){return n!==e?(t-n)/(e-n):0}function Zf(n,e,t){return(1-t)*n+t*e}function KN(n,e,t,r){return Zf(n,e,1-Math.exp(-t*r))}function YN(n,e=1){return e-Math.abs(rS(n,e*2)-e)}function QN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function ZN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function qN(n,e){return n+Math.floor(Math.random()*(e-n+1))}function eU(n,e){return n+Math.random()*(e-n)}function tU(n){return n*(.5-Math.random())}function nU(n){n!==void 0&&(yb=n);let e=yb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rU(n){return n*Qa}function iU(n){return n*fu}function sU(n){return(n&n-1)===0&&n!==0}function oU(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function aU(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function lU(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),f=s((e+r)/2),h=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),y=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*d,l*p,a*f);break;case"YZY":n.set(l*p,a*h,l*d,a*f);break;case"ZXZ":n.set(l*d,l*p,a*h,a*f);break;case"XZX":n.set(a*h,l*y,l*m,a*f);break;case"YXY":n.set(l*m,a*h,l*y,a*f);break;case"ZYZ":n.set(l*y,l*m,a*h,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Sr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Et(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const iI={DEG2RAD:Qa,RAD2DEG:fu,generateUUID:ti,clamp:Mn,euclideanModulo:rS,mapLinear:jN,inverseLerp:JN,lerp:Zf,damp:KN,pingpong:YN,smoothstep:QN,smootherstep:ZN,randInt:qN,randFloat:eU,randFloatSpread:tU,seededRandom:nU,degToRad:rU,radToDeg:iU,isPowerOfTwo:sU,ceilPowerOfTwo:oU,floorPowerOfTwo:aU,setQuaternionFromProperEuler:lU,normalize:Et,denormalize:Sr};class de{constructor(e=0,t=0){de.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(e,t,r,i,s,o,a,l,f){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,f)}set(e,t,r,i,s,o,a,l,f){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],f=r[1],h=r[4],d=r[7],p=r[2],m=r[5],y=r[8],_=i[0],x=i[3],g=i[6],S=i[1],M=i[4],E=i[7],P=i[2],T=i[5],B=i[8];return s[0]=o*_+a*S+l*P,s[3]=o*x+a*M+l*T,s[6]=o*g+a*E+l*B,s[1]=f*_+h*S+d*P,s[4]=f*x+h*M+d*T,s[7]=f*g+h*E+d*B,s[2]=p*_+m*S+y*P,s[5]=p*x+m*M+y*T,s[8]=p*g+m*E+y*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8];return t*o*h-t*a*f-r*s*h+r*a*l+i*s*f-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],d=h*o-a*f,p=a*l-h*s,m=f*s-o*l,y=t*d+r*p+i*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/y;return e[0]=d*_,e[1]=(i*f-h*r)*_,e[2]=(a*r-i*o)*_,e[3]=p*_,e[4]=(h*t-i*l)*_,e[5]=(i*s-a*t)*_,e[6]=m*_,e[7]=(r*l-f*t)*_,e[8]=(o*t-r*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),f=Math.sin(s);return this.set(r*l,r*f,-r*(l*o+f*a)+o+e,-i*f,i*l,-i*(-f*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(ax.makeScale(e,t)),this}rotate(e){return this.premultiply(ax.makeRotation(-e)),this}translate(e,t){return this.premultiply(ax.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ax=new wt;function sI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const cU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zc(n,e){return new cU[n](e)}function Ch(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function oI(){const n=Ch("canvas");return n.style.display="block",n}const xb={};function Gm(n){n in xb||(xb[n]=!0,console.warn(n))}function uU(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function fU(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function hU(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const _b=new wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Ab=new wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),lf={[io]:{transfer:Sh,primaries:Mh,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Yr]:{transfer:en,primaries:Mh,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Wh]:{transfer:Sh,primaries:wh,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(Ab),fromReference:n=>n.applyMatrix3(_b)},[z0]:{transfer:en,primaries:wh,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(Ab),fromReference:n=>n.applyMatrix3(_b).convertLinearToSRGB()}},dU=new Set([io,Wh]),jt={enabled:!0,_workingColorSpace:io,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!dU.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=lf[e].toReference,i=lf[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return lf[n].primaries},getTransfer:function(n){return n===zs?Sh:lf[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(lf[e].luminanceCoefficients)}};function Zc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function lx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Wl;class aI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Wl===void 0&&(Wl=Ch("canvas")),Wl.width=e.width,Wl.height=e.height;const r=Wl.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Wl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ch("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Zc(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Zc(t[r]/255)*255):t[r]=Zc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let pU=0;class Va{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:pU++}),this.uuid=ti(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(cx(i[o].image)):s.push(cx(i[o]))}else s=cx(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function cx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?aI.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mU=0;class Zt extends Ki{constructor(e=Zt.DEFAULT_IMAGE,t=Zt.DEFAULT_MAPPING,r=Zr,i=Zr,s=wn,o=Si,a=ur,l=Xi,f=Zt.DEFAULT_ANISOTROPY,h=zs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mU++}),this.uuid=ti(),this.name="",this.source=new Va(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=l,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==I0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ko:e.x=e.x-Math.floor(e.x);break;case Zr:e.x=e.x<0?0:1;break;case au:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ko:e.y=e.y-Math.floor(e.y);break;case Zr:e.y=e.y<0?0:1;break;case au:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Zt.DEFAULT_IMAGE=null;Zt.DEFAULT_MAPPING=I0;Zt.DEFAULT_ANISOTROPY=1;class Ht{constructor(e=0,t=0,r=0,i=1){Ht.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,f=l[0],h=l[4],d=l[8],p=l[1],m=l[5],y=l[9],_=l[2],x=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-_)<.01&&Math.abs(y-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+_)<.1&&Math.abs(y+x)<.1&&Math.abs(f+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(f+1)/2,E=(m+1)/2,P=(g+1)/2,T=(h+p)/4,B=(d+_)/4,L=(y+x)/4;return M>E&&M>P?M<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(M),i=T/r,s=B/r):E>P?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=T/i,s=L/i):P<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(P),r=B/s,i=L/s),this.set(r,i,s,t),this}let S=Math.sqrt((x-y)*(x-y)+(d-_)*(d-_)+(p-h)*(p-h));return Math.abs(S)<.001&&(S=1),this.x=(x-y)/S,this.y=(d-_)/S,this.z=(p-h)/S,this.w=Math.acos((f+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lI extends Ki{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ht(0,0,e,t),this.scissorTest=!1,this.viewport=new Ht(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Zt(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Va(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ji extends lI{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class G0 extends Zt{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Un,this.minFilter=Un,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class gU extends ji{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new G0(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class iS extends Zt{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Un,this.minFilter=Un,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vU extends ji{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new iS(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class jn{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],f=r[i+1],h=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],y=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=f,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=_;return}if(d!==_||l!==p||f!==m||h!==y){let x=1-a;const g=l*p+f*m+h*y+d*_,S=g>=0?1:-1,M=1-g*g;if(M>Number.EPSILON){const P=Math.sqrt(M),T=Math.atan2(P,g*S);x=Math.sin(x*T)/P,a=Math.sin(a*T)/P}const E=a*S;if(l=l*x+p*E,f=f*x+m*E,h=h*x+y*E,d=d*x+_*E,x===1-a){const P=1/Math.sqrt(l*l+f*f+h*h+d*d);l*=P,f*=P,h*=P,d*=P}}e[t]=l,e[t+1]=f,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],f=r[i+2],h=r[i+3],d=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+h*d+l*m-f*p,e[t+1]=l*y+h*p+f*d-a*m,e[t+2]=f*y+h*m+a*p-l*d,e[t+3]=h*y-a*d-l*p-f*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,f=a(r/2),h=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*d+f*m*y,this._y=f*m*d-p*h*y,this._z=f*h*y+p*m*d,this._w=f*h*d-p*m*y;break;case"YXZ":this._x=p*h*d+f*m*y,this._y=f*m*d-p*h*y,this._z=f*h*y-p*m*d,this._w=f*h*d+p*m*y;break;case"ZXY":this._x=p*h*d-f*m*y,this._y=f*m*d+p*h*y,this._z=f*h*y+p*m*d,this._w=f*h*d-p*m*y;break;case"ZYX":this._x=p*h*d-f*m*y,this._y=f*m*d+p*h*y,this._z=f*h*y-p*m*d,this._w=f*h*d+p*m*y;break;case"YZX":this._x=p*h*d+f*m*y,this._y=f*m*d+p*h*y,this._z=f*h*y-p*m*d,this._w=f*h*d-p*m*y;break;case"XZY":this._x=p*h*d-f*m*y,this._y=f*m*d-p*h*y,this._z=f*h*y+p*m*d,this._w=f*h*d+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],f=t[2],h=t[6],d=t[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-f)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+f)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-f)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+f)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,f=t._z,h=t._w;return this._x=r*h+o*a+i*f-s*l,this._y=i*h+o*l+s*a-r*f,this._z=s*h+o*f+r*l-i*a,this._w=o*h-r*a-i*l-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const f=Math.sqrt(l),h=Math.atan2(f,a),d=Math.sin((1-t)*h)/f,p=Math.sin(t*h)/f;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,t=0,r=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Sb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Sb.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,f=2*(o*i-a*r),h=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+l*f+o*d-a*h,this.y=r+l*h+a*f-s*d,this.z=i+l*d+s*h-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ux.copy(this).projectOnVector(e),this.sub(ux)}reflect(e){return this.sub(ux.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ux=new F,Sb=new jn;class fr{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Li.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Li.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Li.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Li):Li.fromBufferAttribute(s,o),Li.applyMatrix4(e.matrixWorld),this.expandByPoint(Li);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Rp.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Rp.copy(r.boundingBox)),Rp.applyMatrix4(e.matrixWorld),this.union(Rp)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Li),Li.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cf),Pp.subVectors(this.max,cf),$l.subVectors(e.a,cf),Xl.subVectors(e.b,cf),jl.subVectors(e.c,cf),_o.subVectors(Xl,$l),Ao.subVectors(jl,Xl),ga.subVectors($l,jl);let t=[0,-_o.z,_o.y,0,-Ao.z,Ao.y,0,-ga.z,ga.y,_o.z,0,-_o.x,Ao.z,0,-Ao.x,ga.z,0,-ga.x,-_o.y,_o.x,0,-Ao.y,Ao.x,0,-ga.y,ga.x,0];return!fx(t,$l,Xl,jl,Pp)||(t=[1,0,0,0,1,0,0,0,1],!fx(t,$l,Xl,jl,Pp))?!1:(Bp.crossVectors(_o,Ao),t=[Bp.x,Bp.y,Bp.z],fx(t,$l,Xl,jl,Pp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Li).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Li).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ps[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ps[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ps[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ps[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ps[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ps[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ps[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ps[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ps),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ps=[new F,new F,new F,new F,new F,new F,new F,new F],Li=new F,Rp=new fr,$l=new F,Xl=new F,jl=new F,_o=new F,Ao=new F,ga=new F,cf=new F,Pp=new F,Bp=new F,va=new F;function fx(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){va.fromArray(n,s);const a=i.x*Math.abs(va.x)+i.y*Math.abs(va.y)+i.z*Math.abs(va.z),l=e.dot(va),f=t.dot(va),h=r.dot(va);if(Math.max(-Math.max(l,f,h),Math.min(l,f,h))>a)return!1}return!0}const yU=new fr,uf=new F,hx=new F;class Zn{constructor(e=new F,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):yU.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;uf.subVectors(e,this.center);const t=uf.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(uf,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(hx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(uf.copy(e.center).add(hx)),this.expandByPoint(uf.copy(e.center).sub(hx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Bs=new F,dx=new F,Ip=new F,So=new F,px=new F,Lp=new F,mx=new F;class gl{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Bs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Bs.copy(this.origin).addScaledVector(this.direction,t),Bs.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){dx.copy(e).add(t).multiplyScalar(.5),Ip.copy(t).sub(e).normalize(),So.copy(this.origin).sub(dx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ip),a=So.dot(this.direction),l=-So.dot(Ip),f=So.lengthSq(),h=Math.abs(1-o*o);let d,p,m,y;if(h>0)if(d=o*l-a,p=o*a-l,y=s*h,d>=0)if(p>=-y)if(p<=y){const _=1/h;d*=_,p*=_,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+f}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;else p<=-y?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+f):p<=y?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+f):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+f);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(dx).addScaledVector(Ip,p),m}intersectSphere(e,t){Bs.subVectors(e.center,this.origin);const r=Bs.dot(this.direction),i=Bs.dot(Bs)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const f=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return f>=0?(r=(e.min.x-p.x)*f,i=(e.max.x-p.x)*f):(r=(e.max.x-p.x)*f,i=(e.min.x-p.x)*f),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Bs)!==null}intersectTriangle(e,t,r,i,s){px.subVectors(t,e),Lp.subVectors(r,e),mx.crossVectors(px,Lp);let o=this.direction.dot(mx),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;So.subVectors(this.origin,e);const l=a*this.direction.dot(Lp.crossVectors(So,Lp));if(l<0)return null;const f=a*this.direction.dot(px.cross(So));if(f<0||l+f>o)return null;const h=-a*So.dot(mx);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(e,t,r,i,s,o,a,l,f,h,d,p,m,y,_,x){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,f,h,d,p,m,y,_,x)}set(e,t,r,i,s,o,a,l,f,h,d,p,m,y,_,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=f,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=y,g[11]=_,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Jl.setFromMatrixColumn(e,0).length(),s=1/Jl.setFromMatrixColumn(e,1).length(),o=1/Jl.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),f=Math.sin(i),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,y=a*h,_=a*d;t[0]=l*h,t[4]=-l*d,t[8]=f,t[1]=m+y*f,t[5]=p-_*f,t[9]=-a*l,t[2]=_-p*f,t[6]=y+m*f,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,y=f*h,_=f*d;t[0]=p+_*a,t[4]=y*a-m,t[8]=o*f,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-y,t[6]=_+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,y=f*h,_=f*d;t[0]=p-_*a,t[4]=-o*d,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*h,t[9]=_-p*a,t[2]=-o*f,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,y=a*h,_=a*d;t[0]=l*h,t[4]=y*f-m,t[8]=p*f+_,t[1]=l*d,t[5]=_*f+p,t[9]=m*f-y,t[2]=-f,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*f,y=a*l,_=a*f;t[0]=l*h,t[4]=_-p*d,t[8]=y*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-f*h,t[6]=m*d+y,t[10]=p-_*d}else if(e.order==="XZY"){const p=o*l,m=o*f,y=a*l,_=a*f;t[0]=l*h,t[4]=-d,t[8]=f*h,t[1]=p*d+_,t[5]=o*h,t[9]=m*d-y,t[2]=y*d-m,t[6]=a*h,t[10]=_*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xU,e,_U)}lookAt(e,t,r){const i=this.elements;return Xr.subVectors(e,t),Xr.lengthSq()===0&&(Xr.z=1),Xr.normalize(),Mo.crossVectors(r,Xr),Mo.lengthSq()===0&&(Math.abs(r.z)===1?Xr.x+=1e-4:Xr.z+=1e-4,Xr.normalize(),Mo.crossVectors(r,Xr)),Mo.normalize(),Dp.crossVectors(Xr,Mo),i[0]=Mo.x,i[4]=Dp.x,i[8]=Xr.x,i[1]=Mo.y,i[5]=Dp.y,i[9]=Xr.y,i[2]=Mo.z,i[6]=Dp.z,i[10]=Xr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],f=r[12],h=r[1],d=r[5],p=r[9],m=r[13],y=r[2],_=r[6],x=r[10],g=r[14],S=r[3],M=r[7],E=r[11],P=r[15],T=i[0],B=i[4],L=i[8],z=i[12],b=i[1],R=i[5],$=i[9],X=i[13],ee=i[2],le=i[6],Z=i[10],pe=i[14],U=i[3],Q=i[7],J=i[11],se=i[15];return s[0]=o*T+a*b+l*ee+f*U,s[4]=o*B+a*R+l*le+f*Q,s[8]=o*L+a*$+l*Z+f*J,s[12]=o*z+a*X+l*pe+f*se,s[1]=h*T+d*b+p*ee+m*U,s[5]=h*B+d*R+p*le+m*Q,s[9]=h*L+d*$+p*Z+m*J,s[13]=h*z+d*X+p*pe+m*se,s[2]=y*T+_*b+x*ee+g*U,s[6]=y*B+_*R+x*le+g*Q,s[10]=y*L+_*$+x*Z+g*J,s[14]=y*z+_*X+x*pe+g*se,s[3]=S*T+M*b+E*ee+P*U,s[7]=S*B+M*R+E*le+P*Q,s[11]=S*L+M*$+E*Z+P*J,s[15]=S*z+M*X+E*pe+P*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],f=e[13],h=e[2],d=e[6],p=e[10],m=e[14],y=e[3],_=e[7],x=e[11],g=e[15];return y*(+s*l*d-i*f*d-s*a*p+r*f*p+i*a*m-r*l*m)+_*(+t*l*m-t*f*p+s*o*p-i*o*m+i*f*h-s*l*h)+x*(+t*f*d-t*a*m-s*o*d+r*o*m+s*a*h-r*f*h)+g*(-i*a*h-t*l*d+t*a*p+i*o*d-r*o*p+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],d=e[9],p=e[10],m=e[11],y=e[12],_=e[13],x=e[14],g=e[15],S=d*x*f-_*p*f+_*l*m-a*x*m-d*l*g+a*p*g,M=y*p*f-h*x*f-y*l*m+o*x*m+h*l*g-o*p*g,E=h*_*f-y*d*f+y*a*m-o*_*m-h*a*g+o*d*g,P=y*d*l-h*_*l-y*a*p+o*_*p+h*a*x-o*d*x,T=t*S+r*M+i*E+s*P;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/T;return e[0]=S*B,e[1]=(_*p*s-d*x*s-_*i*m+r*x*m+d*i*g-r*p*g)*B,e[2]=(a*x*s-_*l*s+_*i*f-r*x*f-a*i*g+r*l*g)*B,e[3]=(d*l*s-a*p*s-d*i*f+r*p*f+a*i*m-r*l*m)*B,e[4]=M*B,e[5]=(h*x*s-y*p*s+y*i*m-t*x*m-h*i*g+t*p*g)*B,e[6]=(y*l*s-o*x*s-y*i*f+t*x*f+o*i*g-t*l*g)*B,e[7]=(o*p*s-h*l*s+h*i*f-t*p*f-o*i*m+t*l*m)*B,e[8]=E*B,e[9]=(y*d*s-h*_*s-y*r*m+t*_*m+h*r*g-t*d*g)*B,e[10]=(o*_*s-y*a*s+y*r*f-t*_*f-o*r*g+t*a*g)*B,e[11]=(h*a*s-o*d*s-h*r*f+t*d*f+o*r*m-t*a*m)*B,e[12]=P*B,e[13]=(h*_*i-y*d*i+y*r*p-t*_*p-h*r*x+t*d*x)*B,e[14]=(y*a*i-o*_*i-y*r*l+t*_*l+o*r*x-t*a*x)*B,e[15]=(o*d*i-h*a*i+h*r*l-t*d*l-o*r*p+t*a*p)*B,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,f=s*o,h=s*a;return this.set(f*o+r,f*a-i*l,f*l+i*a,0,f*a+i*l,h*a+r,h*l-i*o,0,f*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,f=s+s,h=o+o,d=a+a,p=s*f,m=s*h,y=s*d,_=o*h,x=o*d,g=a*d,S=l*f,M=l*h,E=l*d,P=r.x,T=r.y,B=r.z;return i[0]=(1-(_+g))*P,i[1]=(m+E)*P,i[2]=(y-M)*P,i[3]=0,i[4]=(m-E)*T,i[5]=(1-(p+g))*T,i[6]=(x+S)*T,i[7]=0,i[8]=(y+M)*B,i[9]=(x-S)*B,i[10]=(1-(p+_))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Jl.set(i[0],i[1],i[2]).length();const o=Jl.set(i[4],i[5],i[6]).length(),a=Jl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Di.copy(this);const f=1/s,h=1/o,d=1/a;return Di.elements[0]*=f,Di.elements[1]*=f,Di.elements[2]*=f,Di.elements[4]*=h,Di.elements[5]*=h,Di.elements[6]*=h,Di.elements[8]*=d,Di.elements[9]*=d,Di.elements[10]*=d,t.setFromRotationMatrix(Di),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=ps){const l=this.elements,f=2*s/(t-e),h=2*s/(r-i),d=(t+e)/(t-e),p=(r+i)/(r-i);let m,y;if(a===ps)m=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===bh)m=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=f,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=ps){const l=this.elements,f=1/(t-e),h=1/(r-i),d=1/(o-s),p=(t+e)*f,m=(r+i)*h;let y,_;if(a===ps)y=(o+s)*d,_=-2*d;else if(a===bh)y=s*d,_=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*f,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Jl=new F,Di=new ft,xU=new F(0,0,0),_U=new F(1,1,1),Mo=new F,Dp=new F,Xr=new F,Mb=new ft,wb=new jn;class Er{constructor(e=0,t=0,r=0,i=Er.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],f=i[5],h=i[9],d=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Mn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Mn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Mn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Mn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(Mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Mn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Mb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Mb,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return wb.setFromEuler(this),this.setFromQuaternion(wb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Er.DEFAULT_ORDER="XYZ";class Za{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let AU=0;const Eb=new F,Kl=new jn,Is=new ft,Fp=new F,ff=new F,SU=new F,MU=new jn,bb=new F(1,0,0),Cb=new F(0,1,0),Tb=new F(0,0,1),Rb={type:"added"},wU={type:"removed"},Yl={type:"childadded",child:null},gx={type:"childremoved",child:null};class Dt extends Ki{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:AU++}),this.uuid=ti(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dt.DEFAULT_UP.clone();const e=new F,t=new Er,r=new jn,i=new F(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ft},normalMatrix:{value:new wt}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=Dt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Dt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Za,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Kl.setFromAxisAngle(e,t),this.quaternion.multiply(Kl),this}rotateOnWorldAxis(e,t){return Kl.setFromAxisAngle(e,t),this.quaternion.premultiply(Kl),this}rotateX(e){return this.rotateOnAxis(bb,e)}rotateY(e){return this.rotateOnAxis(Cb,e)}rotateZ(e){return this.rotateOnAxis(Tb,e)}translateOnAxis(e,t){return Eb.copy(e).applyQuaternion(this.quaternion),this.position.add(Eb.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bb,e)}translateY(e){return this.translateOnAxis(Cb,e)}translateZ(e){return this.translateOnAxis(Tb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Is.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Fp.copy(e):Fp.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),ff.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Is.lookAt(ff,Fp,this.up):Is.lookAt(Fp,ff,this.up),this.quaternion.setFromRotationMatrix(Is),i&&(Is.extractRotation(i.matrixWorld),Kl.setFromRotationMatrix(Is),this.quaternion.premultiply(Kl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Rb),Yl.child=e,this.dispatchEvent(Yl),Yl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wU),gx.child=e,this.dispatchEvent(gx),gx.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Is.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Is.multiply(e.parent.matrixWorld)),e.applyMatrix4(Is),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Rb),Yl.child=e,this.dispatchEvent(Yl),Yl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ff,e,SU),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ff,MU,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let f=0,h=l.length;f<h;f++){const d=l[f];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,f=this.material.length;l<f;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),f=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),y.length>0&&(r.nodes=y)}return r.object=i,r;function o(a){const l=[];for(const f in a){const h=a[f];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Dt.DEFAULT_UP=new F(0,1,0);Dt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Dt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Fi=new F,Ls=new F,vx=new F,Ds=new F,Ql=new F,Zl=new F,Pb=new F,yx=new F,xx=new F,_x=new F,Ax=new Ht,Sx=new Ht,Mx=new Ht;class Lr{constructor(e=new F,t=new F,r=new F){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Fi.subVectors(e,t),i.cross(Fi);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Fi.subVectors(i,t),Ls.subVectors(r,t),vx.subVectors(e,t);const o=Fi.dot(Fi),a=Fi.dot(Ls),l=Fi.dot(vx),f=Ls.dot(Ls),h=Ls.dot(vx),d=o*f-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(f*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ds)===null?!1:Ds.x>=0&&Ds.y>=0&&Ds.x+Ds.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Ds)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ds.x),l.addScaledVector(o,Ds.y),l.addScaledVector(a,Ds.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return Ax.setScalar(0),Sx.setScalar(0),Mx.setScalar(0),Ax.fromBufferAttribute(e,t),Sx.fromBufferAttribute(e,r),Mx.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(Ax,s.x),o.addScaledVector(Sx,s.y),o.addScaledVector(Mx,s.z),o}static isFrontFacing(e,t,r,i){return Fi.subVectors(r,t),Ls.subVectors(e,t),Fi.cross(Ls).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Fi.subVectors(this.c,this.b),Ls.subVectors(this.a,this.b),Fi.cross(Ls).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Lr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Lr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Lr.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Lr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Lr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Ql.subVectors(i,r),Zl.subVectors(s,r),yx.subVectors(e,r);const l=Ql.dot(yx),f=Zl.dot(yx);if(l<=0&&f<=0)return t.copy(r);xx.subVectors(e,i);const h=Ql.dot(xx),d=Zl.dot(xx);if(h>=0&&d<=h)return t.copy(i);const p=l*d-h*f;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(Ql,o);_x.subVectors(e,s);const m=Ql.dot(_x),y=Zl.dot(_x);if(y>=0&&m<=y)return t.copy(s);const _=m*f-l*y;if(_<=0&&f>=0&&y<=0)return a=f/(f-y),t.copy(r).addScaledVector(Zl,a);const x=h*y-m*d;if(x<=0&&d-h>=0&&m-y>=0)return Pb.subVectors(s,i),a=(d-h)/(d-h+(m-y)),t.copy(i).addScaledVector(Pb,a);const g=1/(x+_+p);return o=_*g,a=p*g,t.copy(r).addScaledVector(Ql,o).addScaledVector(Zl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const cI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wo={h:0,s:0,l:0},Op={h:0,s:0,l:0};function wx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Oe{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Yr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,jt.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=jt.workingColorSpace){return this.r=e,this.g=t,this.b=r,jt.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=jt.workingColorSpace){if(e=rS(e,1),t=Mn(t,0,1),r=Mn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=wx(o,s,e+1/3),this.g=wx(o,s,e),this.b=wx(o,s,e-1/3)}return jt.toWorkingColorSpace(this,i),this}setStyle(e,t=Yr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Yr){const r=cI[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zc(e.r),this.g=Zc(e.g),this.b=Zc(e.b),this}copyLinearToSRGB(e){return this.r=lx(e.r),this.g=lx(e.g),this.b=lx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Yr){return jt.fromWorkingColorSpace(ar.copy(this),e),Math.round(Mn(ar.r*255,0,255))*65536+Math.round(Mn(ar.g*255,0,255))*256+Math.round(Mn(ar.b*255,0,255))}getHexString(e=Yr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=jt.workingColorSpace){jt.fromWorkingColorSpace(ar.copy(this),t);const r=ar.r,i=ar.g,s=ar.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,f;const h=(a+o)/2;if(a===o)l=0,f=0;else{const d=o-a;switch(f=h<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=f,e.l=h,e}getRGB(e,t=jt.workingColorSpace){return jt.fromWorkingColorSpace(ar.copy(this),t),e.r=ar.r,e.g=ar.g,e.b=ar.b,e}getStyle(e=Yr){jt.fromWorkingColorSpace(ar.copy(this),e);const t=ar.r,r=ar.g,i=ar.b;return e!==Yr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(wo),this.setHSL(wo.h+e,wo.s+t,wo.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(wo),e.getHSL(Op);const r=Zf(wo.h,Op.h,t),i=Zf(wo.s,Op.s,t),s=Zf(wo.l,Op.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ar=new Oe;Oe.NAMES=cI;let EU=0,Ln=class extends Ki{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:EU++}),this.uuid=ti(),this.name="",this.type="Material",this.blending=Ka,this.side=As,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=gg,this.blendDst=vg,this.blendEquation=Do,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Oe(0,0,0),this.blendAlpha=0,this.depthFunc=sl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=x1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=La,this.stencilZFail=La,this.stencilZPass=La,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ka&&(r.blending=this.blending),this.side!==As&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==gg&&(r.blendSrc=this.blendSrc),this.blendDst!==vg&&(r.blendDst=this.blendDst),this.blendEquation!==Do&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==sl&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==x1&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==La&&(r.stencilFail=this.stencilFail),this.stencilZFail!==La&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==La&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class qr extends Ln{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=Gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Gs=bU();function bU(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const f=l-127;f<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):f<-14?(r[l]=1024>>-f-14,r[l|256]=1024>>-f-14|32768,i[l]=-f-1,i[l|256]=-f-1):f<=15?(r[l]=f+15<<10,r[l|256]=f+15<<10|32768,i[l]=13,i[l|256]=13):f<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let f=l<<13,h=0;for(;!(f&8388608);)f<<=1,h-=8388608;f&=-8388609,h+=947912704,s[l]=f|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Br(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Mn(n,-65504,65504),Gs.floatView[0]=n;const e=Gs.uint32View[0],t=e>>23&511;return Gs.baseTable[t]+((e&8388607)>>Gs.shiftTable[t])}function If(n){const e=n>>10;return Gs.uint32View[0]=Gs.mantissaTable[Gs.offsetTable[e]+(n&1023)]+Gs.exponentTable[e],Gs.floatView[0]}const CU={toHalfFloat:Br,fromHalfFloat:If},Bn=new F,Np=new de;class Gt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Eh,this.updateRanges=[],this.gpuType=Fr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Np.fromBufferAttribute(this,t),Np.applyMatrix3(e),this.setXY(t,Np.x,Np.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Bn.fromBufferAttribute(this,t),Bn.applyMatrix3(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Bn.fromBufferAttribute(this,t),Bn.applyMatrix4(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Bn.fromBufferAttribute(this,t),Bn.applyNormalMatrix(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Bn.fromBufferAttribute(this,t),Bn.transformDirection(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Sr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Et(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array),s=Et(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Eh&&(e.usage=this.usage),e}}class TU extends Gt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class RU extends Gt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class PU extends Gt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class BU extends Gt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class sS extends Gt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class IU extends Gt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class oS extends Gt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class LU extends Gt{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=If(this.array[e*this.itemSize]);return this.normalized&&(t=Sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize]=Br(t),this}getY(e){let t=If(this.array[e*this.itemSize+1]);return this.normalized&&(t=Sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+1]=Br(t),this}getZ(e){let t=If(this.array[e*this.itemSize+2]);return this.normalized&&(t=Sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+2]=Br(t),this}getW(e){let t=If(this.array[e*this.itemSize+3]);return this.normalized&&(t=Sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Et(t,this.array)),this.array[e*this.itemSize+3]=Br(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array)),this.array[e+0]=Br(t),this.array[e+1]=Br(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array)),this.array[e+0]=Br(t),this.array[e+1]=Br(r),this.array[e+2]=Br(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array),s=Et(s,this.array)),this.array[e+0]=Br(t),this.array[e+1]=Br(r),this.array[e+2]=Br(i),this.array[e+3]=Br(s),this}}class nt extends Gt{constructor(e,t,r){super(new Float32Array(e),t,r)}}let DU=0;const mi=new ft,Ex=new Dt,ql=new F,jr=new fr,hf=new fr,Wn=new F;class At extends Ki{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:DU++}),this.uuid=ti(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sI(e)?oS:sS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new wt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return mi.makeRotationFromQuaternion(e),this.applyMatrix4(mi),this}rotateX(e){return mi.makeRotationX(e),this.applyMatrix4(mi),this}rotateY(e){return mi.makeRotationY(e),this.applyMatrix4(mi),this}rotateZ(e){return mi.makeRotationZ(e),this.applyMatrix4(mi),this}translate(e,t,r){return mi.makeTranslation(e,t,r),this.applyMatrix4(mi),this}scale(e,t,r){return mi.makeScale(e,t,r),this.applyMatrix4(mi),this}lookAt(e){return Ex.lookAt(e),Ex.updateMatrix(),this.applyMatrix4(Ex.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ql).negate(),this.translate(ql.x,ql.y,ql.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new nt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];jr.setFromBufferAttribute(s),this.morphTargetsRelative?(Wn.addVectors(this.boundingBox.min,jr.min),this.boundingBox.expandByPoint(Wn),Wn.addVectors(this.boundingBox.max,jr.max),this.boundingBox.expandByPoint(Wn)):(this.boundingBox.expandByPoint(jr.min),this.boundingBox.expandByPoint(jr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new F,1/0);return}if(e){const r=this.boundingSphere.center;if(jr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];hf.setFromBufferAttribute(a),this.morphTargetsRelative?(Wn.addVectors(jr.min,hf.min),jr.expandByPoint(Wn),Wn.addVectors(jr.max,hf.max),jr.expandByPoint(Wn)):(jr.expandByPoint(hf.min),jr.expandByPoint(hf.max))}jr.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Wn.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Wn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let f=0,h=a.count;f<h;f++)Wn.fromBufferAttribute(a,f),l&&(ql.fromBufferAttribute(e,f),Wn.add(ql)),i=Math.max(i,r.distanceToSquared(Wn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gt(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<r.count;L++)a[L]=new F,l[L]=new F;const f=new F,h=new F,d=new F,p=new de,m=new de,y=new de,_=new F,x=new F;function g(L,z,b){f.fromBufferAttribute(r,L),h.fromBufferAttribute(r,z),d.fromBufferAttribute(r,b),p.fromBufferAttribute(s,L),m.fromBufferAttribute(s,z),y.fromBufferAttribute(s,b),h.sub(f),d.sub(f),m.sub(p),y.sub(p);const R=1/(m.x*y.y-y.x*m.y);isFinite(R)&&(_.copy(h).multiplyScalar(y.y).addScaledVector(d,-m.y).multiplyScalar(R),x.copy(d).multiplyScalar(m.x).addScaledVector(h,-y.x).multiplyScalar(R),a[L].add(_),a[z].add(_),a[b].add(_),l[L].add(x),l[z].add(x),l[b].add(x))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let L=0,z=S.length;L<z;++L){const b=S[L],R=b.start,$=b.count;for(let X=R,ee=R+$;X<ee;X+=3)g(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const M=new F,E=new F,P=new F,T=new F;function B(L){P.fromBufferAttribute(i,L),T.copy(P);const z=a[L];M.copy(z),M.sub(P.multiplyScalar(P.dot(z))).normalize(),E.crossVectors(T,z);const R=E.dot(l[L])<0?-1:1;o.setXYZW(L,M.x,M.y,M.z,R)}for(let L=0,z=S.length;L<z;++L){const b=S[L],R=b.start,$=b.count;for(let X=R,ee=R+$;X<ee;X+=3)B(e.getX(X+0)),B(e.getX(X+1)),B(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Gt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new F,s=new F,o=new F,a=new F,l=new F,f=new F,h=new F,d=new F;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),_=e.getX(p+1),x=e.getX(p+2);i.fromBufferAttribute(t,y),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,x),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),a.fromBufferAttribute(r,y),l.fromBufferAttribute(r,_),f.fromBufferAttribute(r,x),a.add(h),l.add(h),f.add(h),r.setXYZ(y,a.x,a.y,a.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(x,f.x,f.y,f.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Wn.fromBufferAttribute(e,t),Wn.normalize(),e.setXYZ(t,Wn.x,Wn.y,Wn.z)}toNonIndexed(){function e(a,l){const f=a.array,h=a.itemSize,d=a.normalized,p=new f.constructor(l.length*h);let m=0,y=0;for(let _=0,x=l.length;_<x;_++){a.isInterleavedBufferAttribute?m=l[_]*a.data.stride+a.offset:m=l[_]*h;for(let g=0;g<h;g++)p[y++]=f[m++]}return new Gt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new At,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],f=e(l,r);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const l=[],f=s[a];for(let h=0,d=f.length;h<d;h++){const p=f[h],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const f=r[l];e.data.attributes[l]=f.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],h=[];for(let d=0,p=f.length;d<p;d++){const m=f[d];h.push(m.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const f in i){const h=i[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],d=s[f];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const d=o[f];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Bb=new ft,ya=new gl,Up=new Zn,Ib=new F,kp=new F,Hp=new F,zp=new F,bx=new F,Gp=new F,Lb=new F,Vp=new F;class En extends Dt{constructor(e=new At,t=new qr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Gp.set(0,0,0);for(let l=0,f=s.length;l<f;l++){const h=a[l],d=s[l];h!==0&&(bx.fromBufferAttribute(d,e),o?Gp.addScaledVector(bx,h):Gp.addScaledVector(bx.sub(t),h))}t.add(Gp)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Up.copy(r.boundingSphere),Up.applyMatrix4(s),ya.copy(e.ray).recast(e.near),!(Up.containsPoint(ya.origin)===!1&&(ya.intersectSphere(Up,Ib)===null||ya.origin.distanceToSquared(Ib)>(e.far-e.near)**2))&&(Bb.copy(s).invert(),ya.copy(e.ray).applyMatrix4(Bb),!(r.boundingBox!==null&&ya.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,ya)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,f=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,_=p.length;y<_;y++){const x=p[y],g=o[x.materialIndex],S=Math.max(x.start,m.start),M=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let E=S,P=M;E<P;E+=3){const T=a.getX(E),B=a.getX(E+1),L=a.getX(E+2);i=Wp(this,g,e,r,f,h,d,T,B,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const y=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let x=y,g=_;x<g;x+=3){const S=a.getX(x),M=a.getX(x+1),E=a.getX(x+2);i=Wp(this,o,e,r,f,h,d,S,M,E),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,_=p.length;y<_;y++){const x=p[y],g=o[x.materialIndex],S=Math.max(x.start,m.start),M=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let E=S,P=M;E<P;E+=3){const T=E,B=E+1,L=E+2;i=Wp(this,g,e,r,f,h,d,T,B,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const y=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let x=y,g=_;x<g;x+=3){const S=x,M=x+1,E=x+2;i=Wp(this,o,e,r,f,h,d,S,M,E),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}}}function FU(n,e,t,r,i,s,o,a){let l;if(e.side===wr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===As,a),l===null)return null;Vp.copy(a),Vp.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Vp);return f<t.near||f>t.far?null:{distance:f,point:Vp.clone(),object:n}}function Wp(n,e,t,r,i,s,o,a,l,f){n.getVertexPosition(a,kp),n.getVertexPosition(l,Hp),n.getVertexPosition(f,zp);const h=FU(n,e,t,r,kp,Hp,zp,Lb);if(h){const d=new F;Lr.getBarycoord(Lb,kp,Hp,zp,d),i&&(h.uv=Lr.getInterpolatedAttribute(i,a,l,f,d,new de)),s&&(h.uv1=Lr.getInterpolatedAttribute(s,a,l,f,d,new de)),o&&(h.normal=Lr.getInterpolatedAttribute(o,a,l,f,d,new F),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c:f,normal:new F,materialIndex:0};Lr.getNormal(kp,Hp,zp,p.normal),h.face=p,h.barycoord=d}return h}class vl extends At{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],f=[],h=[],d=[];let p=0,m=0;y("z","y","x",-1,-1,r,t,e,o,s,0),y("z","y","x",1,-1,r,t,-e,o,s,1),y("x","z","y",1,1,e,r,t,i,o,2),y("x","z","y",1,-1,e,r,-t,i,o,3),y("x","y","z",1,-1,e,t,r,i,s,4),y("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new nt(f,3)),this.setAttribute("normal",new nt(h,3)),this.setAttribute("uv",new nt(d,2));function y(_,x,g,S,M,E,P,T,B,L,z){const b=E/B,R=P/L,$=E/2,X=P/2,ee=T/2,le=B+1,Z=L+1;let pe=0,U=0;const Q=new F;for(let J=0;J<Z;J++){const se=J*R-X;for(let _e=0;_e<le;_e++){const De=_e*b-$;Q[_]=De*S,Q[x]=se*M,Q[g]=ee,f.push(Q.x,Q.y,Q.z),Q[_]=0,Q[x]=0,Q[g]=T>0?1:-1,h.push(Q.x,Q.y,Q.z),d.push(_e/B),d.push(1-J/L),pe+=1}}for(let J=0;J<L;J++)for(let se=0;se<B;se++){const _e=p+se+le*J,De=p+se+le*(J+1),ie=p+(se+1)+le*(J+1),ye=p+(se+1)+le*J;l.push(_e,De,ye),l.push(De,ie,ye),U+=6}a.addGroup(m,U,z),m+=U,p+=pe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function _r(n){const e={};for(let t=0;t<n.length;t++){const r=hu(n[t]);for(const i in r)e[i]=r[i]}return e}function OU(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function uI(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:jt.workingColorSpace}const fI={clone:hu,merge:_r};var NU=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,UU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ji extends Ln{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=NU,this.fragmentShader=UU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hu(e.uniforms),this.uniformsGroups=OU(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class $h extends Dt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=ps}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Eo=new F,Db=new de,Fb=new de;class an extends $h{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Qa*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fu*2*Math.atan(Math.tan(Qa*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Eo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Eo.x,Eo.y).multiplyScalar(-e/Eo.z),Eo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Eo.x,Eo.y).multiplyScalar(-e/Eo.z)}getViewSize(e,t){return this.getViewBounds(e,Db,Fb),t.subVectors(Fb,Db)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Qa*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,f=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/f,i*=o.width/l,r*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ec=-90,tc=1;class hI extends Dt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new an(ec,tc,e,t);i.layers=this.layers,this.add(i);const s=new an(ec,tc,e,t);s.layers=this.layers,this.add(s);const o=new an(ec,tc,e,t);o.layers=this.layers,this.add(o);const a=new an(ec,tc,e,t);a.layers=this.layers,this.add(a);const l=new an(ec,tc,e,t);l.layers=this.layers,this.add(l);const f=new an(ec,tc,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const f of t)this.remove(f);if(e===ps)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===bh)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,f,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,f),r.texture.generateMipmaps=_,e.setRenderTarget(r,5,i),e.render(t,h),e.setRenderTarget(d,p,m),e.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class Xh extends Zt{constructor(e,t,r,i,s,o,a,l,f,h){e=e!==void 0?e:[],t=t!==void 0?t:eo,super(e,t,r,i,s,o,a,l,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class dI extends ji{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Xh(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:wn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new vl(5,5,5),s=new Ji({name:"CubemapFromEquirect",uniforms:hu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:wr,blending:Js});s.uniforms.tEquirect.value=t;const o=new En(i,s),a=t.minFilter;return t.minFilter===Si&&(t.minFilter=wn),new hI(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const Cx=new F,kU=new F,HU=new wt;class Hs{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Cx.subVectors(r,t).cross(kU.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Cx),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||HU.getNormalMatrix(e),i=this.coplanarPoint(Cx).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const xa=new Zn,$p=new F;class jh{constructor(e=new Hs,t=new Hs,r=new Hs,i=new Hs,s=new Hs,o=new Hs){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ps){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],f=i[4],h=i[5],d=i[6],p=i[7],m=i[8],y=i[9],_=i[10],x=i[11],g=i[12],S=i[13],M=i[14],E=i[15];if(r[0].setComponents(l-s,p-f,x-m,E-g).normalize(),r[1].setComponents(l+s,p+f,x+m,E+g).normalize(),r[2].setComponents(l+o,p+h,x+y,E+S).normalize(),r[3].setComponents(l-o,p-h,x-y,E-S).normalize(),r[4].setComponents(l-a,p-d,x-_,E-M).normalize(),t===ps)r[5].setComponents(l+a,p+d,x+_,E+M).normalize();else if(t===bh)r[5].setComponents(a,d,_,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),xa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),xa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(xa)}intersectsSprite(e){return xa.center.set(0,0,0),xa.radius=.7071067811865476,xa.applyMatrix4(e.matrixWorld),this.intersectsSphere(xa)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if($p.x=i.normal.x>0?e.max.x:e.min.x,$p.y=i.normal.y>0?e.max.y:e.min.y,$p.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint($p)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function pI(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function zU(n){const e=new WeakMap;function t(a,l){const f=a.array,h=a.usage,d=f.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,f,h),a.onUploadCallback();let m;if(f instanceof Float32Array)m=n.FLOAT;else if(f instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)m=n.SHORT;else if(f instanceof Uint32Array)m=n.UNSIGNED_INT;else if(f instanceof Int32Array)m=n.INT;else if(f instanceof Int8Array)m=n.BYTE;else if(f instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:p,type:m,bytesPerElement:f.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,f){const h=l.array,d=l.updateRanges;if(n.bindBuffer(f,a),d.length===0)n.bufferSubData(f,0,h);else{d.sort((m,y)=>m.start-y.start);let p=0;for(let m=1;m<d.length;m++){const y=d[p],_=d[m];_.start<=y.start+y.count+1?y.count=Math.max(y.count,_.start+_.count-y.start):(++p,d[p]=_)}d.length=p+1;for(let m=0,y=d.length;m<y;m++){const _=d[m];n.bufferSubData(f,_.start*h.BYTES_PER_ELEMENT,h,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const f=e.get(a);if(f===void 0)e.set(a,t(a,l));else if(f.version<a.version){if(f.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(f.buffer,a,l),f.version=a.version}}return{get:i,remove:s,update:o}}class _u extends At{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),f=a+1,h=l+1,d=e/a,p=t/l,m=[],y=[],_=[],x=[];for(let g=0;g<h;g++){const S=g*p-o;for(let M=0;M<f;M++){const E=M*d-s;y.push(E,-S,0),_.push(0,0,1),x.push(M/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const M=S+f*g,E=S+f*(g+1),P=S+1+f*(g+1),T=S+1+f*g;m.push(M,E,T),m.push(E,P,T)}this.setIndex(m),this.setAttribute("position",new nt(y,3)),this.setAttribute("normal",new nt(_,3)),this.setAttribute("uv",new nt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _u(e.width,e.height,e.widthSegments,e.heightSegments)}}var GU=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,VU=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,WU=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,$U=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XU=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,jU=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,JU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,KU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,YU=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,QU=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ZU=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,qU=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ek=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,tk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,nk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,rk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ik=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ok=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ak=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,lk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ck=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,uk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,fk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,hk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,dk=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,pk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,mk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yk="gl_FragColor = linearToOutputTexel( gl_FragColor );",xk=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,_k=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ak=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Sk=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Mk=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ek=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bk=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Ck=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Tk=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Rk=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Pk=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Bk=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ik=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Lk=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Dk=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Fk=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ok=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Nk=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Uk=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,kk=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Hk=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,zk=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Gk=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Vk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Wk=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$k=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Xk=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jk=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Jk=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Kk=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Yk=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Qk=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Zk=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,qk=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,e4=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,t4=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,n4=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,r4=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,i4=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,s4=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,o4=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,a4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,l4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,c4=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,u4=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,f4=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,h4=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,d4=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,p4=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,m4=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,g4=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,v4=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,y4=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,x4=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_4=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,A4=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,S4=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,M4=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,w4=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,E4=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,b4=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,C4=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,T4=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,R4=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,P4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,B4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,I4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,L4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,D4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,F4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,O4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,N4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,U4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,k4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,H4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const z4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,G4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,V4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,W4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,X4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,J4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,K4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Y4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Q4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Z4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,q4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,oH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_H=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bt={alphahash_fragment:GU,alphahash_pars_fragment:VU,alphamap_fragment:WU,alphamap_pars_fragment:$U,alphatest_fragment:XU,alphatest_pars_fragment:jU,aomap_fragment:JU,aomap_pars_fragment:KU,batching_pars_vertex:YU,batching_vertex:QU,begin_vertex:ZU,beginnormal_vertex:qU,bsdfs:ek,iridescence_fragment:tk,bumpmap_pars_fragment:nk,clipping_planes_fragment:rk,clipping_planes_pars_fragment:ik,clipping_planes_pars_vertex:sk,clipping_planes_vertex:ok,color_fragment:ak,color_pars_fragment:lk,color_pars_vertex:ck,color_vertex:uk,common:fk,cube_uv_reflection_fragment:hk,defaultnormal_vertex:dk,displacementmap_pars_vertex:pk,displacementmap_vertex:mk,emissivemap_fragment:gk,emissivemap_pars_fragment:vk,colorspace_fragment:yk,colorspace_pars_fragment:xk,envmap_fragment:_k,envmap_common_pars_fragment:Ak,envmap_pars_fragment:Sk,envmap_pars_vertex:Mk,envmap_physical_pars_fragment:Dk,envmap_vertex:wk,fog_vertex:Ek,fog_pars_vertex:bk,fog_fragment:Ck,fog_pars_fragment:Tk,gradientmap_pars_fragment:Rk,lightmap_pars_fragment:Pk,lights_lambert_fragment:Bk,lights_lambert_pars_fragment:Ik,lights_pars_begin:Lk,lights_toon_fragment:Fk,lights_toon_pars_fragment:Ok,lights_phong_fragment:Nk,lights_phong_pars_fragment:Uk,lights_physical_fragment:kk,lights_physical_pars_fragment:Hk,lights_fragment_begin:zk,lights_fragment_maps:Gk,lights_fragment_end:Vk,logdepthbuf_fragment:Wk,logdepthbuf_pars_fragment:$k,logdepthbuf_pars_vertex:Xk,logdepthbuf_vertex:jk,map_fragment:Jk,map_pars_fragment:Kk,map_particle_fragment:Yk,map_particle_pars_fragment:Qk,metalnessmap_fragment:Zk,metalnessmap_pars_fragment:qk,morphinstance_vertex:e4,morphcolor_vertex:t4,morphnormal_vertex:n4,morphtarget_pars_vertex:r4,morphtarget_vertex:i4,normal_fragment_begin:s4,normal_fragment_maps:o4,normal_pars_fragment:a4,normal_pars_vertex:l4,normal_vertex:c4,normalmap_pars_fragment:u4,clearcoat_normal_fragment_begin:f4,clearcoat_normal_fragment_maps:h4,clearcoat_pars_fragment:d4,iridescence_pars_fragment:p4,opaque_fragment:m4,packing:g4,premultiplied_alpha_fragment:v4,project_vertex:y4,dithering_fragment:x4,dithering_pars_fragment:_4,roughnessmap_fragment:A4,roughnessmap_pars_fragment:S4,shadowmap_pars_fragment:M4,shadowmap_pars_vertex:w4,shadowmap_vertex:E4,shadowmask_pars_fragment:b4,skinbase_vertex:C4,skinning_pars_vertex:T4,skinning_vertex:R4,skinnormal_vertex:P4,specularmap_fragment:B4,specularmap_pars_fragment:I4,tonemapping_fragment:L4,tonemapping_pars_fragment:D4,transmission_fragment:F4,transmission_pars_fragment:O4,uv_pars_fragment:N4,uv_pars_vertex:U4,uv_vertex:k4,worldpos_vertex:H4,background_vert:z4,background_frag:G4,backgroundCube_vert:V4,backgroundCube_frag:W4,cube_vert:$4,cube_frag:X4,depth_vert:j4,depth_frag:J4,distanceRGBA_vert:K4,distanceRGBA_frag:Y4,equirect_vert:Q4,equirect_frag:Z4,linedashed_vert:q4,linedashed_frag:eH,meshbasic_vert:tH,meshbasic_frag:nH,meshlambert_vert:rH,meshlambert_frag:iH,meshmatcap_vert:sH,meshmatcap_frag:oH,meshnormal_vert:aH,meshnormal_frag:lH,meshphong_vert:cH,meshphong_frag:uH,meshphysical_vert:fH,meshphysical_frag:hH,meshtoon_vert:dH,meshtoon_frag:pH,points_vert:mH,points_frag:gH,shadow_vert:vH,shadow_frag:yH,sprite_vert:xH,sprite_frag:_H},Ue={common:{diffuse:{value:new Oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},envMapRotation:{value:new wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new Oe(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},zi={basic:{uniforms:_r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:_r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Oe(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:_r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:_r([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new Oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:_r([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new Oe(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:_r([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:_r([Ue.points,Ue.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:_r([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:_r([Ue.common,Ue.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:_r([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:_r([Ue.sprite,Ue.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new wt}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:_r([Ue.common,Ue.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:_r([Ue.lights,Ue.fog,{color:{value:new Oe(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};zi.physical={uniforms:_r([zi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new Oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new Oe(0)},specularColor:{value:new Oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new de},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};const Xp={r:0,b:0,g:0},_a=new Er,AH=new ft;function SH(n,e,t,r,i,s,o){const a=new Oe(0);let l=s===!0?0:1,f,h,d=null,p=0,m=null;function y(S){let M=S.isScene===!0?S.background:null;return M&&M.isTexture&&(M=(S.backgroundBlurriness>0?t:e).get(M)),M}function _(S){let M=!1;const E=y(S);E===null?g(a,l):E&&E.isColor&&(g(E,1),M=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?r.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(S,M){const E=y(M);E&&(E.isCubeTexture||E.mapping===yu)?(h===void 0&&(h=new En(new vl(1,1,1),new Ji({name:"BackgroundCubeMaterial",uniforms:hu(zi.backgroundCube.uniforms),vertexShader:zi.backgroundCube.vertexShader,fragmentShader:zi.backgroundCube.fragmentShader,side:wr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(P,T,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),_a.copy(M.backgroundRotation),_a.x*=-1,_a.y*=-1,_a.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(_a.y*=-1,_a.z*=-1),h.material.uniforms.envMap.value=E,h.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(AH.makeRotationFromEuler(_a)),h.material.toneMapped=jt.getTransfer(E.colorSpace)!==en,(d!==E||p!==E.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=E,p=E.version,m=n.toneMapping),h.layers.enableAll(),S.unshift(h,h.geometry,h.material,0,0,null)):E&&E.isTexture&&(f===void 0&&(f=new En(new _u(2,2),new Ji({name:"BackgroundMaterial",uniforms:hu(zi.background.uniforms),vertexShader:zi.background.vertexShader,fragmentShader:zi.background.fragmentShader,side:As,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(f)),f.material.uniforms.t2D.value=E,f.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,f.material.toneMapped=jt.getTransfer(E.colorSpace)!==en,E.matrixAutoUpdate===!0&&E.updateMatrix(),f.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||p!==E.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,d=E,p=E.version,m=n.toneMapping),f.layers.enableAll(),S.unshift(f,f.geometry,f.material,0,0,null))}function g(S,M){S.getRGB(Xp,uI(n)),r.buffers.color.setClear(Xp.r,Xp.g,Xp.b,M,o)}return{getClearColor:function(){return a},setClearColor:function(S,M=1){a.set(S),l=M,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,g(a,l)},render:_,addToRenderList:x}}function MH(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(b,R,$,X,ee){let le=!1;const Z=d(X,$,R);s!==Z&&(s=Z,f(s.object)),le=m(b,X,$,ee),le&&y(b,X,$,ee),ee!==null&&e.update(ee,n.ELEMENT_ARRAY_BUFFER),(le||o)&&(o=!1,E(b,R,$,X),ee!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function l(){return n.createVertexArray()}function f(b){return n.bindVertexArray(b)}function h(b){return n.deleteVertexArray(b)}function d(b,R,$){const X=$.wireframe===!0;let ee=r[b.id];ee===void 0&&(ee={},r[b.id]=ee);let le=ee[R.id];le===void 0&&(le={},ee[R.id]=le);let Z=le[X];return Z===void 0&&(Z=p(l()),le[X]=Z),Z}function p(b){const R=[],$=[],X=[];for(let ee=0;ee<t;ee++)R[ee]=0,$[ee]=0,X[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:$,attributeDivisors:X,object:b,attributes:{},index:null}}function m(b,R,$,X){const ee=s.attributes,le=R.attributes;let Z=0;const pe=$.getAttributes();for(const U in pe)if(pe[U].location>=0){const J=ee[U];let se=le[U];if(se===void 0&&(U==="instanceMatrix"&&b.instanceMatrix&&(se=b.instanceMatrix),U==="instanceColor"&&b.instanceColor&&(se=b.instanceColor)),J===void 0||J.attribute!==se||se&&J.data!==se.data)return!0;Z++}return s.attributesNum!==Z||s.index!==X}function y(b,R,$,X){const ee={},le=R.attributes;let Z=0;const pe=$.getAttributes();for(const U in pe)if(pe[U].location>=0){let J=le[U];J===void 0&&(U==="instanceMatrix"&&b.instanceMatrix&&(J=b.instanceMatrix),U==="instanceColor"&&b.instanceColor&&(J=b.instanceColor));const se={};se.attribute=J,J&&J.data&&(se.data=J.data),ee[U]=se,Z++}s.attributes=ee,s.attributesNum=Z,s.index=X}function _(){const b=s.newAttributes;for(let R=0,$=b.length;R<$;R++)b[R]=0}function x(b){g(b,0)}function g(b,R){const $=s.newAttributes,X=s.enabledAttributes,ee=s.attributeDivisors;$[b]=1,X[b]===0&&(n.enableVertexAttribArray(b),X[b]=1),ee[b]!==R&&(n.vertexAttribDivisor(b,R),ee[b]=R)}function S(){const b=s.newAttributes,R=s.enabledAttributes;for(let $=0,X=R.length;$<X;$++)R[$]!==b[$]&&(n.disableVertexAttribArray($),R[$]=0)}function M(b,R,$,X,ee,le,Z){Z===!0?n.vertexAttribIPointer(b,R,$,ee,le):n.vertexAttribPointer(b,R,$,X,ee,le)}function E(b,R,$,X){_();const ee=X.attributes,le=$.getAttributes(),Z=R.defaultAttributeValues;for(const pe in le){const U=le[pe];if(U.location>=0){let Q=ee[pe];if(Q===void 0&&(pe==="instanceMatrix"&&b.instanceMatrix&&(Q=b.instanceMatrix),pe==="instanceColor"&&b.instanceColor&&(Q=b.instanceColor)),Q!==void 0){const J=Q.normalized,se=Q.itemSize,_e=e.get(Q);if(_e===void 0)continue;const De=_e.buffer,ie=_e.type,ye=_e.bytesPerElement,Pe=ie===n.INT||ie===n.UNSIGNED_INT||Q.gpuType===D0;if(Q.isInterleavedBufferAttribute){const we=Q.data,st=we.stride,lt=Q.offset;if(we.isInstancedInterleavedBuffer){for(let et=0;et<U.locationSize;et++)g(U.location+et,we.meshPerAttribute);b.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let et=0;et<U.locationSize;et++)x(U.location+et);n.bindBuffer(n.ARRAY_BUFFER,De);for(let et=0;et<U.locationSize;et++)M(U.location+et,se/U.locationSize,ie,J,st*ye,(lt+se/U.locationSize*et)*ye,Pe)}else{if(Q.isInstancedBufferAttribute){for(let we=0;we<U.locationSize;we++)g(U.location+we,Q.meshPerAttribute);b.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let we=0;we<U.locationSize;we++)x(U.location+we);n.bindBuffer(n.ARRAY_BUFFER,De);for(let we=0;we<U.locationSize;we++)M(U.location+we,se/U.locationSize,ie,J,se*ye,se/U.locationSize*we*ye,Pe)}}else if(Z!==void 0){const J=Z[pe];if(J!==void 0)switch(J.length){case 2:n.vertexAttrib2fv(U.location,J);break;case 3:n.vertexAttrib3fv(U.location,J);break;case 4:n.vertexAttrib4fv(U.location,J);break;default:n.vertexAttrib1fv(U.location,J)}}}}S()}function P(){L();for(const b in r){const R=r[b];for(const $ in R){const X=R[$];for(const ee in X)h(X[ee].object),delete X[ee];delete R[$]}delete r[b]}}function T(b){if(r[b.id]===void 0)return;const R=r[b.id];for(const $ in R){const X=R[$];for(const ee in X)h(X[ee].object),delete X[ee];delete R[$]}delete r[b.id]}function B(b){for(const R in r){const $=r[R];if($[b.id]===void 0)continue;const X=$[b.id];for(const ee in X)h(X[ee].object),delete X[ee];delete $[b.id]}}function L(){z(),o=!0,s!==i&&(s=i,f(s.object))}function z(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:L,resetDefaultState:z,dispose:P,releaseStatesOfGeometry:T,releaseStatesOfProgram:B,initAttributes:_,enableAttribute:x,disableUnusedAttributes:S}}function wH(n,e,t){let r;function i(f){r=f}function s(f,h){n.drawArrays(r,f,h),t.update(h,r,1)}function o(f,h,d){d!==0&&(n.drawArraysInstanced(r,f,h,d),t.update(h,r,d))}function a(f,h,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,f,0,h,0,d);let m=0;for(let y=0;y<d;y++)m+=h[y];t.update(m,r,1)}function l(f,h,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<f.length;y++)o(f[y],h[y],p[y]);else{m.multiDrawArraysInstancedWEBGL(r,f,0,h,0,p,0,d);let y=0;for(let _=0;_<d;_++)y+=h[_];for(let _=0;_<p.length;_++)t.update(y,r,p[_])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function EH(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(B){return!(B!==ur&&r.convert(B)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(B){const L=B===xu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(B!==Xi&&r.convert(B)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&B!==Fr&&!L)}function l(B){if(B==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const h=l(f);h!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",h,"instead."),f=h);const d=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(p===!0){const B=e.get("EXT_clip_control");B.clipControlEXT(B.LOWER_LEFT_EXT,B.ZERO_TO_ONE_EXT)}const m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),P=y>0,T=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:f,logarithmicDepthBuffer:d,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:y,maxTextureSize:_,maxCubemapSize:x,maxAttributes:g,maxVertexUniforms:S,maxVaryings:M,maxFragmentUniforms:E,vertexTextures:P,maxSamples:T}}function bH(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Hs,a=new wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const y=d.clippingPlanes,_=d.clipIntersection,x=d.clipShadows,g=n.get(d);if(!i||y===null||y.length===0||s&&!x)s?h(null):f();else{const S=s?0:r,M=S*4;let E=g.clippingState||null;l.value=E,E=h(y,p,M,m);for(let P=0;P!==M;++P)E[P]=t[P];g.clippingState=E,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function f(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(d,p,m,y){const _=d!==null?d.length:0;let x=null;if(_!==0){if(x=l.value,y!==!0||x===null){const g=m+_*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<g)&&(x=new Float32Array(g));for(let M=0,E=m;M!==_;++M,E+=4)o.copy(d[M]).applyMatrix4(S,a),o.normal.toArray(x,E),x[E+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,x}}function CH(n){let e=new WeakMap;function t(o,a){return a===xh?o.mapping=eo:a===_h&&(o.mapping=Jo),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===xh||a===_h)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const f=new dI(l.height);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",i),t(f.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Mi extends $h{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Gc=4,Ob=[.125,.215,.35,.446,.526,.582],Oa=20,Tx=new Mi,Nb=new Oe;let Rx=null,Px=0,Bx=0,Ix=!1;const Da=(1+Math.sqrt(5))/2,nc=1/Da,Ub=[new F(-Da,nc,0),new F(Da,nc,0),new F(-nc,0,Da),new F(nc,0,Da),new F(0,Da,-nc),new F(0,Da,nc),new F(-1,1,-1),new F(1,1,-1),new F(-1,1,1),new F(1,1,1)];class A1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Rx=this._renderer.getRenderTarget(),Px=this._renderer.getActiveCubeFace(),Bx=this._renderer.getActiveMipmapLevel(),Ix=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=zb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Hb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Rx,Px,Bx),this._renderer.xr.enabled=Ix,e.scissorTest=!1,jp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===eo||e.mapping===Jo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Rx=this._renderer.getRenderTarget(),Px=this._renderer.getActiveCubeFace(),Bx=this._renderer.getActiveMipmapLevel(),Ix=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:wn,minFilter:wn,generateMipmaps:!1,type:xu,format:ur,colorSpace:io,depthBuffer:!1},i=kb(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=kb(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=TH(s)),this._blurMaterial=RH(s,e,t)}return i}_compileMaterial(e){const t=new En(this._lodPlanes[0],e);this._renderer.compile(t,Tx)}_sceneToCubeUV(e,t,r,i){const a=new an(90,1,t,r),l=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(Nb),h.toneMapping=vs,h.autoClear=!1;const m=new qr({name:"PMREM.Background",side:wr,depthWrite:!1,depthTest:!1}),y=new En(new vl,m);let _=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,_=!0):(m.color.copy(Nb),_=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(f[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,f[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,f[g]));const M=this._cubeSize;jp(i,S*M,g>2?M:0,M,M),h.setRenderTarget(i),_&&h.render(y,a),h.render(e,a)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=x}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===eo||e.mapping===Jo;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=zb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Hb());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new En(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;jp(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,Tx)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Ub[(i-s-1)%Ub.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new En(this._lodPlanes[i],f),p=f.uniforms,m=this._sizeLods[r]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Oa-1),_=s/y,x=isFinite(s)?1+Math.floor(h*_):Oa;x>Oa&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Oa}`);const g=[];let S=0;for(let B=0;B<Oa;++B){const L=B/_,z=Math.exp(-L*L/2);g.push(z),B===0?S+=z:B<x&&(S+=2*z)}for(let B=0;B<g.length;B++)g[B]=g[B]/S;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=y,p.mipInt.value=M-r;const E=this._sizeLods[i],P=3*E*(i>M-Gc?i-M+Gc:0),T=4*(this._cubeSize-E);jp(t,P,T,3*E,2*E),l.setRenderTarget(t),l.render(d,Tx)}}function TH(n){const e=[],t=[],r=[];let i=n;const s=n-Gc+1+Ob.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Gc?l=Ob[o-n+Gc-1]:o===0&&(l=0),r.push(l);const f=1/(a-2),h=-f,d=1+f,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,y=6,_=3,x=2,g=1,S=new Float32Array(_*y*m),M=new Float32Array(x*y*m),E=new Float32Array(g*y*m);for(let T=0;T<m;T++){const B=T%3*2/3-1,L=T>2?0:-1,z=[B,L,0,B+2/3,L,0,B+2/3,L+1,0,B,L,0,B+2/3,L+1,0,B,L+1,0];S.set(z,_*y*T),M.set(p,x*y*T);const b=[T,T,T,T,T,T];E.set(b,g*y*T)}const P=new At;P.setAttribute("position",new Gt(S,_)),P.setAttribute("uv",new Gt(M,x)),P.setAttribute("faceIndex",new Gt(E,g)),e.push(P),i>Gc&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function kb(n,e,t){const r=new ji(n,e,t);return r.texture.mapping=yu,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function jp(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function RH(n,e,t){const r=new Float32Array(Oa),i=new F(0,1,0);return new Ji({name:"SphericalGaussianBlur",defines:{n:Oa,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:aS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function Hb(){return new Ji({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:aS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function zb(){return new Ji({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:aS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function aS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PH(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,f=l===xh||l===_h,h=l===eo||l===Jo;if(f||h){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new A1(n)),d=f?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return f&&m&&m.height>0||h&&m&&i(m)?(t===null&&(t=new A1(n)),d=f?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const f=6;for(let h=0;h<f;h++)a[h]!==void 0&&l++;return l===f}function s(a){const l=a.target;l.removeEventListener("dispose",s);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function BH(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Gm("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function IH(n,e,t,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const _=p.morphAttributes[y];for(let x=0,g=_.length;x<g;x++)e.remove(_[x])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const y in p)e.update(p[y],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const y in m){const _=m[y];for(let x=0,g=_.length;x<g;x++)e.update(_[x],n.ARRAY_BUFFER)}}function f(d){const p=[],m=d.index,y=d.attributes.position;let _=0;if(m!==null){const S=m.array;_=m.version;for(let M=0,E=S.length;M<E;M+=3){const P=S[M+0],T=S[M+1],B=S[M+2];p.push(P,T,T,B,B,P)}}else if(y!==void 0){const S=y.array;_=y.version;for(let M=0,E=S.length/3-1;M<E;M+=3){const P=M+0,T=M+1,B=M+2;p.push(P,T,T,B,B,P)}}else return;const x=new(sI(p)?oS:sS)(p,1);x.version=_;const g=s.get(d);g&&e.remove(g),s.set(d,x)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&f(d)}else f(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function LH(n,e,t){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(r,m,s,p*o),t.update(m,r,1)}function f(p,m,y){y!==0&&(n.drawElementsInstanced(r,m,s,p*o,y),t.update(m,r,y))}function h(p,m,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,p,0,y);let x=0;for(let g=0;g<y;g++)x+=m[g];t.update(x,r,1)}function d(p,m,y,_){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)f(p[g]/o,m[g],_[g]);else{x.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,_,0,y);let g=0;for(let S=0;S<y;S++)g+=m[S];for(let S=0;S<_.length;S++)t.update(g,r,_[S])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=f,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function DH(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function FH(n,e,t){const r=new WeakMap,i=new Ht;function s(o,a,l){const f=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=h!==void 0?h.length:0;let p=r.get(a);if(p===void 0||p.count!==d){let z=function(){B.dispose(),r.delete(a),a.removeEventListener("dispose",z)};p!==void 0&&p.texture.dispose();const m=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let M=0;m===!0&&(M=1),y===!0&&(M=2),_===!0&&(M=3);let E=a.attributes.position.count*M,P=1;E>e.maxTextureSize&&(P=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*P*4*d),B=new G0(T,E,P,d);B.type=Fr,B.needsUpdate=!0;const L=M*4;for(let b=0;b<d;b++){const R=x[b],$=g[b],X=S[b],ee=E*P*4*b;for(let le=0;le<R.count;le++){const Z=le*L;m===!0&&(i.fromBufferAttribute(R,le),T[ee+Z+0]=i.x,T[ee+Z+1]=i.y,T[ee+Z+2]=i.z,T[ee+Z+3]=0),y===!0&&(i.fromBufferAttribute($,le),T[ee+Z+4]=i.x,T[ee+Z+5]=i.y,T[ee+Z+6]=i.z,T[ee+Z+7]=0),_===!0&&(i.fromBufferAttribute(X,le),T[ee+Z+8]=i.x,T[ee+Z+9]=i.y,T[ee+Z+10]=i.z,T[ee+Z+11]=X.itemSize===4?i.w:1)}}p={count:d,texture:B,size:new de(E,P)},r.set(a,p),a.addEventListener("dispose",z)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let m=0;for(let _=0;_<f.length;_++)m+=f[_];const y=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",f)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function OH(n,e,t,r){let i=new WeakMap;function s(l){const f=r.render.frame,h=l.geometry,d=e.get(l,h);if(i.get(d)!==f&&(e.update(d),i.set(d,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==f&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,f))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==f&&(p.update(),i.set(p,f))}return d}function o(){i=new WeakMap}function a(l){const f=l.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}class lS extends Zt{constructor(e,t,r,i,s,o,a,l,f,h=Ya){if(h!==Ya&&h!==al)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Ya&&(r=to),r===void 0&&h===al&&(r=ol),super(null,i,s,o,a,l,h,r,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Un,this.minFilter=l!==void 0?l:Un,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const mI=new Zt,Gb=new lS(1,1),gI=new G0,vI=new iS,yI=new Xh,Vb=[],Wb=[],$b=new Float32Array(16),Xb=new Float32Array(9),jb=new Float32Array(4);function Au(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=Vb[i];if(s===void 0&&(s=new Float32Array(i),Vb[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function kn(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Hn(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function V0(n,e){let t=Wb[e];t===void 0&&(t=new Int32Array(e),Wb[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function NH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function UH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(kn(t,e))return;n.uniform2fv(this.addr,e),Hn(t,e)}}function kH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(kn(t,e))return;n.uniform3fv(this.addr,e),Hn(t,e)}}function HH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(kn(t,e))return;n.uniform4fv(this.addr,e),Hn(t,e)}}function zH(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(kn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Hn(t,e)}else{if(kn(t,r))return;jb.set(r),n.uniformMatrix2fv(this.addr,!1,jb),Hn(t,r)}}function GH(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(kn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Hn(t,e)}else{if(kn(t,r))return;Xb.set(r),n.uniformMatrix3fv(this.addr,!1,Xb),Hn(t,r)}}function VH(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(kn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Hn(t,e)}else{if(kn(t,r))return;$b.set(r),n.uniformMatrix4fv(this.addr,!1,$b),Hn(t,r)}}function WH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function $H(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(kn(t,e))return;n.uniform2iv(this.addr,e),Hn(t,e)}}function XH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(kn(t,e))return;n.uniform3iv(this.addr,e),Hn(t,e)}}function jH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(kn(t,e))return;n.uniform4iv(this.addr,e),Hn(t,e)}}function JH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function KH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(kn(t,e))return;n.uniform2uiv(this.addr,e),Hn(t,e)}}function YH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(kn(t,e))return;n.uniform3uiv(this.addr,e),Hn(t,e)}}function QH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(kn(t,e))return;n.uniform4uiv(this.addr,e),Hn(t,e)}}function ZH(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(Gb.compareFunction=nS,s=Gb):s=mI,t.setTexture2D(e||s,i)}function qH(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||vI,i)}function ez(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||yI,i)}function tz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||gI,i)}function nz(n){switch(n){case 5126:return NH;case 35664:return UH;case 35665:return kH;case 35666:return HH;case 35674:return zH;case 35675:return GH;case 35676:return VH;case 5124:case 35670:return WH;case 35667:case 35671:return $H;case 35668:case 35672:return XH;case 35669:case 35673:return jH;case 5125:return JH;case 36294:return KH;case 36295:return YH;case 36296:return QH;case 35678:case 36198:case 36298:case 36306:case 35682:return ZH;case 35679:case 36299:case 36307:return qH;case 35680:case 36300:case 36308:case 36293:return ez;case 36289:case 36303:case 36311:case 36292:return tz}}function rz(n,e){n.uniform1fv(this.addr,e)}function iz(n,e){const t=Au(e,this.size,2);n.uniform2fv(this.addr,t)}function sz(n,e){const t=Au(e,this.size,3);n.uniform3fv(this.addr,t)}function oz(n,e){const t=Au(e,this.size,4);n.uniform4fv(this.addr,t)}function az(n,e){const t=Au(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function lz(n,e){const t=Au(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function cz(n,e){const t=Au(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function uz(n,e){n.uniform1iv(this.addr,e)}function fz(n,e){n.uniform2iv(this.addr,e)}function hz(n,e){n.uniform3iv(this.addr,e)}function dz(n,e){n.uniform4iv(this.addr,e)}function pz(n,e){n.uniform1uiv(this.addr,e)}function mz(n,e){n.uniform2uiv(this.addr,e)}function gz(n,e){n.uniform3uiv(this.addr,e)}function vz(n,e){n.uniform4uiv(this.addr,e)}function yz(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);kn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||mI,s[o])}function xz(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);kn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||vI,s[o])}function _z(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);kn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||yI,s[o])}function Az(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);kn(r,s)||(n.uniform1iv(this.addr,s),Hn(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||gI,s[o])}function Sz(n){switch(n){case 5126:return rz;case 35664:return iz;case 35665:return sz;case 35666:return oz;case 35674:return az;case 35675:return lz;case 35676:return cz;case 5124:case 35670:return uz;case 35667:case 35671:return fz;case 35668:case 35672:return hz;case 35669:case 35673:return dz;case 5125:return pz;case 36294:return mz;case 36295:return gz;case 36296:return vz;case 35678:case 36198:case 36298:case 36306:case 35682:return yz;case 35679:case 36299:case 36307:return xz;case 35680:case 36300:case 36308:case 36293:return _z;case 36289:case 36303:case 36311:case 36292:return Az}}class Mz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=nz(t.type)}}class wz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Sz(t.type)}}class Ez{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Lx=/(\w+)(\])?(\[|\.)?/g;function Jb(n,e){n.seq.push(e),n.map[e.id]=e}function bz(n,e,t){const r=n.name,i=r.length;for(Lx.lastIndex=0;;){const s=Lx.exec(r),o=Lx.lastIndex;let a=s[1];const l=s[2]==="]",f=s[3];if(l&&(a=a|0),f===void 0||f==="["&&o+2===i){Jb(t,f===void 0?new Mz(a,n,e):new wz(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new Ez(a),Jb(t,d)),t=d}}}class Vm{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);bz(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function Kb(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Cz=37297;let Tz=0;function Rz(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Pz(n){const e=jt.getPrimaries(jt.workingColorSpace),t=jt.getPrimaries(n);let r;switch(e===t?r="":e===wh&&t===Mh?r="LinearDisplayP3ToLinearSRGB":e===Mh&&t===wh&&(r="LinearSRGBToLinearDisplayP3"),n){case io:case Wh:return[r,"LinearTransferOETF"];case Yr:case z0:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function Yb(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Rz(n.getShaderSource(e),o)}else return i}function Bz(n,e){const t=Pz(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Iz(n,e){let t;switch(e){case NB:t="Linear";break;case UB:t="Reinhard";break;case kB:t="Cineon";break;case WA:t="ACESFilmic";break;case zB:t="AgX";break;case GB:t="Neutral";break;case HB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Jp=new F;function Lz(){jt.getLuminanceCoefficients(Jp);const n=Jp.x.toFixed(4),e=Jp.y.toFixed(4),t=Jp.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Dz(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Lf).join(`
`)}function Fz(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Oz(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Lf(n){return n!==""}function Qb(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Zb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Nz=/^[ \t]*#include +<([\w\d./]+)>/gm;function S1(n){return n.replace(Nz,kz)}const Uz=new Map;function kz(n,e){let t=bt[e];if(t===void 0){const r=Uz.get(e);if(r!==void 0)t=bt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return S1(t)}const Hz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qb(n){return n.replace(Hz,zz)}function zz(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function eC(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Gz(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===B0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Xf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ui&&(e="SHADOWMAP_TYPE_VSM"),e}function Vz(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case eo:case Jo:e="ENVMAP_TYPE_CUBE";break;case yu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Wz(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Jo:e="ENVMAP_MODE_REFRACTION";break}return e}function $z(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Gh:e="ENVMAP_BLENDING_MULTIPLY";break;case FB:e="ENVMAP_BLENDING_MIX";break;case OB:e="ENVMAP_BLENDING_ADD";break}return e}function Xz(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function jz(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Gz(t),f=Vz(t),h=Wz(t),d=$z(t),p=Xz(t),m=Dz(t),y=Fz(s),_=i.createProgram();let x,g,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Lf).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Lf).join(`
`),g.length>0&&(g+=`
`)):(x=[eC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Lf).join(`
`),g=[eC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vs?"#define TONE_MAPPING":"",t.toneMapping!==vs?bt.tonemapping_pars_fragment:"",t.toneMapping!==vs?Iz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bt.colorspace_pars_fragment,Bz("linearToOutputTexel",t.outputColorSpace),Lz(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Lf).join(`
`)),o=S1(o),o=Qb(o,t),o=Zb(o,t),a=S1(a),a=Qb(a,t),a=Zb(a,t),o=qb(o),a=qb(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===_1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===_1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const M=S+x+o,E=S+g+a,P=Kb(i,i.VERTEX_SHADER,M),T=Kb(i,i.FRAGMENT_SHADER,E);i.attachShader(_,P),i.attachShader(_,T),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function B(R){if(n.debug.checkShaderErrors){const $=i.getProgramInfoLog(_).trim(),X=i.getShaderInfoLog(P).trim(),ee=i.getShaderInfoLog(T).trim();let le=!0,Z=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(le=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,P,T);else{const pe=Yb(i,P,"vertex"),U=Yb(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+$+`
`+pe+`
`+U)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(X===""||ee==="")&&(Z=!1);Z&&(R.diagnostics={runnable:le,programLog:$,vertexShader:{log:X,prefix:x},fragmentShader:{log:ee,prefix:g}})}i.deleteShader(P),i.deleteShader(T),L=new Vm(i,_),z=Oz(i,_)}let L;this.getUniforms=function(){return L===void 0&&B(this),L};let z;this.getAttributes=function(){return z===void 0&&B(this),z};let b=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return b===!1&&(b=i.getProgramParameter(_,Cz)),b},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Tz++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=P,this.fragmentShader=T,this}let Jz=0;class Kz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Yz(e),t.set(e,r)),r}}class Yz{constructor(e){this.id=Jz++,this.code=e,this.usedTimes=0}}function Qz(n,e,t,r,i,s,o){const a=new Za,l=new Kz,f=new Set,h=[],d=i.logarithmicDepthBuffer,p=i.reverseDepthBuffer,m=i.vertexTextures;let y=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(b){return f.add(b),b===0?"uv":`uv${b}`}function g(b,R,$,X,ee){const le=X.fog,Z=ee.geometry,pe=b.isMeshStandardMaterial?X.environment:null,U=(b.isMeshStandardMaterial?t:e).get(b.envMap||pe),Q=U&&U.mapping===yu?U.image.height:null,J=_[b.type];b.precision!==null&&(y=i.getMaxPrecision(b.precision),y!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",y,"instead."));const se=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,_e=se!==void 0?se.length:0;let De=0;Z.morphAttributes.position!==void 0&&(De=1),Z.morphAttributes.normal!==void 0&&(De=2),Z.morphAttributes.color!==void 0&&(De=3);let ie,ye,Pe,we;if(J){const dn=zi[J];ie=dn.vertexShader,ye=dn.fragmentShader}else ie=b.vertexShader,ye=b.fragmentShader,l.update(b),Pe=l.getVertexShaderID(b),we=l.getFragmentShaderID(b);const st=n.getRenderTarget(),lt=ee.isInstancedMesh===!0,et=ee.isBatchedMesh===!0,Fe=!!b.map,me=!!b.matcap,O=!!U,Be=!!b.aoMap,Ce=!!b.lightMap,Ae=!!b.bumpMap,Ee=!!b.normalMap,rt=!!b.displacementMap,ke=!!b.emissiveMap,N=!!b.metalnessMap,I=!!b.roughnessMap,q=b.anisotropy>0,fe=b.clearcoat>0,xe=b.dispersion>0,ge=b.iridescence>0,Ke=b.sheen>0,be=b.transmission>0,Xe=q&&!!b.anisotropyMap,Bt=fe&&!!b.clearcoatMap,Se=fe&&!!b.clearcoatNormalMap,je=fe&&!!b.clearcoatRoughnessMap,gt=ge&&!!b.iridescenceMap,pt=ge&&!!b.iridescenceThicknessMap,Je=Ke&&!!b.sheenColorMap,V=Ke&&!!b.sheenRoughnessMap,he=!!b.specularMap,Ne=!!b.specularColorMap,G=!!b.specularIntensityMap,Te=be&&!!b.transmissionMap,oe=be&&!!b.thicknessMap,ve=!!b.gradientMap,ze=!!b.alphaMap,Ge=b.alphaTest>0,yt=!!b.alphaHash,Ut=!!b.extensions;let xn=vs;b.toneMapped&&(st===null||st.isXRRenderTarget===!0)&&(xn=n.toneMapping);const Ct={shaderID:J,shaderType:b.type,shaderName:b.name,vertexShader:ie,fragmentShader:ye,defines:b.defines,customVertexShaderID:Pe,customFragmentShaderID:we,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:y,batching:et,batchingColor:et&&ee._colorsTexture!==null,instancing:lt,instancingColor:lt&&ee.instanceColor!==null,instancingMorph:lt&&ee.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:st===null?n.outputColorSpace:st.isXRRenderTarget===!0?st.texture.colorSpace:io,alphaToCoverage:!!b.alphaToCoverage,map:Fe,matcap:me,envMap:O,envMapMode:O&&U.mapping,envMapCubeUVHeight:Q,aoMap:Be,lightMap:Ce,bumpMap:Ae,normalMap:Ee,displacementMap:m&&rt,emissiveMap:ke,normalMapObjectSpace:Ee&&b.normalMapType===YB,normalMapTangentSpace:Ee&&b.normalMapType===na,metalnessMap:N,roughnessMap:I,anisotropy:q,anisotropyMap:Xe,clearcoat:fe,clearcoatMap:Bt,clearcoatNormalMap:Se,clearcoatRoughnessMap:je,dispersion:xe,iridescence:ge,iridescenceMap:gt,iridescenceThicknessMap:pt,sheen:Ke,sheenColorMap:Je,sheenRoughnessMap:V,specularMap:he,specularColorMap:Ne,specularIntensityMap:G,transmission:be,transmissionMap:Te,thicknessMap:oe,gradientMap:ve,opaque:b.transparent===!1&&b.blending===Ka&&b.alphaToCoverage===!1,alphaMap:ze,alphaTest:Ge,alphaHash:yt,combine:b.combine,mapUv:Fe&&x(b.map.channel),aoMapUv:Be&&x(b.aoMap.channel),lightMapUv:Ce&&x(b.lightMap.channel),bumpMapUv:Ae&&x(b.bumpMap.channel),normalMapUv:Ee&&x(b.normalMap.channel),displacementMapUv:rt&&x(b.displacementMap.channel),emissiveMapUv:ke&&x(b.emissiveMap.channel),metalnessMapUv:N&&x(b.metalnessMap.channel),roughnessMapUv:I&&x(b.roughnessMap.channel),anisotropyMapUv:Xe&&x(b.anisotropyMap.channel),clearcoatMapUv:Bt&&x(b.clearcoatMap.channel),clearcoatNormalMapUv:Se&&x(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:je&&x(b.clearcoatRoughnessMap.channel),iridescenceMapUv:gt&&x(b.iridescenceMap.channel),iridescenceThicknessMapUv:pt&&x(b.iridescenceThicknessMap.channel),sheenColorMapUv:Je&&x(b.sheenColorMap.channel),sheenRoughnessMapUv:V&&x(b.sheenRoughnessMap.channel),specularMapUv:he&&x(b.specularMap.channel),specularColorMapUv:Ne&&x(b.specularColorMap.channel),specularIntensityMapUv:G&&x(b.specularIntensityMap.channel),transmissionMapUv:Te&&x(b.transmissionMap.channel),thicknessMapUv:oe&&x(b.thicknessMap.channel),alphaMapUv:ze&&x(b.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(Ee||q),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:ee.isPoints===!0&&!!Z.attributes.uv&&(Fe||ze),fog:!!le,useFog:b.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:p,skinning:ee.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:_e,morphTextureStride:De,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&$.length>0,shadowMapType:n.shadowMap.type,toneMapping:xn,decodeVideoTexture:Fe&&b.map.isVideoTexture===!0&&jt.getTransfer(b.map.colorSpace)===en,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===xi,flipSided:b.side===wr,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionClipCullDistance:Ut&&b.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ut&&b.extensions.multiDraw===!0||et)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:b.customProgramCacheKey()};return Ct.vertexUv1s=f.has(1),Ct.vertexUv2s=f.has(2),Ct.vertexUv3s=f.has(3),f.clear(),Ct}function S(b){const R=[];if(b.shaderID?R.push(b.shaderID):(R.push(b.customVertexShaderID),R.push(b.customFragmentShaderID)),b.defines!==void 0)for(const $ in b.defines)R.push($),R.push(b.defines[$]);return b.isRawShaderMaterial===!1&&(M(R,b),E(R,b),R.push(n.outputColorSpace)),R.push(b.customProgramCacheKey),R.join()}function M(b,R){b.push(R.precision),b.push(R.outputColorSpace),b.push(R.envMapMode),b.push(R.envMapCubeUVHeight),b.push(R.mapUv),b.push(R.alphaMapUv),b.push(R.lightMapUv),b.push(R.aoMapUv),b.push(R.bumpMapUv),b.push(R.normalMapUv),b.push(R.displacementMapUv),b.push(R.emissiveMapUv),b.push(R.metalnessMapUv),b.push(R.roughnessMapUv),b.push(R.anisotropyMapUv),b.push(R.clearcoatMapUv),b.push(R.clearcoatNormalMapUv),b.push(R.clearcoatRoughnessMapUv),b.push(R.iridescenceMapUv),b.push(R.iridescenceThicknessMapUv),b.push(R.sheenColorMapUv),b.push(R.sheenRoughnessMapUv),b.push(R.specularMapUv),b.push(R.specularColorMapUv),b.push(R.specularIntensityMapUv),b.push(R.transmissionMapUv),b.push(R.thicknessMapUv),b.push(R.combine),b.push(R.fogExp2),b.push(R.sizeAttenuation),b.push(R.morphTargetsCount),b.push(R.morphAttributeCount),b.push(R.numDirLights),b.push(R.numPointLights),b.push(R.numSpotLights),b.push(R.numSpotLightMaps),b.push(R.numHemiLights),b.push(R.numRectAreaLights),b.push(R.numDirLightShadows),b.push(R.numPointLightShadows),b.push(R.numSpotLightShadows),b.push(R.numSpotLightShadowsWithMaps),b.push(R.numLightProbes),b.push(R.shadowMapType),b.push(R.toneMapping),b.push(R.numClippingPlanes),b.push(R.numClipIntersection),b.push(R.depthPacking)}function E(b,R){a.disableAll(),R.supportsVertexTextures&&a.enable(0),R.instancing&&a.enable(1),R.instancingColor&&a.enable(2),R.instancingMorph&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),R.dispersion&&a.enable(20),R.batchingColor&&a.enable(21),b.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.reverseDepthBuffer&&a.enable(4),R.skinning&&a.enable(5),R.morphTargets&&a.enable(6),R.morphNormals&&a.enable(7),R.morphColors&&a.enable(8),R.premultipliedAlpha&&a.enable(9),R.shadowMapEnabled&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),R.alphaToCoverage&&a.enable(20),b.push(a.mask)}function P(b){const R=_[b.type];let $;if(R){const X=zi[R];$=fI.clone(X.uniforms)}else $=b.uniforms;return $}function T(b,R){let $;for(let X=0,ee=h.length;X<ee;X++){const le=h[X];if(le.cacheKey===R){$=le,++$.usedTimes;break}}return $===void 0&&($=new jz(n,R,b,s),h.push($)),$}function B(b){if(--b.usedTimes===0){const R=h.indexOf(b);h[R]=h[h.length-1],h.pop(),b.destroy()}}function L(b){l.remove(b)}function z(){l.dispose()}return{getParameters:g,getProgramCacheKey:S,getUniforms:P,acquireProgram:T,releaseProgram:B,releaseShaderCache:L,programs:h,dispose:z}}function Zz(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function qz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function tC(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function nC(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,p,m,y,_,x){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:y,renderOrder:d.renderOrder,z:_,group:x},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=d.renderOrder,g.z=_,g.group=x),e++,g}function a(d,p,m,y,_,x){const g=o(d,p,m,y,_,x);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(d,p,m,y,_,x){const g=o(d,p,m,y,_,x);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function f(d,p){t.length>1&&t.sort(d||qz),r.length>1&&r.sort(p||tC),i.length>1&&i.sort(p||tC)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:h,sort:f}}function eG(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new nC,n.set(r,[o])):i>=s.length?(o=new nC,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function tG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new F,color:new Oe};break;case"SpotLight":t={position:new F,direction:new F,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new F,color:new Oe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new F,skyColor:new Oe,groundColor:new Oe};break;case"RectAreaLight":t={color:new Oe,position:new F,halfWidth:new F,halfHeight:new F};break}return n[e.id]=t,t}}}function nG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let rG=0;function iG(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function sG(n){const e=new tG,t=nG(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)r.probe.push(new F);const i=new F,s=new ft,o=new ft;function a(f){let h=0,d=0,p=0;for(let z=0;z<9;z++)r.probe[z].set(0,0,0);let m=0,y=0,_=0,x=0,g=0,S=0,M=0,E=0,P=0,T=0,B=0;f.sort(iG);for(let z=0,b=f.length;z<b;z++){const R=f[z],$=R.color,X=R.intensity,ee=R.distance,le=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)h+=$.r*X,d+=$.g*X,p+=$.b*X;else if(R.isLightProbe){for(let Z=0;Z<9;Z++)r.probe[Z].addScaledVector(R.sh.coefficients[Z],X);B++}else if(R.isDirectionalLight){const Z=e.get(R);if(Z.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const pe=R.shadow,U=t.get(R);U.shadowIntensity=pe.intensity,U.shadowBias=pe.bias,U.shadowNormalBias=pe.normalBias,U.shadowRadius=pe.radius,U.shadowMapSize=pe.mapSize,r.directionalShadow[m]=U,r.directionalShadowMap[m]=le,r.directionalShadowMatrix[m]=R.shadow.matrix,S++}r.directional[m]=Z,m++}else if(R.isSpotLight){const Z=e.get(R);Z.position.setFromMatrixPosition(R.matrixWorld),Z.color.copy($).multiplyScalar(X),Z.distance=ee,Z.coneCos=Math.cos(R.angle),Z.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),Z.decay=R.decay,r.spot[_]=Z;const pe=R.shadow;if(R.map&&(r.spotLightMap[P]=R.map,P++,pe.updateMatrices(R),R.castShadow&&T++),r.spotLightMatrix[_]=pe.matrix,R.castShadow){const U=t.get(R);U.shadowIntensity=pe.intensity,U.shadowBias=pe.bias,U.shadowNormalBias=pe.normalBias,U.shadowRadius=pe.radius,U.shadowMapSize=pe.mapSize,r.spotShadow[_]=U,r.spotShadowMap[_]=le,E++}_++}else if(R.isRectAreaLight){const Z=e.get(R);Z.color.copy($).multiplyScalar(X),Z.halfWidth.set(R.width*.5,0,0),Z.halfHeight.set(0,R.height*.5,0),r.rectArea[x]=Z,x++}else if(R.isPointLight){const Z=e.get(R);if(Z.color.copy(R.color).multiplyScalar(R.intensity),Z.distance=R.distance,Z.decay=R.decay,R.castShadow){const pe=R.shadow,U=t.get(R);U.shadowIntensity=pe.intensity,U.shadowBias=pe.bias,U.shadowNormalBias=pe.normalBias,U.shadowRadius=pe.radius,U.shadowMapSize=pe.mapSize,U.shadowCameraNear=pe.camera.near,U.shadowCameraFar=pe.camera.far,r.pointShadow[y]=U,r.pointShadowMap[y]=le,r.pointShadowMatrix[y]=R.shadow.matrix,M++}r.point[y]=Z,y++}else if(R.isHemisphereLight){const Z=e.get(R);Z.skyColor.copy(R.color).multiplyScalar(X),Z.groundColor.copy(R.groundColor).multiplyScalar(X),r.hemi[g]=Z,g++}}x>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ue.LTC_FLOAT_1,r.rectAreaLTC2=Ue.LTC_FLOAT_2):(r.rectAreaLTC1=Ue.LTC_HALF_1,r.rectAreaLTC2=Ue.LTC_HALF_2)),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=p;const L=r.hash;(L.directionalLength!==m||L.pointLength!==y||L.spotLength!==_||L.rectAreaLength!==x||L.hemiLength!==g||L.numDirectionalShadows!==S||L.numPointShadows!==M||L.numSpotShadows!==E||L.numSpotMaps!==P||L.numLightProbes!==B)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=x,r.point.length=y,r.hemi.length=g,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=M,r.spotLightMatrix.length=E+P-T,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=B,L.directionalLength=m,L.pointLength=y,L.spotLength=_,L.rectAreaLength=x,L.hemiLength=g,L.numDirectionalShadows=S,L.numPointShadows=M,L.numSpotShadows=E,L.numSpotMaps=P,L.numLightProbes=B,r.version=rG++)}function l(f,h){let d=0,p=0,m=0,y=0,_=0;const x=h.matrixWorldInverse;for(let g=0,S=f.length;g<S;g++){const M=f[g];if(M.isDirectionalLight){const E=r.directional[d];E.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(x),d++}else if(M.isSpotLight){const E=r.spot[m];E.position.setFromMatrixPosition(M.matrixWorld),E.position.applyMatrix4(x),E.direction.setFromMatrixPosition(M.matrixWorld),i.setFromMatrixPosition(M.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(x),m++}else if(M.isRectAreaLight){const E=r.rectArea[y];E.position.setFromMatrixPosition(M.matrixWorld),E.position.applyMatrix4(x),o.identity(),s.copy(M.matrixWorld),s.premultiply(x),o.extractRotation(s),E.halfWidth.set(M.width*.5,0,0),E.halfHeight.set(0,M.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),y++}else if(M.isPointLight){const E=r.point[p];E.position.setFromMatrixPosition(M.matrixWorld),E.position.applyMatrix4(x),p++}else if(M.isHemisphereLight){const E=r.hemi[_];E.direction.setFromMatrixPosition(M.matrixWorld),E.direction.transformDirection(x),_++}}}return{setup:a,setupView:l,state:r}}function rC(n){const e=new sG(n),t=[],r=[];function i(h){f.camera=h,t.length=0,r.length=0}function s(h){t.push(h)}function o(h){r.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const f={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:f,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function oG(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new rC(n),e.set(i,[a])):s>=o.length?(a=new rC(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}class cS extends Ln{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=JB,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uS extends Ln{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const aG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function cG(n,e,t){let r=new jh;const i=new de,s=new de,o=new Ht,a=new cS({depthPacking:KB}),l=new uS,f={},h=t.maxTextureSize,d={[As]:wr,[wr]:As,[xi]:xi},p=new Ji({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:aG,fragmentShader:lG}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new At;y.setAttribute("position",new Gt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new En(y,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=B0;let g=this.type;this.render=function(T,B,L){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||T.length===0)return;const z=n.getRenderTarget(),b=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),$=n.state;$.setBlending(Js),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const X=g!==Ui&&this.type===Ui,ee=g===Ui&&this.type!==Ui;for(let le=0,Z=T.length;le<Z;le++){const pe=T[le],U=pe.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",pe,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;i.copy(U.mapSize);const Q=U.getFrameExtents();if(i.multiply(Q),s.copy(U.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/Q.x),i.x=s.x*Q.x,U.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/Q.y),i.y=s.y*Q.y,U.mapSize.y=s.y)),U.map===null||X===!0||ee===!0){const se=this.type!==Ui?{minFilter:Un,magFilter:Un}:{};U.map!==null&&U.map.dispose(),U.map=new ji(i.x,i.y,se),U.map.texture.name=pe.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const J=U.getViewportCount();for(let se=0;se<J;se++){const _e=U.getViewport(se);o.set(s.x*_e.x,s.y*_e.y,s.x*_e.z,s.y*_e.w),$.viewport(o),U.updateMatrices(pe,se),r=U.getFrustum(),E(B,L,U.camera,pe,this.type)}U.isPointLightShadow!==!0&&this.type===Ui&&S(U,L),U.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(z,b,R)};function S(T,B){const L=e.update(_);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new ji(i.x,i.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(B,null,L,p,_,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(B,null,L,m,_,null)}function M(T,B,L,z){let b=null;const R=L.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(R!==void 0)b=R;else if(b=L.isPointLight===!0?l:a,n.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0){const $=b.uuid,X=B.uuid;let ee=f[$];ee===void 0&&(ee={},f[$]=ee);let le=ee[X];le===void 0&&(le=b.clone(),ee[X]=le,B.addEventListener("dispose",P)),b=le}if(b.visible=B.visible,b.wireframe=B.wireframe,z===Ui?b.side=B.shadowSide!==null?B.shadowSide:B.side:b.side=B.shadowSide!==null?B.shadowSide:d[B.side],b.alphaMap=B.alphaMap,b.alphaTest=B.alphaTest,b.map=B.map,b.clipShadows=B.clipShadows,b.clippingPlanes=B.clippingPlanes,b.clipIntersection=B.clipIntersection,b.displacementMap=B.displacementMap,b.displacementScale=B.displacementScale,b.displacementBias=B.displacementBias,b.wireframeLinewidth=B.wireframeLinewidth,b.linewidth=B.linewidth,L.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const $=n.properties.get(b);$.light=L}return b}function E(T,B,L,z,b){if(T.visible===!1)return;if(T.layers.test(B.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&b===Ui)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,T.matrixWorld);const X=e.update(T),ee=T.material;if(Array.isArray(ee)){const le=X.groups;for(let Z=0,pe=le.length;Z<pe;Z++){const U=le[Z],Q=ee[U.materialIndex];if(Q&&Q.visible){const J=M(T,Q,z,b);T.onBeforeShadow(n,T,B,L,X,J,U),n.renderBufferDirect(L,null,X,J,T,U),T.onAfterShadow(n,T,B,L,X,J,U)}}}else if(ee.visible){const le=M(T,ee,z,b);T.onBeforeShadow(n,T,B,L,X,le,null),n.renderBufferDirect(L,null,X,le,T,null),T.onAfterShadow(n,T,B,L,X,le,null)}}const $=T.children;for(let X=0,ee=$.length;X<ee;X++)E($[X],B,L,z,b)}function P(T){T.target.removeEventListener("dispose",P);for(const L in f){const z=f[L],b=T.target.uuid;b in z&&(z[b].dispose(),delete z[b])}}}const uG={[yg]:xg,[_g]:Mg,[Ag]:wg,[sl]:Sg,[xg]:yg,[Mg]:_g,[wg]:Ag,[Sg]:sl};function fG(n){function e(){let G=!1;const Te=new Ht;let oe=null;const ve=new Ht(0,0,0,0);return{setMask:function(ze){oe!==ze&&!G&&(n.colorMask(ze,ze,ze,ze),oe=ze)},setLocked:function(ze){G=ze},setClear:function(ze,Ge,yt,Ut,xn){xn===!0&&(ze*=Ut,Ge*=Ut,yt*=Ut),Te.set(ze,Ge,yt,Ut),ve.equals(Te)===!1&&(n.clearColor(ze,Ge,yt,Ut),ve.copy(Te))},reset:function(){G=!1,oe=null,ve.set(-1,0,0,0)}}}function t(){let G=!1,Te=!1,oe=null,ve=null,ze=null;return{setReversed:function(Ge){Te=Ge},setTest:function(Ge){Ge?Pe(n.DEPTH_TEST):we(n.DEPTH_TEST)},setMask:function(Ge){oe!==Ge&&!G&&(n.depthMask(Ge),oe=Ge)},setFunc:function(Ge){if(Te&&(Ge=uG[Ge]),ve!==Ge){switch(Ge){case yg:n.depthFunc(n.NEVER);break;case xg:n.depthFunc(n.ALWAYS);break;case _g:n.depthFunc(n.LESS);break;case sl:n.depthFunc(n.LEQUAL);break;case Ag:n.depthFunc(n.EQUAL);break;case Sg:n.depthFunc(n.GEQUAL);break;case Mg:n.depthFunc(n.GREATER);break;case wg:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ve=Ge}},setLocked:function(Ge){G=Ge},setClear:function(Ge){ze!==Ge&&(n.clearDepth(Ge),ze=Ge)},reset:function(){G=!1,oe=null,ve=null,ze=null}}}function r(){let G=!1,Te=null,oe=null,ve=null,ze=null,Ge=null,yt=null,Ut=null,xn=null;return{setTest:function(Ct){G||(Ct?Pe(n.STENCIL_TEST):we(n.STENCIL_TEST))},setMask:function(Ct){Te!==Ct&&!G&&(n.stencilMask(Ct),Te=Ct)},setFunc:function(Ct,dn,Jn){(oe!==Ct||ve!==dn||ze!==Jn)&&(n.stencilFunc(Ct,dn,Jn),oe=Ct,ve=dn,ze=Jn)},setOp:function(Ct,dn,Jn){(Ge!==Ct||yt!==dn||Ut!==Jn)&&(n.stencilOp(Ct,dn,Jn),Ge=Ct,yt=dn,Ut=Jn)},setLocked:function(Ct){G=Ct},setClear:function(Ct){xn!==Ct&&(n.clearStencil(Ct),xn=Ct)},reset:function(){G=!1,Te=null,oe=null,ve=null,ze=null,Ge=null,yt=null,Ut=null,xn=null}}}const i=new e,s=new t,o=new r,a=new WeakMap,l=new WeakMap;let f={},h={},d=new WeakMap,p=[],m=null,y=!1,_=null,x=null,g=null,S=null,M=null,E=null,P=null,T=new Oe(0,0,0),B=0,L=!1,z=null,b=null,R=null,$=null,X=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let le=!1,Z=0;const pe=n.getParameter(n.VERSION);pe.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(pe)[1]),le=Z>=1):pe.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(pe)[1]),le=Z>=2);let U=null,Q={};const J=n.getParameter(n.SCISSOR_BOX),se=n.getParameter(n.VIEWPORT),_e=new Ht().fromArray(J),De=new Ht().fromArray(se);function ie(G,Te,oe,ve){const ze=new Uint8Array(4),Ge=n.createTexture();n.bindTexture(G,Ge),n.texParameteri(G,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(G,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let yt=0;yt<oe;yt++)G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY?n.texImage3D(Te,0,n.RGBA,1,1,ve,0,n.RGBA,n.UNSIGNED_BYTE,ze):n.texImage2D(Te+yt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ze);return Ge}const ye={};ye[n.TEXTURE_2D]=ie(n.TEXTURE_2D,n.TEXTURE_2D,1),ye[n.TEXTURE_CUBE_MAP]=ie(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ye[n.TEXTURE_2D_ARRAY]=ie(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ye[n.TEXTURE_3D]=ie(n.TEXTURE_3D,n.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Pe(n.DEPTH_TEST),s.setFunc(sl),Ce(!1),Ae(p1),Pe(n.CULL_FACE),O(Js);function Pe(G){f[G]!==!0&&(n.enable(G),f[G]=!0)}function we(G){f[G]!==!1&&(n.disable(G),f[G]=!1)}function st(G,Te){return h[G]!==Te?(n.bindFramebuffer(G,Te),h[G]=Te,G===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Te),G===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Te),!0):!1}function lt(G,Te){let oe=p,ve=!1;if(G){oe=d.get(Te),oe===void 0&&(oe=[],d.set(Te,oe));const ze=G.textures;if(oe.length!==ze.length||oe[0]!==n.COLOR_ATTACHMENT0){for(let Ge=0,yt=ze.length;Ge<yt;Ge++)oe[Ge]=n.COLOR_ATTACHMENT0+Ge;oe.length=ze.length,ve=!0}}else oe[0]!==n.BACK&&(oe[0]=n.BACK,ve=!0);ve&&n.drawBuffers(oe)}function et(G){return m!==G?(n.useProgram(G),m=G,!0):!1}const Fe={[Do]:n.FUNC_ADD,[yB]:n.FUNC_SUBTRACT,[xB]:n.FUNC_REVERSE_SUBTRACT};Fe[_B]=n.MIN,Fe[AB]=n.MAX;const me={[SB]:n.ZERO,[MB]:n.ONE,[wB]:n.SRC_COLOR,[gg]:n.SRC_ALPHA,[PB]:n.SRC_ALPHA_SATURATE,[TB]:n.DST_COLOR,[bB]:n.DST_ALPHA,[EB]:n.ONE_MINUS_SRC_COLOR,[vg]:n.ONE_MINUS_SRC_ALPHA,[RB]:n.ONE_MINUS_DST_COLOR,[CB]:n.ONE_MINUS_DST_ALPHA,[BB]:n.CONSTANT_COLOR,[IB]:n.ONE_MINUS_CONSTANT_COLOR,[LB]:n.CONSTANT_ALPHA,[DB]:n.ONE_MINUS_CONSTANT_ALPHA};function O(G,Te,oe,ve,ze,Ge,yt,Ut,xn,Ct){if(G===Js){y===!0&&(we(n.BLEND),y=!1);return}if(y===!1&&(Pe(n.BLEND),y=!0),G!==vB){if(G!==_||Ct!==L){if((x!==Do||M!==Do)&&(n.blendEquation(n.FUNC_ADD),x=Do,M=Do),Ct)switch(G){case Ka:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case m1:n.blendFunc(n.ONE,n.ONE);break;case g1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case v1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}else switch(G){case Ka:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case m1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case g1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case v1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}g=null,S=null,E=null,P=null,T.set(0,0,0),B=0,_=G,L=Ct}return}ze=ze||Te,Ge=Ge||oe,yt=yt||ve,(Te!==x||ze!==M)&&(n.blendEquationSeparate(Fe[Te],Fe[ze]),x=Te,M=ze),(oe!==g||ve!==S||Ge!==E||yt!==P)&&(n.blendFuncSeparate(me[oe],me[ve],me[Ge],me[yt]),g=oe,S=ve,E=Ge,P=yt),(Ut.equals(T)===!1||xn!==B)&&(n.blendColor(Ut.r,Ut.g,Ut.b,xn),T.copy(Ut),B=xn),_=G,L=!1}function Be(G,Te){G.side===xi?we(n.CULL_FACE):Pe(n.CULL_FACE);let oe=G.side===wr;Te&&(oe=!oe),Ce(oe),G.blending===Ka&&G.transparent===!1?O(Js):O(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.blendColor,G.blendAlpha,G.premultipliedAlpha),s.setFunc(G.depthFunc),s.setTest(G.depthTest),s.setMask(G.depthWrite),i.setMask(G.colorWrite);const ve=G.stencilWrite;o.setTest(ve),ve&&(o.setMask(G.stencilWriteMask),o.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),o.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),rt(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),G.alphaToCoverage===!0?Pe(n.SAMPLE_ALPHA_TO_COVERAGE):we(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ce(G){z!==G&&(G?n.frontFace(n.CW):n.frontFace(n.CCW),z=G)}function Ae(G){G!==pB?(Pe(n.CULL_FACE),G!==b&&(G===p1?n.cullFace(n.BACK):G===mB?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):we(n.CULL_FACE),b=G}function Ee(G){G!==R&&(le&&n.lineWidth(G),R=G)}function rt(G,Te,oe){G?(Pe(n.POLYGON_OFFSET_FILL),($!==Te||X!==oe)&&(n.polygonOffset(Te,oe),$=Te,X=oe)):we(n.POLYGON_OFFSET_FILL)}function ke(G){G?Pe(n.SCISSOR_TEST):we(n.SCISSOR_TEST)}function N(G){G===void 0&&(G=n.TEXTURE0+ee-1),U!==G&&(n.activeTexture(G),U=G)}function I(G,Te,oe){oe===void 0&&(U===null?oe=n.TEXTURE0+ee-1:oe=U);let ve=Q[oe];ve===void 0&&(ve={type:void 0,texture:void 0},Q[oe]=ve),(ve.type!==G||ve.texture!==Te)&&(U!==oe&&(n.activeTexture(oe),U=oe),n.bindTexture(G,Te||ye[G]),ve.type=G,ve.texture=Te)}function q(){const G=Q[U];G!==void 0&&G.type!==void 0&&(n.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)}function fe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function xe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ge(){try{n.texSubImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Ke(){try{n.texSubImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function be(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Xe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Bt(){try{n.texStorage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Se(){try{n.texStorage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function je(){try{n.texImage2D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function gt(){try{n.texImage3D.apply(n,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function pt(G){_e.equals(G)===!1&&(n.scissor(G.x,G.y,G.z,G.w),_e.copy(G))}function Je(G){De.equals(G)===!1&&(n.viewport(G.x,G.y,G.z,G.w),De.copy(G))}function V(G,Te){let oe=l.get(Te);oe===void 0&&(oe=new WeakMap,l.set(Te,oe));let ve=oe.get(G);ve===void 0&&(ve=n.getUniformBlockIndex(Te,G.name),oe.set(G,ve))}function he(G,Te){const ve=l.get(Te).get(G);a.get(Te)!==ve&&(n.uniformBlockBinding(Te,ve,G.__bindingPointIndex),a.set(Te,ve))}function Ne(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},U=null,Q={},h={},d=new WeakMap,p=[],m=null,y=!1,_=null,x=null,g=null,S=null,M=null,E=null,P=null,T=new Oe(0,0,0),B=0,L=!1,z=null,b=null,R=null,$=null,X=null,_e.set(0,0,n.canvas.width,n.canvas.height),De.set(0,0,n.canvas.width,n.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Pe,disable:we,bindFramebuffer:st,drawBuffers:lt,useProgram:et,setBlending:O,setMaterial:Be,setFlipSided:Ce,setCullFace:Ae,setLineWidth:Ee,setPolygonOffset:rt,setScissorTest:ke,activeTexture:N,bindTexture:I,unbindTexture:q,compressedTexImage2D:fe,compressedTexImage3D:xe,texImage2D:je,texImage3D:gt,updateUBOMapping:V,uniformBlockBinding:he,texStorage2D:Bt,texStorage3D:Se,texSubImage2D:ge,texSubImage3D:Ke,compressedTexSubImage2D:be,compressedTexSubImage3D:Xe,scissor:pt,viewport:Je,reset:Ne}}function hG(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function dG(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function pG(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function M1(n,e,t,r){const i=mG(r);switch(t){case JA:return n*e;case YA:return n*e;case QA:return n*e*2;case N0:return n*e/i.components*i.byteLength;case Vh:return n*e/i.components*i.byteLength;case ZA:return n*e*2/i.components*i.byteLength;case U0:return n*e*2/i.components*i.byteLength;case KA:return n*e*3/i.components*i.byteLength;case ur:return n*e*4/i.components*i.byteLength;case k0:return n*e*4/i.components*i.byteLength;case jf:case Jf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Kf:case Yf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case bg:case Tg:return Math.max(n,16)*Math.max(e,8)/4;case Eg:case Cg:return Math.max(n,8)*Math.max(e,8)/2;case Rg:case Pg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Bg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ig:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Lg:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Dg:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Fg:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Og:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Ng:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Ug:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case kg:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Hg:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case zg:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Gg:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Vg:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Wg:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case $g:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Qf:case Xg:case jg:return Math.ceil(n/4)*Math.ceil(e/4)*16;case qA:case Jg:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Kg:case Yg:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function mG(n){switch(n){case Xi:case $A:return{byteLength:1,components:1};case lu:case XA:case xu:return{byteLength:2,components:1};case F0:case O0:return{byteLength:2,components:4};case to:case D0:case Fr:return{byteLength:4,components:1};case jA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const gG={contain:hG,cover:dG,fill:pG,getByteLength:M1};function vG(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new de,h=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(N,I){return m?new OffscreenCanvas(N,I):Ch("canvas")}function _(N,I,q){let fe=1;const xe=ke(N);if((xe.width>q||xe.height>q)&&(fe=q/Math.max(xe.width,xe.height)),fe<1)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){const ge=Math.floor(fe*xe.width),Ke=Math.floor(fe*xe.height);d===void 0&&(d=y(ge,Ke));const be=I?y(ge,Ke):d;return be.width=ge,be.height=Ke,be.getContext("2d").drawImage(N,0,0,ge,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+ge+"x"+Ke+")."),be}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),N;return N}function x(N){return N.generateMipmaps&&N.minFilter!==Un&&N.minFilter!==wn}function g(N){n.generateMipmap(N)}function S(N,I,q,fe,xe=!1){if(N!==null){if(n[N]!==void 0)return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let ge=I;if(I===n.RED&&(q===n.FLOAT&&(ge=n.R32F),q===n.HALF_FLOAT&&(ge=n.R16F),q===n.UNSIGNED_BYTE&&(ge=n.R8)),I===n.RED_INTEGER&&(q===n.UNSIGNED_BYTE&&(ge=n.R8UI),q===n.UNSIGNED_SHORT&&(ge=n.R16UI),q===n.UNSIGNED_INT&&(ge=n.R32UI),q===n.BYTE&&(ge=n.R8I),q===n.SHORT&&(ge=n.R16I),q===n.INT&&(ge=n.R32I)),I===n.RG&&(q===n.FLOAT&&(ge=n.RG32F),q===n.HALF_FLOAT&&(ge=n.RG16F),q===n.UNSIGNED_BYTE&&(ge=n.RG8)),I===n.RG_INTEGER&&(q===n.UNSIGNED_BYTE&&(ge=n.RG8UI),q===n.UNSIGNED_SHORT&&(ge=n.RG16UI),q===n.UNSIGNED_INT&&(ge=n.RG32UI),q===n.BYTE&&(ge=n.RG8I),q===n.SHORT&&(ge=n.RG16I),q===n.INT&&(ge=n.RG32I)),I===n.RGB_INTEGER&&(q===n.UNSIGNED_BYTE&&(ge=n.RGB8UI),q===n.UNSIGNED_SHORT&&(ge=n.RGB16UI),q===n.UNSIGNED_INT&&(ge=n.RGB32UI),q===n.BYTE&&(ge=n.RGB8I),q===n.SHORT&&(ge=n.RGB16I),q===n.INT&&(ge=n.RGB32I)),I===n.RGBA_INTEGER&&(q===n.UNSIGNED_BYTE&&(ge=n.RGBA8UI),q===n.UNSIGNED_SHORT&&(ge=n.RGBA16UI),q===n.UNSIGNED_INT&&(ge=n.RGBA32UI),q===n.BYTE&&(ge=n.RGBA8I),q===n.SHORT&&(ge=n.RGBA16I),q===n.INT&&(ge=n.RGBA32I)),I===n.RGB&&q===n.UNSIGNED_INT_5_9_9_9_REV&&(ge=n.RGB9_E5),I===n.RGBA){const Ke=xe?Sh:jt.getTransfer(fe);q===n.FLOAT&&(ge=n.RGBA32F),q===n.HALF_FLOAT&&(ge=n.RGBA16F),q===n.UNSIGNED_BYTE&&(ge=Ke===en?n.SRGB8_ALPHA8:n.RGBA8),q===n.UNSIGNED_SHORT_4_4_4_4&&(ge=n.RGBA4),q===n.UNSIGNED_SHORT_5_5_5_1&&(ge=n.RGB5_A1)}return(ge===n.R16F||ge===n.R32F||ge===n.RG16F||ge===n.RG32F||ge===n.RGBA16F||ge===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ge}function M(N,I){let q;return N?I===null||I===to||I===ol?q=n.DEPTH24_STENCIL8:I===Fr?q=n.DEPTH32F_STENCIL8:I===lu&&(q=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):I===null||I===to||I===ol?q=n.DEPTH_COMPONENT24:I===Fr?q=n.DEPTH_COMPONENT32F:I===lu&&(q=n.DEPTH_COMPONENT16),q}function E(N,I){return x(N)===!0||N.isFramebufferTexture&&N.minFilter!==Un&&N.minFilter!==wn?Math.log2(Math.max(I.width,I.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?I.mipmaps.length:1}function P(N){const I=N.target;I.removeEventListener("dispose",P),B(I),I.isVideoTexture&&h.delete(I)}function T(N){const I=N.target;I.removeEventListener("dispose",T),z(I)}function B(N){const I=r.get(N);if(I.__webglInit===void 0)return;const q=N.source,fe=p.get(q);if(fe){const xe=fe[I.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&L(N),Object.keys(fe).length===0&&p.delete(q)}r.remove(N)}function L(N){const I=r.get(N);n.deleteTexture(I.__webglTexture);const q=N.source,fe=p.get(q);delete fe[I.__cacheKey],o.memory.textures--}function z(N){const I=r.get(N);if(N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++){if(Array.isArray(I.__webglFramebuffer[fe]))for(let xe=0;xe<I.__webglFramebuffer[fe].length;xe++)n.deleteFramebuffer(I.__webglFramebuffer[fe][xe]);else n.deleteFramebuffer(I.__webglFramebuffer[fe]);I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer[fe])}else{if(Array.isArray(I.__webglFramebuffer))for(let fe=0;fe<I.__webglFramebuffer.length;fe++)n.deleteFramebuffer(I.__webglFramebuffer[fe]);else n.deleteFramebuffer(I.__webglFramebuffer);if(I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&n.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer)for(let fe=0;fe<I.__webglColorRenderbuffer.length;fe++)I.__webglColorRenderbuffer[fe]&&n.deleteRenderbuffer(I.__webglColorRenderbuffer[fe]);I.__webglDepthRenderbuffer&&n.deleteRenderbuffer(I.__webglDepthRenderbuffer)}const q=N.textures;for(let fe=0,xe=q.length;fe<xe;fe++){const ge=r.get(q[fe]);ge.__webglTexture&&(n.deleteTexture(ge.__webglTexture),o.memory.textures--),r.remove(q[fe])}r.remove(N)}let b=0;function R(){b=0}function $(){const N=b;return N>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+i.maxTextures),b+=1,N}function X(N){const I=[];return I.push(N.wrapS),I.push(N.wrapT),I.push(N.wrapR||0),I.push(N.magFilter),I.push(N.minFilter),I.push(N.anisotropy),I.push(N.internalFormat),I.push(N.format),I.push(N.type),I.push(N.generateMipmaps),I.push(N.premultiplyAlpha),I.push(N.flipY),I.push(N.unpackAlignment),I.push(N.colorSpace),I.join()}function ee(N,I){const q=r.get(N);if(N.isVideoTexture&&Ee(N),N.isRenderTargetTexture===!1&&N.version>0&&q.__version!==N.version){const fe=N.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{De(q,N,I);return}}t.bindTexture(n.TEXTURE_2D,q.__webglTexture,n.TEXTURE0+I)}function le(N,I){const q=r.get(N);if(N.version>0&&q.__version!==N.version){De(q,N,I);return}t.bindTexture(n.TEXTURE_2D_ARRAY,q.__webglTexture,n.TEXTURE0+I)}function Z(N,I){const q=r.get(N);if(N.version>0&&q.__version!==N.version){De(q,N,I);return}t.bindTexture(n.TEXTURE_3D,q.__webglTexture,n.TEXTURE0+I)}function pe(N,I){const q=r.get(N);if(N.version>0&&q.__version!==N.version){ie(q,N,I);return}t.bindTexture(n.TEXTURE_CUBE_MAP,q.__webglTexture,n.TEXTURE0+I)}const U={[Ko]:n.REPEAT,[Zr]:n.CLAMP_TO_EDGE,[au]:n.MIRRORED_REPEAT},Q={[Un]:n.NEAREST,[L0]:n.NEAREST_MIPMAP_NEAREST,[Ha]:n.NEAREST_MIPMAP_LINEAR,[wn]:n.LINEAR,[Qc]:n.LINEAR_MIPMAP_NEAREST,[Si]:n.LINEAR_MIPMAP_LINEAR},J={[QB]:n.NEVER,[rI]:n.ALWAYS,[ZB]:n.LESS,[nS]:n.LEQUAL,[qB]:n.EQUAL,[nI]:n.GEQUAL,[eI]:n.GREATER,[tI]:n.NOTEQUAL};function se(N,I){if(I.type===Fr&&e.has("OES_texture_float_linear")===!1&&(I.magFilter===wn||I.magFilter===Qc||I.magFilter===Ha||I.magFilter===Si||I.minFilter===wn||I.minFilter===Qc||I.minFilter===Ha||I.minFilter===Si)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(N,n.TEXTURE_WRAP_S,U[I.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,U[I.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,U[I.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,Q[I.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,Q[I.minFilter]),I.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,J[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(I.magFilter===Un||I.minFilter!==Ha&&I.minFilter!==Si||I.type===Fr&&e.has("OES_texture_float_linear")===!1)return;if(I.anisotropy>1||r.get(I).__currentAnisotropy){const q=e.get("EXT_texture_filter_anisotropic");n.texParameterf(N,q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,i.getMaxAnisotropy())),r.get(I).__currentAnisotropy=I.anisotropy}}}function _e(N,I){let q=!1;N.__webglInit===void 0&&(N.__webglInit=!0,I.addEventListener("dispose",P));const fe=I.source;let xe=p.get(fe);xe===void 0&&(xe={},p.set(fe,xe));const ge=X(I);if(ge!==N.__cacheKey){xe[ge]===void 0&&(xe[ge]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,q=!0),xe[ge].usedTimes++;const Ke=xe[N.__cacheKey];Ke!==void 0&&(xe[N.__cacheKey].usedTimes--,Ke.usedTimes===0&&L(I)),N.__cacheKey=ge,N.__webglTexture=xe[ge].texture}return q}function De(N,I,q){let fe=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(fe=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(fe=n.TEXTURE_3D);const xe=_e(N,I),ge=I.source;t.bindTexture(fe,N.__webglTexture,n.TEXTURE0+q);const Ke=r.get(ge);if(ge.version!==Ke.__version||xe===!0){t.activeTexture(n.TEXTURE0+q);const be=jt.getPrimaries(jt.workingColorSpace),Xe=I.colorSpace===zs?null:jt.getPrimaries(I.colorSpace),Bt=I.colorSpace===zs||be===Xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Bt);let Se=_(I.image,!1,i.maxTextureSize);Se=rt(I,Se);const je=s.convert(I.format,I.colorSpace),gt=s.convert(I.type);let pt=S(I.internalFormat,je,gt,I.colorSpace,I.isVideoTexture);se(fe,I);let Je;const V=I.mipmaps,he=I.isVideoTexture!==!0,Ne=Ke.__version===void 0||xe===!0,G=ge.dataReady,Te=E(I,Se);if(I.isDepthTexture)pt=M(I.format===al,I.type),Ne&&(he?t.texStorage2D(n.TEXTURE_2D,1,pt,Se.width,Se.height):t.texImage2D(n.TEXTURE_2D,0,pt,Se.width,Se.height,0,je,gt,null));else if(I.isDataTexture)if(V.length>0){he&&Ne&&t.texStorage2D(n.TEXTURE_2D,Te,pt,V[0].width,V[0].height);for(let oe=0,ve=V.length;oe<ve;oe++)Je=V[oe],he?G&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,Je.width,Je.height,je,gt,Je.data):t.texImage2D(n.TEXTURE_2D,oe,pt,Je.width,Je.height,0,je,gt,Je.data);I.generateMipmaps=!1}else he?(Ne&&t.texStorage2D(n.TEXTURE_2D,Te,pt,Se.width,Se.height),G&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Se.width,Se.height,je,gt,Se.data)):t.texImage2D(n.TEXTURE_2D,0,pt,Se.width,Se.height,0,je,gt,Se.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){he&&Ne&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,pt,V[0].width,V[0].height,Se.depth);for(let oe=0,ve=V.length;oe<ve;oe++)if(Je=V[oe],I.format!==ur)if(je!==null)if(he){if(G)if(I.layerUpdates.size>0){const ze=M1(Je.width,Je.height,I.format,I.type);for(const Ge of I.layerUpdates){const yt=Je.data.subarray(Ge*ze/Je.data.BYTES_PER_ELEMENT,(Ge+1)*ze/Je.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,Ge,Je.width,Je.height,1,je,yt,0,0)}I.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,0,Je.width,Je.height,Se.depth,je,Je.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,oe,pt,Je.width,Je.height,Se.depth,0,Je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?G&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,0,Je.width,Je.height,Se.depth,je,gt,Je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,oe,pt,Je.width,Je.height,Se.depth,0,je,gt,Je.data)}else{he&&Ne&&t.texStorage2D(n.TEXTURE_2D,Te,pt,V[0].width,V[0].height);for(let oe=0,ve=V.length;oe<ve;oe++)Je=V[oe],I.format!==ur?je!==null?he?G&&t.compressedTexSubImage2D(n.TEXTURE_2D,oe,0,0,Je.width,Je.height,je,Je.data):t.compressedTexImage2D(n.TEXTURE_2D,oe,pt,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?G&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,Je.width,Je.height,je,gt,Je.data):t.texImage2D(n.TEXTURE_2D,oe,pt,Je.width,Je.height,0,je,gt,Je.data)}else if(I.isDataArrayTexture)if(he){if(Ne&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,pt,Se.width,Se.height,Se.depth),G)if(I.layerUpdates.size>0){const oe=M1(Se.width,Se.height,I.format,I.type);for(const ve of I.layerUpdates){const ze=Se.data.subarray(ve*oe/Se.data.BYTES_PER_ELEMENT,(ve+1)*oe/Se.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ve,Se.width,Se.height,1,je,gt,ze)}I.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Se.width,Se.height,Se.depth,je,gt,Se.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,pt,Se.width,Se.height,Se.depth,0,je,gt,Se.data);else if(I.isData3DTexture)he?(Ne&&t.texStorage3D(n.TEXTURE_3D,Te,pt,Se.width,Se.height,Se.depth),G&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Se.width,Se.height,Se.depth,je,gt,Se.data)):t.texImage3D(n.TEXTURE_3D,0,pt,Se.width,Se.height,Se.depth,0,je,gt,Se.data);else if(I.isFramebufferTexture){if(Ne)if(he)t.texStorage2D(n.TEXTURE_2D,Te,pt,Se.width,Se.height);else{let oe=Se.width,ve=Se.height;for(let ze=0;ze<Te;ze++)t.texImage2D(n.TEXTURE_2D,ze,pt,oe,ve,0,je,gt,null),oe>>=1,ve>>=1}}else if(V.length>0){if(he&&Ne){const oe=ke(V[0]);t.texStorage2D(n.TEXTURE_2D,Te,pt,oe.width,oe.height)}for(let oe=0,ve=V.length;oe<ve;oe++)Je=V[oe],he?G&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,je,gt,Je):t.texImage2D(n.TEXTURE_2D,oe,pt,je,gt,Je);I.generateMipmaps=!1}else if(he){if(Ne){const oe=ke(Se);t.texStorage2D(n.TEXTURE_2D,Te,pt,oe.width,oe.height)}G&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,je,gt,Se)}else t.texImage2D(n.TEXTURE_2D,0,pt,je,gt,Se);x(I)&&g(fe),Ke.__version=ge.version,I.onUpdate&&I.onUpdate(I)}N.__version=I.version}function ie(N,I,q){if(I.image.length!==6)return;const fe=_e(N,I),xe=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+q);const ge=r.get(xe);if(xe.version!==ge.__version||fe===!0){t.activeTexture(n.TEXTURE0+q);const Ke=jt.getPrimaries(jt.workingColorSpace),be=I.colorSpace===zs?null:jt.getPrimaries(I.colorSpace),Xe=I.colorSpace===zs||Ke===be?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xe);const Bt=I.isCompressedTexture||I.image[0].isCompressedTexture,Se=I.image[0]&&I.image[0].isDataTexture,je=[];for(let ve=0;ve<6;ve++)!Bt&&!Se?je[ve]=_(I.image[ve],!0,i.maxCubemapSize):je[ve]=Se?I.image[ve].image:I.image[ve],je[ve]=rt(I,je[ve]);const gt=je[0],pt=s.convert(I.format,I.colorSpace),Je=s.convert(I.type),V=S(I.internalFormat,pt,Je,I.colorSpace),he=I.isVideoTexture!==!0,Ne=ge.__version===void 0||fe===!0,G=xe.dataReady;let Te=E(I,gt);se(n.TEXTURE_CUBE_MAP,I);let oe;if(Bt){he&&Ne&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,V,gt.width,gt.height);for(let ve=0;ve<6;ve++){oe=je[ve].mipmaps;for(let ze=0;ze<oe.length;ze++){const Ge=oe[ze];I.format!==ur?pt!==null?he?G&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze,0,0,Ge.width,Ge.height,pt,Ge.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze,V,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?G&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze,0,0,Ge.width,Ge.height,pt,Je,Ge.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze,V,Ge.width,Ge.height,0,pt,Je,Ge.data)}}}else{if(oe=I.mipmaps,he&&Ne){oe.length>0&&Te++;const ve=ke(je[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,V,ve.width,ve.height)}for(let ve=0;ve<6;ve++)if(Se){he?G&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,je[ve].width,je[ve].height,pt,Je,je[ve].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,V,je[ve].width,je[ve].height,0,pt,Je,je[ve].data);for(let ze=0;ze<oe.length;ze++){const yt=oe[ze].image[ve].image;he?G&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze+1,0,0,yt.width,yt.height,pt,Je,yt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze+1,V,yt.width,yt.height,0,pt,Je,yt.data)}}else{he?G&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,pt,Je,je[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,V,pt,Je,je[ve]);for(let ze=0;ze<oe.length;ze++){const Ge=oe[ze];he?G&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze+1,0,0,pt,Je,Ge.image[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ze+1,V,pt,Je,Ge.image[ve])}}}x(I)&&g(n.TEXTURE_CUBE_MAP),ge.__version=xe.version,I.onUpdate&&I.onUpdate(I)}N.__version=I.version}function ye(N,I,q,fe,xe,ge){const Ke=s.convert(q.format,q.colorSpace),be=s.convert(q.type),Xe=S(q.internalFormat,Ke,be,q.colorSpace);if(!r.get(I).__hasExternalTextures){const Se=Math.max(1,I.width>>ge),je=Math.max(1,I.height>>ge);xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,ge,Xe,Se,je,I.depth,0,Ke,be,null):t.texImage2D(xe,ge,Xe,Se,je,0,Ke,be,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),Ae(I)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,fe,xe,r.get(q).__webglTexture,0,Ce(I)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,fe,xe,r.get(q).__webglTexture,ge),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe(N,I,q){if(n.bindRenderbuffer(n.RENDERBUFFER,N),I.depthBuffer){const fe=I.depthTexture,xe=fe&&fe.isDepthTexture?fe.type:null,ge=M(I.stencilBuffer,xe),Ke=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,be=Ce(I);Ae(I)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,be,ge,I.width,I.height):q?n.renderbufferStorageMultisample(n.RENDERBUFFER,be,ge,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,ge,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ke,n.RENDERBUFFER,N)}else{const fe=I.textures;for(let xe=0;xe<fe.length;xe++){const ge=fe[xe],Ke=s.convert(ge.format,ge.colorSpace),be=s.convert(ge.type),Xe=S(ge.internalFormat,Ke,be,ge.colorSpace),Bt=Ce(I);q&&Ae(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Bt,Xe,I.width,I.height):Ae(I)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Bt,Xe,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,Xe,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function we(N,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),ee(I.depthTexture,0);const fe=r.get(I.depthTexture).__webglTexture,xe=Ce(I);if(I.depthTexture.format===Ya)Ae(I)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,fe,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,fe,0);else if(I.depthTexture.format===al)Ae(I)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,fe,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,fe,0);else throw new Error("Unknown depthTexture format")}function st(N){const I=r.get(N),q=N.isWebGLCubeRenderTarget===!0;if(I.__boundDepthTexture!==N.depthTexture){const fe=N.depthTexture;if(I.__depthDisposeCallback&&I.__depthDisposeCallback(),fe){const xe=()=>{delete I.__boundDepthTexture,delete I.__depthDisposeCallback,fe.removeEventListener("dispose",xe)};fe.addEventListener("dispose",xe),I.__depthDisposeCallback=xe}I.__boundDepthTexture=fe}if(N.depthTexture&&!I.__autoAllocateDepthBuffer){if(q)throw new Error("target.depthTexture not supported in Cube render targets");we(I.__webglFramebuffer,N)}else if(q){I.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)if(t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[fe]),I.__webglDepthbuffer[fe]===void 0)I.__webglDepthbuffer[fe]=n.createRenderbuffer(),Pe(I.__webglDepthbuffer[fe],N,!1);else{const xe=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ge=I.__webglDepthbuffer[fe];n.bindRenderbuffer(n.RENDERBUFFER,ge),n.framebufferRenderbuffer(n.FRAMEBUFFER,xe,n.RENDERBUFFER,ge)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer===void 0)I.__webglDepthbuffer=n.createRenderbuffer(),Pe(I.__webglDepthbuffer,N,!1);else{const fe=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=I.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,xe),n.framebufferRenderbuffer(n.FRAMEBUFFER,fe,n.RENDERBUFFER,xe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function lt(N,I,q){const fe=r.get(N);I!==void 0&&ye(fe.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),q!==void 0&&st(N)}function et(N){const I=N.texture,q=r.get(N),fe=r.get(I);N.addEventListener("dispose",T);const xe=N.textures,ge=N.isWebGLCubeRenderTarget===!0,Ke=xe.length>1;if(Ke||(fe.__webglTexture===void 0&&(fe.__webglTexture=n.createTexture()),fe.__version=I.version,o.memory.textures++),ge){q.__webglFramebuffer=[];for(let be=0;be<6;be++)if(I.mipmaps&&I.mipmaps.length>0){q.__webglFramebuffer[be]=[];for(let Xe=0;Xe<I.mipmaps.length;Xe++)q.__webglFramebuffer[be][Xe]=n.createFramebuffer()}else q.__webglFramebuffer[be]=n.createFramebuffer()}else{if(I.mipmaps&&I.mipmaps.length>0){q.__webglFramebuffer=[];for(let be=0;be<I.mipmaps.length;be++)q.__webglFramebuffer[be]=n.createFramebuffer()}else q.__webglFramebuffer=n.createFramebuffer();if(Ke)for(let be=0,Xe=xe.length;be<Xe;be++){const Bt=r.get(xe[be]);Bt.__webglTexture===void 0&&(Bt.__webglTexture=n.createTexture(),o.memory.textures++)}if(N.samples>0&&Ae(N)===!1){q.__webglMultisampledFramebuffer=n.createFramebuffer(),q.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,q.__webglMultisampledFramebuffer);for(let be=0;be<xe.length;be++){const Xe=xe[be];q.__webglColorRenderbuffer[be]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,q.__webglColorRenderbuffer[be]);const Bt=s.convert(Xe.format,Xe.colorSpace),Se=s.convert(Xe.type),je=S(Xe.internalFormat,Bt,Se,Xe.colorSpace,N.isXRRenderTarget===!0),gt=Ce(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,gt,je,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+be,n.RENDERBUFFER,q.__webglColorRenderbuffer[be])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(q.__webglDepthRenderbuffer=n.createRenderbuffer(),Pe(q.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ge){t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture),se(n.TEXTURE_CUBE_MAP,I);for(let be=0;be<6;be++)if(I.mipmaps&&I.mipmaps.length>0)for(let Xe=0;Xe<I.mipmaps.length;Xe++)ye(q.__webglFramebuffer[be][Xe],N,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+be,Xe);else ye(q.__webglFramebuffer[be],N,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0);x(I)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ke){for(let be=0,Xe=xe.length;be<Xe;be++){const Bt=xe[be],Se=r.get(Bt);t.bindTexture(n.TEXTURE_2D,Se.__webglTexture),se(n.TEXTURE_2D,Bt),ye(q.__webglFramebuffer,N,Bt,n.COLOR_ATTACHMENT0+be,n.TEXTURE_2D,0),x(Bt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let be=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(be=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(be,fe.__webglTexture),se(be,I),I.mipmaps&&I.mipmaps.length>0)for(let Xe=0;Xe<I.mipmaps.length;Xe++)ye(q.__webglFramebuffer[Xe],N,I,n.COLOR_ATTACHMENT0,be,Xe);else ye(q.__webglFramebuffer,N,I,n.COLOR_ATTACHMENT0,be,0);x(I)&&g(be),t.unbindTexture()}N.depthBuffer&&st(N)}function Fe(N){const I=N.textures;for(let q=0,fe=I.length;q<fe;q++){const xe=I[q];if(x(xe)){const ge=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ke=r.get(xe).__webglTexture;t.bindTexture(ge,Ke),g(ge),t.unbindTexture()}}}const me=[],O=[];function Be(N){if(N.samples>0){if(Ae(N)===!1){const I=N.textures,q=N.width,fe=N.height;let xe=n.COLOR_BUFFER_BIT;const ge=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ke=r.get(N),be=I.length>1;if(be)for(let Xe=0;Xe<I.length;Xe++)t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglFramebuffer);for(let Xe=0;Xe<I.length;Xe++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),be){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[Xe]);const Bt=r.get(I[Xe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Bt,0)}n.blitFramebuffer(0,0,q,fe,0,0,q,fe,xe,n.NEAREST),l===!0&&(me.length=0,O.length=0,me.push(n.COLOR_ATTACHMENT0+Xe),N.depthBuffer&&N.resolveDepthBuffer===!1&&(me.push(ge),O.push(ge),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,O)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,me))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),be)for(let Xe=0;Xe<I.length;Xe++){t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[Xe]);const Bt=r.get(I[Xe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.TEXTURE_2D,Bt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer)}else if(N.depthBuffer&&N.resolveDepthBuffer===!1&&l){const I=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[I])}}}function Ce(N){return Math.min(i.maxSamples,N.samples)}function Ae(N){const I=r.get(N);return N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Ee(N){const I=o.render.frame;h.get(N)!==I&&(h.set(N,I),N.update())}function rt(N,I){const q=N.colorSpace,fe=N.format,xe=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||q!==io&&q!==zs&&(jt.getTransfer(q)===en?(fe!==ur||xe!==Xi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",q)),I}function ke(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(f.width=N.naturalWidth||N.width,f.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(f.width=N.displayWidth,f.height=N.displayHeight):(f.width=N.width,f.height=N.height),f}this.allocateTextureUnit=$,this.resetTextureUnits=R,this.setTexture2D=ee,this.setTexture2DArray=le,this.setTexture3D=Z,this.setTextureCube=pe,this.rebindTextures=lt,this.setupRenderTarget=et,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=Be,this.setupDepthRenderbuffer=st,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=Ae}function xI(n,e){function t(r,i=zs){let s;const o=jt.getTransfer(i);if(r===Xi)return n.UNSIGNED_BYTE;if(r===F0)return n.UNSIGNED_SHORT_4_4_4_4;if(r===O0)return n.UNSIGNED_SHORT_5_5_5_1;if(r===jA)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===$A)return n.BYTE;if(r===XA)return n.SHORT;if(r===lu)return n.UNSIGNED_SHORT;if(r===D0)return n.INT;if(r===to)return n.UNSIGNED_INT;if(r===Fr)return n.FLOAT;if(r===xu)return n.HALF_FLOAT;if(r===JA)return n.ALPHA;if(r===KA)return n.RGB;if(r===ur)return n.RGBA;if(r===YA)return n.LUMINANCE;if(r===QA)return n.LUMINANCE_ALPHA;if(r===Ya)return n.DEPTH_COMPONENT;if(r===al)return n.DEPTH_STENCIL;if(r===N0)return n.RED;if(r===Vh)return n.RED_INTEGER;if(r===ZA)return n.RG;if(r===U0)return n.RG_INTEGER;if(r===k0)return n.RGBA_INTEGER;if(r===jf||r===Jf||r===Kf||r===Yf)if(o===en)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===jf)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Jf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Kf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Yf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===jf)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Jf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Kf)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Yf)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Eg||r===bg||r===Cg||r===Tg)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Eg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===bg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Cg)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Tg)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Rg||r===Pg||r===Bg)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===Rg||r===Pg)return o===en?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===Bg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Ig||r===Lg||r===Dg||r===Fg||r===Og||r===Ng||r===Ug||r===kg||r===Hg||r===zg||r===Gg||r===Vg||r===Wg||r===$g)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Ig)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Lg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Dg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Fg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Og)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Ng)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Ug)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===kg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Hg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===zg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Gg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Vg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Wg)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===$g)return o===en?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Qf||r===Xg||r===jg)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Qf)return o===en?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Xg)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===jg)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===qA||r===Jg||r===Kg||r===Yg)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Qf)return s.COMPRESSED_RED_RGTC1_EXT;if(r===Jg)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Kg)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Yg)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===ol?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class _I extends an{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class $s extends Dt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const yG={type:"move"};class Dx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new $s,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new $s,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new $s,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const _ of e.hand.values()){const x=t.getJointPose(_,r),g=this._getHandJoint(f,_);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const h=f.joints["index-finger-tip"],d=f.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,y=.005;f.inputState.pinching&&p>m+y?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&p<=m-y&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(yG)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new $s;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const xG=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_G=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class AG{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Zt,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Ji({vertexShader:xG,fragmentShader:_G,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new En(new _u(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class SG extends Ki{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,f=null,h=null,d=null,p=null,m=null,y=null;const _=new AG,x=t.getContextAttributes();let g=null,S=null;const M=[],E=[],P=new de;let T=null;const B=new an;B.layers.enable(1),B.viewport=new Ht;const L=new an;L.layers.enable(2),L.viewport=new Ht;const z=[B,L],b=new _I;b.layers.enable(1),b.layers.enable(2);let R=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let ye=M[ie];return ye===void 0&&(ye=new Dx,M[ie]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(ie){let ye=M[ie];return ye===void 0&&(ye=new Dx,M[ie]=ye),ye.getGripSpace()},this.getHand=function(ie){let ye=M[ie];return ye===void 0&&(ye=new Dx,M[ie]=ye),ye.getHandSpace()};function X(ie){const ye=E.indexOf(ie.inputSource);if(ye===-1)return;const Pe=M[ye];Pe!==void 0&&(Pe.update(ie.inputSource,ie.frame,f||o),Pe.dispatchEvent({type:ie.type,data:ie.inputSource}))}function ee(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",ee),i.removeEventListener("inputsourceschange",le);for(let ie=0;ie<M.length;ie++){const ye=E[ie];ye!==null&&(E[ie]=null,M[ie].disconnect(ye))}R=null,$=null,_.reset(),e.setRenderTarget(g),m=null,p=null,d=null,i=null,S=null,De.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(P.width,P.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(ie){f=ie},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(ie){if(i=ie,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",ee),i.addEventListener("inputsourceschange",le),x.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(P),i.renderState.layers===void 0){const ye={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,ye),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new ji(m.framebufferWidth,m.framebufferHeight,{format:ur,type:Xi,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let ye=null,Pe=null,we=null;x.depth&&(we=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ye=x.stencil?al:Ya,Pe=x.stencil?ol:to);const st={colorFormat:t.RGBA8,depthFormat:we,scaleFactor:s};d=new XRWebGLBinding(i,t),p=d.createProjectionLayer(st),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new ji(p.textureWidth,p.textureHeight,{format:ur,type:Xi,depthTexture:new lS(p.textureWidth,p.textureHeight,Pe,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),f=null,o=await i.requestReferenceSpace(a),De.setContext(i),De.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function le(ie){for(let ye=0;ye<ie.removed.length;ye++){const Pe=ie.removed[ye],we=E.indexOf(Pe);we>=0&&(E[we]=null,M[we].disconnect(Pe))}for(let ye=0;ye<ie.added.length;ye++){const Pe=ie.added[ye];let we=E.indexOf(Pe);if(we===-1){for(let lt=0;lt<M.length;lt++)if(lt>=E.length){E.push(Pe),we=lt;break}else if(E[lt]===null){E[lt]=Pe,we=lt;break}if(we===-1)break}const st=M[we];st&&st.connect(Pe)}}const Z=new F,pe=new F;function U(ie,ye,Pe){Z.setFromMatrixPosition(ye.matrixWorld),pe.setFromMatrixPosition(Pe.matrixWorld);const we=Z.distanceTo(pe),st=ye.projectionMatrix.elements,lt=Pe.projectionMatrix.elements,et=st[14]/(st[10]-1),Fe=st[14]/(st[10]+1),me=(st[9]+1)/st[5],O=(st[9]-1)/st[5],Be=(st[8]-1)/st[0],Ce=(lt[8]+1)/lt[0],Ae=et*Be,Ee=et*Ce,rt=we/(-Be+Ce),ke=rt*-Be;if(ye.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(ke),ie.translateZ(rt),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),st[10]===-1)ie.projectionMatrix.copy(ye.projectionMatrix),ie.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{const N=et+rt,I=Fe+rt,q=Ae-ke,fe=Ee+(we-ke),xe=me*Fe/I*N,ge=O*Fe/I*N;ie.projectionMatrix.makePerspective(q,fe,xe,ge,N,I),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function Q(ie,ye){ye===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(ye.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(i===null)return;let ye=ie.near,Pe=ie.far;_.texture!==null&&(_.depthNear>0&&(ye=_.depthNear),_.depthFar>0&&(Pe=_.depthFar)),b.near=L.near=B.near=ye,b.far=L.far=B.far=Pe,(R!==b.near||$!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),R=b.near,$=b.far);const we=ie.parent,st=b.cameras;Q(b,we);for(let lt=0;lt<st.length;lt++)Q(st[lt],we);st.length===2?U(b,B,L):b.projectionMatrix.copy(B.projectionMatrix),J(ie,b,we)};function J(ie,ye,Pe){Pe===null?ie.matrix.copy(ye.matrixWorld):(ie.matrix.copy(Pe.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(ye.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(ye.projectionMatrix),ie.projectionMatrixInverse.copy(ye.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=fu*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ie){l=ie,p!==null&&(p.fixedFoveation=ie),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ie)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(b)};let se=null;function _e(ie,ye){if(h=ye.getViewerPose(f||o),y=ye,h!==null){const Pe=h.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let we=!1;Pe.length!==b.cameras.length&&(b.cameras.length=0,we=!0);for(let lt=0;lt<Pe.length;lt++){const et=Pe[lt];let Fe=null;if(m!==null)Fe=m.getViewport(et);else{const O=d.getViewSubImage(p,et);Fe=O.viewport,lt===0&&(e.setRenderTargetTextures(S,O.colorTexture,p.ignoreDepthValues?void 0:O.depthStencilTexture),e.setRenderTarget(S))}let me=z[lt];me===void 0&&(me=new an,me.layers.enable(lt),me.viewport=new Ht,z[lt]=me),me.matrix.fromArray(et.transform.matrix),me.matrix.decompose(me.position,me.quaternion,me.scale),me.projectionMatrix.fromArray(et.projectionMatrix),me.projectionMatrixInverse.copy(me.projectionMatrix).invert(),me.viewport.set(Fe.x,Fe.y,Fe.width,Fe.height),lt===0&&(b.matrix.copy(me.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),we===!0&&b.cameras.push(me)}const st=i.enabledFeatures;if(st&&st.includes("depth-sensing")){const lt=d.getDepthInformation(Pe[0]);lt&&lt.isValid&&lt.texture&&_.init(e,lt,i.renderState)}}for(let Pe=0;Pe<M.length;Pe++){const we=E[Pe],st=M[Pe];we!==null&&st!==void 0&&st.update(we,ye,f||o)}se&&se(ie,ye),ye.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ye}),y=null}const De=new pI;De.setAnimationLoop(_e),this.setAnimationLoop=function(ie){se=ie},this.dispose=function(){}}}const Aa=new Er,MG=new ft;function wG(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function r(x,g){g.color.getRGB(x.fogColor.value,uI(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function i(x,g,S,M,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),d(x,g)):g.isMeshPhongMaterial?(s(x,g),h(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,E)):g.isMeshMatcapMaterial?(s(x,g),y(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),_(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,S,M):g.isSpriteMaterial?f(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===wr&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===wr&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const S=e.get(g),M=S.envMap,E=S.envMapRotation;M&&(x.envMap.value=M,Aa.copy(E),Aa.x*=-1,Aa.y*=-1,Aa.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Aa.y*=-1,Aa.z*=-1),x.envMapRotation.value.setFromMatrix4(MG.makeRotationFromEuler(Aa)),x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,S,M){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*S,x.scale.value=M*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function f(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function h(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function d(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,S){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===wr&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,g){g.matcap&&(x.matcap.value=g.matcap)}function _(x,g){const S=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function EG(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,M){const E=M.program;r.uniformBlockBinding(S,E)}function f(S,M){let E=i[S.id];E===void 0&&(y(S),E=h(S),i[S.id]=E,S.addEventListener("dispose",x));const P=M.program;r.updateUBOMapping(S,P);const T=e.render.frame;s[S.id]!==T&&(p(S),s[S.id]=T)}function h(S){const M=d();S.__bindingPointIndex=M;const E=n.createBuffer(),P=S.__size,T=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,P,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,E),E}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const M=i[S.id],E=S.uniforms,P=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let T=0,B=E.length;T<B;T++){const L=Array.isArray(E[T])?E[T]:[E[T]];for(let z=0,b=L.length;z<b;z++){const R=L[z];if(m(R,T,z,P)===!0){const $=R.__offset,X=Array.isArray(R.value)?R.value:[R.value];let ee=0;for(let le=0;le<X.length;le++){const Z=X[le],pe=_(Z);typeof Z=="number"||typeof Z=="boolean"?(R.__data[0]=Z,n.bufferSubData(n.UNIFORM_BUFFER,$+ee,R.__data)):Z.isMatrix3?(R.__data[0]=Z.elements[0],R.__data[1]=Z.elements[1],R.__data[2]=Z.elements[2],R.__data[3]=0,R.__data[4]=Z.elements[3],R.__data[5]=Z.elements[4],R.__data[6]=Z.elements[5],R.__data[7]=0,R.__data[8]=Z.elements[6],R.__data[9]=Z.elements[7],R.__data[10]=Z.elements[8],R.__data[11]=0):(Z.toArray(R.__data,ee),ee+=pe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,$,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,M,E,P){const T=S.value,B=M+"_"+E;if(P[B]===void 0)return typeof T=="number"||typeof T=="boolean"?P[B]=T:P[B]=T.clone(),!0;{const L=P[B];if(typeof T=="number"||typeof T=="boolean"){if(L!==T)return P[B]=T,!0}else if(L.equals(T)===!1)return L.copy(T),!0}return!1}function y(S){const M=S.uniforms;let E=0;const P=16;for(let B=0,L=M.length;B<L;B++){const z=Array.isArray(M[B])?M[B]:[M[B]];for(let b=0,R=z.length;b<R;b++){const $=z[b],X=Array.isArray($.value)?$.value:[$.value];for(let ee=0,le=X.length;ee<le;ee++){const Z=X[ee],pe=_(Z),U=E%P,Q=U%pe.boundary,J=U+Q;E+=Q,J!==0&&P-J<pe.storage&&(E+=P-J),$.__data=new Float32Array(pe.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=E,E+=pe.storage}}}const T=E%P;return T>0&&(E+=P-T),S.__size=E,S.__cache={},this}function _(S){const M={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(M.boundary=4,M.storage=4):S.isVector2?(M.boundary=8,M.storage=8):S.isVector3||S.isColor?(M.boundary=16,M.storage=12):S.isVector4?(M.boundary=16,M.storage=16):S.isMatrix3?(M.boundary=48,M.storage=48):S.isMatrix4?(M.boundary=64,M.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),M}function x(S){const M=S.target;M.removeEventListener("dispose",x);const E=o.indexOf(M.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(i[M.id]),delete i[M.id],delete s[M.id]}function g(){for(const S in i)n.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:f,dispose:g}}class AI{constructor(e={}){const{canvas:t=oI(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),y=new Int32Array(4);let _=null,x=null;const g=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Yr,this.toneMapping=vs,this.toneMappingExposure=1;const M=this;let E=!1,P=0,T=0,B=null,L=-1,z=null;const b=new Ht,R=new Ht;let $=null;const X=new Oe(0);let ee=0,le=t.width,Z=t.height,pe=1,U=null,Q=null;const J=new Ht(0,0,le,Z),se=new Ht(0,0,le,Z);let _e=!1;const De=new jh;let ie=!1,ye=!1;const Pe=new ft,we=new ft,st=new F,lt=new Ht,et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Fe=!1;function me(){return B===null?pe:1}let O=r;function Be(D,j){return t.getContext(D,j)}try{const D={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zh}`),t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",ze,!1),t.addEventListener("webglcontextcreationerror",Ge,!1),O===null){const j="webgl2";if(O=Be(j,D),O===null)throw Be(j)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let Ce,Ae,Ee,rt,ke,N,I,q,fe,xe,ge,Ke,be,Xe,Bt,Se,je,gt,pt,Je,V,he,Ne,G;function Te(){Ce=new BH(O),Ce.init(),he=new xI(O,Ce),Ae=new EH(O,Ce,e,he),Ee=new fG(O),Ae.reverseDepthBuffer&&Ee.buffers.depth.setReversed(!0),rt=new DH(O),ke=new Zz,N=new vG(O,Ce,Ee,ke,Ae,he,rt),I=new CH(M),q=new PH(M),fe=new zU(O),Ne=new MH(O,fe),xe=new IH(O,fe,rt,Ne),ge=new OH(O,xe,fe,rt),pt=new FH(O,Ae,N),Se=new bH(ke),Ke=new Qz(M,I,q,Ce,Ae,Ne,Se),be=new wG(M,ke),Xe=new eG,Bt=new oG(Ce),gt=new SH(M,I,q,Ee,ge,p,l),je=new cG(M,ge,Ae),G=new EG(O,rt,Ae,Ee),Je=new wH(O,Ce,rt),V=new LH(O,Ce,rt),rt.programs=Ke.programs,M.capabilities=Ae,M.extensions=Ce,M.properties=ke,M.renderLists=Xe,M.shadowMap=je,M.state=Ee,M.info=rt}Te();const oe=new SG(M,O);this.xr=oe,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){const D=Ce.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=Ce.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(D){D!==void 0&&(pe=D,this.setSize(le,Z,!1))},this.getSize=function(D){return D.set(le,Z)},this.setSize=function(D,j,ne=!0){if(oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}le=D,Z=j,t.width=Math.floor(D*pe),t.height=Math.floor(j*pe),ne===!0&&(t.style.width=D+"px",t.style.height=j+"px"),this.setViewport(0,0,D,j)},this.getDrawingBufferSize=function(D){return D.set(le*pe,Z*pe).floor()},this.setDrawingBufferSize=function(D,j,ne){le=D,Z=j,pe=ne,t.width=Math.floor(D*ne),t.height=Math.floor(j*ne),this.setViewport(0,0,D,j)},this.getCurrentViewport=function(D){return D.copy(b)},this.getViewport=function(D){return D.copy(J)},this.setViewport=function(D,j,ne,re){D.isVector4?J.set(D.x,D.y,D.z,D.w):J.set(D,j,ne,re),Ee.viewport(b.copy(J).multiplyScalar(pe).round())},this.getScissor=function(D){return D.copy(se)},this.setScissor=function(D,j,ne,re){D.isVector4?se.set(D.x,D.y,D.z,D.w):se.set(D,j,ne,re),Ee.scissor(R.copy(se).multiplyScalar(pe).round())},this.getScissorTest=function(){return _e},this.setScissorTest=function(D){Ee.setScissorTest(_e=D)},this.setOpaqueSort=function(D){U=D},this.setTransparentSort=function(D){Q=D},this.getClearColor=function(D){return D.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor.apply(gt,arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha.apply(gt,arguments)},this.clear=function(D=!0,j=!0,ne=!0){let re=0;if(D){let Y=!1;if(B!==null){const Ie=B.texture.format;Y=Ie===k0||Ie===U0||Ie===Vh}if(Y){const Ie=B.texture.type,We=Ie===Xi||Ie===to||Ie===lu||Ie===ol||Ie===F0||Ie===O0,Qe=gt.getClearColor(),Ze=gt.getClearAlpha(),dt=Qe.r,mt=Qe.g,ot=Qe.b;We?(m[0]=dt,m[1]=mt,m[2]=ot,m[3]=Ze,O.clearBufferuiv(O.COLOR,0,m)):(y[0]=dt,y[1]=mt,y[2]=ot,y[3]=Ze,O.clearBufferiv(O.COLOR,0,y))}else re|=O.COLOR_BUFFER_BIT}j&&(re|=O.DEPTH_BUFFER_BIT,O.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),ne&&(re|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",ze,!1),t.removeEventListener("webglcontextcreationerror",Ge,!1),Xe.dispose(),Bt.dispose(),ke.dispose(),I.dispose(),q.dispose(),ge.dispose(),Ne.dispose(),G.dispose(),Ke.dispose(),oe.dispose(),oe.removeEventListener("sessionstart",hd),oe.removeEventListener("sessionend",dd),Ms.stop()};function ve(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function ze(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const D=rt.autoReset,j=je.enabled,ne=je.autoUpdate,re=je.needsUpdate,Y=je.type;Te(),rt.autoReset=D,je.enabled=j,je.autoUpdate=ne,je.needsUpdate=re,je.type=Y}function Ge(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function yt(D){const j=D.target;j.removeEventListener("dispose",yt),Ut(j)}function Ut(D){xn(D),ke.remove(D)}function xn(D){const j=ke.get(D).programs;j!==void 0&&(j.forEach(function(ne){Ke.releaseProgram(ne)}),D.isShaderMaterial&&Ke.releaseShaderCache(D))}this.renderBufferDirect=function(D,j,ne,re,Y,Ie){j===null&&(j=et);const We=Y.isMesh&&Y.matrixWorld.determinant()<0,Qe=Cv(D,j,ne,re,Y);Ee.setMaterial(re,We);let Ze=ne.index,dt=1;if(re.wireframe===!0){if(Ze=xe.getWireframeAttribute(ne),Ze===void 0)return;dt=2}const mt=ne.drawRange,ot=ne.attributes.position;let kt=mt.start*dt,Vt=(mt.start+mt.count)*dt;Ie!==null&&(kt=Math.max(kt,Ie.start*dt),Vt=Math.min(Vt,(Ie.start+Ie.count)*dt)),Ze!==null?(kt=Math.max(kt,0),Vt=Math.min(Vt,Ze.count)):ot!=null&&(kt=Math.max(kt,0),Vt=Math.min(Vt,ot.count));const Jt=Vt-kt;if(Jt<0||Jt===1/0)return;Ne.setup(Y,re,Qe,ne,Ze);let Rt,ct=Je;if(Ze!==null&&(Rt=fe.get(Ze),ct=V,ct.setIndex(Rt)),Y.isMesh)re.wireframe===!0?(Ee.setLineWidth(re.wireframeLinewidth*me()),ct.setMode(O.LINES)):ct.setMode(O.TRIANGLES);else if(Y.isLine){let tt=re.linewidth;tt===void 0&&(tt=1),Ee.setLineWidth(tt*me()),Y.isLineSegments?ct.setMode(O.LINES):Y.isLineLoop?ct.setMode(O.LINE_LOOP):ct.setMode(O.LINE_STRIP)}else Y.isPoints?ct.setMode(O.POINTS):Y.isSprite&&ct.setMode(O.TRIANGLES);if(Y.isBatchedMesh)if(Y._multiDrawInstances!==null)ct.renderMultiDrawInstances(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount,Y._multiDrawInstances);else if(Ce.get("WEBGL_multi_draw"))ct.renderMultiDraw(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount);else{const tt=Y._multiDrawStarts,Ot=Y._multiDrawCounts,_t=Y._multiDrawCount,Dn=Ze?fe.get(Ze).bytesPerElement:1,zr=ke.get(re).currentProgram.getUniforms();for(let Yt=0;Yt<_t;Yt++)zr.setValue(O,"_gl_DrawID",Yt),ct.render(tt[Yt]/Dn,Ot[Yt])}else if(Y.isInstancedMesh)ct.renderInstances(kt,Jt,Y.count);else if(ne.isInstancedBufferGeometry){const tt=ne._maxInstanceCount!==void 0?ne._maxInstanceCount:1/0,Ot=Math.min(ne.instanceCount,tt);ct.renderInstances(kt,Jt,Ot)}else ct.render(kt,Jt)};function Ct(D,j,ne){D.transparent===!0&&D.side===xi&&D.forceSinglePass===!1?(D.side=wr,D.needsUpdate=!0,Pl(D,j,ne),D.side=As,D.needsUpdate=!0,Pl(D,j,ne),D.side=xi):Pl(D,j,ne)}this.compile=function(D,j,ne=null){ne===null&&(ne=D),x=Bt.get(ne),x.init(j),S.push(x),ne.traverseVisible(function(Y){Y.isLight&&Y.layers.test(j.layers)&&(x.pushLight(Y),Y.castShadow&&x.pushShadow(Y))}),D!==ne&&D.traverseVisible(function(Y){Y.isLight&&Y.layers.test(j.layers)&&(x.pushLight(Y),Y.castShadow&&x.pushShadow(Y))}),x.setupLights();const re=new Set;return D.traverse(function(Y){if(!(Y.isMesh||Y.isPoints||Y.isLine||Y.isSprite))return;const Ie=Y.material;if(Ie)if(Array.isArray(Ie))for(let We=0;We<Ie.length;We++){const Qe=Ie[We];Ct(Qe,ne,Y),re.add(Qe)}else Ct(Ie,ne,Y),re.add(Ie)}),S.pop(),x=null,re},this.compileAsync=function(D,j,ne=null){const re=this.compile(D,j,ne);return new Promise(Y=>{function Ie(){if(re.forEach(function(We){ke.get(We).currentProgram.isReady()&&re.delete(We)}),re.size===0){Y(D);return}setTimeout(Ie,10)}Ce.get("KHR_parallel_shader_compile")!==null?Ie():setTimeout(Ie,10)})};let dn=null;function Jn(D){dn&&dn(D)}function hd(){Ms.stop()}function dd(){Ms.start()}const Ms=new pI;Ms.setAnimationLoop(Jn),typeof self<"u"&&Ms.setContext(self),this.setAnimationLoop=function(D){dn=D,oe.setAnimationLoop(D),D===null?Ms.stop():Ms.start()},oe.addEventListener("sessionstart",hd),oe.addEventListener("sessionend",dd),this.render=function(D,j){if(j!==void 0&&j.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),j.parent===null&&j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),oe.enabled===!0&&oe.isPresenting===!0&&(oe.cameraAutoUpdate===!0&&oe.updateCamera(j),j=oe.getCamera()),D.isScene===!0&&D.onBeforeRender(M,D,j,B),x=Bt.get(D,S.length),x.init(j),S.push(x),we.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),De.setFromProjectionMatrix(we),ye=this.localClippingEnabled,ie=Se.init(this.clippingPlanes,ye),_=Xe.get(D,g.length),_.init(),g.push(_),oe.enabled===!0&&oe.isPresenting===!0){const Ie=M.xr.getDepthSensingMesh();Ie!==null&&Tl(Ie,j,-1/0,M.sortObjects)}Tl(D,j,0,M.sortObjects),_.finish(),M.sortObjects===!0&&_.sort(U,Q),Fe=oe.enabled===!1||oe.isPresenting===!1||oe.hasDepthSensing()===!1,Fe&&gt.addToRenderList(_,D),this.info.render.frame++,ie===!0&&Se.beginShadows();const ne=x.state.shadowsArray;je.render(ne,D,j),ie===!0&&Se.endShadows(),this.info.autoReset===!0&&this.info.reset();const re=_.opaque,Y=_.transmissive;if(x.setupLights(),j.isArrayCamera){const Ie=j.cameras;if(Y.length>0)for(let We=0,Qe=Ie.length;We<Qe;We++){const Ze=Ie[We];pd(re,Y,D,Ze)}Fe&&gt.render(D);for(let We=0,Qe=Ie.length;We<Qe;We++){const Ze=Ie[We];Rl(_,D,Ze,Ze.viewport)}}else Y.length>0&&pd(re,Y,D,j),Fe&&gt.render(D),Rl(_,D,j);B!==null&&(N.updateMultisampleRenderTarget(B),N.updateRenderTargetMipmap(B)),D.isScene===!0&&D.onAfterRender(M,D,j),Ne.resetDefaultState(),L=-1,z=null,S.pop(),S.length>0?(x=S[S.length-1],ie===!0&&Se.setGlobalState(M.clippingPlanes,x.state.camera)):x=null,g.pop(),g.length>0?_=g[g.length-1]:_=null};function Tl(D,j,ne,re){if(D.visible===!1)return;if(D.layers.test(j.layers)){if(D.isGroup)ne=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(j);else if(D.isLight)x.pushLight(D),D.castShadow&&x.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||De.intersectsSprite(D)){re&&lt.setFromMatrixPosition(D.matrixWorld).applyMatrix4(we);const We=ge.update(D),Qe=D.material;Qe.visible&&_.push(D,We,Qe,ne,lt.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||De.intersectsObject(D))){const We=ge.update(D),Qe=D.material;if(re&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),lt.copy(D.boundingSphere.center)):(We.boundingSphere===null&&We.computeBoundingSphere(),lt.copy(We.boundingSphere.center)),lt.applyMatrix4(D.matrixWorld).applyMatrix4(we)),Array.isArray(Qe)){const Ze=We.groups;for(let dt=0,mt=Ze.length;dt<mt;dt++){const ot=Ze[dt],kt=Qe[ot.materialIndex];kt&&kt.visible&&_.push(D,We,kt,ne,lt.z,ot)}}else Qe.visible&&_.push(D,We,Qe,ne,lt.z,null)}}const Ie=D.children;for(let We=0,Qe=Ie.length;We<Qe;We++)Tl(Ie[We],j,ne,re)}function Rl(D,j,ne,re){const Y=D.opaque,Ie=D.transmissive,We=D.transparent;x.setupLightsView(ne),ie===!0&&Se.setGlobalState(M.clippingPlanes,ne),re&&Ee.viewport(b.copy(re)),Y.length>0&&ts(Y,j,ne),Ie.length>0&&ts(Ie,j,ne),We.length>0&&ts(We,j,ne),Ee.buffers.depth.setTest(!0),Ee.buffers.depth.setMask(!0),Ee.buffers.color.setMask(!0),Ee.setPolygonOffset(!1)}function pd(D,j,ne,re){if((ne.isScene===!0?ne.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[re.id]===void 0&&(x.state.transmissionRenderTarget[re.id]=new ji(1,1,{generateMipmaps:!0,type:Ce.has("EXT_color_buffer_half_float")||Ce.has("EXT_color_buffer_float")?xu:Xi,minFilter:Si,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:jt.workingColorSpace}));const Ie=x.state.transmissionRenderTarget[re.id],We=re.viewport||b;Ie.setSize(We.z,We.w);const Qe=M.getRenderTarget();M.setRenderTarget(Ie),M.getClearColor(X),ee=M.getClearAlpha(),ee<1&&M.setClearColor(16777215,.5),M.clear(),Fe&&gt.render(ne);const Ze=M.toneMapping;M.toneMapping=vs;const dt=re.viewport;if(re.viewport!==void 0&&(re.viewport=void 0),x.setupLightsView(re),ie===!0&&Se.setGlobalState(M.clippingPlanes,re),ts(D,ne,re),N.updateMultisampleRenderTarget(Ie),N.updateRenderTargetMipmap(Ie),Ce.has("WEBGL_multisampled_render_to_texture")===!1){let mt=!1;for(let ot=0,kt=j.length;ot<kt;ot++){const Vt=j[ot],Jt=Vt.object,Rt=Vt.geometry,ct=Vt.material,tt=Vt.group;if(ct.side===xi&&Jt.layers.test(re.layers)){const Ot=ct.side;ct.side=wr,ct.needsUpdate=!0,md(Jt,ne,re,Rt,ct,tt),ct.side=Ot,ct.needsUpdate=!0,mt=!0}}mt===!0&&(N.updateMultisampleRenderTarget(Ie),N.updateRenderTargetMipmap(Ie))}M.setRenderTarget(Qe),M.setClearColor(X,ee),dt!==void 0&&(re.viewport=dt),M.toneMapping=Ze}function ts(D,j,ne){const re=j.isScene===!0?j.overrideMaterial:null;for(let Y=0,Ie=D.length;Y<Ie;Y++){const We=D[Y],Qe=We.object,Ze=We.geometry,dt=re===null?We.material:re,mt=We.group;Qe.layers.test(ne.layers)&&md(Qe,j,ne,Ze,dt,mt)}}function md(D,j,ne,re,Y,Ie){D.onBeforeRender(M,j,ne,re,Y,Ie),D.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),Y.onBeforeRender(M,j,ne,re,D,Ie),Y.transparent===!0&&Y.side===xi&&Y.forceSinglePass===!1?(Y.side=wr,Y.needsUpdate=!0,M.renderBufferDirect(ne,j,re,Y,D,Ie),Y.side=As,Y.needsUpdate=!0,M.renderBufferDirect(ne,j,re,Y,D,Ie),Y.side=xi):M.renderBufferDirect(ne,j,re,Y,D,Ie),D.onAfterRender(M,j,ne,re,Y,Ie)}function Pl(D,j,ne){j.isScene!==!0&&(j=et);const re=ke.get(D),Y=x.state.lights,Ie=x.state.shadowsArray,We=Y.state.version,Qe=Ke.getParameters(D,Y.state,Ie,j,ne),Ze=Ke.getProgramCacheKey(Qe);let dt=re.programs;re.environment=D.isMeshStandardMaterial?j.environment:null,re.fog=j.fog,re.envMap=(D.isMeshStandardMaterial?q:I).get(D.envMap||re.environment),re.envMapRotation=re.environment!==null&&D.envMap===null?j.environmentRotation:D.envMapRotation,dt===void 0&&(D.addEventListener("dispose",yt),dt=new Map,re.programs=dt);let mt=dt.get(Ze);if(mt!==void 0){if(re.currentProgram===mt&&re.lightsStateVersion===We)return vd(D,Qe),mt}else Qe.uniforms=Ke.getUniforms(D),D.onBeforeCompile(Qe,M),mt=Ke.acquireProgram(Qe,Ze),dt.set(Ze,mt),re.uniforms=Qe.uniforms;const ot=re.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(ot.clippingPlanes=Se.uniform),vd(D,Qe),re.needsLights=Rv(D),re.lightsStateVersion=We,re.needsLights&&(ot.ambientLightColor.value=Y.state.ambient,ot.lightProbe.value=Y.state.probe,ot.directionalLights.value=Y.state.directional,ot.directionalLightShadows.value=Y.state.directionalShadow,ot.spotLights.value=Y.state.spot,ot.spotLightShadows.value=Y.state.spotShadow,ot.rectAreaLights.value=Y.state.rectArea,ot.ltc_1.value=Y.state.rectAreaLTC1,ot.ltc_2.value=Y.state.rectAreaLTC2,ot.pointLights.value=Y.state.point,ot.pointLightShadows.value=Y.state.pointShadow,ot.hemisphereLights.value=Y.state.hemi,ot.directionalShadowMap.value=Y.state.directionalShadowMap,ot.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,ot.spotShadowMap.value=Y.state.spotShadowMap,ot.spotLightMatrix.value=Y.state.spotLightMatrix,ot.spotLightMap.value=Y.state.spotLightMap,ot.pointShadowMap.value=Y.state.pointShadowMap,ot.pointShadowMatrix.value=Y.state.pointShadowMatrix),re.currentProgram=mt,re.uniformsList=null,mt}function gd(D){if(D.uniformsList===null){const j=D.currentProgram.getUniforms();D.uniformsList=Vm.seqWithValue(j.seq,D.uniforms)}return D.uniformsList}function vd(D,j){const ne=ke.get(D);ne.outputColorSpace=j.outputColorSpace,ne.batching=j.batching,ne.batchingColor=j.batchingColor,ne.instancing=j.instancing,ne.instancingColor=j.instancingColor,ne.instancingMorph=j.instancingMorph,ne.skinning=j.skinning,ne.morphTargets=j.morphTargets,ne.morphNormals=j.morphNormals,ne.morphColors=j.morphColors,ne.morphTargetsCount=j.morphTargetsCount,ne.numClippingPlanes=j.numClippingPlanes,ne.numIntersection=j.numClipIntersection,ne.vertexAlphas=j.vertexAlphas,ne.vertexTangents=j.vertexTangents,ne.toneMapping=j.toneMapping}function Cv(D,j,ne,re,Y){j.isScene!==!0&&(j=et),N.resetTextureUnits();const Ie=j.fog,We=re.isMeshStandardMaterial?j.environment:null,Qe=B===null?M.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:io,Ze=(re.isMeshStandardMaterial?q:I).get(re.envMap||We),dt=re.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,mt=!!ne.attributes.tangent&&(!!re.normalMap||re.anisotropy>0),ot=!!ne.morphAttributes.position,kt=!!ne.morphAttributes.normal,Vt=!!ne.morphAttributes.color;let Jt=vs;re.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Jt=M.toneMapping);const Rt=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,ct=Rt!==void 0?Rt.length:0,tt=ke.get(re),Ot=x.state.lights;if(ie===!0&&(ye===!0||D!==z)){const mr=D===z&&re.id===L;Se.setState(re,D,mr)}let _t=!1;re.version===tt.__version?(tt.needsLights&&tt.lightsStateVersion!==Ot.state.version||tt.outputColorSpace!==Qe||Y.isBatchedMesh&&tt.batching===!1||!Y.isBatchedMesh&&tt.batching===!0||Y.isBatchedMesh&&tt.batchingColor===!0&&Y.colorTexture===null||Y.isBatchedMesh&&tt.batchingColor===!1&&Y.colorTexture!==null||Y.isInstancedMesh&&tt.instancing===!1||!Y.isInstancedMesh&&tt.instancing===!0||Y.isSkinnedMesh&&tt.skinning===!1||!Y.isSkinnedMesh&&tt.skinning===!0||Y.isInstancedMesh&&tt.instancingColor===!0&&Y.instanceColor===null||Y.isInstancedMesh&&tt.instancingColor===!1&&Y.instanceColor!==null||Y.isInstancedMesh&&tt.instancingMorph===!0&&Y.morphTexture===null||Y.isInstancedMesh&&tt.instancingMorph===!1&&Y.morphTexture!==null||tt.envMap!==Ze||re.fog===!0&&tt.fog!==Ie||tt.numClippingPlanes!==void 0&&(tt.numClippingPlanes!==Se.numPlanes||tt.numIntersection!==Se.numIntersection)||tt.vertexAlphas!==dt||tt.vertexTangents!==mt||tt.morphTargets!==ot||tt.morphNormals!==kt||tt.morphColors!==Vt||tt.toneMapping!==Jt||tt.morphTargetsCount!==ct)&&(_t=!0):(_t=!0,tt.__version=re.version);let Dn=tt.currentProgram;_t===!0&&(Dn=Pl(re,j,Y));let zr=!1,Yt=!1,lo=!1;const cn=Dn.getUniforms(),Ri=tt.uniforms;if(Ee.useProgram(Dn.program)&&(zr=!0,Yt=!0,lo=!0),re.id!==L&&(L=re.id,Yt=!0),zr||z!==D){Ae.reverseDepthBuffer?(Pe.copy(D.projectionMatrix),fU(Pe),hU(Pe),cn.setValue(O,"projectionMatrix",Pe)):cn.setValue(O,"projectionMatrix",D.projectionMatrix),cn.setValue(O,"viewMatrix",D.matrixWorldInverse);const mr=cn.map.cameraPosition;mr!==void 0&&mr.setValue(O,st.setFromMatrixPosition(D.matrixWorld)),Ae.logarithmicDepthBuffer&&cn.setValue(O,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&cn.setValue(O,"isOrthographic",D.isOrthographicCamera===!0),z!==D&&(z=D,Yt=!0,lo=!0)}if(Y.isSkinnedMesh){cn.setOptional(O,Y,"bindMatrix"),cn.setOptional(O,Y,"bindMatrixInverse");const mr=Y.skeleton;mr&&(mr.boneTexture===null&&mr.computeBoneTexture(),cn.setValue(O,"boneTexture",mr.boneTexture,N))}Y.isBatchedMesh&&(cn.setOptional(O,Y,"batchingTexture"),cn.setValue(O,"batchingTexture",Y._matricesTexture,N),cn.setOptional(O,Y,"batchingIdTexture"),cn.setValue(O,"batchingIdTexture",Y._indirectTexture,N),cn.setOptional(O,Y,"batchingColorTexture"),Y._colorsTexture!==null&&cn.setValue(O,"batchingColorTexture",Y._colorsTexture,N));const co=ne.morphAttributes;if((co.position!==void 0||co.normal!==void 0||co.color!==void 0)&&pt.update(Y,ne,Dn),(Yt||tt.receiveShadow!==Y.receiveShadow)&&(tt.receiveShadow=Y.receiveShadow,cn.setValue(O,"receiveShadow",Y.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(Ri.envMap.value=Ze,Ri.flipEnvMap.value=Ze.isCubeTexture&&Ze.isRenderTargetTexture===!1?-1:1),re.isMeshStandardMaterial&&re.envMap===null&&j.environment!==null&&(Ri.envMapIntensity.value=j.environmentIntensity),Yt&&(cn.setValue(O,"toneMappingExposure",M.toneMappingExposure),tt.needsLights&&Tv(Ri,lo),Ie&&re.fog===!0&&be.refreshFogUniforms(Ri,Ie),be.refreshMaterialUniforms(Ri,re,pe,Z,x.state.transmissionRenderTarget[D.id]),Vm.upload(O,gd(tt),Ri,N)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(Vm.upload(O,gd(tt),Ri,N),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&cn.setValue(O,"center",Y.center),cn.setValue(O,"modelViewMatrix",Y.modelViewMatrix),cn.setValue(O,"normalMatrix",Y.normalMatrix),cn.setValue(O,"modelMatrix",Y.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const mr=re.uniformsGroups;for(let gr=0,Pv=mr.length;gr<Pv;gr++){const yd=mr[gr];G.update(yd,Dn),G.bind(yd,Dn)}}return Dn}function Tv(D,j){D.ambientLightColor.needsUpdate=j,D.lightProbe.needsUpdate=j,D.directionalLights.needsUpdate=j,D.directionalLightShadows.needsUpdate=j,D.pointLights.needsUpdate=j,D.pointLightShadows.needsUpdate=j,D.spotLights.needsUpdate=j,D.spotLightShadows.needsUpdate=j,D.rectAreaLights.needsUpdate=j,D.hemisphereLights.needsUpdate=j}function Rv(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(D,j,ne){ke.get(D.texture).__webglTexture=j,ke.get(D.depthTexture).__webglTexture=ne;const re=ke.get(D);re.__hasExternalTextures=!0,re.__autoAllocateDepthBuffer=ne===void 0,re.__autoAllocateDepthBuffer||Ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,j){const ne=ke.get(D);ne.__webglFramebuffer=j,ne.__useDefaultFramebuffer=j===void 0},this.setRenderTarget=function(D,j=0,ne=0){B=D,P=j,T=ne;let re=!0,Y=null,Ie=!1,We=!1;if(D){const Ze=ke.get(D);if(Ze.__useDefaultFramebuffer!==void 0)Ee.bindFramebuffer(O.FRAMEBUFFER,null),re=!1;else if(Ze.__webglFramebuffer===void 0)N.setupRenderTarget(D);else if(Ze.__hasExternalTextures)N.rebindTextures(D,ke.get(D.texture).__webglTexture,ke.get(D.depthTexture).__webglTexture);else if(D.depthBuffer){const ot=D.depthTexture;if(Ze.__boundDepthTexture!==ot){if(ot!==null&&ke.has(ot)&&(D.width!==ot.image.width||D.height!==ot.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");N.setupDepthRenderbuffer(D)}}const dt=D.texture;(dt.isData3DTexture||dt.isDataArrayTexture||dt.isCompressedArrayTexture)&&(We=!0);const mt=ke.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(mt[j])?Y=mt[j][ne]:Y=mt[j],Ie=!0):D.samples>0&&N.useMultisampledRTT(D)===!1?Y=ke.get(D).__webglMultisampledFramebuffer:Array.isArray(mt)?Y=mt[ne]:Y=mt,b.copy(D.viewport),R.copy(D.scissor),$=D.scissorTest}else b.copy(J).multiplyScalar(pe).floor(),R.copy(se).multiplyScalar(pe).floor(),$=_e;if(Ee.bindFramebuffer(O.FRAMEBUFFER,Y)&&re&&Ee.drawBuffers(D,Y),Ee.viewport(b),Ee.scissor(R),Ee.setScissorTest($),Ie){const Ze=ke.get(D.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+j,Ze.__webglTexture,ne)}else if(We){const Ze=ke.get(D.texture),dt=j||0;O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,Ze.__webglTexture,ne||0,dt)}L=-1},this.readRenderTargetPixels=function(D,j,ne,re,Y,Ie,We){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Qe=ke.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&We!==void 0&&(Qe=Qe[We]),Qe){Ee.bindFramebuffer(O.FRAMEBUFFER,Qe);try{const Ze=D.texture,dt=Ze.format,mt=Ze.type;if(!Ae.textureFormatReadable(dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ae.textureTypeReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}j>=0&&j<=D.width-re&&ne>=0&&ne<=D.height-Y&&O.readPixels(j,ne,re,Y,he.convert(dt),he.convert(mt),Ie)}finally{const Ze=B!==null?ke.get(B).__webglFramebuffer:null;Ee.bindFramebuffer(O.FRAMEBUFFER,Ze)}}},this.readRenderTargetPixelsAsync=async function(D,j,ne,re,Y,Ie,We){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Qe=ke.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&We!==void 0&&(Qe=Qe[We]),Qe){const Ze=D.texture,dt=Ze.format,mt=Ze.type;if(!Ae.textureFormatReadable(dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ae.textureTypeReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(j>=0&&j<=D.width-re&&ne>=0&&ne<=D.height-Y){Ee.bindFramebuffer(O.FRAMEBUFFER,Qe);const ot=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,ot),O.bufferData(O.PIXEL_PACK_BUFFER,Ie.byteLength,O.STREAM_READ),O.readPixels(j,ne,re,Y,he.convert(dt),he.convert(mt),0);const kt=B!==null?ke.get(B).__webglFramebuffer:null;Ee.bindFramebuffer(O.FRAMEBUFFER,kt);const Vt=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);return O.flush(),await uU(O,Vt,4),O.bindBuffer(O.PIXEL_PACK_BUFFER,ot),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,Ie),O.deleteBuffer(ot),O.deleteSync(Vt),Ie}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(D,j=null,ne=0){D.isTexture!==!0&&(Gm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),j=arguments[0]||null,D=arguments[1]);const re=Math.pow(2,-ne),Y=Math.floor(D.image.width*re),Ie=Math.floor(D.image.height*re),We=j!==null?j.x:0,Qe=j!==null?j.y:0;N.setTexture2D(D,0),O.copyTexSubImage2D(O.TEXTURE_2D,ne,0,0,We,Qe,Y,Ie),Ee.unbindTexture()},this.copyTextureToTexture=function(D,j,ne=null,re=null,Y=0){D.isTexture!==!0&&(Gm("WebGLRenderer: copyTextureToTexture function signature has changed."),re=arguments[0]||null,D=arguments[1],j=arguments[2],Y=arguments[3]||0,ne=null);let Ie,We,Qe,Ze,dt,mt;ne!==null?(Ie=ne.max.x-ne.min.x,We=ne.max.y-ne.min.y,Qe=ne.min.x,Ze=ne.min.y):(Ie=D.image.width,We=D.image.height,Qe=0,Ze=0),re!==null?(dt=re.x,mt=re.y):(dt=0,mt=0);const ot=he.convert(j.format),kt=he.convert(j.type);N.setTexture2D(j,0),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,j.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,j.unpackAlignment);const Vt=O.getParameter(O.UNPACK_ROW_LENGTH),Jt=O.getParameter(O.UNPACK_IMAGE_HEIGHT),Rt=O.getParameter(O.UNPACK_SKIP_PIXELS),ct=O.getParameter(O.UNPACK_SKIP_ROWS),tt=O.getParameter(O.UNPACK_SKIP_IMAGES),Ot=D.isCompressedTexture?D.mipmaps[Y]:D.image;O.pixelStorei(O.UNPACK_ROW_LENGTH,Ot.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Ot.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,Qe),O.pixelStorei(O.UNPACK_SKIP_ROWS,Ze),D.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,Y,dt,mt,Ie,We,ot,kt,Ot.data):D.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,Y,dt,mt,Ot.width,Ot.height,ot,Ot.data):O.texSubImage2D(O.TEXTURE_2D,Y,dt,mt,Ie,We,ot,kt,Ot),O.pixelStorei(O.UNPACK_ROW_LENGTH,Vt),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Jt),O.pixelStorei(O.UNPACK_SKIP_PIXELS,Rt),O.pixelStorei(O.UNPACK_SKIP_ROWS,ct),O.pixelStorei(O.UNPACK_SKIP_IMAGES,tt),Y===0&&j.generateMipmaps&&O.generateMipmap(O.TEXTURE_2D),Ee.unbindTexture()},this.copyTextureToTexture3D=function(D,j,ne=null,re=null,Y=0){D.isTexture!==!0&&(Gm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ne=arguments[0]||null,re=arguments[1]||null,D=arguments[2],j=arguments[3],Y=arguments[4]||0);let Ie,We,Qe,Ze,dt,mt,ot,kt,Vt;const Jt=D.isCompressedTexture?D.mipmaps[Y]:D.image;ne!==null?(Ie=ne.max.x-ne.min.x,We=ne.max.y-ne.min.y,Qe=ne.max.z-ne.min.z,Ze=ne.min.x,dt=ne.min.y,mt=ne.min.z):(Ie=Jt.width,We=Jt.height,Qe=Jt.depth,Ze=0,dt=0,mt=0),re!==null?(ot=re.x,kt=re.y,Vt=re.z):(ot=0,kt=0,Vt=0);const Rt=he.convert(j.format),ct=he.convert(j.type);let tt;if(j.isData3DTexture)N.setTexture3D(j,0),tt=O.TEXTURE_3D;else if(j.isDataArrayTexture||j.isCompressedArrayTexture)N.setTexture2DArray(j,0),tt=O.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,j.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,j.unpackAlignment);const Ot=O.getParameter(O.UNPACK_ROW_LENGTH),_t=O.getParameter(O.UNPACK_IMAGE_HEIGHT),Dn=O.getParameter(O.UNPACK_SKIP_PIXELS),zr=O.getParameter(O.UNPACK_SKIP_ROWS),Yt=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,Jt.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Jt.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,Ze),O.pixelStorei(O.UNPACK_SKIP_ROWS,dt),O.pixelStorei(O.UNPACK_SKIP_IMAGES,mt),D.isDataTexture||D.isData3DTexture?O.texSubImage3D(tt,Y,ot,kt,Vt,Ie,We,Qe,Rt,ct,Jt.data):j.isCompressedArrayTexture?O.compressedTexSubImage3D(tt,Y,ot,kt,Vt,Ie,We,Qe,Rt,Jt.data):O.texSubImage3D(tt,Y,ot,kt,Vt,Ie,We,Qe,Rt,ct,Jt),O.pixelStorei(O.UNPACK_ROW_LENGTH,Ot),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,_t),O.pixelStorei(O.UNPACK_SKIP_PIXELS,Dn),O.pixelStorei(O.UNPACK_SKIP_ROWS,zr),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Yt),Y===0&&j.generateMipmaps&&O.generateMipmap(tt),Ee.unbindTexture()},this.initRenderTarget=function(D){ke.get(D).__webglFramebuffer===void 0&&N.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?N.setTextureCube(D,0):D.isData3DTexture?N.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?N.setTexture2DArray(D,0):N.setTexture2D(D,0),Ee.unbindTexture()},this.resetState=function(){P=0,T=0,B=null,Ee.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ps}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===z0?"display-p3":"srgb",t.unpackColorSpace=jt.workingColorSpace===Wh?"display-p3":"srgb"}}class W0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Oe(e),this.density=t}clone(){return new W0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class $0{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Oe(e),this.near=t,this.far=r}clone(){return new $0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Zg extends Dt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Er,this.environmentIntensity=1,this.environmentRotation=new Er,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Jh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Eh,this.updateRanges=[],this.version=0,this.uuid=ti()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ti()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ti()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const xr=new F;class Yo{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyMatrix4(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyNormalMatrix(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.transformDirection(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Sr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Et(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Et(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Sr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Sr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Sr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Sr(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Et(t,this.array),r=Et(r,this.array),i=Et(i,this.array),s=Et(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Gt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Yo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class fS extends Ln{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let rc;const df=new F,ic=new F,sc=new F,oc=new de,pf=new de,SI=new ft,Kp=new F,mf=new F,Yp=new F,iC=new de,Fx=new de,sC=new de;class MI extends Dt{constructor(e=new fS){if(super(),this.isSprite=!0,this.type="Sprite",rc===void 0){rc=new At;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Jh(t,5);rc.setIndex([0,1,2,0,2,3]),rc.setAttribute("position",new Yo(r,3,0,!1)),rc.setAttribute("uv",new Yo(r,2,3,!1))}this.geometry=rc,this.material=e,this.center=new de(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ic.setFromMatrixScale(this.matrixWorld),SI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ic.multiplyScalar(-sc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Qp(Kp.set(-.5,-.5,0),sc,o,ic,i,s),Qp(mf.set(.5,-.5,0),sc,o,ic,i,s),Qp(Yp.set(.5,.5,0),sc,o,ic,i,s),iC.set(0,0),Fx.set(1,0),sC.set(1,1);let a=e.ray.intersectTriangle(Kp,mf,Yp,!1,df);if(a===null&&(Qp(mf.set(-.5,.5,0),sc,o,ic,i,s),Fx.set(0,1),a=e.ray.intersectTriangle(Kp,Yp,mf,!1,df),a===null))return;const l=e.ray.origin.distanceTo(df);l<e.near||l>e.far||t.push({distance:l,point:df.clone(),uv:Lr.getInterpolation(df,Kp,mf,Yp,iC,Fx,sC,new de),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Qp(n,e,t,r,i,s){oc.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(pf.x=s*oc.x-i*oc.y,pf.y=i*oc.x+s*oc.y):pf.copy(oc),n.copy(e),n.x+=pf.x,n.y+=pf.y,n.applyMatrix4(SI)}const Zp=new F,oC=new F;class wI extends Dt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Zp.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Zp);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Zp.setFromMatrixPosition(e.matrixWorld),oC.setFromMatrixPosition(this.matrixWorld);const r=Zp.distanceTo(oC)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const aC=new F,lC=new Ht,cC=new Ht,bG=new F,uC=new ft,qp=new F,Ox=new Zn,fC=new ft,Nx=new gl;class hS extends En{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=y1,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new fr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,qp),this.boundingBox.expandByPoint(qp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zn),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,qp),this.boundingSphere.expandByPoint(qp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ox.copy(this.boundingSphere),Ox.applyMatrix4(i),e.ray.intersectsSphere(Ox)!==!1&&(fC.copy(i).invert(),Nx.copy(e.ray).applyMatrix4(fC),!(this.boundingBox!==null&&Nx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Nx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ht,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===y1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===VB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;lC.fromBufferAttribute(i.attributes.skinIndex,e),cC.fromBufferAttribute(i.attributes.skinWeight,e),aC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=cC.getComponent(s);if(o!==0){const a=lC.getComponent(s);uC.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(bG.copy(aC).applyMatrix4(uC),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class X0 extends Dt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ys extends Zt{constructor(e=null,t=1,r=1,i,s,o,a,l,f=Un,h=Un,d,p){super(null,o,a,l,f,h,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const hC=new ft,CG=new ft;class Kh{constructor(e=[],t=[]){this.uuid=ti(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new ft;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:CG;hC.multiplyMatrices(a,t[s]),hC.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Kh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new ys(t,e,e,ur,Fr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new X0),this.bones.push(o),this.boneInverses.push(new ft().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class ll extends Gt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ac=new ft,dC=new ft,em=[],pC=new fr,TG=new ft,gf=new En,vf=new Zn;class dS extends En{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ll(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,TG)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new fr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ac),pC.copy(e.boundingBox).applyMatrix4(ac),this.boundingBox.union(pC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ac),vf.copy(e.boundingSphere).applyMatrix4(ac),this.boundingSphere.union(vf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(gf.geometry=this.geometry,gf.material=this.material,gf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vf.copy(this.boundingSphere),vf.applyMatrix4(r),e.ray.intersectsSphere(vf)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,ac),dC.multiplyMatrices(r,ac),gf.matrixWorld=dC,gf.raycast(e,em);for(let o=0,a=em.length;o<a;o++){const l=em[o];l.instanceId=s,l.object=this,t.push(l)}em.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ll(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new ys(new Float32Array(i*this.count),i,this.count,N0,Fr));const s=this.morphTexture.source.data.data;let o=0;for(let f=0;f<r.length;f++)o+=r[f];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function RG(n,e){return n.z-e.z}function PG(n,e){return e.z-n.z}class BG{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const o=i[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=r}reset(){this.list.length=0,this.index=0}}const bo=new ft,Ux=new ft,IG=new ft,LG=new Oe(1,1,1),mC=new ft,kx=new jh,tm=new fr,Sa=new Zn,yf=new F,gC=new F,DG=new F,Hx=new BG,lr=new En,nm=[];function FG(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class EI extends En{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,r=t*2,i){super(new At,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new ys(t,e,e,ur,Fr);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new ys(t,e,e,Vh,to);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new ys(t,e,e,ur,Fr);r.colorSpace=jt.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:f}=o,h=new a.constructor(r*l),d=new Gt(h,l,f);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Gt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fr);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,bo),this.getBoundingBoxAt(s,tm).applyMatrix4(bo),e.union(tm)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zn);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,bo),this.getBoundingSphereAt(s,Sa).applyMatrix4(bo),e.union(Sa)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(i=this._availableInstanceIds.pop(),this._drawInfo[i]=r):(i=this._drawInfo.length,this._drawInfo.push(r));const s=this._matricesTexture,o=s.image.data;IG.toArray(o,i*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(LG.toArray(a.image.data,i*4),a.needsUpdate=!0),i}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const f=e.getIndex(),h=f!==null;if(h&&(r===-1?i.indexCount=f.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._geometryCount;return this._geometryCount++,o.push(i),a.push({start:h?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new fr,sphereInitialized:!1,sphere:new Zn}),this.setGeometryAt(d,e),d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,f=a.vertexCount;for(const m in r.attributes){const y=t.getAttribute(m),_=r.getAttribute(m);FG(y,_,l);const x=y.itemSize;for(let g=y.count,S=f;g<S;g++){const M=l+g;for(let E=0;E<x;E++)_.setComponent(M,E,0)}_.needsUpdate=!0,_.addUpdateRange(l*x,f*x)}if(i){const m=a.indexStart;for(let y=0;y<o.count;y++)s.setX(m+y,l+o.getX(y));for(let y=o.count,_=a.indexCount;y<_;y++)s.setX(m+y,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this._bounds[e],i=r.box,s=this.geometry;if(r.boxInitialized===!1){i.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let f=l.start,h=l.start+l.count;f<h;f++){let d=f;o&&(d=o.getX(d)),i.expandByPoint(yf.fromBufferAttribute(a,d))}r.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this._bounds[e],i=r.sphere,s=this.geometry;if(r.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,tm),tm.getCenter(i.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let f=0;for(let h=l.start,d=l.start+l.count;h<d;h++){let p=h;o&&(p=o.getX(p)),yf.fromBufferAttribute(a,p),f=Math.max(f,i.center.distanceToSquared(yf))}i.radius=Math.sqrt(f),r.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const r=this._drawInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._drawInfo,i=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(i,e*4),r.needsUpdate=!0,this)}getColorAt(e,t){const r=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*4)}setVisibleAt(e,t){const r=this._drawInfo;return e>=r.length||r[e].active===!1||r[e].visible===t?this:(r[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const r=this._drawInfo;return e>=r.length||r[e].active===!1||t<0||t>=this._geometryCount?null:(r[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const r=this._drawRanges[e];return t.start=r.start,t.count=r.count,t}raycast(e,t){const r=this._drawInfo,i=this._drawRanges,s=this.matrixWorld,o=this.geometry;lr.material=this.material,lr.geometry.index=o.index,lr.geometry.attributes=o.attributes,lr.geometry.boundingBox===null&&(lr.geometry.boundingBox=new fr),lr.geometry.boundingSphere===null&&(lr.geometry.boundingSphere=new Zn);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const f=r[a].geometryIndex,h=i[f];lr.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,lr.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,lr.geometry.boundingBox),this.getBoundingSphereAt(f,lr.geometry.boundingSphere),lr.raycast(e,nm);for(let d=0,p=nm.length;d<p;d++){const m=nm[d];m.object=this,m.batchId=a,t.push(m)}nm.length=0}lr.material=null,lr.geometry.index=null,lr.geometry.attributes={},lr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,f=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled,m=this._indirectTexture,y=m.image.data;p&&(mC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),kx.setFromProjectionMatrix(mC,e.coordinateSystem));let _=0;if(this.sortObjects){Ux.copy(this.matrixWorld).invert(),yf.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Ux),gC.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Ux);for(let S=0,M=l.length;S<M;S++)if(l[S].visible&&l[S].active){const E=l[S].geometryIndex;this.getMatrixAt(S,bo),this.getBoundingSphereAt(E,Sa).applyMatrix4(bo);let P=!1;if(p&&(P=!kx.intersectsSphere(Sa)),!P){const T=DG.subVectors(Sa.center,yf).dot(gC);Hx.push(d[E],T,S)}}const x=Hx.list,g=this.customSort;g===null?x.sort(s.transparent?PG:RG):g.call(this,x,r);for(let S=0,M=x.length;S<M;S++){const E=x[S];f[_]=E.start*a,h[_]=E.count,y[_]=E.index,_++}Hx.reset()}else for(let x=0,g=l.length;x<g;x++)if(l[x].visible&&l[x].active){const S=l[x].geometryIndex;let M=!1;if(p&&(this.getMatrixAt(x,bo),this.getBoundingSphereAt(S,Sa).applyMatrix4(bo),M=!kx.intersectsSphere(Sa)),!M){const E=d[S];f[_]=E.start*a,h[_]=E.count,y[_]=x,_++}}m.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class dr extends Ln{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const qg=new F,e0=new F,vC=new ft,xf=new gl,rm=new Zn,zx=new F,yC=new F;class no extends Dt{constructor(e=new At,t=new dr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)qg.fromBufferAttribute(t,i-1),e0.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=qg.distanceTo(e0);e.setAttribute("lineDistance",new nt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),rm.copy(r.boundingSphere),rm.applyMatrix4(i),rm.radius+=s,e.ray.intersectsSphere(rm)===!1)return;vC.copy(i).invert(),xf.copy(e.ray).applyMatrix4(vC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=this.isLineSegments?2:1,h=r.index,p=r.attributes.position;if(h!==null){const m=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let _=m,x=y-1;_<x;_+=f){const g=h.getX(_),S=h.getX(_+1),M=im(this,e,xf,l,g,S);M&&t.push(M)}if(this.isLineLoop){const _=h.getX(y-1),x=h.getX(m),g=im(this,e,xf,l,_,x);g&&t.push(g)}}else{const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let _=m,x=y-1;_<x;_+=f){const g=im(this,e,xf,l,_,_+1);g&&t.push(g)}if(this.isLineLoop){const _=im(this,e,xf,l,y-1,m);_&&t.push(_)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function im(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(qg.fromBufferAttribute(o,i),e0.fromBufferAttribute(o,s),t.distanceSqToSegment(qg,e0,zx,yC)>r)return;zx.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(zx);if(!(l<e.near||l>e.far))return{distance:l,point:yC.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}const xC=new F,_C=new F;class Yi extends no{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)xC.fromBufferAttribute(t,i),_C.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+xC.distanceTo(_C);e.setAttribute("lineDistance",new nt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class pS extends no{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class j0 extends Ln{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const AC=new ft,w1=new gl,sm=new Zn,om=new F;class mS extends Dt{constructor(e=new At,t=new j0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),sm.copy(r.boundingSphere),sm.applyMatrix4(i),sm.radius+=s,e.ray.intersectsSphere(sm)===!1)return;AC.copy(i).invert(),w1.copy(e.ray).applyMatrix4(AC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=r.index,d=r.attributes.position;if(f!==null){const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let y=p,_=m;y<_;y++){const x=f.getX(y);om.fromBufferAttribute(d,x),SC(om,x,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let y=p,_=m;y<_;y++)om.fromBufferAttribute(d,y),SC(om,y,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function SC(n,e,t,r,i,s,o){const a=w1.distanceSqToPoint(n);if(a<t){const l=new F;w1.closestPointToPoint(n,l),l.applyMatrix4(r);const f=i.ray.origin.distanceTo(l);if(f<i.near||f>i.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class OG extends Zt{constructor(e,t,r,i,s,o,a,l,f){super(e,t,r,i,s,o,a,l,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:wn,this.magFilter=s!==void 0?s:wn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class NG extends Zt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Un,this.minFilter=Un,this.generateMipmaps=!1,this.needsUpdate=!0}}class J0 extends Zt{constructor(e,t,r,i,s,o,a,l,f,h,d,p){super(null,o,a,l,f,h,i,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class UG extends J0{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Zr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kG extends J0{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,eo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class HG extends Zt{constructor(e,t,r,i,s,o,a,l,f){super(e,t,r,i,s,o,a,l,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Qi{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,f;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),f=r[i]-o,f<0)a=i+1;else if(f>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],p=r[i+1]-h,m=(o-h)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new de:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new F,i=[],s=[],o=[],a=new F,l=new ft;for(let m=0;m<=e;m++){const y=m/e;i[m]=this.getTangentAt(y,new F)}s[0]=new F,o[0]=new F;let f=Number.MAX_VALUE;const h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=f&&(f=h,r.set(1,0,0)),d<=f&&(f=d,r.set(0,1,0)),p<=f&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(Mn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Mn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],m*y)),o[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class K0 extends Qi{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new de){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=f-this.aY;l=p*h-m*d+this.aX,f=p*d+m*h+this.aY}return r.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class bI extends K0{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function gS(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,f){i(o,a,f*(a-s),f*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,f,h,d){let p=(o-s)/f-(a-s)/(f+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const am=new F,Gx=new gS,Vx=new gS,Wx=new gS;class CI extends Qi{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new F){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let f,h;this.closed||a>0?f=i[(a-1)%s]:(am.subVectors(i[0],i[1]).add(i[0]),f=am);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(am.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=am),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(f.distanceToSquared(d),m),_=Math.pow(d.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m);_<1e-4&&(_=1),y<1e-4&&(y=_),x<1e-4&&(x=_),Gx.initNonuniformCatmullRom(f.x,d.x,p.x,h.x,y,_,x),Vx.initNonuniformCatmullRom(f.y,d.y,p.y,h.y,y,_,x),Wx.initNonuniformCatmullRom(f.z,d.z,p.z,h.z,y,_,x)}else this.curveType==="catmullrom"&&(Gx.initCatmullRom(f.x,d.x,p.x,h.x,this.tension),Vx.initCatmullRom(f.y,d.y,p.y,h.y,this.tension),Wx.initCatmullRom(f.z,d.z,p.z,h.z,this.tension));return r.set(Gx.calc(l),Vx.calc(l),Wx.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new F().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function MC(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function zG(n,e){const t=1-n;return t*t*e}function GG(n,e){return 2*(1-n)*n*e}function VG(n,e){return n*n*e}function qf(n,e,t,r){return zG(n,e)+GG(n,t)+VG(n,r)}function WG(n,e){const t=1-n;return t*t*t*e}function $G(n,e){const t=1-n;return 3*t*t*n*e}function XG(n,e){return 3*(1-n)*n*n*e}function jG(n,e){return n*n*n*e}function eh(n,e,t,r,i){return WG(n,e)+$G(n,t)+XG(n,r)+jG(n,i)}class vS extends Qi{constructor(e=new de,t=new de,r=new de,i=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new de){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(eh(e,i.x,s.x,o.x,a.x),eh(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class TI extends Qi{constructor(e=new F,t=new F,r=new F,i=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new F){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(eh(e,i.x,s.x,o.x,a.x),eh(e,i.y,s.y,o.y,a.y),eh(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yS extends Qi{constructor(e=new de,t=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new de){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new de){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RI extends Qi{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new F){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xS extends Qi{constructor(e=new de,t=new de,r=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new de){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(qf(e,i.x,s.x,o.x),qf(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _S extends Qi{constructor(e=new F,t=new F,r=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new F){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(qf(e,i.x,s.x,o.x),qf(e,i.y,s.y,o.y),qf(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AS extends Qi{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new de){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],f=i[o],h=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(MC(a,l.x,f.x,h.x,d.x),MC(a,l.y,f.y,h.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new de().fromArray(i))}return this}}var t0=Object.freeze({__proto__:null,ArcCurve:bI,CatmullRomCurve3:CI,CubicBezierCurve:vS,CubicBezierCurve3:TI,EllipseCurve:K0,LineCurve:yS,LineCurve3:RI,QuadraticBezierCurve:xS,QuadraticBezierCurve3:_S,SplineCurve:AS});class PI extends Qi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new t0[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),f=l===0?0:1-o/l;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let f=0;f<l.length;f++){const h=l[f];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new t0[i.type]().fromJSON(i))}return this}}class Th extends PI{constructor(e){super(),this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new yS(this.currentPoint.clone(),new de(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new xS(this.currentPoint.clone(),new de(e,t),new de(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new vS(this.currentPoint.clone(),new de(e,t),new de(r,i),new de(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new AS(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const f=new K0(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=f.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Yh extends At{constructor(e=[new de(0,-.5),new de(.5,0),new de(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Mn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],f=[],h=1/t,d=new F,p=new de,m=new F,y=new F,_=new F;let x=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(y)}for(let S=0;S<=t;S++){const M=r+S*h*i,E=Math.sin(M),P=Math.cos(M);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*E,d.y=e[T].y,d.z=e[T].x*P,o.push(d.x,d.y,d.z),p.x=S/t,p.y=T/(e.length-1),a.push(p.x,p.y);const B=l[3*T+0]*E,L=l[3*T+1],z=l[3*T+0]*P;f.push(B,L,z)}}for(let S=0;S<t;S++)for(let M=0;M<e.length-1;M++){const E=M+S*e.length,P=E,T=E+e.length,B=E+e.length+1,L=E+1;s.push(P,T,L),s.push(B,L,T)}this.setIndex(s),this.setAttribute("position",new nt(o,3)),this.setAttribute("uv",new nt(a,2)),this.setAttribute("normal",new nt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yh(e.points,e.segments,e.phiStart,e.phiLength)}}class Y0 extends Yh{constructor(e=1,t=1,r=4,i=8){const s=new Th;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Y0(e.radius,e.length,e.capSegments,e.radialSegments)}}class Q0 extends At{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],f=new F,h=new de;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=r+d/t*i;f.x=e*Math.cos(m),f.y=e*Math.sin(m),o.push(f.x,f.y,f.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new nt(o,3)),this.setAttribute("normal",new nt(a,3)),this.setAttribute("uv",new nt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Su extends At{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const f=this;i=Math.floor(i),s=Math.floor(s);const h=[],d=[],p=[],m=[];let y=0;const _=[],x=r/2;let g=0;S(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new nt(d,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(m,2));function S(){const E=new F,P=new F;let T=0;const B=(t-e)/r;for(let L=0;L<=s;L++){const z=[],b=L/s,R=b*(t-e)+e;for(let $=0;$<=i;$++){const X=$/i,ee=X*l+a,le=Math.sin(ee),Z=Math.cos(ee);P.x=R*le,P.y=-b*r+x,P.z=R*Z,d.push(P.x,P.y,P.z),E.set(le,B,Z).normalize(),p.push(E.x,E.y,E.z),m.push(X,1-b),z.push(y++)}_.push(z)}for(let L=0;L<i;L++)for(let z=0;z<s;z++){const b=_[z][L],R=_[z+1][L],$=_[z+1][L+1],X=_[z][L+1];e>0&&(h.push(b,R,X),T+=3),t>0&&(h.push(R,$,X),T+=3)}f.addGroup(g,T,0),g+=T}function M(E){const P=y,T=new de,B=new F;let L=0;const z=E===!0?e:t,b=E===!0?1:-1;for(let $=1;$<=i;$++)d.push(0,x*b,0),p.push(0,b,0),m.push(.5,.5),y++;const R=y;for(let $=0;$<=i;$++){const ee=$/i*l+a,le=Math.cos(ee),Z=Math.sin(ee);B.x=z*Z,B.y=x*b,B.z=z*le,d.push(B.x,B.y,B.z),p.push(0,b,0),T.x=le*.5+.5,T.y=Z*.5*b+.5,m.push(T.x,T.y),y++}for(let $=0;$<i;$++){const X=P+$,ee=R+$;E===!0?h.push(ee,ee+1,X):h.push(ee+1,ee,X),L+=3}f.addGroup(g,L,E===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Su(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Z0 extends Su{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Z0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ra extends At{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),f(r),h(),this.setAttribute("position",new nt(s,3)),this.setAttribute("normal",new nt(s.slice(),3)),this.setAttribute("uv",new nt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const M=new F,E=new F,P=new F;for(let T=0;T<t.length;T+=3)m(t[T+0],M),m(t[T+1],E),m(t[T+2],P),l(M,E,P,S)}function l(S,M,E,P){const T=P+1,B=[];for(let L=0;L<=T;L++){B[L]=[];const z=S.clone().lerp(E,L/T),b=M.clone().lerp(E,L/T),R=T-L;for(let $=0;$<=R;$++)$===0&&L===T?B[L][$]=z:B[L][$]=z.clone().lerp(b,$/R)}for(let L=0;L<T;L++)for(let z=0;z<2*(T-L)-1;z++){const b=Math.floor(z/2);z%2===0?(p(B[L][b+1]),p(B[L+1][b]),p(B[L][b])):(p(B[L][b+1]),p(B[L+1][b+1]),p(B[L+1][b]))}}function f(S){const M=new F;for(let E=0;E<s.length;E+=3)M.x=s[E+0],M.y=s[E+1],M.z=s[E+2],M.normalize().multiplyScalar(S),s[E+0]=M.x,s[E+1]=M.y,s[E+2]=M.z}function h(){const S=new F;for(let M=0;M<s.length;M+=3){S.x=s[M+0],S.y=s[M+1],S.z=s[M+2];const E=x(S)/2/Math.PI+.5,P=g(S)/Math.PI+.5;o.push(E,1-P)}y(),d()}function d(){for(let S=0;S<o.length;S+=6){const M=o[S+0],E=o[S+2],P=o[S+4],T=Math.max(M,E,P),B=Math.min(M,E,P);T>.9&&B<.1&&(M<.2&&(o[S+0]+=1),E<.2&&(o[S+2]+=1),P<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,M){const E=S*3;M.x=e[E+0],M.y=e[E+1],M.z=e[E+2]}function y(){const S=new F,M=new F,E=new F,P=new F,T=new de,B=new de,L=new de;for(let z=0,b=0;z<s.length;z+=9,b+=6){S.set(s[z+0],s[z+1],s[z+2]),M.set(s[z+3],s[z+4],s[z+5]),E.set(s[z+6],s[z+7],s[z+8]),T.set(o[b+0],o[b+1]),B.set(o[b+2],o[b+3]),L.set(o[b+4],o[b+5]),P.copy(S).add(M).add(E).divideScalar(3);const R=x(P);_(T,b+0,S,R),_(B,b+2,M,R),_(L,b+4,E,R)}}function _(S,M,E,P){P<0&&S.x===1&&(o[M]=S.x-1),E.x===0&&E.z===0&&(o[M]=P/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ra(e.vertices,e.indices,e.radius,e.details)}}class q0 extends ra{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new q0(e.radius,e.detail)}}const lm=new F,cm=new F,$x=new F,um=new Lr;class BI extends At{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Qa*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,f=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(f[0]=o.getX(y),f[1]=o.getX(y+1),f[2]=o.getX(y+2)):(f[0]=y,f[1]=y+1,f[2]=y+2);const{a:_,b:x,c:g}=um;if(_.fromBufferAttribute(a,f[0]),x.fromBufferAttribute(a,f[1]),g.fromBufferAttribute(a,f[2]),um.getNormal($x),d[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,d[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const M=(S+1)%3,E=d[S],P=d[M],T=um[h[S]],B=um[h[M]],L=`${E}_${P}`,z=`${P}_${E}`;z in p&&p[z]?($x.dot(p[z].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(B.x,B.y,B.z)),p[z]=null):L in p||(p[L]={index0:f[S],index1:f[M],normal:$x.clone()})}}for(const y in p)if(p[y]){const{index0:_,index1:x}=p[y];lm.fromBufferAttribute(a,_),cm.fromBufferAttribute(a,x),m.push(lm.x,lm.y,lm.z),m.push(cm.x,cm.y,cm.z)}this.setAttribute("position",new nt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class qa extends Th{constructor(e){super(e),this.uuid=ti(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Th().fromJSON(i))}return this}}const JG={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=II(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,f,h,d,p,m;if(r&&(s=qG(n,e,s,t)),n.length>80*t){a=f=n[0],l=h=n[1];for(let y=t;y<i;y+=t)d=n[y],p=n[y+1],d<a&&(a=d),p<l&&(l=p),d>f&&(f=d),p>h&&(h=p);m=Math.max(f-a,h-l),m=m!==0?32767/m:0}return Rh(s,o,t,a,l,m,0),o}};function II(n,e,t,r,i){let s,o;if(i===u5(n,e,t,r)>0)for(s=e;s<t;s+=r)o=wC(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=wC(s,n[s],n[s+1],o);return o&&ev(o,o.next)&&(Bh(o),o=o.next),o}function cl(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(ev(t,t.next)||gn(t.prev,t,t.next)===0)){if(Bh(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Rh(n,e,t,r,i,s,o){if(!n)return;!o&&s&&i5(n,r,i,s);let a=n,l,f;for(;n.prev!==n.next;){if(l=n.prev,f=n.next,s?YG(n,r,i,s):KG(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),Bh(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=QG(cl(n),e,t),Rh(n,e,t,r,i,s,2)):o===2&&ZG(n,e,t,r,i,s):Rh(cl(n),e,t,r,i,s,1);break}}}function KG(n){const e=n.prev,t=n,r=n.next;if(gn(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,f=r.y,h=i<s?i<o?i:o:s<o?s:o,d=a<l?a<f?a:f:l<f?l:f,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>f?a:f:l>f?l:f;let y=r.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&Vc(i,a,s,l,o,f,y.x,y.y)&&gn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function YG(n,e,t,r){const i=n.prev,s=n,o=n.next;if(gn(i,s,o)>=0)return!1;const a=i.x,l=s.x,f=o.x,h=i.y,d=s.y,p=o.y,m=a<l?a<f?a:f:l<f?l:f,y=h<d?h<p?h:p:d<p?d:p,_=a>l?a>f?a:f:l>f?l:f,x=h>d?h>p?h:p:d>p?d:p,g=E1(m,y,e,t,r),S=E1(_,x,e,t,r);let M=n.prevZ,E=n.nextZ;for(;M&&M.z>=g&&E&&E.z<=S;){if(M.x>=m&&M.x<=_&&M.y>=y&&M.y<=x&&M!==i&&M!==o&&Vc(a,h,l,d,f,p,M.x,M.y)&&gn(M.prev,M,M.next)>=0||(M=M.prevZ,E.x>=m&&E.x<=_&&E.y>=y&&E.y<=x&&E!==i&&E!==o&&Vc(a,h,l,d,f,p,E.x,E.y)&&gn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;M&&M.z>=g;){if(M.x>=m&&M.x<=_&&M.y>=y&&M.y<=x&&M!==i&&M!==o&&Vc(a,h,l,d,f,p,M.x,M.y)&&gn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;E&&E.z<=S;){if(E.x>=m&&E.x<=_&&E.y>=y&&E.y<=x&&E!==i&&E!==o&&Vc(a,h,l,d,f,p,E.x,E.y)&&gn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function QG(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!ev(i,s)&&LI(i,r,r.next,s)&&Ph(i,s)&&Ph(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Bh(r),Bh(r.next),r=n=s),r=r.next}while(r!==n);return cl(r)}function ZG(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&a5(o,a)){let l=DI(o,a);o=cl(o,o.next),l=cl(l,l.next),Rh(o,e,t,r,i,s,0),Rh(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function qG(n,e,t,r){const i=[];let s,o,a,l,f;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,f=II(n,a,l,r,!1),f===f.next&&(f.steiner=!0),i.push(o5(f));for(i.sort(e5),s=0;s<i.length;s++)t=t5(i[s],t);return t}function e5(n,e){return n.x-e.x}function t5(n,e){const t=n5(n,e);if(!t)return e;const r=DI(t,n);return cl(r,r.next),cl(t,t.next)}function n5(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,f=i.y;let h=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Vc(o<f?s:r,o,l,f,o<f?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Ph(t,n)&&(d<h||d===h&&(t.x>i.x||t.x===i.x&&r5(i,t)))&&(i=t,h=d)),t=t.next;while(t!==a);return i}function r5(n,e){return gn(n.prev,n,e.prev)<0&&gn(e.next,n,n.next)<0}function i5(n,e,t,r){let i=n;do i.z===0&&(i.z=E1(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,s5(i)}function s5(n){let e,t,r,i,s,o,a,l,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<f&&(a++,r=r.nextZ,!!r);e++);for(l=f;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,f*=2}while(o>1);return n}function E1(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function o5(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Vc(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function a5(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!l5(n,e)&&(Ph(n,e)&&Ph(e,n)&&c5(n,e)&&(gn(n.prev,n,e.prev)||gn(n,e.prev,e))||ev(n,e)&&gn(n.prev,n,n.next)>0&&gn(e.prev,e,e.next)>0)}function gn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ev(n,e){return n.x===e.x&&n.y===e.y}function LI(n,e,t,r){const i=hm(gn(n,e,t)),s=hm(gn(n,e,r)),o=hm(gn(t,r,n)),a=hm(gn(t,r,e));return!!(i!==s&&o!==a||i===0&&fm(n,t,e)||s===0&&fm(n,r,e)||o===0&&fm(t,n,r)||a===0&&fm(t,e,r))}function fm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function hm(n){return n>0?1:n<0?-1:0}function l5(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&LI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ph(n,e){return gn(n.prev,n,n.next)<0?gn(n,e,n.next)>=0&&gn(n,n.prev,e)>=0:gn(n,e,n.prev)<0||gn(n,n.next,e)<0}function c5(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function DI(n,e){const t=new b1(n.i,n.x,n.y),r=new b1(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function wC(n,e,t,r){const i=new b1(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function b1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u5(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class xs{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return xs.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];EC(e),bC(r,e);let o=e.length;t.forEach(EC);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,bC(r,t[l]);const a=JG.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function EC(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function bC(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class tv extends At{constructor(e=new qa([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];o(f)}this.setAttribute("position",new nt(i,3)),this.setAttribute("uv",new nt(s,2)),this.computeVertexNormals();function o(a){const l=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:f5;let M,E=!1,P,T,B,L;g&&(M=g.getSpacedPoints(h),E=!0,p=!1,P=g.computeFrenetFrames(h,!1),T=new F,B=new F,L=new F),p||(x=0,m=0,y=0,_=0);const z=a.extractPoints(f);let b=z.shape;const R=z.holes;if(!xs.isClockWise(b)){b=b.reverse();for(let me=0,O=R.length;me<O;me++){const Be=R[me];xs.isClockWise(Be)&&(R[me]=Be.reverse())}}const X=xs.triangulateShape(b,R),ee=b;for(let me=0,O=R.length;me<O;me++){const Be=R[me];b=b.concat(Be)}function le(me,O,Be){return O||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(O,Be)}const Z=b.length,pe=X.length;function U(me,O,Be){let Ce,Ae,Ee;const rt=me.x-O.x,ke=me.y-O.y,N=Be.x-me.x,I=Be.y-me.y,q=rt*rt+ke*ke,fe=rt*I-ke*N;if(Math.abs(fe)>Number.EPSILON){const xe=Math.sqrt(q),ge=Math.sqrt(N*N+I*I),Ke=O.x-ke/xe,be=O.y+rt/xe,Xe=Be.x-I/ge,Bt=Be.y+N/ge,Se=((Xe-Ke)*I-(Bt-be)*N)/(rt*I-ke*N);Ce=Ke+rt*Se-me.x,Ae=be+ke*Se-me.y;const je=Ce*Ce+Ae*Ae;if(je<=2)return new de(Ce,Ae);Ee=Math.sqrt(je/2)}else{let xe=!1;rt>Number.EPSILON?N>Number.EPSILON&&(xe=!0):rt<-Number.EPSILON?N<-Number.EPSILON&&(xe=!0):Math.sign(ke)===Math.sign(I)&&(xe=!0),xe?(Ce=-ke,Ae=rt,Ee=Math.sqrt(q)):(Ce=rt,Ae=ke,Ee=Math.sqrt(q/2))}return new de(Ce/Ee,Ae/Ee)}const Q=[];for(let me=0,O=ee.length,Be=O-1,Ce=me+1;me<O;me++,Be++,Ce++)Be===O&&(Be=0),Ce===O&&(Ce=0),Q[me]=U(ee[me],ee[Be],ee[Ce]);const J=[];let se,_e=Q.concat();for(let me=0,O=R.length;me<O;me++){const Be=R[me];se=[];for(let Ce=0,Ae=Be.length,Ee=Ae-1,rt=Ce+1;Ce<Ae;Ce++,Ee++,rt++)Ee===Ae&&(Ee=0),rt===Ae&&(rt=0),se[Ce]=U(Be[Ce],Be[Ee],Be[rt]);J.push(se),_e=_e.concat(se)}for(let me=0;me<x;me++){const O=me/x,Be=m*Math.cos(O*Math.PI/2),Ce=y*Math.sin(O*Math.PI/2)+_;for(let Ae=0,Ee=ee.length;Ae<Ee;Ae++){const rt=le(ee[Ae],Q[Ae],Ce);we(rt.x,rt.y,-Be)}for(let Ae=0,Ee=R.length;Ae<Ee;Ae++){const rt=R[Ae];se=J[Ae];for(let ke=0,N=rt.length;ke<N;ke++){const I=le(rt[ke],se[ke],Ce);we(I.x,I.y,-Be)}}}const De=y+_;for(let me=0;me<Z;me++){const O=p?le(b[me],_e[me],De):b[me];E?(B.copy(P.normals[0]).multiplyScalar(O.x),T.copy(P.binormals[0]).multiplyScalar(O.y),L.copy(M[0]).add(B).add(T),we(L.x,L.y,L.z)):we(O.x,O.y,0)}for(let me=1;me<=h;me++)for(let O=0;O<Z;O++){const Be=p?le(b[O],_e[O],De):b[O];E?(B.copy(P.normals[me]).multiplyScalar(Be.x),T.copy(P.binormals[me]).multiplyScalar(Be.y),L.copy(M[me]).add(B).add(T),we(L.x,L.y,L.z)):we(Be.x,Be.y,d/h*me)}for(let me=x-1;me>=0;me--){const O=me/x,Be=m*Math.cos(O*Math.PI/2),Ce=y*Math.sin(O*Math.PI/2)+_;for(let Ae=0,Ee=ee.length;Ae<Ee;Ae++){const rt=le(ee[Ae],Q[Ae],Ce);we(rt.x,rt.y,d+Be)}for(let Ae=0,Ee=R.length;Ae<Ee;Ae++){const rt=R[Ae];se=J[Ae];for(let ke=0,N=rt.length;ke<N;ke++){const I=le(rt[ke],se[ke],Ce);E?we(I.x,I.y+M[h-1].y,M[h-1].x+Be):we(I.x,I.y,d+Be)}}}ie(),ye();function ie(){const me=i.length/3;if(p){let O=0,Be=Z*O;for(let Ce=0;Ce<pe;Ce++){const Ae=X[Ce];st(Ae[2]+Be,Ae[1]+Be,Ae[0]+Be)}O=h+x*2,Be=Z*O;for(let Ce=0;Ce<pe;Ce++){const Ae=X[Ce];st(Ae[0]+Be,Ae[1]+Be,Ae[2]+Be)}}else{for(let O=0;O<pe;O++){const Be=X[O];st(Be[2],Be[1],Be[0])}for(let O=0;O<pe;O++){const Be=X[O];st(Be[0]+Z*h,Be[1]+Z*h,Be[2]+Z*h)}}r.addGroup(me,i.length/3-me,0)}function ye(){const me=i.length/3;let O=0;Pe(ee,O),O+=ee.length;for(let Be=0,Ce=R.length;Be<Ce;Be++){const Ae=R[Be];Pe(Ae,O),O+=Ae.length}r.addGroup(me,i.length/3-me,1)}function Pe(me,O){let Be=me.length;for(;--Be>=0;){const Ce=Be;let Ae=Be-1;Ae<0&&(Ae=me.length-1);for(let Ee=0,rt=h+x*2;Ee<rt;Ee++){const ke=Z*Ee,N=Z*(Ee+1),I=O+Ce+ke,q=O+Ae+ke,fe=O+Ae+N,xe=O+Ce+N;lt(I,q,fe,xe)}}}function we(me,O,Be){l.push(me),l.push(O),l.push(Be)}function st(me,O,Be){et(me),et(O),et(Be);const Ce=i.length/3,Ae=S.generateTopUV(r,i,Ce-3,Ce-2,Ce-1);Fe(Ae[0]),Fe(Ae[1]),Fe(Ae[2])}function lt(me,O,Be,Ce){et(me),et(O),et(Ce),et(O),et(Be),et(Ce);const Ae=i.length/3,Ee=S.generateSideWallUV(r,i,Ae-6,Ae-3,Ae-2,Ae-1);Fe(Ee[0]),Fe(Ee[1]),Fe(Ee[3]),Fe(Ee[1]),Fe(Ee[2]),Fe(Ee[3])}function et(me){i.push(l[me*3+0]),i.push(l[me*3+1]),i.push(l[me*3+2])}function Fe(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return h5(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new t0[i.type]().fromJSON(i)),new tv(r,e.options)}}const f5={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],f=e[i*3],h=e[i*3+1];return[new de(s,o),new de(a,l),new de(f,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],f=e[r*3],h=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],y=e[i*3+2],_=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-f)?[new de(o,1-l),new de(f,1-d),new de(p,1-y),new de(_,1-g)]:[new de(a,1-l),new de(h,1-d),new de(m,1-y),new de(x,1-g)]}};function h5(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class nv extends ra{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nv(e.radius,e.detail)}}class Qh extends ra{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qh(e.radius,e.detail)}}class rv extends At{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],f=[],h=[];let d=e;const p=(t-e)/i,m=new F,y=new de;for(let _=0;_<=i;_++){for(let x=0;x<=r;x++){const g=s+x/r*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),f.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,h.push(y.x,y.y)}d+=p}for(let _=0;_<i;_++){const x=_*(r+1);for(let g=0;g<r;g++){const S=g+x,M=S,E=S+r+1,P=S+r+2,T=S+1;a.push(M,E,T),a.push(E,P,T)}}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(f,3)),this.setAttribute("uv",new nt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class iv extends At{constructor(e=new qa([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new nt(i,3)),this.setAttribute("normal",new nt(s,3)),this.setAttribute("uv",new nt(o,2));function f(h){const d=i.length/3,p=h.extractPoints(t);let m=p.shape;const y=p.holes;xs.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=y.length;x<g;x++){const S=y[x];xs.isClockWise(S)===!0&&(y[x]=S.reverse())}const _=xs.triangulateShape(m,y);for(let x=0,g=y.length;x<g;x++){const S=y[x];m=m.concat(S)}for(let x=0,g=m.length;x<g;x++){const S=m[x];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let x=0,g=_.length;x<g;x++){const S=_[x],M=S[0]+d,E=S[1]+d,P=S[2]+d;r.push(M,E,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return d5(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new iv(r,e.curveSegments)}}function d5(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Zh extends At{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let f=0;const h=[],d=new F,p=new F,m=[],y=[],_=[],x=[];for(let g=0;g<=r;g++){const S=[],M=g/r;let E=0;g===0&&o===0?E=.5/t:g===r&&l===Math.PI&&(E=-.5/t);for(let P=0;P<=t;P++){const T=P/t;d.x=-e*Math.cos(i+T*s)*Math.sin(o+M*a),d.y=e*Math.cos(o+M*a),d.z=e*Math.sin(i+T*s)*Math.sin(o+M*a),y.push(d.x,d.y,d.z),p.copy(d).normalize(),_.push(p.x,p.y,p.z),x.push(T+E,1-M),S.push(f++)}h.push(S)}for(let g=0;g<r;g++)for(let S=0;S<t;S++){const M=h[g][S+1],E=h[g][S],P=h[g+1][S],T=h[g+1][S+1];(g!==0||o>0)&&m.push(M,E,T),(g!==r-1||l<Math.PI)&&m.push(E,P,T)}this.setIndex(m),this.setAttribute("position",new nt(y,3)),this.setAttribute("normal",new nt(_,3)),this.setAttribute("uv",new nt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class sv extends ra{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sv(e.radius,e.detail)}}class ov extends At{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],f=[],h=new F,d=new F,p=new F;for(let m=0;m<=r;m++)for(let y=0;y<=i;y++){const _=y/i*s,x=m/r*Math.PI*2;d.x=(e+t*Math.cos(x))*Math.cos(_),d.y=(e+t*Math.cos(x))*Math.sin(_),d.z=t*Math.sin(x),a.push(d.x,d.y,d.z),h.x=e*Math.cos(_),h.y=e*Math.sin(_),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),f.push(y/i),f.push(m/r)}for(let m=1;m<=r;m++)for(let y=1;y<=i;y++){const _=(i+1)*m+y-1,x=(i+1)*(m-1)+y-1,g=(i+1)*(m-1)+y,S=(i+1)*m+y;o.push(_,x,S),o.push(x,g,S)}this.setIndex(o),this.setAttribute("position",new nt(a,3)),this.setAttribute("normal",new nt(l,3)),this.setAttribute("uv",new nt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ov(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class av extends At{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],f=[],h=[],d=new F,p=new F,m=new F,y=new F,_=new F,x=new F,g=new F;for(let M=0;M<=r;++M){const E=M/r*s*Math.PI*2;S(E,s,o,e,m),S(E+.01,s,o,e,y),x.subVectors(y,m),g.addVectors(y,m),_.crossVectors(x,g),g.crossVectors(_,x),_.normalize(),g.normalize();for(let P=0;P<=i;++P){const T=P/i*Math.PI*2,B=-t*Math.cos(T),L=t*Math.sin(T);d.x=m.x+(B*g.x+L*_.x),d.y=m.y+(B*g.y+L*_.y),d.z=m.z+(B*g.z+L*_.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),f.push(p.x,p.y,p.z),h.push(M/r),h.push(P/i)}}for(let M=1;M<=r;M++)for(let E=1;E<=i;E++){const P=(i+1)*(M-1)+(E-1),T=(i+1)*M+(E-1),B=(i+1)*M+E,L=(i+1)*(M-1)+E;a.push(P,T,L),a.push(T,B,L)}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(f,3)),this.setAttribute("uv",new nt(h,2));function S(M,E,P,T,B){const L=Math.cos(M),z=Math.sin(M),b=P/E*M,R=Math.cos(b);B.x=T*(2+R)*.5*L,B.y=T*(2+R)*z*.5,B.z=T*Math.sin(b)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new av(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class lv extends At{constructor(e=new _S(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,f=new de;let h=new F;const d=[],p=[],m=[],y=[];_(),this.setIndex(y),this.setAttribute("position",new nt(d,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(m,2));function _(){for(let M=0;M<t;M++)x(M);x(s===!1?t:0),S(),g()}function x(M){h=e.getPointAt(M/t,h);const E=o.normals[M],P=o.binormals[M];for(let T=0;T<=i;T++){const B=T/i*Math.PI*2,L=Math.sin(B),z=-Math.cos(B);l.x=z*E.x+L*P.x,l.y=z*E.y+L*P.y,l.z=z*E.z+L*P.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let M=1;M<=t;M++)for(let E=1;E<=i;E++){const P=(i+1)*(M-1)+(E-1),T=(i+1)*M+(E-1),B=(i+1)*M+E,L=(i+1)*(M-1)+E;y.push(P,T,L),y.push(T,B,L)}}function S(){for(let M=0;M<=t;M++)for(let E=0;E<=i;E++)f.x=M/t,f.y=E/i,m.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new lv(new t0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class FI extends At{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,h=l.length;f<h;++f){const d=l[f],p=d.start,m=d.count;for(let y=p,_=p+m;y<_;y+=3)for(let x=0;x<3;x++){const g=a.getX(y+x),S=a.getX(y+(x+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),CC(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let f=0;f<3;f++){const h=3*a+f,d=3*a+(f+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),CC(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new nt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function CC(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var TC=Object.freeze({__proto__:null,BoxGeometry:vl,CapsuleGeometry:Y0,CircleGeometry:Q0,ConeGeometry:Z0,CylinderGeometry:Su,DodecahedronGeometry:q0,EdgesGeometry:BI,ExtrudeGeometry:tv,IcosahedronGeometry:nv,LatheGeometry:Yh,OctahedronGeometry:Qh,PlaneGeometry:_u,PolyhedronGeometry:ra,RingGeometry:rv,ShapeGeometry:iv,SphereGeometry:Zh,TetrahedronGeometry:sv,TorusGeometry:ov,TorusKnotGeometry:av,TubeGeometry:lv,WireframeGeometry:FI});class OI extends Ln{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Oe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NI extends Ji{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class qh extends Ln{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ti extends qh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Oe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class UI extends Ln{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Oe(16777215),this.specular=new Oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=Gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kI extends Ln{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class HI extends Ln{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class zI extends Ln{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=Gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GI extends Ln{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VI extends dr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Wa(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function WI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function $I(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function C1(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function SS(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function p5(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const f=s.tracks[l],h=f.getValueSize(),d=[],p=[];for(let m=0;m<f.times.length;++m){const y=f.times[m]*i;if(!(y<t||y>=r)){d.push(f.times[m]);for(let _=0;_<h;++_)p.push(f.values[m*h+_])}}d.length!==0&&(f.times=Wa(d,f.times.constructor),f.values=Wa(p,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function m5(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const f=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(f===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let _;if(s<=a.times[0]){const g=h,S=d-h;_=a.values.slice(g,S)}else if(s>=a.times[y]){const g=y*d+h,S=g+d-h;_=a.values.slice(g,S)}else{const g=a.createInterpolant(),S=h,M=d-h;g.evaluate(s),_=g.resultBuffer.slice(S,M)}l==="quaternion"&&new jn().fromArray(_).normalize().conjugate().toArray(_);const x=f.times.length;for(let g=0;g<x;++g){const S=g*m+p;if(l==="quaternion")jn.multiplyQuaternionsFlat(f.values,S,_,0,f.values,S);else{const M=m-p*2;for(let E=0;E<M;++E)f.values[S+E]-=_[E]}}}return n.blendMode=eS,n}const g5={convertArray:Wa,isTypedArray:WI,getKeyframeOrder:$I,sortedArray:C1,flattenJSON:SS,subclip:p5,makeClipAdditive:m5};class Mu{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class XI extends Mu{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:za,endingEnd:za}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Ga:s=e,a=2*t-r;break;case Ah:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Ga:o=e,l=2*r-t;break;case Ah:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const f=(r-t)*.5,h=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(r-t)/(i-t),_=y*y,x=_*y,g=-p*x+2*p*_-p*y,S=(1+p)*x+(-1.5-2*p)*_+(-.5+p)*y+1,M=(-1-m)*x+(1.5+m)*_+.5*y,E=m*x-m*_;for(let P=0;P!==a;++P)s[P]=g*o[h+P]+S*o[f+P]+M*o[l+P]+E*o[d+P];return s}}class MS extends Mu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=(r-t)/(i-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[f+p]*d+o[l+p]*h;return s}}class jI extends Mu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zi{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wa(t,this.TimeBufferType),this.values=Wa(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Wa(e.times,Array),values:Wa(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new jI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new MS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new XI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cu:t=this.InterpolantFactoryMethodDiscrete;break;case uu:t=this.InterpolantFactoryMethodLinear;break;case zm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cu;case this.InterpolantFactoryMethodLinear:return uu;case this.InterpolantFactoryMethodSmooth:return zm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&WI(i))for(let a=0,l=i.length;a!==l;++a){const f=i[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===zm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const f=e[a],h=e[a+1];if(f!==h&&(a!==1||f!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let y=0;y!==r;++y){const _=t[d+y];if(_!==t[p+y]||_!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,f=0;f!==r;++f)t[l+f]=t[a+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Zi.prototype.TimeBufferType=Float32Array;Zi.prototype.ValueBufferType=Float32Array;Zi.prototype.DefaultInterpolation=uu;class yl extends Zi{constructor(e,t,r){super(e,t,r)}}yl.prototype.ValueTypeName="bool";yl.prototype.ValueBufferType=Array;yl.prototype.DefaultInterpolation=cu;yl.prototype.InterpolantFactoryMethodLinear=void 0;yl.prototype.InterpolantFactoryMethodSmooth=void 0;class wS extends Zi{}wS.prototype.ValueTypeName="color";class ul extends Zi{}ul.prototype.ValueTypeName="number";class JI extends Mu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let f=e*a;for(let h=f+a;f!==h;f+=4)jn.slerpFlat(s,0,o,f-a,o,f,l);return s}}class fl extends Zi{InterpolantFactoryMethodLinear(e){return new JI(this.times,this.values,this.getValueSize(),e)}}fl.prototype.ValueTypeName="quaternion";fl.prototype.InterpolantFactoryMethodSmooth=void 0;class xl extends Zi{constructor(e,t,r){super(e,t,r)}}xl.prototype.ValueTypeName="string";xl.prototype.ValueBufferType=Array;xl.prototype.DefaultInterpolation=cu;xl.prototype.InterpolantFactoryMethodLinear=void 0;xl.prototype.InterpolantFactoryMethodSmooth=void 0;class hl extends Zi{}hl.prototype.ValueTypeName="vector";class du{constructor(e="",t=-1,r=[],i=H0){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ti(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(y5(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Zi.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],f=[];l.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const h=$I(l);l=C1(l,1,h),f=C1(f,1,h),!i&&l[0]===0&&(l.push(s),f.push(f[0])),o.push(new ul(".morphTargetInfluences["+t[a].name+"]",l,f).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const f=e[a],h=f.name.match(s);if(h&&h.length>1){const d=h[1];let p=i[d];p||(i[d]=p=[]),p.push(f)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,y,_){if(m.length!==0){const x=[],g=[];SS(m,x,g,y),x.length!==0&&_.push(new d(p,x,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let d=0;d<f.length;d++){const p=f[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let _=0;_<p[y].morphTargets.length;_++)m[p[y].morphTargets[_]]=-1;for(const _ in m){const x=[],g=[];for(let S=0;S!==p[y].morphTargets.length;++S){const M=p[y];x.push(M.time),g.push(M.morphTarget===_?1:0)}i.push(new ul(".morphTargetInfluence["+_+"]",x,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";r(hl,m+".position",p,"pos",i),r(fl,m+".quaternion",p,"rot",i),r(hl,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function v5(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ul;case"vector":case"vector2":case"vector3":case"vector4":return hl;case"color":return wS;case"quaternion":return fl;case"bool":case"boolean":return yl;case"string":return xl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function y5(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=v5(n.type);if(n.times===void 0){const t=[],r=[];SS(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Xs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ES{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return f.push(h,d),this},this.removeHandler=function(h){const d=f.indexOf(h);return d!==-1&&f.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=f.length;d<p;d+=2){const m=f[d],y=f[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null}}}const KI=new ES;let pr=class{constructor(e){this.manager=e!==void 0?e:KI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};pr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Fs={};class x5 extends Error{constructor(e,t){super(e),this.response=t}}class ri extends pr{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xs.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Fs[e]!==void 0){Fs[e].push({onLoad:t,onProgress:r,onError:i});return}Fs[e]=[],Fs[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const h=Fs[e],d=f.body.getReader(),p=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),m=p?parseInt(p):0,y=m!==0;let _=0;const x=new ReadableStream({start(g){S();function S(){d.read().then(({done:M,value:E})=>{if(M)g.close();else{_+=E.byteLength;const P=new ProgressEvent("progress",{lengthComputable:y,loaded:_,total:m});for(let T=0,B=h.length;T<B;T++){const L=h[T];L.onProgress&&L.onProgress(P)}g.enqueue(E),S()}},M=>{g.error(M)})}}});return new Response(x)}else throw new x5(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(l){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return f.json();default:if(a===void 0)return f.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return f.arrayBuffer().then(y=>m.decode(y))}}}).then(f=>{Xs.add(e,f);const h=Fs[e];delete Fs[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(f)}}).catch(f=>{const h=Fs[e];if(h===void 0)throw this.manager.itemError(e),f;delete Fs[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _5 extends pr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ri(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=du.parse(e[r]);t.push(i)}return t}}class A5 extends pr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new J0,l=new ri(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let f=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},f+=1,f===6&&(m.mipmapCount===1&&(a.minFilter=wn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+_]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=wn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Ih extends pr{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xs.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Ch("img");function l(){h(),Xs.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(d){h(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class S5 extends pr{constructor(e){super(e)}load(e,t,r,i){const s=new Xh;s.colorSpace=Yr;const o=new Ih(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(f){o.load(e[f],function(h){s.images[f]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let f=0;f<e.length;++f)l(f);return s}}class M5 extends pr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ys,a=new ri(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let f;try{f=s.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Zr,o.wrapT=f.wrapT!==void 0?f.wrapT:Zr,o.magFilter=f.magFilter!==void 0?f.magFilter:wn,o.minFilter=f.minFilter!==void 0?f.minFilter:wn,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(o.colorSpace=f.colorSpace),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Si),f.mipmapCount===1&&(o.minFilter=wn),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f)},r,i),o}}class ed extends pr{constructor(e){super(e)}load(e,t,r,i){const s=new Zt,o=new Ih(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class ia extends Dt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Oe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class YI extends ia{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Dt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Oe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Xx=new ft,RC=new F,PC=new F;class bS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jh,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new Ht(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;RC.setFromMatrixPosition(e.matrixWorld),t.position.copy(RC),PC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(PC),t.updateMatrixWorld(),Xx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Xx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class w5 extends bS{constructor(){super(new an(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=fu*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class CS extends ia{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Dt.DEFAULT_UP),this.updateMatrix(),this.target=new Dt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new w5}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const BC=new ft,_f=new F,jx=new F;class E5 extends bS{constructor(){super(new an(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new Ht(2,1,1,1),new Ht(0,1,1,1),new Ht(3,1,1,1),new Ht(1,1,1,1),new Ht(3,0,1,1),new Ht(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),_f.setFromMatrixPosition(e.matrixWorld),r.position.copy(_f),jx.copy(r.position),jx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(jx),r.updateMatrixWorld(),i.makeTranslation(-_f.x,-_f.y,-_f.z),BC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BC)}}class TS extends ia{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new E5}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class b5 extends bS{constructor(){super(new Mi(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class RS extends ia{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Dt.DEFAULT_UP),this.updateMatrix(),this.target=new Dt,this.shadow=new b5}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class QI extends ia{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZI extends ia{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class qI{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class eL extends ia{constructor(e=new qI,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class cv extends pr{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new ri(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Oe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Oe().setHex(o.value);break;case"v2":i.uniforms[s].value=new de().fromArray(o.value);break;case"v3":i.uniforms[s].value=new F().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Ht().fromArray(o.value);break;case"m3":i.uniforms[s].value=new wt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new ft().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new de().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new de().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return cv.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:OI,SpriteMaterial:fS,RawShaderMaterial:NI,ShaderMaterial:Ji,PointsMaterial:j0,MeshPhysicalMaterial:Ti,MeshStandardMaterial:qh,MeshPhongMaterial:UI,MeshToonMaterial:kI,MeshNormalMaterial:HI,MeshLambertMaterial:zI,MeshDepthMaterial:cS,MeshDistanceMaterial:uS,MeshBasicMaterial:qr,MeshMatcapMaterial:GI,LineDashedMaterial:VI,LineBasicMaterial:dr,Material:Ln};return new t[e]}}class $o{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class tL extends At{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class nL extends pr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ri(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,y){if(t[y]!==void 0)return t[y];const x=m.interleavedBuffers[y],g=s(m,x.buffer),S=zc(x.type,g),M=new Jh(S,x.stride);return M.uuid=x.uuid,t[y]=M,M}function s(m,y){if(r[y]!==void 0)return r[y];const x=m.arrayBuffers[y],g=new Uint32Array(x).buffer;return r[y]=g,g}const o=e.isInstancedBufferGeometry?new tL:new At,a=e.data.index;if(a!==void 0){const m=zc(a.type,a.array);o.setIndex(new Gt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let _;if(y.isInterleavedBufferAttribute){const x=i(e.data,y.data);_=new Yo(x,y.itemSize,y.offset,y.normalized)}else{const x=zc(y.type,y.array),g=y.isInstancedBufferAttribute?ll:Gt;_=new g(x,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),y.usage!==void 0&&_.setUsage(y.usage),o.setAttribute(m,_)}const f=e.data.morphAttributes;if(f)for(const m in f){const y=f[m],_=[];for(let x=0,g=y.length;x<g;x++){const S=y[x];let M;if(S.isInterleavedBufferAttribute){const E=i(e.data,S.data);M=new Yo(E,S.itemSize,S.offset,S.normalized)}else{const E=zc(S.type,S.array);M=new Gt(E,S.itemSize,S.normalized)}S.name!==void 0&&(M.name=S.name),_.push(M)}o.morphAttributes[m]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,y=d.length;m!==y;++m){const _=d[m];o.addGroup(_.start,_.count,_.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new F;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Zn(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class C5 extends pr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?$o.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ri(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?$o.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ri(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),this.bindLightTargets(f),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new qa().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Kh().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new nL;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in TC?a=TC[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new cv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=du.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const f=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return o(h)}else return l.data?{data:zc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ES(t);s=new Ih(l),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const d=e[f],p=d.url;if(Array.isArray(p)){const m=[];for(let y=0,_=p.length;y<_;y++){const x=p[y],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new ys(g.data,g.width,g.height)))}i[d.uuid]=new Va(m)}else{const m=a(d.url);i[d.uuid]=new Va(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:zc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Ih(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],f=l.url;if(Array.isArray(f)){const h=[];for(let d=0,p=f.length;d<p;d++){const m=f[d],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new ys(y.data,y.width,y.height)))}r[l.uuid]=new Va(h)}else{const h=await s(l.url);r[l.uuid]=new Va(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],f=l.data;let h;Array.isArray(f)?(h=new Xh,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new ys:h=new Zt,f&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,T5)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],IC),h.wrapT=r(a.wrap[1],IC)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,LC)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,LC)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,_=p.length;y<_;y++){const x=p[y];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(r[x])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function f(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,d;switch(e.type){case"Scene":o=new Zg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Oe(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new W0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new an(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Mi(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new QI(e.color,e.intensity);break;case"DirectionalLight":o=new RS(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new TS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new CS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new YI(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new eL().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new hS(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new En(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new dS(h,d,p),o.instanceMatrix=new ll(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new ll(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":h=a(e.geometry),d=l(e.material),o=new EI(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(_=>{const x=new fr;x.min.fromArray(_.boxMin),x.max.fromArray(_.boxMax);const g=new Zn;return g.radius=_.sphereRadius,g.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:x,sphereInitialized:_.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=f(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=f(e.colorsTexture.uuid));break;case"LOD":o=new wI;break;case"Line":o=new no(a(e.geometry),l(e.material));break;case"LineLoop":o=new pS(a(e.geometry),l(e.material));break;case"LineSegments":o=new Yi(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new mS(a(e.geometry),l(e.material));break;case"Sprite":o=new MI(l(e.material));break;case"Group":o=new $s;break;case"Bone":o=new X0;break;default:o=new Dt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],_=o.getObjectByProperty("uuid",y.object);_!==void 0&&o.addLevel(_,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new Dt}})}}const T5={UVMapping:I0,CubeReflectionMapping:eo,CubeRefractionMapping:Jo,EquirectangularReflectionMapping:xh,EquirectangularRefractionMapping:_h,CubeUVReflectionMapping:yu},IC={RepeatWrapping:Ko,ClampToEdgeWrapping:Zr,MirroredRepeatWrapping:au},LC={NearestFilter:Un,NearestMipmapNearestFilter:L0,NearestMipmapLinearFilter:Ha,LinearFilter:wn,LinearMipmapNearestFilter:Qc,LinearMipmapLinearFilter:Si};class rL extends pr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xs.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(f=>{t&&t(f),s.manager.itemEnd(e)}).catch(f=>{i&&i(f)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return Xs.add(e,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){i&&i(f),Xs.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Xs.add(e,l),s.manager.itemStart(e)}}let dm;class PS{static getContext(){return dm===void 0&&(dm=new(window.AudioContext||window.webkitAudioContext)),dm}static setContext(e){dm=e}}class R5 extends pr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ri(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const f=l.slice(0);PS.getContext().decodeAudioData(f,function(d){t(d)}).catch(a)}catch(f){a(f)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const DC=new ft,FC=new ft,Ma=new ft;class P5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new an,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new an,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ma.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Qa*t.fov*.5)/t.zoom;let a,l;FC.elements[12]=-i,DC.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Ma.elements[0]=2*t.near/(l-a),Ma.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ma),a=-o*t.aspect-s,l=o*t.aspect-s,Ma.elements[0]=2*t.near/(l-a),Ma.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ma)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(FC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(DC)}}class BS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=OC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=OC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function OC(){return performance.now()}const wa=new F,NC=new jn,B5=new F,Ea=new F;class I5 extends Dt{constructor(){super(),this.type="AudioListener",this.context=PS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new BS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wa,NC,B5),Ea.set(0,0,-1).applyQuaternion(NC),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(wa.x,i),t.positionY.linearRampToValueAtTime(wa.y,i),t.positionZ.linearRampToValueAtTime(wa.z,i),t.forwardX.linearRampToValueAtTime(Ea.x,i),t.forwardY.linearRampToValueAtTime(Ea.y,i),t.forwardZ.linearRampToValueAtTime(Ea.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(wa.x,wa.y,wa.z),t.setOrientation(Ea.x,Ea.y,Ea.z,r.x,r.y,r.z)}}class iL extends Dt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ba=new F,UC=new jn,L5=new F,Ca=new F;class D5 extends iL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ba,UC,L5),Ca.set(0,0,1).applyQuaternion(UC);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ba.x,r),t.positionY.linearRampToValueAtTime(ba.y,r),t.positionZ.linearRampToValueAtTime(ba.z,r),t.orientationX.linearRampToValueAtTime(Ca.x,r),t.orientationY.linearRampToValueAtTime(Ca.y,r),t.orientationZ.linearRampToValueAtTime(Ca.z,r)}else t.setPosition(ba.x,ba.y,ba.z),t.setOrientation(Ca.x,Ca.y,Ca.z)}}class F5{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class sL{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,f=t+t;l!==f;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){jn.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;jn.multiplyQuaternionsFlat(e,o,e,t,e,r),jn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const IS="\\[\\]\\.:\\/",O5=new RegExp("["+IS+"]","g"),LS="[^"+IS+"]",N5="[^"+IS.replace("\\.","")+"]",U5=/((?:WC+[\/:])*)/.source.replace("WC",LS),k5=/(WCOD+)?/.source.replace("WCOD",N5),H5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LS),z5=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LS),G5=new RegExp("^"+U5+k5+H5+z5+"$"),V5=["material","materials","bones","map"];class W5{constructor(e,t,r){const i=r||Nt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Nt{constructor(e,t,r){this.path=t,this.parsedPath=r||Nt.parseTrackName(t),this.node=Nt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Nt.Composite(e,t,r):new Nt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(O5,"")}static parseTrackName(e){const t=G5.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);V5.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Nt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[i];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nt.Composite=W5;Nt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nt.prototype.GetterByBindingType=[Nt.prototype._getValue_direct,Nt.prototype._getValue_array,Nt.prototype._getValue_arrayElement,Nt.prototype._getValue_toArray];Nt.prototype.SetterByBindingTypeAndVersioning=[[Nt.prototype._setValue_direct,Nt.prototype._setValue_direct_setNeedsUpdate,Nt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_array,Nt.prototype._setValue_array_setNeedsUpdate,Nt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_arrayElement,Nt.prototype._setValue_arrayElement_setNeedsUpdate,Nt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_fromArray,Nt.prototype._setValue_fromArray_setNeedsUpdate,Nt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $5{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ti(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,f=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let _=0,x=o;_!==x;++_)s[_].push(new Nt(p,r[_],i[_]))}else if(y<f){a=e[y];const _=--f,x=e[_];t[x.uuid]=y,e[y]=x,t[m]=_,e[_]=p;for(let g=0,S=o;g!==S;++g){const M=s[g],E=M[_];let P=M[y];M[y]=E,P===void 0&&(P=new Nt(p,r[g],i[g])),M[_]=P}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],f=l.uuid,h=t[f];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[f]=d,e[d]=l;for(let m=0,y=i;m!==y;++m){const _=r[m],x=_[d],g=_[h];_[h]=x,_[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const f=arguments[a],h=f.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],y=--o,_=e[y];t[m.uuid]=d,e[d]=m,t[_.uuid]=p,e[p]=_,e.pop();for(let x=0,g=i;x!==g;++x){const S=r[x],M=S[p],E=S[y];S[d]=M,S[p]=E,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let y=0,_=i;y!==_;++y){const x=r[y];x[d]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,f=l.length,h=this.nCachedObjects_,d=new Array(f);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const y=l[p];d[p]=new Nt(y,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],f=e[a];t[f]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class oL{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:za,endingEnd:za};for(let f=0;f!==o;++f){const h=s[f].createInterpolant(null);a[f]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$B,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,f=a.sampleValues;return l[0]=s,l[1]=s+r,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case eS:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),f[h].accumulateAdditive(a);break;case H0:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),f[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===XB;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===WB){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Ga,i.endingEnd=Ga):(e?i.endingStart=this.zeroSlopeAtStart?Ga:za:i.endingStart=Ah,t?i.endingEnd=this.zeroSlopeAtEnd?Ga:za:i.endingEnd=Ah)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const X5=new Float32Array(1);class j5 extends Ki{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,f=this._bindingsByRootAndName;let h=f[l];h===void 0&&(h={},f[l]=h);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const _=t&&t._propertyBindings[d].binding.parsedPath;y=new sL(Nt.create(r,m,_),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,f=l[l.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,l[h]=f,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],f=e._cacheIndex;l._cacheIndex=f,t[f]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new MS(new Float32Array(2),new Float32Array(2),1,X5),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?du.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let f=null;if(r===void 0&&(o!==null?r=o.blendMode:r=H0),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;f=l.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const h=new oL(this,o,t,r);return this._bindAction(h,f),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?du.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==r;++f)t[f]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const f=o[a];this._deactivateAction(f);const h=f._cacheIndex,d=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(f)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class DS{constructor(e){this.value=e}clone(){return new DS(this.value.clone===void 0?this.value:this.value.clone())}}let J5=0;class K5 extends Ki{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:J5++}),this.name="",this.usage=Eh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Y5 extends Jh{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Q5{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const kC=new ft;class aL{constructor(e,t,r=0,i=1/0){this.ray=new gl(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Za,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return kC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(kC),this}intersectObject(e,t=!0,r=[]){return T1(e,this,r,t),r.sort(HC),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)T1(e[i],this,r,t);return r.sort(HC),r}}function HC(n,e){return n.distance-e.distance}function T1(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)T1(s[o],e,t,!0)}}class R1{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Mn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Z5{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class FS{constructor(e,t,r,i){FS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const zC=new de;class q5{constructor(e=new de(1/0,1/0),t=new de(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=zC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const GC=new F,pm=new F;class e8{constructor(e=new F,t=new F){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){GC.subVectors(e,this.start),pm.subVectors(this.end,this.start);const r=pm.dot(pm);let s=pm.dot(GC)/r;return t&&(s=Mn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VC=new F;class t8 extends Dt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new At,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const f=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new nt(i,3));const s=new dr({fog:!1,toneMapped:!1});this.cone=new Yi(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),VC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Co=new F,mm=new ft,Jx=new ft;class n8 extends Yi{constructor(e){const t=lL(e),r=new At,i=[],s=[],o=new Oe(0,0,1),a=new Oe(0,1,0);for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new nt(i,3)),r.setAttribute("color",new nt(s,3));const l=new dr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Jx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(mm.multiplyMatrices(Jx,a.matrixWorld),Co.setFromMatrixPosition(mm),i.setXYZ(o,Co.x,Co.y,Co.z),mm.multiplyMatrices(Jx,a.parent.matrixWorld),Co.setFromMatrixPosition(mm),i.setXYZ(o+1,Co.x,Co.y,Co.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lL(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,lL(n.children[t]));return e}class r8 extends En{constructor(e,t,r){const i=new Zh(t,4,2),s=new qr({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const i8=new F,WC=new Oe,$C=new Oe;class s8 extends Dt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Qh(t);i.rotateY(Math.PI*.5),this.material=new qr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Gt(o,3)),this.add(new En(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");WC.copy(this.light.color),$C.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?WC:$C;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(i8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class o8 extends Yi{constructor(e=10,t=10,r=4473924,i=8947848){r=new Oe(r),i=new Oe(i);const s=t/2,o=e/t,a=e/2,l=[],f=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const _=p===s?r:i;_.toArray(f,m),m+=3,_.toArray(f,m),m+=3,_.toArray(f,m),m+=3,_.toArray(f,m),m+=3}const h=new At;h.setAttribute("position",new nt(l,3)),h.setAttribute("color",new nt(f,3));const d=new dr({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class a8 extends Yi{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Oe(s),o=new Oe(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const _=d&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let y=0;y<i;y++){let _=y/i*(Math.PI*2),x=Math.sin(_)*m,g=Math.cos(_)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),_=(y+1)/i*(Math.PI*2),x=Math.sin(_)*m,g=Math.cos(_)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const f=new At;f.setAttribute("position",new nt(a,3)),f.setAttribute("color",new nt(l,3));const h=new dr({vertexColors:!0,toneMapped:!1});super(f,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const XC=new F,gm=new F,jC=new F;class l8 extends Dt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new At;i.setAttribute("position",new nt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new dr({fog:!1,toneMapped:!1});this.lightPlane=new no(i,s),this.add(this.lightPlane),i=new At,i.setAttribute("position",new nt([0,0,0,0,0,1],3)),this.targetLine=new no(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),XC.setFromMatrixPosition(this.light.matrixWorld),gm.setFromMatrixPosition(this.light.target.matrixWorld),jC.subVectors(gm,XC),this.lightPlane.lookAt(gm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gm),this.targetLine.scale.z=jC.length()}}const vm=new F,An=new $h;class c8 extends Yi{constructor(e){const t=new At,r=new dr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,_){l(y),l(_)}function l(y){i.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(i.length/3-1)}t.setAttribute("position",new nt(i,3)),t.setAttribute("color",new nt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new Oe(16755200),h=new Oe(16711680),d=new Oe(43775),p=new Oe(16777215),m=new Oe(3355443);this.setColors(f,h,d,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;An.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Cn("c",t,e,An,0,0,-1),Cn("t",t,e,An,0,0,1),Cn("n1",t,e,An,-r,-i,-1),Cn("n2",t,e,An,r,-i,-1),Cn("n3",t,e,An,-r,i,-1),Cn("n4",t,e,An,r,i,-1),Cn("f1",t,e,An,-r,-i,1),Cn("f2",t,e,An,r,-i,1),Cn("f3",t,e,An,-r,i,1),Cn("f4",t,e,An,r,i,1),Cn("u1",t,e,An,r*.7,i*1.1,-1),Cn("u2",t,e,An,-r*.7,i*1.1,-1),Cn("u3",t,e,An,0,i*2,-1),Cn("cf1",t,e,An,-r,0,1),Cn("cf2",t,e,An,r,0,1),Cn("cf3",t,e,An,0,-i,1),Cn("cf4",t,e,An,0,i,1),Cn("cn1",t,e,An,-r,0,-1),Cn("cn2",t,e,An,r,0,-1),Cn("cn3",t,e,An,0,-i,-1),Cn("cn4",t,e,An,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Cn(n,e,t,r,i,s,o){vm.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let f=0,h=a.length;f<h;f++)l.setXYZ(a[f],vm.x,vm.y,vm.z)}}const ym=new fr;class u8 extends Yi{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new At;s.setIndex(new Gt(r,1)),s.setAttribute("position",new Gt(i,3)),super(s,new dr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ym.setFromObject(this.object),ym.isEmpty())return;const t=ym.min,r=ym.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class f8 extends Yi{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new At;s.setIndex(new Gt(r,1)),s.setAttribute("position",new nt(i,3)),super(s,new dr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class h8 extends no{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new At;o.setAttribute("position",new nt(s,3)),o.computeBoundingSphere(),super(o,new dr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new At;l.setAttribute("position",new nt(a,3)),l.computeBoundingSphere(),this.add(new En(l,new qr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const JC=new F;let xm,Kx;class d8 extends Dt{constructor(e=new F(0,0,1),t=new F(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",xm===void 0&&(xm=new At,xm.setAttribute("position",new nt([0,0,0,0,1,0],3)),Kx=new Su(0,.5,1,5,1),Kx.translate(0,-.5,0)),this.position.copy(t),this.line=new no(xm,new dr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new En(Kx,new qr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{JC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(JC,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class p8 extends Yi{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new At;i.setAttribute("position",new nt(t,3)),i.setAttribute("color",new nt(r,3));const s=new dr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Oe,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class m8{constructor(){this.type="ShapePath",this.color=new Oe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Th,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let M=0,E=g.length;M<E;M++){const P=g[M],T=new qa;T.curves=P.curves,S.push(T)}return S}function r(g,S){const M=S.length;let E=!1;for(let P=M-1,T=0;T<M;P=T++){let B=S[P],L=S[T],z=L.x-B.x,b=L.y-B.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(B=S[T],z=-z,L=S[P],b=-b),g.y<B.y||g.y>L.y)continue;if(g.y===B.y){if(g.x===B.x)return!0}else{const R=b*(g.x-B.x)-z*(g.y-B.y);if(R===0)return!0;if(R<0)continue;E=!E}}else{if(g.y!==B.y)continue;if(L.x<=g.x&&g.x<=B.x||B.x<=g.x&&g.x<=L.x)return!0}}return E}const i=xs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const f=[];if(s.length===1)return a=s[0],l=new qa,l.curves=a.curves,f.push(l),f;let h=!i(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],y=0,_;p[y]=void 0,m[y]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],_=a.getPoints(),o=i(_),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new qa,p:_},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:_[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,S=0;for(let M=0,E=p.length;M<E;M++)d[M]=[];for(let M=0,E=p.length;M<E;M++){const P=m[M];for(let T=0;T<P.length;T++){const B=P[T];let L=!0;for(let z=0;z<p.length;z++)r(B.p,p[z].p)&&(M!==z&&S++,L?(L=!1,d[z].push(B)):g=!0);L&&d[M].push(B)}}S>0&&g===!1&&(m=d)}let x;for(let g=0,S=p.length;g<S;g++){l=p[g].s,f.push(l),x=m[g];for(let M=0,E=x.length;M<E;M++)l.holes.push(x[M].h)}return f}}class g8 extends Ki{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class v8 extends ji{constructor(e=1,t=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zh);const y8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:WA,AddEquation:Do,AddOperation:OB,AdditiveAnimationBlendMode:eS,AdditiveBlending:m1,AgXToneMapping:zB,AlphaFormat:JA,AlwaysCompare:rI,AlwaysDepth:xg,AlwaysStencilFunc:x1,AmbientLight:QI,AnimationAction:oL,AnimationClip:du,AnimationLoader:_5,AnimationMixer:j5,AnimationObjectGroup:$5,AnimationUtils:g5,ArcCurve:bI,ArrayCamera:_I,ArrowHelper:d8,AttachedBindMode:y1,Audio:iL,AudioAnalyser:F5,AudioContext:PS,AudioListener:I5,AudioLoader:R5,AxesHelper:p8,BackSide:wr,BasicDepthPacking:JB,BasicShadowMap:gB,BatchedMesh:EI,Bone:X0,BooleanKeyframeTrack:yl,Box2:q5,Box3:fr,Box3Helper:f8,BoxGeometry:vl,BoxHelper:u8,BufferAttribute:Gt,BufferGeometry:At,BufferGeometryLoader:nL,ByteType:$A,Cache:Xs,Camera:$h,CameraHelper:c8,CanvasTexture:HG,CapsuleGeometry:Y0,CatmullRomCurve3:CI,CineonToneMapping:kB,CircleGeometry:Q0,ClampToEdgeWrapping:Zr,Clock:BS,Color:Oe,ColorKeyframeTrack:wS,ColorManagement:jt,CompressedArrayTexture:UG,CompressedCubeTexture:kG,CompressedTexture:J0,CompressedTextureLoader:A5,ConeGeometry:Z0,ConstantAlphaFactor:LB,ConstantColorFactor:BB,Controls:g8,CubeCamera:hI,CubeReflectionMapping:eo,CubeRefractionMapping:Jo,CubeTexture:Xh,CubeTextureLoader:S5,CubeUVReflectionMapping:yu,CubicBezierCurve:vS,CubicBezierCurve3:TI,CubicInterpolant:XI,CullFaceBack:p1,CullFaceFront:mB,CullFaceFrontBack:gN,CullFaceNone:pB,Curve:Qi,CurvePath:PI,CustomBlending:vB,CustomToneMapping:HB,CylinderGeometry:Su,Cylindrical:Z5,Data3DTexture:iS,DataArrayTexture:G0,DataTexture:ys,DataTextureLoader:M5,DataUtils:CU,DecrementStencilOp:CN,DecrementWrapStencilOp:RN,DefaultLoadingManager:KI,DepthFormat:Ya,DepthStencilFormat:al,DepthTexture:lS,DetachedBindMode:VB,DirectionalLight:RS,DirectionalLightHelper:l8,DiscreteInterpolant:jI,DisplayP3ColorSpace:z0,DodecahedronGeometry:q0,DoubleSide:xi,DstAlphaFactor:bB,DstColorFactor:TB,DynamicCopyUsage:WN,DynamicDrawUsage:UN,DynamicReadUsage:zN,EdgesGeometry:BI,EllipseCurve:K0,EqualCompare:qB,EqualDepth:Ag,EqualStencilFunc:LN,EquirectangularReflectionMapping:xh,EquirectangularRefractionMapping:_h,Euler:Er,EventDispatcher:Ki,ExtrudeGeometry:tv,FileLoader:ri,Float16BufferAttribute:LU,Float32BufferAttribute:nt,FloatType:Fr,Fog:$0,FogExp2:W0,FramebufferTexture:NG,FrontSide:As,Frustum:jh,GLBufferAttribute:Q5,GLSL1:XN,GLSL3:_1,GreaterCompare:eI,GreaterDepth:Mg,GreaterEqualCompare:nI,GreaterEqualDepth:Sg,GreaterEqualStencilFunc:NN,GreaterStencilFunc:FN,GridHelper:o8,Group:$s,HalfFloatType:xu,HemisphereLight:YI,HemisphereLightHelper:s8,IcosahedronGeometry:nv,ImageBitmapLoader:rL,ImageLoader:Ih,ImageUtils:aI,IncrementStencilOp:bN,IncrementWrapStencilOp:TN,InstancedBufferAttribute:ll,InstancedBufferGeometry:tL,InstancedInterleavedBuffer:Y5,InstancedMesh:dS,Int16BufferAttribute:BU,Int32BufferAttribute:IU,Int8BufferAttribute:TU,IntType:D0,InterleavedBuffer:Jh,InterleavedBufferAttribute:Yo,Interpolant:Mu,InterpolateDiscrete:cu,InterpolateLinear:uu,InterpolateSmooth:zm,InvertStencilOp:PN,KeepStencilOp:La,KeyframeTrack:Zi,LOD:wI,LatheGeometry:Yh,Layers:Za,LessCompare:ZB,LessDepth:_g,LessEqualCompare:nS,LessEqualDepth:sl,LessEqualStencilFunc:DN,LessStencilFunc:IN,Light:ia,LightProbe:eL,Line:no,Line3:e8,LineBasicMaterial:dr,LineCurve:yS,LineCurve3:RI,LineDashedMaterial:VI,LineLoop:pS,LineSegments:Yi,LinearDisplayP3ColorSpace:Wh,LinearFilter:wn,LinearInterpolant:MS,LinearMipMapLinearFilter:_N,LinearMipMapNearestFilter:xN,LinearMipmapLinearFilter:Si,LinearMipmapNearestFilter:Qc,LinearSRGBColorSpace:io,LinearToneMapping:NB,LinearTransfer:Sh,Loader:pr,LoaderUtils:$o,LoadingManager:ES,LoopOnce:WB,LoopPingPong:XB,LoopRepeat:$B,LuminanceAlphaFormat:QA,LuminanceFormat:YA,MOUSE:Ba,Material:Ln,MaterialLoader:cv,MathUtils:iI,Matrix2:FS,Matrix3:wt,Matrix4:ft,MaxEquation:AB,Mesh:En,MeshBasicMaterial:qr,MeshDepthMaterial:cS,MeshDistanceMaterial:uS,MeshLambertMaterial:zI,MeshMatcapMaterial:GI,MeshNormalMaterial:HI,MeshPhongMaterial:UI,MeshPhysicalMaterial:Ti,MeshStandardMaterial:qh,MeshToonMaterial:kI,MinEquation:_B,MirroredRepeatWrapping:au,MixOperation:FB,MultiplyBlending:v1,MultiplyOperation:Gh,NearestFilter:Un,NearestMipMapLinearFilter:yN,NearestMipMapNearestFilter:vN,NearestMipmapLinearFilter:Ha,NearestMipmapNearestFilter:L0,NeutralToneMapping:GB,NeverCompare:QB,NeverDepth:yg,NeverStencilFunc:BN,NoBlending:Js,NoColorSpace:zs,NoToneMapping:vs,NormalAnimationBlendMode:H0,NormalBlending:Ka,NotEqualCompare:tI,NotEqualDepth:wg,NotEqualStencilFunc:ON,NumberKeyframeTrack:ul,Object3D:Dt,ObjectLoader:C5,ObjectSpaceNormalMap:YB,OctahedronGeometry:Qh,OneFactor:MB,OneMinusConstantAlphaFactor:DB,OneMinusConstantColorFactor:IB,OneMinusDstAlphaFactor:CB,OneMinusDstColorFactor:RB,OneMinusSrcAlphaFactor:vg,OneMinusSrcColorFactor:EB,OrthographicCamera:Mi,P3Primaries:wh,PCFShadowMap:B0,PCFSoftShadowMap:Xf,PMREMGenerator:A1,Path:Th,PerspectiveCamera:an,Plane:Hs,PlaneGeometry:_u,PlaneHelper:h8,PointLight:TS,PointLightHelper:r8,Points:mS,PointsMaterial:j0,PolarGridHelper:a8,PolyhedronGeometry:ra,PositionalAudio:D5,PropertyBinding:Nt,PropertyMixer:sL,QuadraticBezierCurve:xS,QuadraticBezierCurve3:_S,Quaternion:jn,QuaternionKeyframeTrack:fl,QuaternionLinearInterpolant:JI,RED_GREEN_RGTC2_Format:Kg,RED_RGTC1_Format:qA,REVISION:zh,RGBADepthPacking:KB,RGBAFormat:ur,RGBAIntegerFormat:k0,RGBA_ASTC_10x10_Format:Vg,RGBA_ASTC_10x5_Format:Hg,RGBA_ASTC_10x6_Format:zg,RGBA_ASTC_10x8_Format:Gg,RGBA_ASTC_12x10_Format:Wg,RGBA_ASTC_12x12_Format:$g,RGBA_ASTC_4x4_Format:Ig,RGBA_ASTC_5x4_Format:Lg,RGBA_ASTC_5x5_Format:Dg,RGBA_ASTC_6x5_Format:Fg,RGBA_ASTC_6x6_Format:Og,RGBA_ASTC_8x5_Format:Ng,RGBA_ASTC_8x6_Format:Ug,RGBA_ASTC_8x8_Format:kg,RGBA_BPTC_Format:Qf,RGBA_ETC2_EAC_Format:Bg,RGBA_PVRTC_2BPPV1_Format:Tg,RGBA_PVRTC_4BPPV1_Format:Cg,RGBA_S3TC_DXT1_Format:Jf,RGBA_S3TC_DXT3_Format:Kf,RGBA_S3TC_DXT5_Format:Yf,RGBDepthPacking:SN,RGBFormat:KA,RGBIntegerFormat:AN,RGB_BPTC_SIGNED_Format:Xg,RGB_BPTC_UNSIGNED_Format:jg,RGB_ETC1_Format:Rg,RGB_ETC2_Format:Pg,RGB_PVRTC_2BPPV1_Format:bg,RGB_PVRTC_4BPPV1_Format:Eg,RGB_S3TC_DXT1_Format:jf,RGDepthPacking:MN,RGFormat:ZA,RGIntegerFormat:U0,RawShaderMaterial:NI,Ray:gl,Raycaster:aL,Rec709Primaries:Mh,RectAreaLight:ZI,RedFormat:N0,RedIntegerFormat:Vh,ReinhardToneMapping:UB,RenderTarget:lI,RepeatWrapping:Ko,ReplaceStencilOp:EN,ReverseSubtractEquation:xB,RingGeometry:rv,SIGNED_RED_GREEN_RGTC2_Format:Yg,SIGNED_RED_RGTC1_Format:Jg,SRGBColorSpace:Yr,SRGBTransfer:en,Scene:Zg,ShaderChunk:bt,ShaderLib:zi,ShaderMaterial:Ji,ShadowMaterial:OI,Shape:qa,ShapeGeometry:iv,ShapePath:m8,ShapeUtils:xs,ShortType:XA,Skeleton:Kh,SkeletonHelper:n8,SkinnedMesh:hS,Source:Va,Sphere:Zn,SphereGeometry:Zh,Spherical:R1,SphericalHarmonics3:qI,SplineCurve:AS,SpotLight:CS,SpotLightHelper:t8,Sprite:MI,SpriteMaterial:fS,SrcAlphaFactor:gg,SrcAlphaSaturateFactor:PB,SrcColorFactor:wB,StaticCopyUsage:VN,StaticDrawUsage:Eh,StaticReadUsage:HN,StereoCamera:P5,StreamCopyUsage:$N,StreamDrawUsage:kN,StreamReadUsage:GN,StringKeyframeTrack:xl,SubtractEquation:yB,SubtractiveBlending:g1,TOUCH:Ia,TangentSpaceNormalMap:na,TetrahedronGeometry:sv,Texture:Zt,TextureLoader:ed,TextureUtils:gG,TorusGeometry:ov,TorusKnotGeometry:av,Triangle:Lr,TriangleFanDrawMode:Qg,TriangleStripDrawMode:tS,TrianglesDrawMode:jB,TubeGeometry:lv,UVMapping:I0,Uint16BufferAttribute:sS,Uint32BufferAttribute:oS,Uint8BufferAttribute:RU,Uint8ClampedBufferAttribute:PU,Uniform:DS,UniformsGroup:K5,UniformsLib:Ue,UniformsUtils:fI,UnsignedByteType:Xi,UnsignedInt248Type:ol,UnsignedInt5999Type:jA,UnsignedIntType:to,UnsignedShort4444Type:F0,UnsignedShort5551Type:O0,UnsignedShortType:lu,VSMShadowMap:Ui,Vector2:de,Vector3:F,Vector4:Ht,VectorKeyframeTrack:hl,VideoTexture:OG,WebGL3DRenderTarget:vU,WebGLArrayRenderTarget:gU,WebGLCoordinateSystem:ps,WebGLCubeRenderTarget:dI,WebGLMultipleRenderTargets:v8,WebGLRenderTarget:ji,WebGLRenderer:AI,WebGLUtils:xI,WebGPUCoordinateSystem:bh,WireframeGeometry:FI,WrapAroundEnding:Ah,ZeroCurvatureEnding:za,ZeroFactor:SB,ZeroSlopeEnding:Ga,ZeroStencilOp:wN,createCanvasElement:oI},Symbol.toStringTag,{value:"Module"}));var cL={exports:{}},_l={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */_l.ConcurrentRoot=1;_l.ContinuousEventPriority=4;_l.DefaultEventPriority=16;_l.DiscreteEventPriority=1;_l.IdleEventPriority=536870912;_l.LegacyRoot=0;cL.exports=_l;var Wc=cL.exports;function x8(n){let e;const t=new Set,r=(f,h)=>{const d=typeof f=="function"?f(e):f;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(f,h=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!d(p,y)){const _=p;f(p=y,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(f,h,d)=>h||d?s(f,h,d):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(r,i,l),l}const _8=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),KC=_8?ce.useEffect:ce.useLayoutEffect;function A8(n){const e=typeof n=="function"?x8(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=ce.useReducer(x=>x+1,0),o=e.getState(),a=ce.useRef(o),l=ce.useRef(r),f=ce.useRef(i),h=ce.useRef(!1),d=ce.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||f.current!==i||h.current)&&(p=r(o),m=!i(d.current,p)),KC(()=>{m&&(d.current=p),a.current=o,l.current=r,f.current=i,h.current=!1});const y=ce.useRef(o);KC(()=>{const x=()=>{try{const S=e.getState(),M=l.current(S);f.current(d.current,M)||(a.current=S,d.current=M,s())}catch{h.current=!0,s()}},g=e.subscribe(x);return e.getState()!==y.current&&x(),g},[]);const _=m?p:d.current;return ce.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const S8=n=>typeof n=="object"&&typeof n.then=="function",$a=[];function uL(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function fL(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of $a)if(uL(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=$a.indexOf(i);s!==-1&&$a.splice(s,1)},promise:(S8(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if($a.push(i),!t)throw i.promise}const M8=(n,e,t)=>fL(n,e,!1,t),w8=(n,e,t)=>void fL(n,e,!0,t),E8=n=>{if(n===void 0||n.length===0)$a.splice(0,$a.length);else{const e=$a.find(t=>uL(n,t.keys,t.equal));e&&e.remove()}};var hL={exports:{}},dL={exports:{}},pL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,Q){var J=U.length;U.push(Q);e:for(;0<J;){var se=J-1>>>1,_e=U[se];if(0<i(_e,Q))U[se]=Q,U[J]=_e,J=se;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],J=U.pop();if(J!==Q){U[0]=J;e:for(var se=0,_e=U.length,De=_e>>>1;se<De;){var ie=2*(se+1)-1,ye=U[ie],Pe=ie+1,we=U[Pe];if(0>i(ye,J))Pe<_e&&0>i(we,ye)?(U[se]=we,U[Pe]=J,se=Pe):(U[se]=ye,U[ie]=J,se=ie);else if(Pe<_e&&0>i(we,J))U[se]=we,U[Pe]=J,se=Pe;else break e}}return Q}function i(U,Q){var J=U.sortIndex-Q.sortIndex;return J!==0?J:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,d=null,p=3,m=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(U){for(var Q=t(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=U)r(f),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(f)}}function E(U){if(_=!1,M(U),!y)if(t(l)!==null)y=!0,Z(P);else{var Q=t(f);Q!==null&&pe(E,Q.startTime-U)}}function P(U,Q){y=!1,_&&(_=!1,g(L),L=-1),m=!0;var J=p;try{for(M(Q),d=t(l);d!==null&&(!(d.expirationTime>Q)||U&&!R());){var se=d.callback;if(typeof se=="function"){d.callback=null,p=d.priorityLevel;var _e=se(d.expirationTime<=Q);Q=n.unstable_now(),typeof _e=="function"?d.callback=_e:d===t(l)&&r(l),M(Q)}else r(l);d=t(l)}if(d!==null)var De=!0;else{var ie=t(f);ie!==null&&pe(E,ie.startTime-Q),De=!1}return De}finally{d=null,p=J,m=!1}}var T=!1,B=null,L=-1,z=5,b=-1;function R(){return!(n.unstable_now()-b<z)}function $(){if(B!==null){var U=n.unstable_now();b=U;var Q=!0;try{Q=B(!0,U)}finally{Q?X():(T=!1,B=null)}}else T=!1}var X;if(typeof S=="function")X=function(){S($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,le=ee.port2;ee.port1.onmessage=$,X=function(){le.postMessage(null)}}else X=function(){x($,0)};function Z(U){B=U,T||(T=!0,X())}function pe(U,Q){L=x(function(){U(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Z(P))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var J=p;p=Q;try{return U()}finally{p=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=p;p=U;try{return Q()}finally{p=J}},n.unstable_scheduleCallback=function(U,Q,J){var se=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?se+J:se):J=se,U){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=J+_e,U={id:h++,callback:Q,priorityLevel:U,startTime:J,expirationTime:_e,sortIndex:-1},J>se?(U.sortIndex=J,e(f,U),t(l)===null&&U===t(f)&&(_?(g(L),L=-1):_=!0,pe(E,J-se))):(U.sortIndex=_e,e(l,U),y||m||(y=!0,Z(P))),U},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(U){var Q=p;return function(){var J=p;p=Q;try{return U.apply(this,arguments)}finally{p=J}}}})(pL);dL.exports=pL;var P1=dL.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b8=function(e){var t={},r=ce,i=P1,s=Object.assign;function o(c){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),P=Symbol.iterator;function T(c){return c===null||typeof c!="object"?null:(c=P&&c[P]||c["@@iterator"],typeof c=="function"?c:null)}function B(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case f:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case y:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case _:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case S:return u=c.displayName||null,u!==null?u:B(c.type)||"Memo";case M:u=c._payload,c=c._init;try{return B(c(u))}catch{}}return null}function L(c){var u=c.type;switch(c.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=u.render,c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(u);case 8:return u===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function z(c){var u=c,v=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,u.flags&4098&&(v=u.return),c=u.return;while(c)}return u.tag===3?v:null}function b(c){if(z(c)!==c)throw Error(o(188))}function R(c){var u=c.alternate;if(!u){if(u=z(c),u===null)throw Error(o(188));return u!==c?null:c}for(var v=c,A=u;;){var w=v.return;if(w===null)break;var C=w.alternate;if(C===null){if(A=w.return,A!==null){v=A;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===v)return b(w),c;if(C===A)return b(w),u;C=C.sibling}throw Error(o(188))}if(v.return!==A.return)v=w,A=C;else{for(var k=!1,W=w.child;W;){if(W===v){k=!0,v=w,A=C;break}if(W===A){k=!0,A=w,v=C;break}W=W.sibling}if(!k){for(W=C.child;W;){if(W===v){k=!0,v=C,A=w;break}if(W===A){k=!0,A=C,v=w;break}W=W.sibling}if(!k)throw Error(o(189))}}if(v.alternate!==A)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?c:u}function $(c){return c=R(c),c!==null?X(c):null}function X(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var u=X(c);if(u!==null)return u;c=c.sibling}return null}function ee(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var u=ee(c);if(u!==null)return u}c=c.sibling}return null}var le=Array.isArray,Z=e.getPublicInstance,pe=e.getRootHostContext,U=e.getChildHostContext,Q=e.prepareForCommit,J=e.resetAfterCommit,se=e.createInstance,_e=e.appendInitialChild,De=e.finalizeInitialChildren,ie=e.prepareUpdate,ye=e.shouldSetTextContent,Pe=e.createTextInstance,we=e.scheduleTimeout,st=e.cancelTimeout,lt=e.noTimeout,et=e.isPrimaryRenderer,Fe=e.supportsMutation,me=e.supportsPersistence,O=e.supportsHydration,Be=e.getInstanceFromNode,Ce=e.preparePortalMount,Ae=e.getCurrentEventPriority,Ee=e.detachDeletedInstance,rt=e.supportsMicrotasks,ke=e.scheduleMicrotask,N=e.supportsTestSelectors,I=e.findFiberRoot,q=e.getBoundingRect,fe=e.getTextContent,xe=e.isHiddenSubtree,ge=e.matchAccessibilityRole,Ke=e.setFocusIfFocusable,be=e.setupIntersectionObserver,Xe=e.appendChild,Bt=e.appendChildToContainer,Se=e.commitTextUpdate,je=e.commitMount,gt=e.commitUpdate,pt=e.insertBefore,Je=e.insertInContainerBefore,V=e.removeChild,he=e.removeChildFromContainer,Ne=e.resetTextContent,G=e.hideInstance,Te=e.hideTextInstance,oe=e.unhideInstance,ve=e.unhideTextInstance,ze=e.clearContainer,Ge=e.cloneInstance,yt=e.createContainerChildSet,Ut=e.appendChildToContainerChildSet,xn=e.finalizeContainerChildren,Ct=e.replaceContainerChildren,dn=e.cloneHiddenInstance,Jn=e.cloneHiddenTextInstance,hd=e.canHydrateInstance,dd=e.canHydrateTextInstance,Ms=e.canHydrateSuspenseInstance,Tl=e.isSuspenseInstancePending,Rl=e.isSuspenseInstanceFallback,pd=e.registerSuspenseInstanceRetry,ts=e.getNextHydratableSibling,md=e.getFirstHydratableChild,Pl=e.getFirstHydratableChildWithinContainer,gd=e.getFirstHydratableChildWithinSuspenseInstance,vd=e.hydrateInstance,Cv=e.hydrateTextInstance,Tv=e.hydrateSuspenseInstance,Rv=e.getNextHydratableInstanceAfterSuspenseInstance,D=e.commitHydratedContainer,j=e.commitHydratedSuspenseInstance,ne=e.clearSuspenseBoundary,re=e.clearSuspenseBoundaryFromContainer,Y=e.shouldDeleteUnhydratedTailInstances,Ie=e.didNotMatchHydratedContainerTextInstance,We=e.didNotMatchHydratedTextInstance,Qe;function Ze(c){if(Qe===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);Qe=u&&u[1]||""}return`
`+Qe+c}var dt=!1;function mt(c,u){if(!c||dt)return"";dt=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Re){var A=Re}Reflect.construct(c,[],u)}else{try{u.call()}catch(Re){A=Re}c.call(u.prototype)}else{try{throw Error()}catch(Re){A=Re}c()}}catch(Re){if(Re&&A&&typeof Re.stack=="string"){for(var w=Re.stack.split(`
`),C=A.stack.split(`
`),k=w.length-1,W=C.length-1;1<=k&&0<=W&&w[k]!==C[W];)W--;for(;1<=k&&0<=W;k--,W--)if(w[k]!==C[W]){if(k!==1||W!==1)do if(k--,W--,0>W||w[k]!==C[W]){var ue=`
`+w[k].replace(" at new "," at ");return c.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",c.displayName)),ue}while(1<=k&&0<=W);break}}}finally{dt=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?Ze(c):""}var ot=Object.prototype.hasOwnProperty,kt=[],Vt=-1;function Jt(c){return{current:c}}function Rt(c){0>Vt||(c.current=kt[Vt],kt[Vt]=null,Vt--)}function ct(c,u){Vt++,kt[Vt]=c.current,c.current=u}var tt={},Ot=Jt(tt),_t=Jt(!1),Dn=tt;function zr(c,u){var v=c.type.contextTypes;if(!v)return tt;var A=c.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===u)return A.__reactInternalMemoizedMaskedChildContext;var w={},C;for(C in v)w[C]=u[C];return A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=u,c.__reactInternalMemoizedMaskedChildContext=w),w}function Yt(c){return c=c.childContextTypes,c!=null}function lo(){Rt(_t),Rt(Ot)}function cn(c,u,v){if(Ot.current!==tt)throw Error(o(168));ct(Ot,u),ct(_t,v)}function Ri(c,u,v){var A=c.stateNode;if(u=u.childContextTypes,typeof A.getChildContext!="function")return v;A=A.getChildContext();for(var w in A)if(!(w in u))throw Error(o(108,L(c)||"Unknown",w));return s({},v,A)}function co(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||tt,Dn=Ot.current,ct(Ot,c),ct(_t,_t.current),!0}function mr(c,u,v){var A=c.stateNode;if(!A)throw Error(o(169));v?(c=Ri(c,u,Dn),A.__reactInternalMemoizedMergedChildContext=c,Rt(_t),Rt(Ot),ct(Ot,c)):Rt(_t),ct(_t,v)}var gr=Math.clz32?Math.clz32:t3,Pv=Math.log,yd=Math.LN2;function t3(c){return c>>>=0,c===0?32:31-(Pv(c)/yd|0)|0}var xd=64,_d=4194304;function Du(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Ad(c,u){var v=c.pendingLanes;if(v===0)return 0;var A=0,w=c.suspendedLanes,C=c.pingedLanes,k=v&268435455;if(k!==0){var W=k&~w;W!==0?A=Du(W):(C&=k,C!==0&&(A=Du(C)))}else k=v&~w,k!==0?A=Du(k):C!==0&&(A=Du(C));if(A===0)return 0;if(u!==0&&u!==A&&!(u&w)&&(w=A&-A,C=u&-u,w>=C||w===16&&(C&4194240)!==0))return u;if(A&4&&(A|=v&16),u=c.entangledLanes,u!==0)for(c=c.entanglements,u&=A;0<u;)v=31-gr(u),w=1<<v,A|=c[v],u&=~w;return A}function n3(c,u){switch(c){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r3(c,u){for(var v=c.suspendedLanes,A=c.pingedLanes,w=c.expirationTimes,C=c.pendingLanes;0<C;){var k=31-gr(C),W=1<<k,ue=w[k];ue===-1?(!(W&v)||W&A)&&(w[k]=n3(W,u)):ue<=u&&(c.expiredLanes|=W),C&=~W}}function Bv(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Iv(c){for(var u=[],v=0;31>v;v++)u.push(c);return u}function Fu(c,u,v){c.pendingLanes|=u,u!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,u=31-gr(u),c[u]=v}function i3(c,u){var v=c.pendingLanes&~u;c.pendingLanes=u,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=u,c.mutableReadLanes&=u,c.entangledLanes&=u,u=c.entanglements;var A=c.eventTimes;for(c=c.expirationTimes;0<v;){var w=31-gr(v),C=1<<w;u[w]=0,A[w]=-1,c[w]=-1,v&=~C}}function Lv(c,u){var v=c.entangledLanes|=u;for(c=c.entanglements;v;){var A=31-gr(v),w=1<<A;w&u|c[A]&u&&(c[A]|=u),v&=~w}}var Wt=0;function IM(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Dv=i.unstable_scheduleCallback,LM=i.unstable_cancelCallback,s3=i.unstable_shouldYield,o3=i.unstable_requestPaint,zn=i.unstable_now,Fv=i.unstable_ImmediatePriority,a3=i.unstable_UserBlockingPriority,Ov=i.unstable_NormalPriority,l3=i.unstable_IdlePriority,Sd=null,ns=null;function c3(c){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(Sd,c,void 0,(c.current.flags&128)===128)}catch{}}function u3(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var rs=typeof Object.is=="function"?Object.is:u3,ws=null,Md=!1,Nv=!1;function DM(c){ws===null?ws=[c]:ws.push(c)}function f3(c){Md=!0,DM(c)}function is(){if(!Nv&&ws!==null){Nv=!0;var c=0,u=Wt;try{var v=ws;for(Wt=1;c<v.length;c++){var A=v[c];do A=A(!0);while(A!==null)}ws=null,Md=!1}catch(w){throw ws!==null&&(ws=ws.slice(c+1)),Dv(Fv,is),w}finally{Wt=u,Nv=!1}}return null}var h3=a.ReactCurrentBatchConfig;function wd(c,u){if(rs(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var v=Object.keys(c),A=Object.keys(u);if(v.length!==A.length)return!1;for(A=0;A<v.length;A++){var w=v[A];if(!ot.call(u,w)||!rs(c[w],u[w]))return!1}return!0}function d3(c){switch(c.tag){case 5:return Ze(c.type);case 16:return Ze("Lazy");case 13:return Ze("Suspense");case 19:return Ze("SuspenseList");case 0:case 2:case 15:return c=mt(c.type,!1),c;case 11:return c=mt(c.type.render,!1),c;case 1:return c=mt(c.type,!0),c;default:return""}}function Pi(c,u){if(c&&c.defaultProps){u=s({},u),c=c.defaultProps;for(var v in c)u[v]===void 0&&(u[v]=c[v]);return u}return u}var Ed=Jt(null),bd=null,Bl=null,Uv=null;function kv(){Uv=Bl=bd=null}function FM(c,u,v){et?(ct(Ed,u._currentValue),u._currentValue=v):(ct(Ed,u._currentValue2),u._currentValue2=v)}function Hv(c){var u=Ed.current;Rt(Ed),et?c._currentValue=u:c._currentValue2=u}function zv(c,u,v){for(;c!==null;){var A=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,A!==null&&(A.childLanes|=u)):A!==null&&(A.childLanes&u)!==u&&(A.childLanes|=u),c===v)break;c=c.return}}function Il(c,u){bd=c,Uv=Bl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&u&&(Wr=!0),c.firstContext=null)}function ai(c){var u=et?c._currentValue:c._currentValue2;if(Uv!==c)if(c={context:c,memoizedValue:u,next:null},Bl===null){if(bd===null)throw Error(o(308));Bl=c,bd.dependencies={lanes:0,firstContext:c}}else Bl=Bl.next=c;return u}var ss=null,uo=!1;function Gv(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OM(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Es(c,u){return{eventTime:c,lane:u,tag:0,payload:null,callback:null,next:null}}function fo(c,u){var v=c.updateQueue;v!==null&&(v=v.shared,Rn!==null&&c.mode&1&&!(Pt&2)?(c=v.interleaved,c===null?(u.next=u,ss===null?ss=[v]:ss.push(v)):(u.next=c.next,c.next=u),v.interleaved=u):(c=v.pending,c===null?u.next=u:(u.next=c.next,c.next=u),v.pending=u))}function Cd(c,u,v){if(u=u.updateQueue,u!==null&&(u=u.shared,(v&4194240)!==0)){var A=u.lanes;A&=c.pendingLanes,v|=A,u.lanes=v,Lv(c,v)}}function NM(c,u){var v=c.updateQueue,A=c.alternate;if(A!==null&&(A=A.updateQueue,v===A)){var w=null,C=null;if(v=v.firstBaseUpdate,v!==null){do{var k={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};C===null?w=C=k:C=C.next=k,v=v.next}while(v!==null);C===null?w=C=u:C=C.next=u}else w=C=u;v={baseState:A.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:A.shared,effects:A.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=u:c.next=u,v.lastBaseUpdate=u}function Td(c,u,v,A){var w=c.updateQueue;uo=!1;var C=w.firstBaseUpdate,k=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var ue=W,Re=ue.next;ue.next=null,k===null?C=Re:k.next=Re,k=ue;var qe=c.alternate;qe!==null&&(qe=qe.updateQueue,W=qe.lastBaseUpdate,W!==k&&(W===null?qe.firstBaseUpdate=Re:W.next=Re,qe.lastBaseUpdate=ue))}if(C!==null){var St=w.baseState;k=0,qe=Re=ue=null,W=C;do{var ht=W.lane,Qt=W.eventTime;if((A&ht)===ht){qe!==null&&(qe=qe.next={eventTime:Qt,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ut=c,rr=W;switch(ht=u,Qt=v,rr.tag){case 1:if(ut=rr.payload,typeof ut=="function"){St=ut.call(Qt,St,ht);break e}St=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=rr.payload,ht=typeof ut=="function"?ut.call(Qt,St,ht):ut,ht==null)break e;St=s({},St,ht);break e;case 2:uo=!0}}W.callback!==null&&W.lane!==0&&(c.flags|=64,ht=w.effects,ht===null?w.effects=[W]:ht.push(W))}else Qt={eventTime:Qt,lane:ht,tag:W.tag,payload:W.payload,callback:W.callback,next:null},qe===null?(Re=qe=Qt,ue=St):qe=qe.next=Qt,k|=ht;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;ht=W,W=ht.next,ht.next=null,w.lastBaseUpdate=ht,w.shared.pending=null}}while(!0);if(qe===null&&(ue=St),w.baseState=ue,w.firstBaseUpdate=Re,w.lastBaseUpdate=qe,u=w.shared.interleaved,u!==null){w=u;do k|=w.lane,w=w.next;while(w!==u)}else C===null&&(w.shared.lanes=0);zl|=k,c.lanes=k,c.memoizedState=St}}function UM(c,u,v){if(c=u.effects,u.effects=null,c!==null)for(u=0;u<c.length;u++){var A=c[u],w=A.callback;if(w!==null){if(A.callback=null,A=v,typeof w!="function")throw Error(o(191,w));w.call(A)}}}var kM=new r.Component().refs;function Vv(c,u,v,A){u=c.memoizedState,v=v(A,u),v=v==null?u:s({},u,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Rd={isMounted:function(c){return(c=c._reactInternals)?z(c)===c:!1},enqueueSetState:function(c,u,v){c=c._reactInternals;var A=yr(),w=mo(c),C=Es(A,w);C.payload=u,v!=null&&(C.callback=v),fo(c,C),u=hi(c,w,A),u!==null&&Cd(u,c,w)},enqueueReplaceState:function(c,u,v){c=c._reactInternals;var A=yr(),w=mo(c),C=Es(A,w);C.tag=1,C.payload=u,v!=null&&(C.callback=v),fo(c,C),u=hi(c,w,A),u!==null&&Cd(u,c,w)},enqueueForceUpdate:function(c,u){c=c._reactInternals;var v=yr(),A=mo(c),w=Es(v,A);w.tag=2,u!=null&&(w.callback=u),fo(c,w),u=hi(c,A,v),u!==null&&Cd(u,c,A)}};function HM(c,u,v,A,w,C,k){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(A,C,k):u.prototype&&u.prototype.isPureReactComponent?!wd(v,A)||!wd(w,C):!0}function zM(c,u,v){var A=!1,w=tt,C=u.contextType;return typeof C=="object"&&C!==null?C=ai(C):(w=Yt(u)?Dn:Ot.current,A=u.contextTypes,C=(A=A!=null)?zr(c,w):tt),u=new u(v,C),c.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Rd,c.stateNode=u,u._reactInternals=c,A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=w,c.__reactInternalMemoizedMaskedChildContext=C),u}function GM(c,u,v,A){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,A),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,A),u.state!==c&&Rd.enqueueReplaceState(u,u.state,null)}function Wv(c,u,v,A){var w=c.stateNode;w.props=v,w.state=c.memoizedState,w.refs=kM,Gv(c);var C=u.contextType;typeof C=="object"&&C!==null?w.context=ai(C):(C=Yt(u)?Dn:Ot.current,w.context=zr(c,C)),w.state=c.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Vv(c,u,C,v),w.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(u=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),u!==w.state&&Rd.enqueueReplaceState(w,w.state,null),Td(c,v,w,A),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308)}var Ll=[],Dl=0,Pd=null,Bd=0,li=[],ci=0,aa=null,bs=1,Cs="";function la(c,u){Ll[Dl++]=Bd,Ll[Dl++]=Pd,Pd=c,Bd=u}function VM(c,u,v){li[ci++]=bs,li[ci++]=Cs,li[ci++]=aa,aa=c;var A=bs;c=Cs;var w=32-gr(A)-1;A&=~(1<<w),v+=1;var C=32-gr(u)+w;if(30<C){var k=w-w%5;C=(A&(1<<k)-1).toString(32),A>>=k,w-=k,bs=1<<32-gr(u)+w|v<<w|A,Cs=C+c}else bs=1<<C|v<<w|A,Cs=c}function $v(c){c.return!==null&&(la(c,1),VM(c,1,0))}function Xv(c){for(;c===Pd;)Pd=Ll[--Dl],Ll[Dl]=null,Bd=Ll[--Dl],Ll[Dl]=null;for(;c===aa;)aa=li[--ci],li[ci]=null,Cs=li[--ci],li[ci]=null,bs=li[--ci],li[ci]=null}var Gr=null,Vr=null,un=!1,Ou=!1,Bi=null;function WM(c,u){var v=di(5,null,null,0);v.elementType="DELETED",v.stateNode=u,v.return=c,u=c.deletions,u===null?(c.deletions=[v],c.flags|=16):u.push(v)}function $M(c,u){switch(c.tag){case 5:return u=hd(u,c.type,c.pendingProps),u!==null?(c.stateNode=u,Gr=c,Vr=md(u),!0):!1;case 6:return u=dd(u,c.pendingProps),u!==null?(c.stateNode=u,Gr=c,Vr=null,!0):!1;case 13:if(u=Ms(u),u!==null){var v=aa!==null?{id:bs,overflow:Cs}:null;return c.memoizedState={dehydrated:u,treeContext:v,retryLane:1073741824},v=di(18,null,null,0),v.stateNode=u,v.return=c,c.child=v,Gr=c,Vr=null,!0}return!1;default:return!1}}function jv(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Jv(c){if(un){var u=Vr;if(u){var v=u;if(!$M(c,u)){if(jv(c))throw Error(o(418));u=ts(v);var A=Gr;u&&$M(c,u)?WM(A,v):(c.flags=c.flags&-4097|2,un=!1,Gr=c)}}else{if(jv(c))throw Error(o(418));c.flags=c.flags&-4097|2,un=!1,Gr=c}}}function XM(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Gr=c}function Nu(c){if(!O||c!==Gr)return!1;if(!un)return XM(c),un=!0,!1;if(c.tag!==3&&(c.tag!==5||Y(c.type)&&!ye(c.type,c.memoizedProps))){var u=Vr;if(u){if(jv(c)){for(c=Vr;c;)c=ts(c);throw Error(o(418))}for(;u;)WM(c,u),u=ts(u)}}if(XM(c),c.tag===13){if(!O)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Vr=Rv(c)}else Vr=Gr?ts(c.stateNode):null;return!0}function Fl(){O&&(Vr=Gr=null,Ou=un=!1)}function Kv(c){Bi===null?Bi=[c]:Bi.push(c)}function Uu(c,u,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var A=v.stateNode}if(!A)throw Error(o(147,c));var w=A,C=""+c;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===C?u.ref:(u=function(k){var W=w.refs;W===kM&&(W=w.refs={}),k===null?delete W[C]:W[C]=k},u._stringRef=C,u)}if(typeof c!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,c))}return c}function Id(c,u){throw c=Object.prototype.toString.call(u),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c))}function jM(c){var u=c._init;return u(c._payload)}function JM(c){function u(te,K){if(c){var ae=te.deletions;ae===null?(te.deletions=[K],te.flags|=16):ae.push(K)}}function v(te,K){if(!c)return null;for(;K!==null;)u(te,K),K=K.sibling;return null}function A(te,K){for(te=new Map;K!==null;)K.key!==null?te.set(K.key,K):te.set(K.index,K),K=K.sibling;return te}function w(te,K){return te=vo(te,K),te.index=0,te.sibling=null,te}function C(te,K,ae){return te.index=ae,c?(ae=te.alternate,ae!==null?(ae=ae.index,ae<K?(te.flags|=2,K):ae):(te.flags|=2,K)):(te.flags|=1048576,K)}function k(te){return c&&te.alternate===null&&(te.flags|=2),te}function W(te,K,ae,Ve){return K===null||K.tag!==6?(K=Iy(ae,te.mode,Ve),K.return=te,K):(K=w(K,ae),K.return=te,K)}function ue(te,K,ae,Ve){var at=ae.type;return at===h?qe(te,K,ae.props.children,Ve,ae.key):K!==null&&(K.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===M&&jM(at)===K.type)?(Ve=w(K,ae.props),Ve.ref=Uu(te,K,ae),Ve.return=te,Ve):(Ve=cp(ae.type,ae.key,ae.props,null,te.mode,Ve),Ve.ref=Uu(te,K,ae),Ve.return=te,Ve)}function Re(te,K,ae,Ve){return K===null||K.tag!==4||K.stateNode.containerInfo!==ae.containerInfo||K.stateNode.implementation!==ae.implementation?(K=Ly(ae,te.mode,Ve),K.return=te,K):(K=w(K,ae.children||[]),K.return=te,K)}function qe(te,K,ae,Ve,at){return K===null||K.tag!==7?(K=ma(ae,te.mode,Ve,at),K.return=te,K):(K=w(K,ae),K.return=te,K)}function St(te,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Iy(""+K,te.mode,ae),K.return=te,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case l:return ae=cp(K.type,K.key,K.props,null,te.mode,ae),ae.ref=Uu(te,null,K),ae.return=te,ae;case f:return K=Ly(K,te.mode,ae),K.return=te,K;case M:var Ve=K._init;return St(te,Ve(K._payload),ae)}if(le(K)||T(K))return K=ma(K,te.mode,ae,null),K.return=te,K;Id(te,K)}return null}function ht(te,K,ae,Ve){var at=K!==null?K.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return at!==null?null:W(te,K,""+ae,Ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:return ae.key===at?ue(te,K,ae,Ve):null;case f:return ae.key===at?Re(te,K,ae,Ve):null;case M:return at=ae._init,ht(te,K,at(ae._payload),Ve)}if(le(ae)||T(ae))return at!==null?null:qe(te,K,ae,Ve,null);Id(te,ae)}return null}function Qt(te,K,ae,Ve,at){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return te=te.get(ae)||null,W(K,te,""+Ve,at);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case l:return te=te.get(Ve.key===null?ae:Ve.key)||null,ue(K,te,Ve,at);case f:return te=te.get(Ve.key===null?ae:Ve.key)||null,Re(K,te,Ve,at);case M:var Tt=Ve._init;return Qt(te,K,ae,Tt(Ve._payload),at)}if(le(Ve)||T(Ve))return te=te.get(ae)||null,qe(K,te,Ve,at,null);Id(K,Ve)}return null}function ut(te,K,ae,Ve){for(var at=null,Tt=null,Mt=K,$t=K=0,Vn=null;Mt!==null&&$t<ae.length;$t++){Mt.index>$t?(Vn=Mt,Mt=null):Vn=Mt.sibling;var Xt=ht(te,Mt,ae[$t],Ve);if(Xt===null){Mt===null&&(Mt=Vn);break}c&&Mt&&Xt.alternate===null&&u(te,Mt),K=C(Xt,K,$t),Tt===null?at=Xt:Tt.sibling=Xt,Tt=Xt,Mt=Vn}if($t===ae.length)return v(te,Mt),un&&la(te,$t),at;if(Mt===null){for(;$t<ae.length;$t++)Mt=St(te,ae[$t],Ve),Mt!==null&&(K=C(Mt,K,$t),Tt===null?at=Mt:Tt.sibling=Mt,Tt=Mt);return un&&la(te,$t),at}for(Mt=A(te,Mt);$t<ae.length;$t++)Vn=Qt(Mt,te,$t,ae[$t],Ve),Vn!==null&&(c&&Vn.alternate!==null&&Mt.delete(Vn.key===null?$t:Vn.key),K=C(Vn,K,$t),Tt===null?at=Vn:Tt.sibling=Vn,Tt=Vn);return c&&Mt.forEach(function(yo){return u(te,yo)}),un&&la(te,$t),at}function rr(te,K,ae,Ve){var at=T(ae);if(typeof at!="function")throw Error(o(150));if(ae=at.call(ae),ae==null)throw Error(o(151));for(var Tt=at=null,Mt=K,$t=K=0,Vn=null,Xt=ae.next();Mt!==null&&!Xt.done;$t++,Xt=ae.next()){Mt.index>$t?(Vn=Mt,Mt=null):Vn=Mt.sibling;var yo=ht(te,Mt,Xt.value,Ve);if(yo===null){Mt===null&&(Mt=Vn);break}c&&Mt&&yo.alternate===null&&u(te,Mt),K=C(yo,K,$t),Tt===null?at=yo:Tt.sibling=yo,Tt=yo,Mt=Vn}if(Xt.done)return v(te,Mt),un&&la(te,$t),at;if(Mt===null){for(;!Xt.done;$t++,Xt=ae.next())Xt=St(te,Xt.value,Ve),Xt!==null&&(K=C(Xt,K,$t),Tt===null?at=Xt:Tt.sibling=Xt,Tt=Xt);return un&&la(te,$t),at}for(Mt=A(te,Mt);!Xt.done;$t++,Xt=ae.next())Xt=Qt(Mt,te,$t,Xt.value,Ve),Xt!==null&&(c&&Xt.alternate!==null&&Mt.delete(Xt.key===null?$t:Xt.key),K=C(Xt,K,$t),Tt===null?at=Xt:Tt.sibling=Xt,Tt=Xt);return c&&Mt.forEach(function(V3){return u(te,V3)}),un&&la(te,$t),at}function pi(te,K,ae,Ve){if(typeof ae=="object"&&ae!==null&&ae.type===h&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:e:{for(var at=ae.key,Tt=K;Tt!==null;){if(Tt.key===at){if(at=ae.type,at===h){if(Tt.tag===7){v(te,Tt.sibling),K=w(Tt,ae.props.children),K.return=te,te=K;break e}}else if(Tt.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===M&&jM(at)===Tt.type){v(te,Tt.sibling),K=w(Tt,ae.props),K.ref=Uu(te,Tt,ae),K.return=te,te=K;break e}v(te,Tt);break}else u(te,Tt);Tt=Tt.sibling}ae.type===h?(K=ma(ae.props.children,te.mode,Ve,ae.key),K.return=te,te=K):(Ve=cp(ae.type,ae.key,ae.props,null,te.mode,Ve),Ve.ref=Uu(te,K,ae),Ve.return=te,te=Ve)}return k(te);case f:e:{for(Tt=ae.key;K!==null;){if(K.key===Tt)if(K.tag===4&&K.stateNode.containerInfo===ae.containerInfo&&K.stateNode.implementation===ae.implementation){v(te,K.sibling),K=w(K,ae.children||[]),K.return=te,te=K;break e}else{v(te,K);break}else u(te,K);K=K.sibling}K=Ly(ae,te.mode,Ve),K.return=te,te=K}return k(te);case M:return Tt=ae._init,pi(te,K,Tt(ae._payload),Ve)}if(le(ae))return ut(te,K,ae,Ve);if(T(ae))return rr(te,K,ae,Ve);Id(te,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,K!==null&&K.tag===6?(v(te,K.sibling),K=w(K,ae),K.return=te,te=K):(v(te,K),K=Iy(ae,te.mode,Ve),K.return=te,te=K),k(te)):v(te,K)}return pi}var Ol=JM(!0),KM=JM(!1),ku={},ui=Jt(ku),Hu=Jt(ku),Nl=Jt(ku);function os(c){if(c===ku)throw Error(o(174));return c}function Yv(c,u){ct(Nl,u),ct(Hu,c),ct(ui,ku),c=pe(u),Rt(ui),ct(ui,c)}function Ul(){Rt(ui),Rt(Hu),Rt(Nl)}function YM(c){var u=os(Nl.current),v=os(ui.current);u=U(v,c.type,u),v!==u&&(ct(Hu,c),ct(ui,u))}function Qv(c){Hu.current===c&&(Rt(ui),Rt(Hu))}var pn=Jt(0);function Ld(c){for(var u=c;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Tl(v)||Rl(v)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Zv=[];function qv(){for(var c=0;c<Zv.length;c++){var u=Zv[c];et?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Zv.length=0}var Dd=a.ReactCurrentDispatcher,fi=a.ReactCurrentBatchConfig,kl=0,_n=null,er=null,Gn=null,Fd=!1,zu=!1,Gu=0,p3=0;function tr(){throw Error(o(321))}function ey(c,u){if(u===null)return!1;for(var v=0;v<u.length&&v<c.length;v++)if(!rs(c[v],u[v]))return!1;return!0}function ty(c,u,v,A,w,C){if(kl=C,_n=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Dd.current=c===null||c.memoizedState===null?y3:x3,c=v(A,w),zu){C=0;do{if(zu=!1,Gu=0,25<=C)throw Error(o(301));C+=1,Gn=er=null,u.updateQueue=null,Dd.current=_3,c=v(A,w)}while(zu)}if(Dd.current=Hd,u=er!==null&&er.next!==null,kl=0,Gn=er=_n=null,Fd=!1,u)throw Error(o(300));return c}function ny(){var c=Gu!==0;return Gu=0,c}function Ts(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?_n.memoizedState=Gn=c:Gn=Gn.next=c,Gn}function as(){if(er===null){var c=_n.alternate;c=c!==null?c.memoizedState:null}else c=er.next;var u=Gn===null?_n.memoizedState:Gn.next;if(u!==null)Gn=u,er=c;else{if(c===null)throw Error(o(310));er=c,c={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},Gn===null?_n.memoizedState=Gn=c:Gn=Gn.next=c}return Gn}function ca(c,u){return typeof u=="function"?u(c):u}function Od(c){var u=as(),v=u.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var A=er,w=A.baseQueue,C=v.pending;if(C!==null){if(w!==null){var k=w.next;w.next=C.next,C.next=k}A.baseQueue=w=C,v.pending=null}if(w!==null){C=w.next,A=A.baseState;var W=k=null,ue=null,Re=C;do{var qe=Re.lane;if((kl&qe)===qe)ue!==null&&(ue=ue.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),A=Re.hasEagerState?Re.eagerState:c(A,Re.action);else{var St={lane:qe,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ue===null?(W=ue=St,k=A):ue=ue.next=St,_n.lanes|=qe,zl|=qe}Re=Re.next}while(Re!==null&&Re!==C);ue===null?k=A:ue.next=W,rs(A,u.memoizedState)||(Wr=!0),u.memoizedState=A,u.baseState=k,u.baseQueue=ue,v.lastRenderedState=A}if(c=v.interleaved,c!==null){w=c;do C=w.lane,_n.lanes|=C,zl|=C,w=w.next;while(w!==c)}else w===null&&(v.lanes=0);return[u.memoizedState,v.dispatch]}function Nd(c){var u=as(),v=u.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var A=v.dispatch,w=v.pending,C=u.memoizedState;if(w!==null){v.pending=null;var k=w=w.next;do C=c(C,k.action),k=k.next;while(k!==w);rs(C,u.memoizedState)||(Wr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),v.lastRenderedState=C}return[C,A]}function QM(){}function ZM(c,u){var v=_n,A=as(),w=u(),C=!rs(A.memoizedState,w);if(C&&(A.memoizedState=w,Wr=!0),A=A.queue,Wu(tw.bind(null,v,A,c),[c]),A.getSnapshot!==u||C||Gn!==null&&Gn.memoizedState.tag&1){if(v.flags|=2048,Vu(9,ew.bind(null,v,A,w,u),void 0,null),Rn===null)throw Error(o(349));kl&30||qM(v,u,w)}return w}function qM(c,u,v){c.flags|=16384,c={getSnapshot:u,value:v},u=_n.updateQueue,u===null?(u={lastEffect:null,stores:null},_n.updateQueue=u,u.stores=[c]):(v=u.stores,v===null?u.stores=[c]:v.push(c))}function ew(c,u,v,A){u.value=v,u.getSnapshot=A,nw(u)&&hi(c,1,-1)}function tw(c,u,v){return v(function(){nw(u)&&hi(c,1,-1)})}function nw(c){var u=c.getSnapshot;c=c.value;try{var v=u();return!rs(c,v)}catch{return!0}}function ry(c){var u=Ts();return typeof c=="function"&&(c=c()),u.memoizedState=u.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:c},u.queue=c,c=c.dispatch=v3.bind(null,_n,c),[u.memoizedState,c]}function Vu(c,u,v,A){return c={tag:c,create:u,destroy:v,deps:A,next:null},u=_n.updateQueue,u===null?(u={lastEffect:null,stores:null},_n.updateQueue=u,u.lastEffect=c.next=c):(v=u.lastEffect,v===null?u.lastEffect=c.next=c:(A=v.next,v.next=c,c.next=A,u.lastEffect=c)),c}function rw(){return as().memoizedState}function Ud(c,u,v,A){var w=Ts();_n.flags|=c,w.memoizedState=Vu(1|u,v,void 0,A===void 0?null:A)}function kd(c,u,v,A){var w=as();A=A===void 0?null:A;var C=void 0;if(er!==null){var k=er.memoizedState;if(C=k.destroy,A!==null&&ey(A,k.deps)){w.memoizedState=Vu(u,v,C,A);return}}_n.flags|=c,w.memoizedState=Vu(1|u,v,C,A)}function iy(c,u){return Ud(8390656,8,c,u)}function Wu(c,u){return kd(2048,8,c,u)}function iw(c,u){return kd(4,2,c,u)}function sw(c,u){return kd(4,4,c,u)}function ow(c,u){if(typeof u=="function")return c=c(),u(c),function(){u(null)};if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function aw(c,u,v){return v=v!=null?v.concat([c]):null,kd(4,4,ow.bind(null,u,c),v)}function sy(){}function lw(c,u){var v=as();u=u===void 0?null:u;var A=v.memoizedState;return A!==null&&u!==null&&ey(u,A[1])?A[0]:(v.memoizedState=[c,u],c)}function cw(c,u){var v=as();u=u===void 0?null:u;var A=v.memoizedState;return A!==null&&u!==null&&ey(u,A[1])?A[0]:(c=c(),v.memoizedState=[c,u],c)}function m3(c,u){var v=Wt;Wt=v!==0&&4>v?v:4,c(!0);var A=fi.transition;fi.transition={};try{c(!1),u()}finally{Wt=v,fi.transition=A}}function uw(){return as().memoizedState}function g3(c,u,v){var A=mo(c);v={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null},fw(c)?hw(u,v):(dw(c,u,v),v=yr(),c=hi(c,A,v),c!==null&&pw(c,u,A))}function v3(c,u,v){var A=mo(c),w={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null};if(fw(c))hw(u,w);else{dw(c,u,w);var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var k=u.lastRenderedState,W=C(k,v);if(w.hasEagerState=!0,w.eagerState=W,rs(W,k))return}catch{}finally{}v=yr(),c=hi(c,A,v),c!==null&&pw(c,u,A)}}function fw(c){var u=c.alternate;return c===_n||u!==null&&u===_n}function hw(c,u){zu=Fd=!0;var v=c.pending;v===null?u.next=u:(u.next=v.next,v.next=u),c.pending=u}function dw(c,u,v){Rn!==null&&c.mode&1&&!(Pt&2)?(c=u.interleaved,c===null?(v.next=v,ss===null?ss=[u]:ss.push(u)):(v.next=c.next,c.next=v),u.interleaved=v):(c=u.pending,c===null?v.next=v:(v.next=c.next,c.next=v),u.pending=v)}function pw(c,u,v){if(v&4194240){var A=u.lanes;A&=c.pendingLanes,v|=A,u.lanes=v,Lv(c,v)}}var Hd={readContext:ai,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},y3={readContext:ai,useCallback:function(c,u){return Ts().memoizedState=[c,u===void 0?null:u],c},useContext:ai,useEffect:iy,useImperativeHandle:function(c,u,v){return v=v!=null?v.concat([c]):null,Ud(4194308,4,ow.bind(null,u,c),v)},useLayoutEffect:function(c,u){return Ud(4194308,4,c,u)},useInsertionEffect:function(c,u){return Ud(4,2,c,u)},useMemo:function(c,u){var v=Ts();return u=u===void 0?null:u,c=c(),v.memoizedState=[c,u],c},useReducer:function(c,u,v){var A=Ts();return u=v!==void 0?v(u):u,A.memoizedState=A.baseState=u,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:u},A.queue=c,c=c.dispatch=g3.bind(null,_n,c),[A.memoizedState,c]},useRef:function(c){var u=Ts();return c={current:c},u.memoizedState=c},useState:ry,useDebugValue:sy,useDeferredValue:function(c){var u=ry(c),v=u[0],A=u[1];return iy(function(){var w=fi.transition;fi.transition={};try{A(c)}finally{fi.transition=w}},[c]),v},useTransition:function(){var c=ry(!1),u=c[0];return c=m3.bind(null,c[1]),Ts().memoizedState=c,[u,c]},useMutableSource:function(){},useSyncExternalStore:function(c,u,v){var A=_n,w=Ts();if(un){if(v===void 0)throw Error(o(407));v=v()}else{if(v=u(),Rn===null)throw Error(o(349));kl&30||qM(A,u,v)}w.memoizedState=v;var C={value:v,getSnapshot:u};return w.queue=C,iy(tw.bind(null,A,C,c),[c]),A.flags|=2048,Vu(9,ew.bind(null,A,C,v,u),void 0,null),v},useId:function(){var c=Ts(),u=Rn.identifierPrefix;if(un){var v=Cs,A=bs;v=(A&~(1<<32-gr(A)-1)).toString(32)+v,u=":"+u+"R"+v,v=Gu++,0<v&&(u+="H"+v.toString(32)),u+=":"}else v=p3++,u=":"+u+"r"+v.toString(32)+":";return c.memoizedState=u},unstable_isNewReconciler:!1},x3={readContext:ai,useCallback:lw,useContext:ai,useEffect:Wu,useImperativeHandle:aw,useInsertionEffect:iw,useLayoutEffect:sw,useMemo:cw,useReducer:Od,useRef:rw,useState:function(){return Od(ca)},useDebugValue:sy,useDeferredValue:function(c){var u=Od(ca),v=u[0],A=u[1];return Wu(function(){var w=fi.transition;fi.transition={};try{A(c)}finally{fi.transition=w}},[c]),v},useTransition:function(){var c=Od(ca)[0],u=as().memoizedState;return[c,u]},useMutableSource:QM,useSyncExternalStore:ZM,useId:uw,unstable_isNewReconciler:!1},_3={readContext:ai,useCallback:lw,useContext:ai,useEffect:Wu,useImperativeHandle:aw,useInsertionEffect:iw,useLayoutEffect:sw,useMemo:cw,useReducer:Nd,useRef:rw,useState:function(){return Nd(ca)},useDebugValue:sy,useDeferredValue:function(c){var u=Nd(ca),v=u[0],A=u[1];return Wu(function(){var w=fi.transition;fi.transition={};try{A(c)}finally{fi.transition=w}},[c]),v},useTransition:function(){var c=Nd(ca)[0],u=as().memoizedState;return[c,u]},useMutableSource:QM,useSyncExternalStore:ZM,useId:uw,unstable_isNewReconciler:!1};function oy(c,u){try{var v="",A=u;do v+=d3(A),A=A.return;while(A);var w=v}catch(C){w=`
Error generating stack: `+C.message+`
`+C.stack}return{value:c,source:u,stack:w}}function ay(c,u){try{console.error(u.value)}catch(v){setTimeout(function(){throw v})}}var A3=typeof WeakMap=="function"?WeakMap:Map;function mw(c,u,v){v=Es(-1,v),v.tag=3,v.payload={element:null};var A=u.value;return v.callback=function(){np||(np=!0,Ey=A),ay(c,u)},v}function gw(c,u,v){v=Es(-1,v),v.tag=3;var A=c.type.getDerivedStateFromError;if(typeof A=="function"){var w=u.value;v.payload=function(){return A(w)},v.callback=function(){ay(c,u)}}var C=c.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(v.callback=function(){ay(c,u),typeof A!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})}),v}function vw(c,u,v){var A=c.pingCache;if(A===null){A=c.pingCache=new A3;var w=new Set;A.set(u,w)}else w=A.get(u),w===void 0&&(w=new Set,A.set(u,w));w.has(v)||(w.add(v),c=F3.bind(null,c,u,v),u.then(c,c))}function yw(c){do{var u;if((u=c.tag===13)&&(u=c.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return c;c=c.return}while(c!==null);return null}function xw(c,u,v,A,w){return c.mode&1?(c.flags|=65536,c.lanes=w,c):(c===u?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(u=Es(-1,1),u.tag=2,fo(v,u))),v.lanes|=1),c)}function ls(c){c.flags|=4}function _w(c,u){if(c!==null&&c.child===u.child)return!0;if(u.flags&16)return!1;for(c=u.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var $u,Xu,zd,Gd;if(Fe)$u=function(c,u){for(var v=u.child;v!==null;){if(v.tag===5||v.tag===6)_e(c,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Xu=function(){},zd=function(c,u,v,A,w){if(c=c.memoizedProps,c!==A){var C=u.stateNode,k=os(ui.current);v=ie(C,v,c,A,w,k),(u.updateQueue=v)&&ls(u)}},Gd=function(c,u,v,A){v!==A&&ls(u)};else if(me){$u=function(c,u,v,A){for(var w=u.child;w!==null;){if(w.tag===5){var C=w.stateNode;v&&A&&(C=dn(C,w.type,w.memoizedProps,w)),_e(c,C)}else if(w.tag===6)C=w.stateNode,v&&A&&(C=Jn(C,w.memoizedProps,w)),_e(c,C);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)C=w.child,C!==null&&(C.return=w),$u(c,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};var Aw=function(c,u,v,A){for(var w=u.child;w!==null;){if(w.tag===5){var C=w.stateNode;v&&A&&(C=dn(C,w.type,w.memoizedProps,w)),Ut(c,C)}else if(w.tag===6)C=w.stateNode,v&&A&&(C=Jn(C,w.memoizedProps,w)),Ut(c,C);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)C=w.child,C!==null&&(C.return=w),Aw(c,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};Xu=function(c,u){var v=u.stateNode;if(!_w(c,u)){c=v.containerInfo;var A=yt(c);Aw(A,u,!1,!1),v.pendingChildren=A,ls(u),xn(c,A)}},zd=function(c,u,v,A,w){var C=c.stateNode,k=c.memoizedProps;if((c=_w(c,u))&&k===A)u.stateNode=C;else{var W=u.stateNode,ue=os(ui.current),Re=null;k!==A&&(Re=ie(W,v,k,A,w,ue)),c&&Re===null?u.stateNode=C:(C=Ge(C,Re,v,k,A,u,c,W),De(C,v,A,w,ue)&&ls(u),u.stateNode=C,c?ls(u):$u(C,u,!1,!1))}},Gd=function(c,u,v,A){v!==A?(c=os(Nl.current),v=os(ui.current),u.stateNode=Pe(A,c,v,u),ls(u)):u.stateNode=c.stateNode}}else Xu=function(){},zd=function(){},Gd=function(){};function ju(c,u){if(!un)switch(c.tailMode){case"hidden":u=c.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var A=null;v!==null;)v.alternate!==null&&(A=v),v=v.sibling;A===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:A.sibling=null}}function nr(c){var u=c.alternate!==null&&c.alternate.child===c.child,v=0,A=0;if(u)for(var w=c.child;w!==null;)v|=w.lanes|w.childLanes,A|=w.subtreeFlags&14680064,A|=w.flags&14680064,w.return=c,w=w.sibling;else for(w=c.child;w!==null;)v|=w.lanes|w.childLanes,A|=w.subtreeFlags,A|=w.flags,w.return=c,w=w.sibling;return c.subtreeFlags|=A,c.childLanes=v,u}function S3(c,u,v){var A=u.pendingProps;switch(Xv(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(u),null;case 1:return Yt(u.type)&&lo(),nr(u),null;case 3:return A=u.stateNode,Ul(),Rt(_t),Rt(Ot),qv(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(c===null||c.child===null)&&(Nu(u)?ls(u):c===null||c.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,Bi!==null&&(Ty(Bi),Bi=null))),Xu(c,u),nr(u),null;case 5:Qv(u),v=os(Nl.current);var w=u.type;if(c!==null&&u.stateNode!=null)zd(c,u,w,A,v),c.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!A){if(u.stateNode===null)throw Error(o(166));return nr(u),null}if(c=os(ui.current),Nu(u)){if(!O)throw Error(o(175));c=vd(u.stateNode,u.type,u.memoizedProps,v,c,u,!Ou),u.updateQueue=c,c!==null&&ls(u)}else{var C=se(w,A,v,c,u);$u(C,u,!1,!1),u.stateNode=C,De(C,w,A,v,c)&&ls(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return nr(u),null;case 6:if(c&&u.stateNode!=null)Gd(c,u,c.memoizedProps,A);else{if(typeof A!="string"&&u.stateNode===null)throw Error(o(166));if(c=os(Nl.current),v=os(ui.current),Nu(u)){if(!O)throw Error(o(176));if(c=u.stateNode,A=u.memoizedProps,(v=Cv(c,A,u,!Ou))&&(w=Gr,w!==null))switch(C=(w.mode&1)!==0,w.tag){case 3:Ie(w.stateNode.containerInfo,c,A,C);break;case 5:We(w.type,w.memoizedProps,w.stateNode,c,A,C)}v&&ls(u)}else u.stateNode=Pe(A,c,v,u)}return nr(u),null;case 13:if(Rt(pn),A=u.memoizedState,un&&Vr!==null&&u.mode&1&&!(u.flags&128)){for(c=Vr;c;)c=ts(c);return Fl(),u.flags|=98560,u}if(A!==null&&A.dehydrated!==null){if(A=Nu(u),c===null){if(!A)throw Error(o(318));if(!O)throw Error(o(344));if(c=u.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Tv(c,u)}else Fl(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;return nr(u),null}return Bi!==null&&(Ty(Bi),Bi=null),u.flags&128?(u.lanes=v,u):(A=A!==null,v=!1,c===null?Nu(u):v=c.memoizedState!==null,A&&!v&&(u.child.flags|=8192,u.mode&1&&(c===null||pn.current&1?Fn===0&&(Fn=3):Py())),u.updateQueue!==null&&(u.flags|=4),nr(u),null);case 4:return Ul(),Xu(c,u),c===null&&Ce(u.stateNode.containerInfo),nr(u),null;case 10:return Hv(u.type._context),nr(u),null;case 17:return Yt(u.type)&&lo(),nr(u),null;case 19:if(Rt(pn),w=u.memoizedState,w===null)return nr(u),null;if(A=(u.flags&128)!==0,C=w.rendering,C===null)if(A)ju(w,!1);else{if(Fn!==0||c!==null&&c.flags&128)for(c=u.child;c!==null;){if(C=Ld(c),C!==null){for(u.flags|=128,ju(w,!1),c=C.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),u.subtreeFlags=0,c=v,A=u.child;A!==null;)v=A,w=c,v.flags&=14680066,C=v.alternate,C===null?(v.childLanes=0,v.lanes=w,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=C.childLanes,v.lanes=C.lanes,v.child=C.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=C.memoizedProps,v.memoizedState=C.memoizedState,v.updateQueue=C.updateQueue,v.type=C.type,w=C.dependencies,v.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),A=A.sibling;return ct(pn,pn.current&1|2),u.child}c=c.sibling}w.tail!==null&&zn()>wy&&(u.flags|=128,A=!0,ju(w,!1),u.lanes=4194304)}else{if(!A)if(c=Ld(C),c!==null){if(u.flags|=128,A=!0,c=c.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),ju(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!un)return nr(u),null}else 2*zn()-w.renderingStartTime>wy&&v!==1073741824&&(u.flags|=128,A=!0,ju(w,!1),u.lanes=4194304);w.isBackwards?(C.sibling=u.child,u.child=C):(c=w.last,c!==null?c.sibling=C:u.child=C,w.last=C)}return w.tail!==null?(u=w.tail,w.rendering=u,w.tail=u.sibling,w.renderingStartTime=zn(),u.sibling=null,c=pn.current,ct(pn,A?c&1|2:c&1),u):(nr(u),null);case 22:case 23:return Ry(),A=u.memoizedState!==null,c!==null&&c.memoizedState!==null!==A&&(u.flags|=8192),A&&u.mode&1?$r&1073741824&&(nr(u),Fe&&u.subtreeFlags&6&&(u.flags|=8192)):nr(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}var M3=a.ReactCurrentOwner,Wr=!1;function vr(c,u,v,A){u.child=c===null?KM(u,null,v,A):Ol(u,c.child,v,A)}function Sw(c,u,v,A,w){v=v.render;var C=u.ref;return Il(u,w),A=ty(c,u,v,A,C,w),v=ny(),c!==null&&!Wr?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~w,Rs(c,u,w)):(un&&v&&$v(u),u.flags|=1,vr(c,u,A,w),u.child)}function Mw(c,u,v,A,w){if(c===null){var C=v.type;return typeof C=="function"&&!By(C)&&C.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(u.tag=15,u.type=C,ww(c,u,C,A,w)):(c=cp(v.type,null,A,u,u.mode,w),c.ref=u.ref,c.return=u,u.child=c)}if(C=c.child,!(c.lanes&w)){var k=C.memoizedProps;if(v=v.compare,v=v!==null?v:wd,v(k,A)&&c.ref===u.ref)return Rs(c,u,w)}return u.flags|=1,c=vo(C,A),c.ref=u.ref,c.return=u,u.child=c}function ww(c,u,v,A,w){if(c!==null&&wd(c.memoizedProps,A)&&c.ref===u.ref)if(Wr=!1,(c.lanes&w)!==0)c.flags&131072&&(Wr=!0);else return u.lanes=c.lanes,Rs(c,u,w);return ly(c,u,v,A,w)}function Ew(c,u,v){var A=u.pendingProps,w=A.children,C=c!==null?c.memoizedState:null;if(A.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null},ct(Hl,$r),$r|=v;else if(v&1073741824)u.memoizedState={baseLanes:0,cachePool:null},A=C!==null?C.baseLanes:v,ct(Hl,$r),$r|=A;else return c=C!==null?C.baseLanes|v:v,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:c,cachePool:null},u.updateQueue=null,ct(Hl,$r),$r|=c,null;else C!==null?(A=C.baseLanes|v,u.memoizedState=null):A=v,ct(Hl,$r),$r|=A;return vr(c,u,w,v),u.child}function bw(c,u){var v=u.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(u.flags|=512,u.flags|=2097152)}function ly(c,u,v,A,w){var C=Yt(v)?Dn:Ot.current;return C=zr(u,C),Il(u,w),v=ty(c,u,v,A,C,w),A=ny(),c!==null&&!Wr?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~w,Rs(c,u,w)):(un&&A&&$v(u),u.flags|=1,vr(c,u,v,w),u.child)}function Cw(c,u,v,A,w){if(Yt(v)){var C=!0;co(u)}else C=!1;if(Il(u,w),u.stateNode===null)c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),zM(u,v,A),Wv(u,v,A,w),A=!0;else if(c===null){var k=u.stateNode,W=u.memoizedProps;k.props=W;var ue=k.context,Re=v.contextType;typeof Re=="object"&&Re!==null?Re=ai(Re):(Re=Yt(v)?Dn:Ot.current,Re=zr(u,Re));var qe=v.getDerivedStateFromProps,St=typeof qe=="function"||typeof k.getSnapshotBeforeUpdate=="function";St||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(W!==A||ue!==Re)&&GM(u,k,A,Re),uo=!1;var ht=u.memoizedState;k.state=ht,Td(u,A,k,w),ue=u.memoizedState,W!==A||ht!==ue||_t.current||uo?(typeof qe=="function"&&(Vv(u,v,qe,A),ue=u.memoizedState),(W=uo||HM(u,v,W,A,ht,ue,Re))?(St||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(u.flags|=4194308)):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=A,u.memoizedState=ue),k.props=A,k.state=ue,k.context=Re,A=W):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),A=!1)}else{k=u.stateNode,OM(c,u),W=u.memoizedProps,Re=u.type===u.elementType?W:Pi(u.type,W),k.props=Re,St=u.pendingProps,ht=k.context,ue=v.contextType,typeof ue=="object"&&ue!==null?ue=ai(ue):(ue=Yt(v)?Dn:Ot.current,ue=zr(u,ue));var Qt=v.getDerivedStateFromProps;(qe=typeof Qt=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(W!==St||ht!==ue)&&GM(u,k,A,ue),uo=!1,ht=u.memoizedState,k.state=ht,Td(u,A,k,w);var ut=u.memoizedState;W!==St||ht!==ut||_t.current||uo?(typeof Qt=="function"&&(Vv(u,v,Qt,A),ut=u.memoizedState),(Re=uo||HM(u,v,Re,A,ht,ut,ue)||!1)?(qe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(A,ut,ue),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(A,ut,ue)),typeof k.componentDidUpdate=="function"&&(u.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof k.componentDidUpdate!="function"||W===c.memoizedProps&&ht===c.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||W===c.memoizedProps&&ht===c.memoizedState||(u.flags|=1024),u.memoizedProps=A,u.memoizedState=ut),k.props=A,k.state=ut,k.context=ue,A=Re):(typeof k.componentDidUpdate!="function"||W===c.memoizedProps&&ht===c.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||W===c.memoizedProps&&ht===c.memoizedState||(u.flags|=1024),A=!1)}return cy(c,u,v,A,C,w)}function cy(c,u,v,A,w,C){bw(c,u);var k=(u.flags&128)!==0;if(!A&&!k)return w&&mr(u,v,!1),Rs(c,u,C);A=u.stateNode,M3.current=u;var W=k&&typeof v.getDerivedStateFromError!="function"?null:A.render();return u.flags|=1,c!==null&&k?(u.child=Ol(u,c.child,null,C),u.child=Ol(u,null,W,C)):vr(c,u,W,C),u.memoizedState=A.state,w&&mr(u,v,!0),u.child}function Tw(c){var u=c.stateNode;u.pendingContext?cn(c,u.pendingContext,u.pendingContext!==u.context):u.context&&cn(c,u.context,!1),Yv(c,u.containerInfo)}function Rw(c,u,v,A,w){return Fl(),Kv(w),u.flags|=256,vr(c,u,v,A),u.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Wd(c){return{baseLanes:c,cachePool:null}}function Pw(c,u,v){var A=u.pendingProps,w=pn.current,C=!1,k=(u.flags&128)!==0,W;if((W=k)||(W=c!==null&&c.memoizedState===null?!1:(w&2)!==0),W?(C=!0,u.flags&=-129):(c===null||c.memoizedState!==null)&&(w|=1),ct(pn,w&1),c===null)return Jv(u),c=u.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(u.mode&1?Rl(c)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(w=A.children,c=A.fallback,C?(A=u.mode,C=u.child,w={mode:"hidden",children:w},!(A&1)&&C!==null?(C.childLanes=0,C.pendingProps=w):C=up(w,A,0,null),c=ma(c,A,v,null),C.return=u,c.return=u,C.sibling=c,u.child=C,u.child.memoizedState=Wd(v),u.memoizedState=Vd,c):uy(u,w));if(w=c.memoizedState,w!==null){if(W=w.dehydrated,W!==null){if(k)return u.flags&256?(u.flags&=-257,$d(c,u,v,Error(o(422)))):u.memoizedState!==null?(u.child=c.child,u.flags|=128,null):(C=A.fallback,w=u.mode,A=up({mode:"visible",children:A.children},w,0,null),C=ma(C,w,v,null),C.flags|=2,A.return=u,C.return=u,A.sibling=C,u.child=A,u.mode&1&&Ol(u,c.child,null,v),u.child.memoizedState=Wd(v),u.memoizedState=Vd,C);if(!(u.mode&1))u=$d(c,u,v,null);else if(Rl(W))u=$d(c,u,v,Error(o(419)));else if(A=(v&c.childLanes)!==0,Wr||A){if(A=Rn,A!==null){switch(v&-v){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}A=C&(A.suspendedLanes|v)?0:C,A!==0&&A!==w.retryLane&&(w.retryLane=A,hi(c,A,-1))}Py(),u=$d(c,u,v,Error(o(421)))}else Tl(W)?(u.flags|=128,u.child=c.child,u=O3.bind(null,c),pd(W,u),u=null):(v=w.treeContext,O&&(Vr=gd(W),Gr=u,un=!0,Bi=null,Ou=!1,v!==null&&(li[ci++]=bs,li[ci++]=Cs,li[ci++]=aa,bs=v.id,Cs=v.overflow,aa=u)),u=uy(u,u.pendingProps.children),u.flags|=4096);return u}return C?(A=Iw(c,u,A.children,A.fallback,v),C=u.child,w=c.child.memoizedState,C.memoizedState=w===null?Wd(v):{baseLanes:w.baseLanes|v,cachePool:null},C.childLanes=c.childLanes&~v,u.memoizedState=Vd,A):(v=Bw(c,u,A.children,v),u.memoizedState=null,v)}return C?(A=Iw(c,u,A.children,A.fallback,v),C=u.child,w=c.child.memoizedState,C.memoizedState=w===null?Wd(v):{baseLanes:w.baseLanes|v,cachePool:null},C.childLanes=c.childLanes&~v,u.memoizedState=Vd,A):(v=Bw(c,u,A.children,v),u.memoizedState=null,v)}function uy(c,u){return u=up({mode:"visible",children:u},c.mode,0,null),u.return=c,c.child=u}function Bw(c,u,v,A){var w=c.child;return c=w.sibling,v=vo(w,{mode:"visible",children:v}),!(u.mode&1)&&(v.lanes=A),v.return=u,v.sibling=null,c!==null&&(A=u.deletions,A===null?(u.deletions=[c],u.flags|=16):A.push(c)),u.child=v}function Iw(c,u,v,A,w){var C=u.mode;c=c.child;var k=c.sibling,W={mode:"hidden",children:v};return!(C&1)&&u.child!==c?(v=u.child,v.childLanes=0,v.pendingProps=W,u.deletions=null):(v=vo(c,W),v.subtreeFlags=c.subtreeFlags&14680064),k!==null?A=vo(k,A):(A=ma(A,C,w,null),A.flags|=2),A.return=u,v.return=u,v.sibling=A,u.child=v,A}function $d(c,u,v,A){return A!==null&&Kv(A),Ol(u,c.child,null,v),c=uy(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function Lw(c,u,v){c.lanes|=u;var A=c.alternate;A!==null&&(A.lanes|=u),zv(c.return,u,v)}function fy(c,u,v,A,w){var C=c.memoizedState;C===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:A,tail:v,tailMode:w}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=A,C.tail=v,C.tailMode=w)}function Dw(c,u,v){var A=u.pendingProps,w=A.revealOrder,C=A.tail;if(vr(c,u,A.children,v),A=pn.current,A&2)A=A&1|2,u.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Lw(c,v,u);else if(c.tag===19)Lw(c,v,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}A&=1}if(ct(pn,A),!(u.mode&1))u.memoizedState=null;else switch(w){case"forwards":for(v=u.child,w=null;v!==null;)c=v.alternate,c!==null&&Ld(c)===null&&(w=v),v=v.sibling;v=w,v===null?(w=u.child,u.child=null):(w=v.sibling,v.sibling=null),fy(u,!1,w,v,C);break;case"backwards":for(v=null,w=u.child,u.child=null;w!==null;){if(c=w.alternate,c!==null&&Ld(c)===null){u.child=w;break}c=w.sibling,w.sibling=v,v=w,w=c}fy(u,!0,v,null,C);break;case"together":fy(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Rs(c,u,v){if(c!==null&&(u.dependencies=c.dependencies),zl|=u.lanes,!(v&u.childLanes))return null;if(c!==null&&u.child!==c.child)throw Error(o(153));if(u.child!==null){for(c=u.child,v=vo(c,c.pendingProps),u.child=v,v.return=u;c.sibling!==null;)c=c.sibling,v=v.sibling=vo(c,c.pendingProps),v.return=u;v.sibling=null}return u.child}function w3(c,u,v){switch(u.tag){case 3:Tw(u),Fl();break;case 5:YM(u);break;case 1:Yt(u.type)&&co(u);break;case 4:Yv(u,u.stateNode.containerInfo);break;case 10:FM(u,u.type._context,u.memoizedProps.value);break;case 13:var A=u.memoizedState;if(A!==null)return A.dehydrated!==null?(ct(pn,pn.current&1),u.flags|=128,null):v&u.child.childLanes?Pw(c,u,v):(ct(pn,pn.current&1),c=Rs(c,u,v),c!==null?c.sibling:null);ct(pn,pn.current&1);break;case 19:if(A=(v&u.childLanes)!==0,c.flags&128){if(A)return Dw(c,u,v);u.flags|=128}var w=u.memoizedState;if(w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ct(pn,pn.current),A)break;return null;case 22:case 23:return u.lanes=0,Ew(c,u,v)}return Rs(c,u,v)}function E3(c,u){switch(Xv(u),u.tag){case 1:return Yt(u.type)&&lo(),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return Ul(),Rt(_t),Rt(Ot),qv(),c=u.flags,c&65536&&!(c&128)?(u.flags=c&-65537|128,u):null;case 5:return Qv(u),null;case 13:if(Rt(pn),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(o(340));Fl()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return Rt(pn),null;case 4:return Ul(),null;case 10:return Hv(u.type._context),null;case 22:case 23:return Ry(),null;case 24:return null;default:return null}}var Xd=!1,ua=!1,b3=typeof WeakSet=="function"?WeakSet:Set,He=null;function jd(c,u){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(A){Pr(c,u,A)}else v.current=null}function hy(c,u,v){try{v()}catch(A){Pr(c,u,A)}}var Fw=!1;function C3(c,u){for(Q(c.containerInfo),He=u;He!==null;)if(c=He,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,He=u;else for(;He!==null;){c=He;try{var v=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,w=v.memoizedState,C=c.stateNode,k=C.getSnapshotBeforeUpdate(c.elementType===c.type?A:Pi(c.type,A),w);C.__reactInternalSnapshotBeforeUpdate=k}break;case 3:Fe&&ze(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(W){Pr(c,c.return,W)}if(u=c.sibling,u!==null){u.return=c.return,He=u;break}He=c.return}return v=Fw,Fw=!1,v}function fa(c,u,v){var A=u.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var w=A=A.next;do{if((w.tag&c)===c){var C=w.destroy;w.destroy=void 0,C!==void 0&&hy(u,v,C)}w=w.next}while(w!==A)}}function Ju(c,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var v=u=u.next;do{if((v.tag&c)===c){var A=v.create;v.destroy=A()}v=v.next}while(v!==u)}}function dy(c){var u=c.ref;if(u!==null){var v=c.stateNode;switch(c.tag){case 5:c=Z(v);break;default:c=v}typeof u=="function"?u(c):u.current=c}}function Ow(c,u,v){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(Sd,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(c=u.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var A=c=c.next;do{var w=A,C=w.destroy;w=w.tag,C!==void 0&&(w&2||w&4)&&hy(u,v,C),A=A.next}while(A!==c)}break;case 1:if(jd(u,v),c=u.stateNode,typeof c.componentWillUnmount=="function")try{c.props=u.memoizedProps,c.state=u.memoizedState,c.componentWillUnmount()}catch(k){Pr(u,v,k)}break;case 5:jd(u,v);break;case 4:Fe?Gw(c,u,v):me&&me&&(u=u.stateNode.containerInfo,v=yt(u),Ct(u,v))}}function Nw(c,u,v){for(var A=u;;)if(Ow(c,A,v),A.child===null||Fe&&A.tag===4){if(A===u)break;for(;A.sibling===null;){if(A.return===null||A.return===u)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function Uw(c){var u=c.alternate;u!==null&&(c.alternate=null,Uw(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&Ee(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function kw(c){return c.tag===5||c.tag===3||c.tag===4}function Hw(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||kw(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function zw(c){if(Fe){e:{for(var u=c.return;u!==null;){if(kw(u))break e;u=u.return}throw Error(o(160))}var v=u;switch(v.tag){case 5:u=v.stateNode,v.flags&32&&(Ne(u),v.flags&=-33),v=Hw(c),my(c,v,u);break;case 3:case 4:u=v.stateNode.containerInfo,v=Hw(c),py(c,v,u);break;default:throw Error(o(161))}}}function py(c,u,v){var A=c.tag;if(A===5||A===6)c=c.stateNode,u?Je(v,c,u):Bt(v,c);else if(A!==4&&(c=c.child,c!==null))for(py(c,u,v),c=c.sibling;c!==null;)py(c,u,v),c=c.sibling}function my(c,u,v){var A=c.tag;if(A===5||A===6)c=c.stateNode,u?pt(v,c,u):Xe(v,c);else if(A!==4&&(c=c.child,c!==null))for(my(c,u,v),c=c.sibling;c!==null;)my(c,u,v),c=c.sibling}function Gw(c,u,v){for(var A=u,w=!1,C,k;;){if(!w){w=A.return;e:for(;;){if(w===null)throw Error(o(160));switch(C=w.stateNode,w.tag){case 5:k=!1;break e;case 3:C=C.containerInfo,k=!0;break e;case 4:C=C.containerInfo,k=!0;break e}w=w.return}w=!0}if(A.tag===5||A.tag===6)Nw(c,A,v),k?he(C,A.stateNode):V(C,A.stateNode);else if(A.tag===18)k?re(C,A.stateNode):ne(C,A.stateNode);else if(A.tag===4){if(A.child!==null){C=A.stateNode.containerInfo,k=!0,A.child.return=A,A=A.child;continue}}else if(Ow(c,A,v),A.child!==null){A.child.return=A,A=A.child;continue}if(A===u)break;for(;A.sibling===null;){if(A.return===null||A.return===u)return;A=A.return,A.tag===4&&(w=!1)}A.sibling.return=A.return,A=A.sibling}}function gy(c,u){if(Fe){switch(u.tag){case 0:case 11:case 14:case 15:fa(3,u,u.return),Ju(3,u),fa(5,u,u.return);return;case 1:return;case 5:var v=u.stateNode;if(v!=null){var A=u.memoizedProps;c=c!==null?c.memoizedProps:A;var w=u.type,C=u.updateQueue;u.updateQueue=null,C!==null&&gt(v,C,w,c,A,u)}return;case 6:if(u.stateNode===null)throw Error(o(162));v=u.memoizedProps,Se(u.stateNode,c!==null?c.memoizedProps:v,v);return;case 3:O&&c!==null&&c.memoizedState.isDehydrated&&D(u.stateNode.containerInfo);return;case 12:return;case 13:Jd(u);return;case 19:Jd(u);return;case 17:return}throw Error(o(163))}switch(u.tag){case 0:case 11:case 14:case 15:fa(3,u,u.return),Ju(3,u),fa(5,u,u.return);return;case 12:return;case 13:Jd(u);return;case 19:Jd(u);return;case 3:O&&c!==null&&c.memoizedState.isDehydrated&&D(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(me){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,Ct(u.containerInfo,u.pendingChildren);break e}throw Error(o(163))}}function Jd(c){var u=c.updateQueue;if(u!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new b3),u.forEach(function(A){var w=N3.bind(null,c,A);v.has(A)||(v.add(A),A.then(w,w))})}}function T3(c,u){for(He=u;He!==null;){u=He;var v=u.deletions;if(v!==null)for(var A=0;A<v.length;A++){var w=v[A];try{var C=c;Fe?Gw(C,w,u):Nw(C,w,u);var k=w.alternate;k!==null&&(k.return=null),w.return=null}catch(at){Pr(w,u,at)}}if(v=u.child,u.subtreeFlags&12854&&v!==null)v.return=u,He=v;else for(;He!==null;){u=He;try{var W=u.flags;if(W&32&&Fe&&Ne(u.stateNode),W&512){var ue=u.alternate;if(ue!==null){var Re=ue.ref;Re!==null&&(typeof Re=="function"?Re(null):Re.current=null)}}if(W&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var qe=u.alternate;(qe===null||qe.memoizedState===null)&&(My=zn())}break;case 22:var St=u.memoizedState!==null,ht=u.alternate,Qt=ht!==null&&ht.memoizedState!==null;if(v=u,Fe){e:if(A=v,w=St,C=null,Fe)for(var ut=A;;){if(ut.tag===5){if(C===null){C=ut;var rr=ut.stateNode;w?G(rr):oe(ut.stateNode,ut.memoizedProps)}}else if(ut.tag===6){if(C===null){var pi=ut.stateNode;w?Te(pi):ve(pi,ut.memoizedProps)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===A)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===A)break;for(;ut.sibling===null;){if(ut.return===null||ut.return===A)break e;C===ut&&(C=null),ut=ut.return}C===ut&&(C=null),ut.sibling.return=ut.return,ut=ut.sibling}}if(St&&!Qt&&v.mode&1){He=v;for(var te=v.child;te!==null;){for(v=He=te;He!==null;){A=He;var K=A.child;switch(A.tag){case 0:case 11:case 14:case 15:fa(4,A,A.return);break;case 1:jd(A,A.return);var ae=A.stateNode;if(typeof ae.componentWillUnmount=="function"){var Ve=A.return;try{ae.props=A.memoizedProps,ae.state=A.memoizedState,ae.componentWillUnmount()}catch(at){Pr(A,Ve,at)}}break;case 5:jd(A,A.return);break;case 22:if(A.memoizedState!==null){$w(v);continue}}K!==null?(K.return=A,He=K):$w(v)}te=te.sibling}}}switch(W&4102){case 2:zw(u),u.flags&=-3;break;case 6:zw(u),u.flags&=-3,gy(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,gy(u.alternate,u);break;case 4:gy(u.alternate,u)}}catch(at){Pr(u,u.return,at)}if(v=u.sibling,v!==null){v.return=u.return,He=v;break}He=u.return}}}function R3(c,u,v){He=c,Vw(c)}function Vw(c,u,v){for(var A=(c.mode&1)!==0;He!==null;){var w=He,C=w.child;if(w.tag===22&&A){var k=w.memoizedState!==null||Xd;if(!k){var W=w.alternate,ue=W!==null&&W.memoizedState!==null||ua;W=Xd;var Re=ua;if(Xd=k,(ua=ue)&&!Re)for(He=w;He!==null;)k=He,ue=k.child,k.tag===22&&k.memoizedState!==null?Xw(w):ue!==null?(ue.return=k,He=ue):Xw(w);for(;C!==null;)He=C,Vw(C),C=C.sibling;He=w,Xd=W,ua=Re}Ww(c)}else w.subtreeFlags&8772&&C!==null?(C.return=w,He=C):Ww(c)}}function Ww(c){for(;He!==null;){var u=He;if(u.flags&8772){var v=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:ua||Ju(5,u);break;case 1:var A=u.stateNode;if(u.flags&4&&!ua)if(v===null)A.componentDidMount();else{var w=u.elementType===u.type?v.memoizedProps:Pi(u.type,v.memoizedProps);A.componentDidUpdate(w,v.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var C=u.updateQueue;C!==null&&UM(u,C,A);break;case 3:var k=u.updateQueue;if(k!==null){if(v=null,u.child!==null)switch(u.child.tag){case 5:v=Z(u.child.stateNode);break;case 1:v=u.child.stateNode}UM(u,k,v)}break;case 5:var W=u.stateNode;v===null&&u.flags&4&&je(W,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(O&&u.memoizedState===null){var ue=u.alternate;if(ue!==null){var Re=ue.memoizedState;if(Re!==null){var qe=Re.dehydrated;qe!==null&&j(qe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ua||u.flags&512&&dy(u)}catch(St){Pr(u,u.return,St)}}if(u===c){He=null;break}if(v=u.sibling,v!==null){v.return=u.return,He=v;break}He=u.return}}function $w(c){for(;He!==null;){var u=He;if(u===c){He=null;break}var v=u.sibling;if(v!==null){v.return=u.return,He=v;break}He=u.return}}function Xw(c){for(;He!==null;){var u=He;try{switch(u.tag){case 0:case 11:case 15:var v=u.return;try{Ju(4,u)}catch(ue){Pr(u,v,ue)}break;case 1:var A=u.stateNode;if(typeof A.componentDidMount=="function"){var w=u.return;try{A.componentDidMount()}catch(ue){Pr(u,w,ue)}}var C=u.return;try{dy(u)}catch(ue){Pr(u,C,ue)}break;case 5:var k=u.return;try{dy(u)}catch(ue){Pr(u,k,ue)}}}catch(ue){Pr(u,u.return,ue)}if(u===c){He=null;break}var W=u.sibling;if(W!==null){W.return=u.return,He=W;break}He=u.return}}var Kd=0,Yd=1,Qd=2,Zd=3,qd=4;if(typeof Symbol=="function"&&Symbol.for){var Ku=Symbol.for;Kd=Ku("selector.component"),Yd=Ku("selector.has_pseudo_class"),Qd=Ku("selector.role"),Zd=Ku("selector.test_id"),qd=Ku("selector.text")}function vy(c){var u=Be(c);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(c=I(c),c===null)throw Error(o(362));return c.stateNode.current}function yy(c,u){switch(u.$$typeof){case Kd:if(c.type===u.value)return!0;break;case Yd:e:{u=u.value,c=[c,0];for(var v=0;v<c.length;){var A=c[v++],w=c[v++],C=u[w];if(A.tag!==5||!xe(A)){for(;C!=null&&yy(A,C);)w++,C=u[w];if(w===u.length){u=!0;break e}else for(A=A.child;A!==null;)c.push(A,w),A=A.sibling}}u=!1}return u;case Qd:if(c.tag===5&&ge(c.stateNode,u.value))return!0;break;case qd:if((c.tag===5||c.tag===6)&&(c=fe(c),c!==null&&0<=c.indexOf(u.value)))return!0;break;case Zd:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function xy(c){switch(c.$$typeof){case Kd:return"<"+(B(c.value)||"Unknown")+">";case Yd:return":has("+(xy(c)||"")+")";case Qd:return'[role="'+c.value+'"]';case qd:return'"'+c.value+'"';case Zd:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function jw(c,u){var v=[];c=[c,0];for(var A=0;A<c.length;){var w=c[A++],C=c[A++],k=u[C];if(w.tag!==5||!xe(w)){for(;k!=null&&yy(w,k);)C++,k=u[C];if(C===u.length)v.push(w);else for(w=w.child;w!==null;)c.push(w,C),w=w.sibling}}return v}function _y(c,u){if(!N)throw Error(o(363));c=vy(c),c=jw(c,u),u=[],c=Array.from(c);for(var v=0;v<c.length;){var A=c[v++];if(A.tag===5)xe(A)||u.push(A.stateNode);else for(A=A.child;A!==null;)c.push(A),A=A.sibling}return u}var P3=Math.ceil,ep=a.ReactCurrentDispatcher,Ay=a.ReactCurrentOwner,bn=a.ReactCurrentBatchConfig,Pt=0,Rn=null,Pn=null,Kn=0,$r=0,Hl=Jt(0),Fn=0,Yu=null,zl=0,tp=0,Sy=0,Qu=null,Tr=null,My=0,wy=1/0;function Gl(){wy=zn()+500}var np=!1,Ey=null,ho=null,rp=!1,po=null,ip=0,Zu=0,by=null,sp=-1,op=0;function yr(){return Pt&6?zn():sp!==-1?sp:sp=zn()}function mo(c){return c.mode&1?Pt&2&&Kn!==0?Kn&-Kn:h3.transition!==null?(op===0&&(c=xd,xd<<=1,!(xd&4194240)&&(xd=64),op=c),op):(c=Wt,c!==0?c:Ae()):1}function hi(c,u,v){if(50<Zu)throw Zu=0,by=null,Error(o(185));var A=ap(c,u);return A===null?null:(Fu(A,u,v),(!(Pt&2)||A!==Rn)&&(A===Rn&&(!(Pt&2)&&(tp|=u),Fn===4&&go(A,Kn)),Rr(A,v),u===1&&Pt===0&&!(c.mode&1)&&(Gl(),Md&&is())),A)}function ap(c,u){c.lanes|=u;var v=c.alternate;for(v!==null&&(v.lanes|=u),v=c,c=c.return;c!==null;)c.childLanes|=u,v=c.alternate,v!==null&&(v.childLanes|=u),v=c,c=c.return;return v.tag===3?v.stateNode:null}function Rr(c,u){var v=c.callbackNode;r3(c,u);var A=Ad(c,c===Rn?Kn:0);if(A===0)v!==null&&LM(v),c.callbackNode=null,c.callbackPriority=0;else if(u=A&-A,c.callbackPriority!==u){if(v!=null&&LM(v),u===1)c.tag===0?f3(Kw.bind(null,c)):DM(Kw.bind(null,c)),rt?ke(function(){Pt===0&&is()}):Dv(Fv,is),v=null;else{switch(IM(A)){case 1:v=Fv;break;case 4:v=a3;break;case 16:v=Ov;break;case 536870912:v=l3;break;default:v=Ov}v=iE(v,Jw.bind(null,c))}c.callbackPriority=u,c.callbackNode=v}}function Jw(c,u){if(sp=-1,op=0,Pt&6)throw Error(o(327));var v=c.callbackNode;if(pa()&&c.callbackNode!==v)return null;var A=Ad(c,c===Rn?Kn:0);if(A===0)return null;if(A&30||A&c.expiredLanes||u)u=lp(c,A);else{u=A;var w=Pt;Pt|=2;var C=Zw();(Rn!==c||Kn!==u)&&(Gl(),ha(c,u));do try{L3();break}catch(W){Qw(c,W)}while(!0);kv(),ep.current=C,Pt=w,Pn!==null?u=0:(Rn=null,Kn=0,u=Fn)}if(u!==0){if(u===2&&(w=Bv(c),w!==0&&(A=w,u=Cy(c,w))),u===1)throw v=Yu,ha(c,0),go(c,A),Rr(c,zn()),v;if(u===6)go(c,A);else{if(w=c.current.alternate,!(A&30)&&!B3(w)&&(u=lp(c,A),u===2&&(C=Bv(c),C!==0&&(A=C,u=Cy(c,C))),u===1))throw v=Yu,ha(c,0),go(c,A),Rr(c,zn()),v;switch(c.finishedWork=w,c.finishedLanes=A,u){case 0:case 1:throw Error(o(345));case 2:da(c,Tr);break;case 3:if(go(c,A),(A&130023424)===A&&(u=My+500-zn(),10<u)){if(Ad(c,0)!==0)break;if(w=c.suspendedLanes,(w&A)!==A){yr(),c.pingedLanes|=c.suspendedLanes&w;break}c.timeoutHandle=we(da.bind(null,c,Tr),u);break}da(c,Tr);break;case 4:if(go(c,A),(A&4194240)===A)break;for(u=c.eventTimes,w=-1;0<A;){var k=31-gr(A);C=1<<k,k=u[k],k>w&&(w=k),A&=~C}if(A=w,A=zn()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*P3(A/1960))-A,10<A){c.timeoutHandle=we(da.bind(null,c,Tr),A);break}da(c,Tr);break;case 5:da(c,Tr);break;default:throw Error(o(329))}}}return Rr(c,zn()),c.callbackNode===v?Jw.bind(null,c):null}function Cy(c,u){var v=Qu;return c.current.memoizedState.isDehydrated&&(ha(c,u).flags|=256),c=lp(c,u),c!==2&&(u=Tr,Tr=v,u!==null&&Ty(u)),c}function Ty(c){Tr===null?Tr=c:Tr.push.apply(Tr,c)}function B3(c){for(var u=c;;){if(u.flags&16384){var v=u.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var A=0;A<v.length;A++){var w=v[A],C=w.getSnapshot;w=w.value;try{if(!rs(C(),w))return!1}catch{return!1}}}if(v=u.child,u.subtreeFlags&16384&&v!==null)v.return=u,u=v;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function go(c,u){for(u&=~Sy,u&=~tp,c.suspendedLanes|=u,c.pingedLanes&=~u,c=c.expirationTimes;0<u;){var v=31-gr(u),A=1<<v;c[v]=-1,u&=~A}}function Kw(c){if(Pt&6)throw Error(o(327));pa();var u=Ad(c,0);if(!(u&1))return Rr(c,zn()),null;var v=lp(c,u);if(c.tag!==0&&v===2){var A=Bv(c);A!==0&&(u=A,v=Cy(c,A))}if(v===1)throw v=Yu,ha(c,0),go(c,u),Rr(c,zn()),v;if(v===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=u,da(c,Tr),Rr(c,zn()),null}function Yw(c){po!==null&&po.tag===0&&!(Pt&6)&&pa();var u=Pt;Pt|=1;var v=bn.transition,A=Wt;try{if(bn.transition=null,Wt=1,c)return c()}finally{Wt=A,bn.transition=v,Pt=u,!(Pt&6)&&is()}}function Ry(){$r=Hl.current,Rt(Hl)}function ha(c,u){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==lt&&(c.timeoutHandle=lt,st(v)),Pn!==null)for(v=Pn.return;v!==null;){var A=v;switch(Xv(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&lo();break;case 3:Ul(),Rt(_t),Rt(Ot),qv();break;case 5:Qv(A);break;case 4:Ul();break;case 13:Rt(pn);break;case 19:Rt(pn);break;case 10:Hv(A.type._context);break;case 22:case 23:Ry()}v=v.return}if(Rn=c,Pn=c=vo(c.current,null),Kn=$r=u,Fn=0,Yu=null,Sy=tp=zl=0,Tr=Qu=null,ss!==null){for(u=0;u<ss.length;u++)if(v=ss[u],A=v.interleaved,A!==null){v.interleaved=null;var w=A.next,C=v.pending;if(C!==null){var k=C.next;C.next=w,A.next=k}v.pending=A}ss=null}return c}function Qw(c,u){do{var v=Pn;try{if(kv(),Dd.current=Hd,Fd){for(var A=_n.memoizedState;A!==null;){var w=A.queue;w!==null&&(w.pending=null),A=A.next}Fd=!1}if(kl=0,Gn=er=_n=null,zu=!1,Gu=0,Ay.current=null,v===null||v.return===null){Fn=1,Yu=u,Pn=null;break}e:{var C=c,k=v.return,W=v,ue=u;if(u=Kn,W.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Re=ue,qe=W,St=qe.tag;if(!(qe.mode&1)&&(St===0||St===11||St===15)){var ht=qe.alternate;ht?(qe.updateQueue=ht.updateQueue,qe.memoizedState=ht.memoizedState,qe.lanes=ht.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Qt=yw(k);if(Qt!==null){Qt.flags&=-257,xw(Qt,k,W,C,u),Qt.mode&1&&vw(C,Re,u),u=Qt,ue=Re;var ut=u.updateQueue;if(ut===null){var rr=new Set;rr.add(ue),u.updateQueue=rr}else ut.add(ue);break e}else{if(!(u&1)){vw(C,Re,u),Py();break e}ue=Error(o(426))}}else if(un&&W.mode&1){var pi=yw(k);if(pi!==null){!(pi.flags&65536)&&(pi.flags|=256),xw(pi,k,W,C,u),Kv(ue);break e}}C=ue,Fn!==4&&(Fn=2),Qu===null?Qu=[C]:Qu.push(C),ue=oy(ue,W),W=k;do{switch(W.tag){case 3:W.flags|=65536,u&=-u,W.lanes|=u;var te=mw(W,ue,u);NM(W,te);break e;case 1:C=ue;var K=W.type,ae=W.stateNode;if(!(W.flags&128)&&(typeof K.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(ho===null||!ho.has(ae)))){W.flags|=65536,u&=-u,W.lanes|=u;var Ve=gw(W,C,u);NM(W,Ve);break e}}W=W.return}while(W!==null)}eE(v)}catch(at){u=at,Pn===v&&v!==null&&(Pn=v=v.return);continue}break}while(!0)}function Zw(){var c=ep.current;return ep.current=Hd,c===null?Hd:c}function Py(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Rn===null||!(zl&268435455)&&!(tp&268435455)||go(Rn,Kn)}function lp(c,u){var v=Pt;Pt|=2;var A=Zw();Rn===c&&Kn===u||ha(c,u);do try{I3();break}catch(w){Qw(c,w)}while(!0);if(kv(),Pt=v,ep.current=A,Pn!==null)throw Error(o(261));return Rn=null,Kn=0,Fn}function I3(){for(;Pn!==null;)qw(Pn)}function L3(){for(;Pn!==null&&!s3();)qw(Pn)}function qw(c){var u=rE(c.alternate,c,$r);c.memoizedProps=c.pendingProps,u===null?eE(c):Pn=u,Ay.current=null}function eE(c){var u=c;do{var v=u.alternate;if(c=u.return,u.flags&32768){if(v=E3(v,u),v!==null){v.flags&=32767,Pn=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Fn=6,Pn=null;return}}else if(v=S3(v,u,$r),v!==null){Pn=v;return}if(u=u.sibling,u!==null){Pn=u;return}Pn=u=c}while(u!==null);Fn===0&&(Fn=5)}function da(c,u){var v=Wt,A=bn.transition;try{bn.transition=null,Wt=1,D3(c,u,v)}finally{bn.transition=A,Wt=v}return null}function D3(c,u,v){do pa();while(po!==null);if(Pt&6)throw Error(o(327));var A=c.finishedWork,w=c.finishedLanes;if(A===null)return null;if(c.finishedWork=null,c.finishedLanes=0,A===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var C=A.lanes|A.childLanes;if(i3(c,C),c===Rn&&(Pn=Rn=null,Kn=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||rp||(rp=!0,iE(Ov,function(){return pa(),null})),C=(A.flags&15990)!==0,A.subtreeFlags&15990||C){C=bn.transition,bn.transition=null;var k=Wt;Wt=1;var W=Pt;Pt|=4,Ay.current=null,C3(c,A),T3(c,A),J(c.containerInfo),c.current=A,R3(A),o3(),Pt=W,Wt=k,bn.transition=C}else c.current=A;if(rp&&(rp=!1,po=c,ip=w),C=c.pendingLanes,C===0&&(ho=null),c3(A.stateNode),Rr(c,zn()),u!==null)for(v=c.onRecoverableError,A=0;A<u.length;A++)v(u[A]);if(np)throw np=!1,c=Ey,Ey=null,c;return ip&1&&c.tag!==0&&pa(),C=c.pendingLanes,C&1?c===by?Zu++:(Zu=0,by=c):Zu=0,is(),null}function pa(){if(po!==null){var c=IM(ip),u=bn.transition,v=Wt;try{if(bn.transition=null,Wt=16>c?16:c,po===null)var A=!1;else{if(c=po,po=null,ip=0,Pt&6)throw Error(o(331));var w=Pt;for(Pt|=4,He=c.current;He!==null;){var C=He,k=C.child;if(He.flags&16){var W=C.deletions;if(W!==null){for(var ue=0;ue<W.length;ue++){var Re=W[ue];for(He=Re;He!==null;){var qe=He;switch(qe.tag){case 0:case 11:case 15:fa(8,qe,C)}var St=qe.child;if(St!==null)St.return=qe,He=St;else for(;He!==null;){qe=He;var ht=qe.sibling,Qt=qe.return;if(Uw(qe),qe===Re){He=null;break}if(ht!==null){ht.return=Qt,He=ht;break}He=Qt}}}var ut=C.alternate;if(ut!==null){var rr=ut.child;if(rr!==null){ut.child=null;do{var pi=rr.sibling;rr.sibling=null,rr=pi}while(rr!==null)}}He=C}}if(C.subtreeFlags&2064&&k!==null)k.return=C,He=k;else e:for(;He!==null;){if(C=He,C.flags&2048)switch(C.tag){case 0:case 11:case 15:fa(9,C,C.return)}var te=C.sibling;if(te!==null){te.return=C.return,He=te;break e}He=C.return}}var K=c.current;for(He=K;He!==null;){k=He;var ae=k.child;if(k.subtreeFlags&2064&&ae!==null)ae.return=k,He=ae;else e:for(k=K;He!==null;){if(W=He,W.flags&2048)try{switch(W.tag){case 0:case 11:case 15:Ju(9,W)}}catch(at){Pr(W,W.return,at)}if(W===k){He=null;break e}var Ve=W.sibling;if(Ve!==null){Ve.return=W.return,He=Ve;break e}He=W.return}}if(Pt=w,is(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(Sd,c)}catch{}A=!0}return A}finally{Wt=v,bn.transition=u}}return!1}function tE(c,u,v){u=oy(v,u),u=mw(c,u,1),fo(c,u),u=yr(),c=ap(c,1),c!==null&&(Fu(c,1,u),Rr(c,u))}function Pr(c,u,v){if(c.tag===3)tE(c,c,v);else for(;u!==null;){if(u.tag===3){tE(u,c,v);break}else if(u.tag===1){var A=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ho===null||!ho.has(A))){c=oy(v,c),c=gw(u,c,1),fo(u,c),c=yr(),u=ap(u,1),u!==null&&(Fu(u,1,c),Rr(u,c));break}}u=u.return}}function F3(c,u,v){var A=c.pingCache;A!==null&&A.delete(u),u=yr(),c.pingedLanes|=c.suspendedLanes&v,Rn===c&&(Kn&v)===v&&(Fn===4||Fn===3&&(Kn&130023424)===Kn&&500>zn()-My?ha(c,0):Sy|=v),Rr(c,u)}function nE(c,u){u===0&&(c.mode&1?(u=_d,_d<<=1,!(_d&130023424)&&(_d=4194304)):u=1);var v=yr();c=ap(c,u),c!==null&&(Fu(c,u,v),Rr(c,v))}function O3(c){var u=c.memoizedState,v=0;u!==null&&(v=u.retryLane),nE(c,v)}function N3(c,u){var v=0;switch(c.tag){case 13:var A=c.stateNode,w=c.memoizedState;w!==null&&(v=w.retryLane);break;case 19:A=c.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(u),nE(c,v)}var rE;rE=function(c,u,v){if(c!==null)if(c.memoizedProps!==u.pendingProps||_t.current)Wr=!0;else{if(!(c.lanes&v)&&!(u.flags&128))return Wr=!1,w3(c,u,v);Wr=!!(c.flags&131072)}else Wr=!1,un&&u.flags&1048576&&VM(u,Bd,u.index);switch(u.lanes=0,u.tag){case 2:var A=u.type;c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),c=u.pendingProps;var w=zr(u,Ot.current);Il(u,v),w=ty(null,u,A,c,w,v);var C=ny();return u.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Yt(A)?(C=!0,co(u)):C=!1,u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Gv(u),w.updater=Rd,u.stateNode=w,w._reactInternals=u,Wv(u,A,c,v),u=cy(null,u,A,!0,C,v)):(u.tag=0,un&&C&&$v(u),vr(null,u,w,v),u=u.child),u;case 16:A=u.elementType;e:{switch(c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),c=u.pendingProps,w=A._init,A=w(A._payload),u.type=A,w=u.tag=k3(A),c=Pi(A,c),w){case 0:u=ly(null,u,A,c,v);break e;case 1:u=Cw(null,u,A,c,v);break e;case 11:u=Sw(null,u,A,c,v);break e;case 14:u=Mw(null,u,A,Pi(A.type,c),v);break e}throw Error(o(306,A,""))}return u;case 0:return A=u.type,w=u.pendingProps,w=u.elementType===A?w:Pi(A,w),ly(c,u,A,w,v);case 1:return A=u.type,w=u.pendingProps,w=u.elementType===A?w:Pi(A,w),Cw(c,u,A,w,v);case 3:e:{if(Tw(u),c===null)throw Error(o(387));A=u.pendingProps,C=u.memoizedState,w=C.element,OM(c,u),Td(u,A,null,v);var k=u.memoizedState;if(A=k.element,O&&C.isDehydrated)if(C={element:A,isDehydrated:!1,cache:k.cache,transitions:k.transitions},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){w=Error(o(423)),u=Rw(c,u,A,v,w);break e}else if(A!==w){w=Error(o(424)),u=Rw(c,u,A,v,w);break e}else for(O&&(Vr=Pl(u.stateNode.containerInfo),Gr=u,un=!0,Bi=null,Ou=!1),v=KM(u,null,A,v),u.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Fl(),A===w){u=Rs(c,u,v);break e}vr(c,u,A,v)}u=u.child}return u;case 5:return YM(u),c===null&&Jv(u),A=u.type,w=u.pendingProps,C=c!==null?c.memoizedProps:null,k=w.children,ye(A,w)?k=null:C!==null&&ye(A,C)&&(u.flags|=32),bw(c,u),vr(c,u,k,v),u.child;case 6:return c===null&&Jv(u),null;case 13:return Pw(c,u,v);case 4:return Yv(u,u.stateNode.containerInfo),A=u.pendingProps,c===null?u.child=Ol(u,null,A,v):vr(c,u,A,v),u.child;case 11:return A=u.type,w=u.pendingProps,w=u.elementType===A?w:Pi(A,w),Sw(c,u,A,w,v);case 7:return vr(c,u,u.pendingProps,v),u.child;case 8:return vr(c,u,u.pendingProps.children,v),u.child;case 12:return vr(c,u,u.pendingProps.children,v),u.child;case 10:e:{if(A=u.type._context,w=u.pendingProps,C=u.memoizedProps,k=w.value,FM(u,A,k),C!==null)if(rs(C.value,k)){if(C.children===w.children&&!_t.current){u=Rs(c,u,v);break e}}else for(C=u.child,C!==null&&(C.return=u);C!==null;){var W=C.dependencies;if(W!==null){k=C.child;for(var ue=W.firstContext;ue!==null;){if(ue.context===A){if(C.tag===1){ue=Es(-1,v&-v),ue.tag=2;var Re=C.updateQueue;if(Re!==null){Re=Re.shared;var qe=Re.pending;qe===null?ue.next=ue:(ue.next=qe.next,qe.next=ue),Re.pending=ue}}C.lanes|=v,ue=C.alternate,ue!==null&&(ue.lanes|=v),zv(C.return,v,u),W.lanes|=v;break}ue=ue.next}}else if(C.tag===10)k=C.type===u.type?null:C.child;else if(C.tag===18){if(k=C.return,k===null)throw Error(o(341));k.lanes|=v,W=k.alternate,W!==null&&(W.lanes|=v),zv(k,v,u),k=C.sibling}else k=C.child;if(k!==null)k.return=C;else for(k=C;k!==null;){if(k===u){k=null;break}if(C=k.sibling,C!==null){C.return=k.return,k=C;break}k=k.return}C=k}vr(c,u,w.children,v),u=u.child}return u;case 9:return w=u.type,A=u.pendingProps.children,Il(u,v),w=ai(w),A=A(w),u.flags|=1,vr(c,u,A,v),u.child;case 14:return A=u.type,w=Pi(A,u.pendingProps),w=Pi(A.type,w),Mw(c,u,A,w,v);case 15:return ww(c,u,u.type,u.pendingProps,v);case 17:return A=u.type,w=u.pendingProps,w=u.elementType===A?w:Pi(A,w),c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,Yt(A)?(c=!0,co(u)):c=!1,Il(u,v),zM(u,A,w),Wv(u,A,w,v),cy(null,u,A,!0,c,v);case 19:return Dw(c,u,v);case 22:return Ew(c,u,v)}throw Error(o(156,u.tag))};function iE(c,u){return Dv(c,u)}function U3(c,u,v,A){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(c,u,v,A){return new U3(c,u,v,A)}function By(c){return c=c.prototype,!(!c||!c.isReactComponent)}function k3(c){if(typeof c=="function")return By(c)?1:0;if(c!=null){if(c=c.$$typeof,c===_)return 11;if(c===S)return 14}return 2}function vo(c,u){var v=c.alternate;return v===null?(v=di(c.tag,u,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=u,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,u=c.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function cp(c,u,v,A,w,C){var k=2;if(A=c,typeof c=="function")By(c)&&(k=1);else if(typeof c=="string")k=5;else e:switch(c){case h:return ma(v.children,w,C,u);case d:k=8,w|=8;break;case p:return c=di(12,v,u,w|2),c.elementType=p,c.lanes=C,c;case x:return c=di(13,v,u,w),c.elementType=x,c.lanes=C,c;case g:return c=di(19,v,u,w),c.elementType=g,c.lanes=C,c;case E:return up(v,w,C,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:k=10;break e;case y:k=9;break e;case _:k=11;break e;case S:k=14;break e;case M:k=16,A=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return u=di(k,v,u,w),u.elementType=c,u.type=A,u.lanes=C,u}function ma(c,u,v,A){return c=di(7,c,A,u),c.lanes=v,c}function up(c,u,v,A){return c=di(22,c,A,u),c.elementType=E,c.lanes=v,c.stateNode={},c}function Iy(c,u,v){return c=di(6,c,null,u),c.lanes=v,c}function Ly(c,u,v){return u=di(4,c.children!==null?c.children:[],c.key,u),u.lanes=v,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function H3(c,u,v,A,w){this.tag=u,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=lt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iv(0),this.expirationTimes=Iv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iv(0),this.identifierPrefix=A,this.onRecoverableError=w,O&&(this.mutableSourceEagerHydrationData=null)}function sE(c,u,v,A,w,C,k,W,ue){return c=new H3(c,u,v,W,ue),u===1?(u=1,C===!0&&(u|=8)):u=0,C=di(3,null,null,u),c.current=C,C.stateNode=c,C.memoizedState={element:A,isDehydrated:v,cache:null,transitions:null},Gv(C),c}function oE(c){if(!c)return tt;c=c._reactInternals;e:{if(z(c)!==c||c.tag!==1)throw Error(o(170));var u=c;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Yt(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(c.tag===1){var v=c.type;if(Yt(v))return Ri(c,v,u)}return u}function aE(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=$(u),c===null?null:c.stateNode}function lE(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<u?v:u}}function Dy(c,u){lE(c,u),(c=c.alternate)&&lE(c,u)}function z3(c){return c=$(c),c===null?null:c.stateNode}function G3(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var u=yr();hi(c,134217728,u),Dy(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var u=yr(),v=mo(c);hi(c,v,u),Dy(c,v)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var u=c.stateNode;if(u.current.memoizedState.isDehydrated){var v=Du(u.pendingLanes);v!==0&&(Lv(u,v|1),Rr(u,zn()),!(Pt&6)&&(Gl(),is()))}break;case 13:var A=yr();Yw(function(){return hi(c,1,A)}),Dy(c,1)}},t.batchedUpdates=function(c,u){var v=Pt;Pt|=1;try{return c(u)}finally{Pt=v,Pt===0&&(Gl(),Md&&is())}},t.createComponentSelector=function(c){return{$$typeof:Kd,value:c}},t.createContainer=function(c,u,v,A,w,C,k){return sE(c,u,!1,null,v,A,w,C,k)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Yd,value:c}},t.createHydrationContainer=function(c,u,v,A,w,C,k,W,ue){return c=sE(v,A,!0,c,w,C,k,W,ue),c.context=oE(null),v=c.current,A=yr(),w=mo(v),C=Es(A,w),C.callback=u??null,fo(v,C),c.current.lanes=w,Fu(c,w,A),Rr(c,A),c},t.createPortal=function(c,u,v){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:A==null?null:""+A,children:c,containerInfo:u,implementation:v}},t.createRoleSelector=function(c){return{$$typeof:Qd,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Zd,value:c}},t.createTextSelector=function(c){return{$$typeof:qd,value:c}},t.deferredUpdates=function(c){var u=Wt,v=bn.transition;try{return bn.transition=null,Wt=16,c()}finally{Wt=u,bn.transition=v}},t.discreteUpdates=function(c,u,v,A,w){var C=Wt,k=bn.transition;try{return bn.transition=null,Wt=1,c(u,v,A,w)}finally{Wt=C,bn.transition=k,Pt===0&&Gl()}},t.findAllNodes=_y,t.findBoundingRects=function(c,u){if(!N)throw Error(o(363));u=_y(c,u),c=[];for(var v=0;v<u.length;v++)c.push(q(u[v]));for(u=c.length-1;0<u;u--){v=c[u];for(var A=v.x,w=A+v.width,C=v.y,k=C+v.height,W=u-1;0<=W;W--)if(u!==W){var ue=c[W],Re=ue.x,qe=Re+ue.width,St=ue.y,ht=St+ue.height;if(A>=Re&&C>=St&&w<=qe&&k<=ht){c.splice(u,1);break}else if(A!==Re||v.width!==ue.width||ht<C||St>k){if(!(C!==St||v.height!==ue.height||qe<A||Re>w)){Re>A&&(ue.width+=Re-A,ue.x=A),qe<w&&(ue.width=w-Re),c.splice(u,1);break}}else{St>C&&(ue.height+=St-C,ue.y=C),ht<k&&(ue.height=k-St),c.splice(u,1);break}}}return c},t.findHostInstance=aE,t.findHostInstanceWithNoPortals=function(c){return c=R(c),c=c!==null?ee(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return aE(c)},t.flushControlled=function(c){var u=Pt;Pt|=1;var v=bn.transition,A=Wt;try{bn.transition=null,Wt=1,c()}finally{Wt=A,bn.transition=v,Pt=u,Pt===0&&(Gl(),is())}},t.flushPassiveEffects=pa,t.flushSync=Yw,t.focusWithin=function(c,u){if(!N)throw Error(o(363));for(c=vy(c),u=jw(c,u),u=Array.from(u),c=0;c<u.length;){var v=u[c++];if(!xe(v)){if(v.tag===5&&Ke(v.stateNode))return!0;for(v=v.child;v!==null;)u.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Wt},t.getFindAllNodesFailureDescription=function(c,u){if(!N)throw Error(o(363));var v=0,A=[];c=[vy(c),0];for(var w=0;w<c.length;){var C=c[w++],k=c[w++],W=u[k];if((C.tag!==5||!xe(C))&&(yy(C,W)&&(A.push(xy(W)),k++,k>v&&(v=k)),k<u.length))for(C=C.child;C!==null;)c.push(C,k),C=C.sibling}if(v<u.length){for(c=[];v<u.length;v++)c.push(xy(u[v]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return Z(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:z3,findFiberByHostInstance:c.findFiberByHostInstance||G3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)c=!0;else{try{Sd=u.inject(c),ns=u}catch{}c=!!u.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,u,v,A){if(!N)throw Error(o(363));c=_y(c,u);var w=be(c,v,A).disconnect;return{disconnect:function(){w()}}},t.registerMutableSourceForHydration=function(c,u){var v=u._getVersion;v=v(u._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[u,v]:c.mutableSourceEagerHydrationData.push(u,v)},t.runWithPriority=function(c,u){var v=Wt;try{return Wt=c,u()}finally{Wt=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,u,v,A){var w=u.current,C=yr(),k=mo(w);return v=oE(v),u.context===null?u.context=v:u.pendingContext=v,u=Es(C,k),u.payload={element:c},A=A===void 0?null:A,A!==null&&(u.callback=A),fo(w,u),c=hi(w,k,C),c!==null&&Cd(c,w,k),k},t};hL.exports=b8;var C8=hL.exports;const T8=p0(C8),OS={},R8=n=>void Object.assign(OS,n);function P8(n,e){function t(h,{args:d=[],attach:p,...m},y){let _=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=uc(g,{type:h,root:y,attach:p,primitive:!0})}else{const g=OS[_];if(!g)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=uc(new g(...d),{type:h,root:y,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof At?x.__r3f.attach="geometry":x instanceof Ln&&(x.__r3f.attach="material")),_!=="inject"&&Zx(x,m),x}function r(h,d){let p=!1;if(d){var m,y;(m=d.__r3f)!=null&&m.attach?Qx(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(y=h.__r3f)==null||y.objects.push(d),d.__r3f||uc(d,{}),d.__r3f.parent=h,I1(d),fc(d)}}function i(h,d,p){let m=!1;if(d){var y,_;if((y=d.__r3f)!=null&&y.attach)Qx(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:d});const x=h.children.filter(S=>S!==d),g=x.indexOf(p);h.children=[...x.slice(0,g),d,...x.slice(g)],m=!0}m||(_=h.__r3f)==null||_.objects.push(d),d.__r3f||uc(d,{}),d.__r3f.parent=h,I1(d),fc(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,y,_;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(E=>E!==d)),(y=d.__r3f)!=null&&y.attach)eT(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var x;h.remove(d),(x=d.__r3f)!=null&&x.root&&k8(Wm(d),d)}const S=(_=d.__r3f)==null?void 0:_.primitive,M=!S&&(p===void 0?d.dispose!==null:p);if(!S){var g;s((g=d.__r3f)==null?void 0:g.objects,d,M),s(d.children,d,M)}if(delete d.__r3f,M&&d.dispose&&d.type!=="Scene"){const E=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?P1.unstable_scheduleCallback(P1.unstable_IdlePriority,E):E()}fc(h)}}function a(h,d,p,m){var y;const _=(y=h.__r3f)==null?void 0:y.parent;if(!_)return;const x=t(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&r(x,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>r(x,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(_,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(_,x),x.raycast&&x.__r3f.eventCount&&Wm(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:T8({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,r(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){var y;if(((y=h==null?void 0:h.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:x=[],children:g,...S}=m,{args:M=[],children:E,...P}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((B,L)=>B!==M[L]))return[!0];const T=AL(h,S,P,!0);return T.changes.length?[!1,T]:null}},commitUpdate(h,[d,p],m,y,_,x){d?a(h,m,_,x):Zx(h,p)},commitMount(h,d,p,m){var y;const _=(y=h.__r3f)!=null?y:{};h.raycast&&_.handlers&&_.eventCount&&Wm(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>uc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&eT(m,h,p),h.isObject3D&&(h.visible=!1),fc(h)},unhideInstance(h,d){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&Qx(y,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),fc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Wc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&tn.fun(performance.now)?performance.now:tn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:tn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:tn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Zx}}var YC,QC;const Yx=n=>"colorSpace"in n||"outputColorSpace"in n,mL=()=>{var n;return(n=OS.ColorManagement)!=null?n:null},gL=n=>n&&n.isOrthographicCamera,B8=n=>n&&n.hasOwnProperty("current"),td=typeof window<"u"&&((YC=window.document)!=null&&YC.createElement||((QC=window.navigator)==null?void 0:QC.product)==="ReactNative")?ce.useLayoutEffect:ce.useEffect;function vL(n){const e=ce.useRef(n);return td(()=>void(e.current=n),[n]),e}function I8({set:n}){return td(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class yL extends ce.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}yL.getDerivedStateFromError=()=>({error:!0});const xL="__default",ZC=new Map,L8=n=>n&&!!n.memoized&&!!n.changes;function _L(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Af=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Wm(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const tn={obj:n=>n===Object(n)&&!tn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(tn.str(n)||tn.num(n)||tn.boo(n))return n===e;const s=tn.obj(n);if(s&&r==="reference")return n===e;const o=tn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!tn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(tn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function D8(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function F8(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function uc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function B1(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const qC=/-\d+$/;function Qx(n,e,t){if(tn.str(t)){if(qC.test(t)){const s=t.replace(qC,""),{target:o,key:a}=B1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=B1(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function eT(n,e,t){var r,i;if(tn.str(t)){const{target:s,key:o}=B1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function AL(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},f=!1){const h=n.__r3f,d=Object.entries(i),p=[];if(f){const y=Object.keys(l);for(let _=0;_<y.length;_++)i.hasOwnProperty(y[_])||d.unshift([y[_],xL+"remove"])}d.forEach(([y,_])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&y==="object"||tn.equ(_,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,_,!0,[]]);let g=[];y.includes("-")&&(g=y.split("-")),p.push([y,_,!1,g]);for(const S in i){const M=i[S];S.startsWith(`${y}-`)&&p.push([S,M,!1,S.split("-")])}});const m={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const O8=typeof process<"u"&&!1;function Zx(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=L8(e)?e:AL(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let h=0;h<a.length;h++){let[d,p,m,y]=a[h];if(Yx(n)){const S="srgb",M="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?S:M):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?S:M)}let _=n,x=_[d];if(y.length&&(x=y.reduce((g,S)=>g[S],n),!(x&&x.set))){const[g,...S]=y.reverse();_=S.reverse().reduce((M,E)=>M[E],n),d=g}if(p===xL+"remove")if(_.constructor){let g=ZC.get(_.constructor);g||(g=new _.constructor,ZC.set(_.constructor,g)),p=g[d]}else p=0;if(m&&r)p?r.handlers[d]=p:delete r.handlers[d],r.eventCount=Object.keys(r.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Za)){if(Array.isArray(p))x.fromArray?x.fromArray(p):x.set(...p);else if(x.copy&&p&&p.constructor&&(O8?x.constructor.name===p.constructor.name:x.constructor===p.constructor))x.copy(p);else if(p!==void 0){const g=x instanceof Oe;!g&&x.setScalar?x.setScalar(p):x instanceof Za&&p instanceof Za?x.mask=p.mask:x.set(p),!mL()&&s&&!s.linear&&g&&x.convertSRGBToLinear()}}else if(_[d]=p,_[d]instanceof Zt&&_[d].format===ur&&_[d].type===Xi&&s){const g=_[d];Yx(g)&&Yx(s.gl)?g.colorSpace=s.gl.outputColorSpace:g.encoding=s.gl.outputEncoding}fc(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const h=Wm(n).getState().internal,d=h.interaction.indexOf(n);d>-1&&h.interaction.splice(d,1),r.eventCount&&h.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&I1(n),n}function fc(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function I1(n){n.onUpdate==null||n.onUpdate(n)}function N8(n,e){n.manual||(gL(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function _m(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function U8(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Wc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wc.ContinuousEventPriority;default:return Wc.DefaultEventPriority}}function SL(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function k8(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{SL(t.capturedMap,e,r,i)})}function H8(n){function e(l){const{internal:f}=n.getState(),h=l.offsetX-f.initialClick[0],d=l.offsetY-f.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(f=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=f.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function r(l,f){const h=n.getState(),d=new Set,p=[],m=f?f(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const S=Af(m[g]);S&&(S.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(g){const S=Af(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var M;S.events.compute==null||S.events.compute(l,S,(M=S.previousRoot)==null?void 0:M.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let _=m.flatMap(y).sort((g,S)=>{const M=Af(g.object),E=Af(S.object);return!M||!E?g.distance-S.distance:E.events.priority-M.events.priority||g.distance-S.distance}).filter(g=>{const S=_m(g);return d.has(S)?!1:(d.add(S),!0)});h.events.filter&&(_=h.events.filter(_,h));for(const g of _){let S=g.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(_m(g.intersection))||p.push(g.intersection);return p}function i(l,f,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const _=Af(y.object)||p,{raycaster:x,pointer:g,camera:S,internal:M}=_,E=new F(g.x,g.y,0).unproject(S),P=b=>{var R,$;return(R=($=M.capturedMap.get(b))==null?void 0:$.has(y.eventObject))!=null?R:!1},T=b=>{const R={intersection:y,target:f.target};M.capturedMap.has(b)?M.capturedMap.get(b).set(y.eventObject,R):M.capturedMap.set(b,new Map([[y.eventObject,R]])),f.target.setPointerCapture(b)},B=b=>{const R=M.capturedMap.get(b);R&&SL(M.capturedMap,y.eventObject,R,b)};let L={};for(let b in f){let R=f[b];typeof R!="function"&&(L[b]=R)}let z={...y,...L,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:E,ray:x.ray,camera:S,stopPropagation(){const b="pointerId"in f&&M.capturedMap.get(f.pointerId);if((!b||b.has(y.eventObject))&&(z.stopped=m.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(R=>R.eventObject===y.eventObject))){const R=l.slice(0,l.indexOf(y));s([...R,y])}},target:{hasPointerCapture:P,setPointerCapture:T,releasePointerCapture:B},currentTarget:{hasPointerCapture:P,setPointerCapture:T,releasePointerCapture:B},nativeEvent:f};if(d(z),m.stopped===!0)break}}return l}function s(l){const{internal:f}=n.getState();for(const h of f.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(f.hovered.delete(_m(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,f){for(let h=0;h<f.length;h++){const d=f[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:h}=n.getState();"pointerId"in f&&h.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(f.pointerId)&&(h.capturedMap.delete(f.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(h,m?t:void 0),g=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(M=>M.eventObject)),y&&!x.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(x);function S(M){const E=M.eventObject,P=E.__r3f,T=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const B=_m(M),L=p.hovered.get(B);L?L.stopped&&M.stopPropagation():(p.hovered.set(B,M),T.onPointerOver==null||T.onPointerOver(M),T.onPointerEnter==null||T.onPointerEnter(M))}T.onPointerMove==null||T.onPointerMove(M)}else{const B=T[l];B?(!y||p.initialHits.includes(E))&&(o(h,p.interaction.filter(L=>!p.initialHits.includes(L))),B(M)):y&&p.initialHits.includes(E)&&o(h,p.interaction.filter(L=>!p.initialHits.includes(L)))}}i(x,h,g,S)}}return{handlePointer:a}}const ML=n=>!!(n!=null&&n.render),wL=ce.createContext(null),z8=(n,e)=>{const t=A8((a,l)=>{const f=new F,h=new F,d=new F;function p(g=l().camera,S=h,M=l().size){const{width:E,height:P,top:T,left:B}=M,L=E/P;S instanceof F?d.copy(S):d.set(...S);const z=g.getWorldPosition(f).distanceTo(d);if(gL(g))return{width:E/g.zoom,height:P/g.zoom,top:T,left:B,factor:1,distance:z,aspect:L};{const b=g.fov*Math.PI/180,R=2*Math.tan(b/2)*z,$=R*(E/P);return{width:$,height:R,top:T,left:B,factor:E/$,distance:z,aspect:L}}}let m;const y=g=>a(S=>({performance:{...S.performance,current:g}})),_=new de;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new BS,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,M,E,P)=>{const T=l().camera,B={width:g,height:S,top:E||0,left:P||0,updateStyle:M};a(L=>({size:B,viewport:{...L.viewport,...p(T,h,B)}}))},setDpr:g=>a(S=>{const M=_L(g);return{viewport:{...S.viewport,dpr:M,initialDpr:S.viewport.initialDpr||M}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ce.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,M)=>{const E=l().internal;return E.priority=E.priority+(S>0?1:0),E.subscribers.push({ref:g,priority:S,store:M}),E.subscribers=E.subscribers.sort((P,T)=>P.priority-T.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(S>0?1:0),P.subscribers=P.subscribers.filter(T=>T.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:f,gl:h,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||f.dpr!==s){var p;i=l,s=f.dpr,N8(a,l),h.setPixelRatio(f.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Am,G8=new Set,V8=new Set,W8=new Set;function qx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Sf(n,e){switch(n){case"before":return qx(G8,e);case"after":return qx(V8,e);case"tail":return qx(W8,e)}}let e_,t_;function n_(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),e_=e.internal.subscribers,Am=0;Am<e_.length;Am++)t_=e_[Am],t_.ref.current(t_.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function $8(n){let e=!1,t=!1,r,i,s;function o(f){i=requestAnimationFrame(o),e=!0,r=0,Sf("before",f),t=!0;for(const d of n.values()){var h;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(r+=n_(f,s))}if(t=!1,Sf("after",f),r===0)return Sf("tail",f),e=!1,cancelAnimationFrame(i)}function a(f,h=1){var d;if(!f)return n.forEach(p=>a(p.store.getState(),h));(d=f.gl.xr)!=null&&d.isPresenting||!f.internal.active||f.frameloop==="never"||(h>1?f.internal.frames=Math.min(60,f.internal.frames+h):t?f.internal.frames=2:f.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(f,h=!0,d,p){if(h&&Sf("before",f),d)n_(f,d,p);else for(const m of n.values())n_(f,m.store.getState());h&&Sf("after",f)}return{loop:o,invalidate:a,advance:l}}function EL(){const n=ce.useContext(wL);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function fs(n=t=>t,e){return EL()(n,e)}function bL(n,e=0){const t=EL(),r=t.getState().internal.subscribe,i=vL(n);return td(()=>r(i,e,t),[e,r,t]),null}const tT=new WeakMap;function CL(n,e){return function(t,...r){let i=tT.get(t);return i||(i=new t,tT.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,D8(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function sa(n,e,t,r){const i=Array.isArray(e)?e:[e],s=M8(CL(t,r),[n,...i],{equal:tn.equ});return Array.isArray(e)?s:s[0]}sa.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return w8(CL(t),[n,...r])};sa.clear=function(n,e){const t=Array.isArray(e)?e:[e];return E8([n,...t])};const pu=new Map,{invalidate:nT,advance:rT}=$8(pu),{reconciler:n0,applyProps:hs}=P8(pu,U8),lc={objects:"shallow",strict:!1},X8=(n,e)=>{const t=typeof n=="function"?n(e):n;return ML(t)?t:new AI({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function j8(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function J8(n){const e=pu.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||z8(nT,rT),o=t||n0.createContainer(s,Wc.ConcurrentRoot,null,!1,null,"",i,null);e||pu.set(n,{fiber:o,store:s});let a,l=!1,f;return{configure(h={}){let{gl:d,size:p,scene:m,events:y,onCreated:_,shadows:x=!1,linear:g=!1,flat:S=!1,legacy:M=!1,orthographic:E=!1,frameloop:P="always",dpr:T=[1,2],performance:B,raycaster:L,camera:z,onPointerMissed:b}=h,R=s.getState(),$=R.gl;R.gl||R.set({gl:$=X8(d,n)});let X=R.raycaster;X||R.set({raycaster:X=new aL});const{params:ee,...le}=L||{};if(tn.equ(le,X,lc)||hs(X,{...le}),tn.equ(ee,X.params,lc)||hs(X,{params:{...X.params,...ee}}),!R.camera||R.camera===f&&!tn.equ(f,z,lc)){f=z;const J=z instanceof $h,se=J?z:E?new Mi(0,0,0,0,.1,1e3):new an(75,0,.1,1e3);J||(se.position.z=5,z&&(hs(se,z),("aspect"in z||"left"in z||"right"in z||"bottom"in z||"top"in z)&&(se.manual=!0,se.updateProjectionMatrix())),!R.camera&&!(z!=null&&z.rotation)&&se.lookAt(0,0,0)),R.set({camera:se}),X.camera=se}if(!R.scene){let J;m instanceof Zg?J=m:(J=new Zg,m&&hs(J,m)),R.set({scene:uc(J)})}if(!R.xr){var Z;const J=(De,ie)=>{const ye=s.getState();ye.frameloop!=="never"&&rT(De,!0,ye,ie)},se=()=>{const De=s.getState();De.gl.xr.enabled=De.gl.xr.isPresenting,De.gl.xr.setAnimationLoop(De.gl.xr.isPresenting?J:null),De.gl.xr.isPresenting||nT(De)},_e={connect(){const De=s.getState().gl;De.xr.addEventListener("sessionstart",se),De.xr.addEventListener("sessionend",se)},disconnect(){const De=s.getState().gl;De.xr.removeEventListener("sessionstart",se),De.xr.removeEventListener("sessionend",se)}};typeof((Z=$.xr)==null?void 0:Z.addEventListener)=="function"&&_e.connect(),R.set({xr:_e})}if($.shadowMap){const J=$.shadowMap.enabled,se=$.shadowMap.type;if($.shadowMap.enabled=!!x,tn.boo(x))$.shadowMap.type=Xf;else if(tn.str(x)){var pe;const _e={basic:gB,percentage:B0,soft:Xf,variance:Ui};$.shadowMap.type=(pe=_e[x])!=null?pe:Xf}else tn.obj(x)&&Object.assign($.shadowMap,x);(J!==$.shadowMap.enabled||se!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}const U=mL();U&&("enabled"in U?U.enabled=!M:"legacyMode"in U&&(U.legacyMode=M)),l||hs($,{outputEncoding:g?3e3:3001,toneMapping:S?vs:WA}),R.legacy!==M&&R.set(()=>({legacy:M})),R.linear!==g&&R.set(()=>({linear:g})),R.flat!==S&&R.set(()=>({flat:S})),d&&!tn.fun(d)&&!ML(d)&&!tn.equ(d,$,lc)&&hs($,d),y&&!R.events.handlers&&R.set({events:y(s)});const Q=j8(n,p);return tn.equ(Q,R.size,lc)||R.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),T&&R.viewport.dpr!==_L(T)&&R.setDpr(T),R.frameloop!==P&&R.setFrameloop(P),R.onPointerMissed||R.set({onPointerMissed:b}),B&&!tn.equ(B,R.performance,lc)&&R.set(J=>({performance:{...J.performance,...B}})),a=_,l=!0,this},render(h){return l||this.configure(),n0.updateContainer($e.jsx(K8,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){TL(n)}}}function K8({store:n,children:e,onCreated:t,rootElement:r}){return td(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),$e.jsx(wL.Provider,{value:n,children:e})}function TL(n,e){const t=pu.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),n0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),F8(i),pu.delete(n)}catch{}},500)})}}n0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ce.version});const r_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Y8(n){const{handlePointer:e}=H8(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(r_).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,f]=r_[o];t.addEventListener(l,a,{passive:f})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=r_[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function L1(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,t||(a=n.apply(s,i),s=i=null))}var f=function(){s=this,i=arguments,o=Date.now();var h=t&&!r;return r||(r=setTimeout(l,e)),h&&(a=n.apply(s,i),s=i=null),a};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},f}L1.debounce=L1;var Q8=L1;const iT=p0(Q8);var Z8=Object.defineProperty,q8=Object.defineProperties,e9=Object.getOwnPropertyDescriptors,sT=Object.getOwnPropertySymbols,t9=Object.prototype.hasOwnProperty,n9=Object.prototype.propertyIsEnumerable,oT=(n,e,t)=>e in n?Z8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,aT=(n,e)=>{for(var t in e||(e={}))t9.call(e,t)&&oT(n,t,e[t]);if(sT)for(var t of sT(e))n9.call(e,t)&&oT(n,t,e[t]);return n},r9=(n,e)=>q8(n,e9(e)),lT,cT;typeof window<"u"&&((lT=window.document)!=null&&lT.createElement||((cT=window.navigator)==null?void 0:cT.product)==="ReactNative")?ce.useLayoutEffect:ce.useEffect;function RL(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=RL(r,e,t);if(i)return i;r=r.sibling}}function PL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const uT=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=uT;return}return uT.apply(this,arguments)};const NS=PL(ce.createContext(null));class BL extends ce.Component{render(){return ce.createElement(NS.Provider,{value:this._reactInternals},this.props.children)}}function i9(){const n=ce.useContext(NS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ce.useId();return ce.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=RL(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function s9(){const n=i9(),[e]=ce.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==NS&&!e.has(i)&&e.set(i,ce.useContext(PL(i)))}t=t.return}return e}function o9(){const n=s9();return ce.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>ce.createElement(e,null,ce.createElement(t.Provider,r9(aT({},r),{value:n.get(t)}))),e=>ce.createElement(BL,aT({},e))),[n])}function a9({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||typeof window<"u"&&window.ResizeObserver,[s,o]=ce.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=ce.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),l=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,h=ce.useRef(!1);ce.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,p,m]=ce.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:S,top:M,width:E,height:P,bottom:T,right:B,x:L,y:z}=a.current.element.getBoundingClientRect(),b={left:S,top:M,width:E,height:P,bottom:T,right:B,x:L,y:z};a.current.element instanceof HTMLElement&&r&&(b.height=a.current.element.offsetHeight,b.width=a.current.element.offsetWidth),Object.freeze(b),h.current&&!f9(a.current.lastBounds,b)&&o(a.current.lastBounds=b)};return[g,f?iT(g,f):g,l?iT(g,l):g]},[o,r,l,f]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null)}function _(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})))}const x=g=>{!g||g===a.current.element||(y(),a.current.element=g,a.current.scrollContainers=IL(g),_())};return c9(m,!!e),l9(p),ce.useEffect(()=>{y(),_()},[e,m,p]),ce.useEffect(()=>y,[]),[x,s,d]}function l9(n){ce.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function c9(n,e){ce.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function IL(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...IL(n.parentElement)]}const u9=["x","y","top","bottom","left","right","width","height"],f9=(n,e)=>u9.every(t=>n[t]===e[t]),h9=ce.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Y8,eventSource:a,eventPrefix:l,shadows:f,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:_,performance:x,raycaster:g,camera:S,scene:M,onPointerMissed:E,onCreated:P,...T},B){ce.useMemo(()=>R8(y8),[]);const L=o9(),[z,b]=a9({scroll:!0,debounce:{scroll:50,resize:0},...r}),R=ce.useRef(null),$=ce.useRef(null);ce.useImperativeHandle(B,()=>R.current);const X=vL(E),[ee,le]=ce.useState(!1),[Z,pe]=ce.useState(!1);if(ee)throw ee;if(Z)throw Z;const U=ce.useRef(null);td(()=>{const J=R.current;b.width>0&&b.height>0&&J&&(U.current||(U.current=J8(J)),U.current.configure({gl:s,events:o,shadows:f,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:_,performance:x,raycaster:g,camera:S,scene:M,size:b,onPointerMissed:(...se)=>X.current==null?void 0:X.current(...se),onCreated:se=>{se.events.connect==null||se.events.connect(a?B8(a)?a.current:a:$.current),l&&se.setEvents({compute:(_e,De)=>{const ie=_e[l+"X"],ye=_e[l+"Y"];De.pointer.set(ie/De.size.width*2-1,-(ye/De.size.height)*2+1),De.raycaster.setFromCamera(De.pointer,De.camera)}}),P==null||P(se)}}),U.current.render($e.jsx(L,{children:$e.jsx(yL,{set:pe,children:$e.jsx(ce.Suspense,{fallback:$e.jsx(I8,{set:le}),children:e})})})))}),ce.useEffect(()=>{const J=R.current;if(J)return()=>TL(J)},[]);const Q=a?"none":"auto";return $e.jsx("div",{ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...i},...T,children:$e.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:$e.jsx("canvas",{ref:R,style:{display:"block"},children:t})})})}),d9=ce.forwardRef(function(e,t){return $e.jsx(BL,{children:$e.jsx(h9,{...e,ref:t})})});function Lh(){return Lh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lh.apply(null,arguments)}const nd=new F,US=new F,p9=new F,fT=new de;function m9(n,e,t){const r=nd.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function g9(n,e){const t=nd.setFromMatrixPosition(n.matrixWorld),r=US.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(p9);return i.angleTo(s)>Math.PI/2}function v9(n,e,t,r){const i=nd.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),fT.set(s.x,s.y),t.setFromCamera(fT,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function y9(n,e){if(e instanceof Mi)return e.zoom;if(e instanceof an){const t=nd.setFromMatrixPosition(n.matrixWorld),r=US.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function x9(n,e,t){if(e instanceof an||e instanceof Mi){const r=nd.setFromMatrixPosition(n.matrixWorld),i=US.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const D1=n=>Math.abs(n)<1e-10?0:n;function LL(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=D1(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const _9=(n=>e=>LL(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),A9=(n=>(e,t)=>LL(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function S9(n){return n&&typeof n=="object"&&"current"in n}const M9=ce.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:f=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:y,material:_,geometry:x,zIndexRange:g=[16777271,0],calculatePosition:S=m9,as:M="div",wrapperClass:E,pointerEvents:P="auto",...T},B)=>{const{gl:L,camera:z,scene:b,size:R,raycaster:$,events:X,viewport:ee}=fs(),[le]=ce.useState(()=>document.createElement(M)),Z=ce.useRef(),pe=ce.useRef(null),U=ce.useRef(0),Q=ce.useRef([0,0]),J=ce.useRef(null),se=ce.useRef(null),_e=(a==null?void 0:a.current)||X.connected||L.domElement.parentNode,De=ce.useRef(null),ie=ce.useRef(!1),ye=ce.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&S9(d[0]),[d]);ce.useLayoutEffect(()=>{const et=L.domElement;d&&d==="blending"?(et.style.zIndex=`${Math.floor(g[0]/2)}`,et.style.position="absolute",et.style.pointerEvents="none"):(et.style.zIndex=null,et.style.position=null,et.style.pointerEvents=null)},[d]),ce.useLayoutEffect(()=>{if(pe.current){const et=Z.current=VA(le);if(b.updateMatrixWorld(),h)le.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Fe=S(pe.current,z,R);le.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Fe[0]}px,${Fe[1]}px,0);transform-origin:0 0;`}return _e&&(i?_e.prepend(le):_e.appendChild(le)),()=>{_e&&_e.removeChild(le),et.unmount()}}},[_e,h]),ce.useLayoutEffect(()=>{E&&(le.className=E)},[E]);const Pe=ce.useMemo(()=>h?{position:"absolute",top:0,left:0,width:R.width,height:R.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-R.height/2,left:-R.width/2,width:R.width,height:R.height},...t},[t,s,o,R,h]),we=ce.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);ce.useLayoutEffect(()=>{if(ie.current=!1,h){var et;(et=Z.current)==null||et.render(ce.createElement("div",{ref:J,style:Pe},ce.createElement("div",{ref:se,style:we},ce.createElement("div",{ref:B,className:r,style:t,children:n}))))}else{var Fe;(Fe=Z.current)==null||Fe.render(ce.createElement("div",{ref:B,style:Pe,className:r,children:n}))}});const st=ce.useRef(!0);bL(et=>{if(pe.current){z.updateMatrixWorld(),pe.current.updateWorldMatrix(!0,!1);const Fe=h?Q.current:S(pe.current,z,R);if(h||Math.abs(U.current-z.zoom)>e||Math.abs(Q.current[0]-Fe[0])>e||Math.abs(Q.current[1]-Fe[1])>e){const me=g9(pe.current,z);let O=!1;ye&&(Array.isArray(d)?O=d.map(Ee=>Ee.current):d!=="blending"&&(O=[b]));const Be=st.current;if(O){const Ee=v9(pe.current,z,$,O);st.current=Ee&&!me}else st.current=!me;Be!==st.current&&(p?p(!st.current):le.style.display=st.current?"block":"none");const Ce=Math.floor(g[0]/2),Ae=d?ye?[g[0],Ce]:[Ce-1,0]:g;if(le.style.zIndex=`${x9(pe.current,z,Ae)}`,h){const[Ee,rt]=[R.width/2,R.height/2],ke=z.projectionMatrix.elements[5]*rt,{isOrthographicCamera:N,top:I,left:q,bottom:fe,right:xe}=z,ge=_9(z.matrixWorldInverse),Ke=N?`scale(${ke})translate(${D1(-(xe+q)/2)}px,${D1((I+fe)/2)}px)`:`translateZ(${ke}px)`;let be=pe.current.matrixWorld;f&&(be=z.matrixWorldInverse.clone().transpose().copyPosition(be).scale(pe.current.scale),be.elements[3]=be.elements[7]=be.elements[11]=0,be.elements[15]=1),le.style.width=R.width+"px",le.style.height=R.height+"px",le.style.perspective=N?"":`${ke}px`,J.current&&se.current&&(J.current.style.transform=`${Ke}${ge}translate(${Ee}px,${rt}px)`,se.current.style.transform=A9(be,1/((l||10)/400)))}else{const Ee=l===void 0?1:y9(pe.current,z)*l;le.style.transform=`translate3d(${Fe[0]}px,${Fe[1]}px,0) scale(${Ee})`}Q.current=Fe,U.current=z.zoom}}if(!ye&&De.current&&!ie.current)if(h){if(J.current){const Fe=J.current.children[0];if(Fe!=null&&Fe.clientWidth&&Fe!=null&&Fe.clientHeight){const{isOrthographicCamera:me}=z;if(me||x)T.scale&&(Array.isArray(T.scale)?T.scale instanceof F?De.current.scale.copy(T.scale.clone().divideScalar(1)):De.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):De.current.scale.setScalar(1/T.scale));else{const O=(l||10)/400,Be=Fe.clientWidth*O,Ce=Fe.clientHeight*O;De.current.scale.set(Be,Ce,1)}ie.current=!0}}}else{const Fe=le.children[0];if(Fe!=null&&Fe.clientWidth&&Fe!=null&&Fe.clientHeight){const me=1/ee.factor,O=Fe.clientWidth*me,Be=Fe.clientHeight*me;De.current.scale.set(O,Be,1),ie.current=!0}De.current.lookAt(et.camera.position)}});const lt=ce.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return ce.createElement("group",Lh({},T,{ref:pe}),d&&!ye&&ce.createElement("mesh",{castShadow:m,receiveShadow:y,ref:De},x||ce.createElement("planeGeometry",null),_||ce.createElement("shaderMaterial",{side:xi,vertexShader:lt.vertexShader,fragmentShader:lt.fragmentShader})))}),w9=parseInt(zh.replace(/\D+/g,""));function hT(n,e){if(e===jB)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Qg||e===tS){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===Qg)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var E9=Object.defineProperty,b9=(n,e,t)=>e in n?E9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vt=(n,e,t)=>(b9(n,typeof e!="symbol"?e+"":e,t),t);const Sm=new gl,dT=new Hs,C9=Math.cos(70*(Math.PI/180)),pT=(n,e)=>(n%e+e)%e;let T9=class extends Ki{constructor(e,t){super(),vt(this,"object"),vt(this,"domElement"),vt(this,"enabled",!0),vt(this,"target",new F),vt(this,"minDistance",0),vt(this,"maxDistance",1/0),vt(this,"minZoom",0),vt(this,"maxZoom",1/0),vt(this,"minPolarAngle",0),vt(this,"maxPolarAngle",Math.PI),vt(this,"minAzimuthAngle",-1/0),vt(this,"maxAzimuthAngle",1/0),vt(this,"enableDamping",!1),vt(this,"dampingFactor",.05),vt(this,"enableZoom",!0),vt(this,"zoomSpeed",1),vt(this,"enableRotate",!0),vt(this,"rotateSpeed",1),vt(this,"enablePan",!0),vt(this,"panSpeed",1),vt(this,"screenSpacePanning",!0),vt(this,"keyPanSpeed",7),vt(this,"zoomToCursor",!1),vt(this,"autoRotate",!1),vt(this,"autoRotateSpeed",2),vt(this,"reverseOrbit",!1),vt(this,"reverseHorizontalOrbit",!1),vt(this,"reverseVerticalOrbit",!1),vt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),vt(this,"mouseButtons",{LEFT:Ba.ROTATE,MIDDLE:Ba.DOLLY,RIGHT:Ba.PAN}),vt(this,"touches",{ONE:Ia.ROTATE,TWO:Ia.DOLLY_PAN}),vt(this,"target0"),vt(this,"position0"),vt(this,"zoom0"),vt(this,"_domElementKeyEvents",null),vt(this,"getPolarAngle"),vt(this,"getAzimuthalAngle"),vt(this,"setPolarAngle"),vt(this,"setAzimuthalAngle"),vt(this,"getDistance"),vt(this,"listenToKeyEvents"),vt(this,"stopListenToKeyEvents"),vt(this,"saveState"),vt(this,"reset"),vt(this,"update"),vt(this,"connect"),vt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=V=>{let he=pT(V,2*Math.PI),Ne=h.phi;Ne<0&&(Ne+=2*Math.PI),he<0&&(he+=2*Math.PI);let G=Math.abs(he-Ne);2*Math.PI-G<G&&(he<Ne?he+=2*Math.PI:Ne+=2*Math.PI),d.phi=he-Ne,r.update()},this.setAzimuthalAngle=V=>{let he=pT(V,2*Math.PI),Ne=h.theta;Ne<0&&(Ne+=2*Math.PI),he<0&&(he+=2*Math.PI);let G=Math.abs(he-Ne);2*Math.PI-G<G&&(he<Ne?he+=2*Math.PI:Ne+=2*Math.PI),d.theta=he-Ne,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=V=>{V.addEventListener("keydown",be),this._domElementKeyEvents=V},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",be),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const V=new F,he=new F(0,1,0),Ne=new jn().setFromUnitVectors(e.up,he),G=Ne.clone().invert(),Te=new F,oe=new jn,ve=2*Math.PI;return function(){const Ge=r.object.position;Ne.setFromUnitVectors(e.up,he),G.copy(Ne).invert(),V.copy(Ge).sub(r.target),V.applyQuaternion(Ne),h.setFromVector3(V),r.autoRotate&&l===a.NONE&&ee($()),r.enableDamping?(h.theta+=d.theta*r.dampingFactor,h.phi+=d.phi*r.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let yt=r.minAzimuthAngle,Ut=r.maxAzimuthAngle;isFinite(yt)&&isFinite(Ut)&&(yt<-Math.PI?yt+=ve:yt>Math.PI&&(yt-=ve),Ut<-Math.PI?Ut+=ve:Ut>Math.PI&&(Ut-=ve),yt<=Ut?h.theta=Math.max(yt,Math.min(Ut,h.theta)):h.theta=h.theta>(yt+Ut)/2?Math.max(yt,h.theta):Math.min(Ut,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&z||r.object.isOrthographicCamera?h.radius=_e(h.radius):h.radius=_e(h.radius*p),V.setFromSpherical(h),V.applyQuaternion(G),Ge.copy(r.target).add(V),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let xn=!1;if(r.zoomToCursor&&z){let Ct=null;if(r.object instanceof an&&r.object.isPerspectiveCamera){const dn=V.length();Ct=_e(dn*p);const Jn=dn-Ct;r.object.position.addScaledVector(B,Jn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const dn=new F(L.x,L.y,0);dn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),xn=!0;const Jn=new F(L.x,L.y,0);Jn.unproject(r.object),r.object.position.sub(Jn).add(dn),r.object.updateMatrixWorld(),Ct=V.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ct!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ct).add(r.object.position):(Sm.origin.copy(r.object.position),Sm.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Sm.direction))<C9?e.lookAt(r.target):(dT.setFromNormalAndCoplanarPoint(r.object.up,r.target),Sm.intersectPlane(dT,r.target))))}else r.object instanceof Mi&&r.object.isOrthographicCamera&&(xn=p!==1,xn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,z=!1,xn||Te.distanceToSquared(r.object.position)>f||8*(1-oe.dot(r.object.quaternion))>f?(r.dispatchEvent(i),Te.copy(r.object.position),oe.copy(r.object.quaternion),xn=!1,!0):!1}})(),this.connect=V=>{r.domElement=V,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Se),r.domElement.addEventListener("pointerdown",I),r.domElement.addEventListener("pointercancel",fe),r.domElement.addEventListener("wheel",Ke)},this.dispose=()=>{var V,he,Ne,G,Te,oe;r.domElement&&(r.domElement.style.touchAction="auto"),(V=r.domElement)==null||V.removeEventListener("contextmenu",Se),(he=r.domElement)==null||he.removeEventListener("pointerdown",I),(Ne=r.domElement)==null||Ne.removeEventListener("pointercancel",fe),(G=r.domElement)==null||G.removeEventListener("wheel",Ke),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointermove",q),(oe=r.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",fe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",be)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const f=1e-6,h=new R1,d=new R1;let p=1;const m=new F,y=new de,_=new de,x=new de,g=new de,S=new de,M=new de,E=new de,P=new de,T=new de,B=new F,L=new de;let z=!1;const b=[],R={};function $(){return 2*Math.PI/60/60*r.autoRotateSpeed}function X(){return Math.pow(.95,r.zoomSpeed)}function ee(V){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=V:d.theta-=V}function le(V){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=V:d.phi-=V}const Z=(()=>{const V=new F;return function(Ne,G){V.setFromMatrixColumn(G,0),V.multiplyScalar(-Ne),m.add(V)}})(),pe=(()=>{const V=new F;return function(Ne,G){r.screenSpacePanning===!0?V.setFromMatrixColumn(G,1):(V.setFromMatrixColumn(G,0),V.crossVectors(r.object.up,V)),V.multiplyScalar(Ne),m.add(V)}})(),U=(()=>{const V=new F;return function(Ne,G){const Te=r.domElement;if(Te&&r.object instanceof an&&r.object.isPerspectiveCamera){const oe=r.object.position;V.copy(oe).sub(r.target);let ve=V.length();ve*=Math.tan(r.object.fov/2*Math.PI/180),Z(2*Ne*ve/Te.clientHeight,r.object.matrix),pe(2*G*ve/Te.clientHeight,r.object.matrix)}else Te&&r.object instanceof Mi&&r.object.isOrthographicCamera?(Z(Ne*(r.object.right-r.object.left)/r.object.zoom/Te.clientWidth,r.object.matrix),pe(G*(r.object.top-r.object.bottom)/r.object.zoom/Te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Q(V){r.object instanceof an&&r.object.isPerspectiveCamera||r.object instanceof Mi&&r.object.isOrthographicCamera?p/=V:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function J(V){r.object instanceof an&&r.object.isPerspectiveCamera||r.object instanceof Mi&&r.object.isOrthographicCamera?p*=V:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function se(V){if(!r.zoomToCursor||!r.domElement)return;z=!0;const he=r.domElement.getBoundingClientRect(),Ne=V.clientX-he.left,G=V.clientY-he.top,Te=he.width,oe=he.height;L.x=Ne/Te*2-1,L.y=-(G/oe)*2+1,B.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function _e(V){return Math.max(r.minDistance,Math.min(r.maxDistance,V))}function De(V){y.set(V.clientX,V.clientY)}function ie(V){se(V),E.set(V.clientX,V.clientY)}function ye(V){g.set(V.clientX,V.clientY)}function Pe(V){_.set(V.clientX,V.clientY),x.subVectors(_,y).multiplyScalar(r.rotateSpeed);const he=r.domElement;he&&(ee(2*Math.PI*x.x/he.clientHeight),le(2*Math.PI*x.y/he.clientHeight)),y.copy(_),r.update()}function we(V){P.set(V.clientX,V.clientY),T.subVectors(P,E),T.y>0?Q(X()):T.y<0&&J(X()),E.copy(P),r.update()}function st(V){S.set(V.clientX,V.clientY),M.subVectors(S,g).multiplyScalar(r.panSpeed),U(M.x,M.y),g.copy(S),r.update()}function lt(V){se(V),V.deltaY<0?J(X()):V.deltaY>0&&Q(X()),r.update()}function et(V){let he=!1;switch(V.code){case r.keys.UP:U(0,r.keyPanSpeed),he=!0;break;case r.keys.BOTTOM:U(0,-r.keyPanSpeed),he=!0;break;case r.keys.LEFT:U(r.keyPanSpeed,0),he=!0;break;case r.keys.RIGHT:U(-r.keyPanSpeed,0),he=!0;break}he&&(V.preventDefault(),r.update())}function Fe(){if(b.length==1)y.set(b[0].pageX,b[0].pageY);else{const V=.5*(b[0].pageX+b[1].pageX),he=.5*(b[0].pageY+b[1].pageY);y.set(V,he)}}function me(){if(b.length==1)g.set(b[0].pageX,b[0].pageY);else{const V=.5*(b[0].pageX+b[1].pageX),he=.5*(b[0].pageY+b[1].pageY);g.set(V,he)}}function O(){const V=b[0].pageX-b[1].pageX,he=b[0].pageY-b[1].pageY,Ne=Math.sqrt(V*V+he*he);E.set(0,Ne)}function Be(){r.enableZoom&&O(),r.enablePan&&me()}function Ce(){r.enableZoom&&O(),r.enableRotate&&Fe()}function Ae(V){if(b.length==1)_.set(V.pageX,V.pageY);else{const Ne=Je(V),G=.5*(V.pageX+Ne.x),Te=.5*(V.pageY+Ne.y);_.set(G,Te)}x.subVectors(_,y).multiplyScalar(r.rotateSpeed);const he=r.domElement;he&&(ee(2*Math.PI*x.x/he.clientHeight),le(2*Math.PI*x.y/he.clientHeight)),y.copy(_)}function Ee(V){if(b.length==1)S.set(V.pageX,V.pageY);else{const he=Je(V),Ne=.5*(V.pageX+he.x),G=.5*(V.pageY+he.y);S.set(Ne,G)}M.subVectors(S,g).multiplyScalar(r.panSpeed),U(M.x,M.y),g.copy(S)}function rt(V){const he=Je(V),Ne=V.pageX-he.x,G=V.pageY-he.y,Te=Math.sqrt(Ne*Ne+G*G);P.set(0,Te),T.set(0,Math.pow(P.y/E.y,r.zoomSpeed)),Q(T.y),E.copy(P)}function ke(V){r.enableZoom&&rt(V),r.enablePan&&Ee(V)}function N(V){r.enableZoom&&rt(V),r.enableRotate&&Ae(V)}function I(V){var he,Ne;r.enabled!==!1&&(b.length===0&&((he=r.domElement)==null||he.ownerDocument.addEventListener("pointermove",q),(Ne=r.domElement)==null||Ne.ownerDocument.addEventListener("pointerup",fe)),je(V),V.pointerType==="touch"?Xe(V):xe(V))}function q(V){r.enabled!==!1&&(V.pointerType==="touch"?Bt(V):ge(V))}function fe(V){var he,Ne,G;gt(V),b.length===0&&((he=r.domElement)==null||he.releasePointerCapture(V.pointerId),(Ne=r.domElement)==null||Ne.ownerDocument.removeEventListener("pointermove",q),(G=r.domElement)==null||G.ownerDocument.removeEventListener("pointerup",fe)),r.dispatchEvent(o),l=a.NONE}function xe(V){let he;switch(V.button){case 0:he=r.mouseButtons.LEFT;break;case 1:he=r.mouseButtons.MIDDLE;break;case 2:he=r.mouseButtons.RIGHT;break;default:he=-1}switch(he){case Ba.DOLLY:if(r.enableZoom===!1)return;ie(V),l=a.DOLLY;break;case Ba.ROTATE:if(V.ctrlKey||V.metaKey||V.shiftKey){if(r.enablePan===!1)return;ye(V),l=a.PAN}else{if(r.enableRotate===!1)return;De(V),l=a.ROTATE}break;case Ba.PAN:if(V.ctrlKey||V.metaKey||V.shiftKey){if(r.enableRotate===!1)return;De(V),l=a.ROTATE}else{if(r.enablePan===!1)return;ye(V),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function ge(V){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Pe(V);break;case a.DOLLY:if(r.enableZoom===!1)return;we(V);break;case a.PAN:if(r.enablePan===!1)return;st(V);break}}function Ke(V){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(V.preventDefault(),r.dispatchEvent(s),lt(V),r.dispatchEvent(o))}function be(V){r.enabled===!1||r.enablePan===!1||et(V)}function Xe(V){switch(pt(V),b.length){case 1:switch(r.touches.ONE){case Ia.ROTATE:if(r.enableRotate===!1)return;Fe(),l=a.TOUCH_ROTATE;break;case Ia.PAN:if(r.enablePan===!1)return;me(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Ia.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Be(),l=a.TOUCH_DOLLY_PAN;break;case Ia.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ce(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Bt(V){switch(pt(V),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ae(V),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ee(V),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ke(V),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;N(V),r.update();break;default:l=a.NONE}}function Se(V){r.enabled!==!1&&V.preventDefault()}function je(V){b.push(V)}function gt(V){delete R[V.pointerId];for(let he=0;he<b.length;he++)if(b[he].pointerId==V.pointerId){b.splice(he,1);return}}function pt(V){let he=R[V.pointerId];he===void 0&&(he=new de,R[V.pointerId]=he),he.set(V.pageX,V.pageY)}function Je(V){const he=V.pointerId===b[0].pointerId?b[1]:b[0];return R[he.pointerId]}t!==void 0&&this.connect(t),this.update()}};function r0(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Xa="srgb",Ks="srgb-linear",mT=3001,R9=3e3;class kS extends pr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new D9(t)}),this.register(function(t){return new F9(t)}),this.register(function(t){return new W9(t)}),this.register(function(t){return new $9(t)}),this.register(function(t){return new X9(t)}),this.register(function(t){return new N9(t)}),this.register(function(t){return new U9(t)}),this.register(function(t){return new k9(t)}),this.register(function(t){return new H9(t)}),this.register(function(t){return new L9(t)}),this.register(function(t){return new z9(t)}),this.register(function(t){return new O9(t)}),this.register(function(t){return new V9(t)}),this.register(function(t){return new G9(t)}),this.register(function(t){return new B9(t)}),this.register(function(t){return new j9(t)}),this.register(function(t){return new J9(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const f=$o.extractUrlBase(e);o=$o.resolveURL(f,this.path)}else o=$o.extractUrlBase(e);this.manager.itemStart(e);const a=function(f){i?i(f):console.error(f),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ri(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){try{s.parse(f,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(r0(new Uint8Array(e.slice(0,4)))===DL){try{o[It.KHR_BINARY_GLTF]=new K9(e)}catch(h){i&&i(h);return}s=JSON.parse(o[It.KHR_BINARY_GLTF].content)}else s=JSON.parse(r0(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new l6(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const h=this.pluginCallbacks[f](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let f=0;f<s.extensionsUsed.length;++f){const h=s.extensionsUsed[f],d=s.extensionsRequired||[];switch(h){case It.KHR_MATERIALS_UNLIT:o[h]=new I9;break;case It.KHR_DRACO_MESH_COMPRESSION:o[h]=new Y9(s,this.dracoLoader);break;case It.KHR_TEXTURE_TRANSFORM:o[h]=new Q9;break;case It.KHR_MESH_QUANTIZATION:o[h]=new Z9;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function P9(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const It={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class B9{constructor(e){this.parser=e,this.name=It.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let f;const h=new Oe(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],Ks);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":f=new RS(h),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new TS(h),f.distance=d;break;case"spot":f=new CS(h),f.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,f.angle=l.spot.outerConeAngle,f.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return f.position.set(0,0,0),f.decay=2,Us(f,l),l.intensity!==void 0&&(f.intensity=l.intensity),f.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(f),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class I9{constructor(){this.name=It.KHR_MATERIALS_UNLIT}getMaterialType(){return qr}extendParams(e,t,r){const i=[];e.color=new Oe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Ks),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Xa))}return Promise.all(i)}}class L9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class D9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new de(a,a)}return Promise.all(s)}}class F9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class O9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class N9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Oe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Ks)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Xa)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class U9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class k9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Oe().setRGB(a[0],a[1],a[2],Ks),Promise.all(s)}}class H9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class z9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Oe().setRGB(a[0],a[1],a[2],Ks),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,Xa)),Promise.all(s)}}class G9{constructor(e){this.parser=e,this.name=It.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class V9{constructor(e){this.parser=e,this.name=It.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ti}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class W9{constructor(e){this.parser=e,this.name=It.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class $9{constructor(e){this.parser=e,this.name=It.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const f=r.options.manager.getHandler(a.uri);f!==null&&(l=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class X9{constructor(e){this.parser=e,this.name=It.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const f=r.options.manager.getHandler(a.uri);f!==null&&(l=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class j9{constructor(e){this.name=It.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,f=i.byteLength||0,h=i.count,d=i.byteStride,p=new Uint8Array(a,l,f);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,i.mode,i.filter),m})})}else return null}}class J9{constructor(e){this.name=It.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const f of i.primitives)if(f.mode!==gi.TRIANGLES&&f.mode!==gi.TRIANGLE_STRIP&&f.mode!==gi.TRIANGLE_FAN&&f.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const f in o)a.push(this.parser.getDependency("accessor",o[f]).then(h=>(l[f]=h,l[f])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(f=>{const h=f.pop(),d=h.isGroup?h.children:[h],p=f[0].count,m=[];for(const y of d){const _=new ft,x=new F,g=new jn,S=new F(1,1,1),M=new dS(y.geometry,y.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,E),l.SCALE&&S.fromBufferAttribute(l.SCALE,E),M.setMatrixAt(E,_.compose(x,g,S));for(const E in l)if(E==="_COLOR_0"){const P=l[E];M.instanceColor=new ll(P.array,P.itemSize,P.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&y.geometry.setAttribute(E,l[E]);Dt.prototype.copy.call(M,y),this.parser.assignFinalMaterial(M),m.push(M)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const DL="glTF",Mf=12,gT={JSON:1313821514,BIN:5130562};class K9{constructor(e){this.name=It.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Mf);if(this.header={magic:r0(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==DL)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Mf,i=new DataView(e,Mf);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===gT.JSON){const l=new Uint8Array(e,Mf+s,o);this.content=r0(l)}else if(a===gT.BIN){const l=Mf+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Y9{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=It.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},f={};for(const h in o){const d=F1[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=F1[h]||h.toLowerCase();if(o[h]!==void 0){const p=r.accessors[e.attributes[h]],m=qc[p.componentType];f[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d,p){i.decodeDracoFile(h,function(m){for(const y in m.attributes){const _=m.attributes[y],x=l[y];x!==void 0&&(_.normalized=x)}d(m)},a,f,Ks,p)})})}}class Q9{constructor(){this.name=It.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Z9{constructor(){this.name=It.KHR_MESH_QUANTIZATION}}class FL extends Mu{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,f=a*3,h=i-t,d=(r-t)/h,p=d*d,m=p*d,y=e*f,_=y-f,x=-2*m+3*p,g=m-p,S=1-x,M=g-p+d;for(let E=0;E!==a;E++){const P=o[_+E+a],T=o[_+E+l]*h,B=o[y+E+a],L=o[y+E]*h;s[E]=S*P+M*T+x*B+g*L}return s}}const q9=new jn;class e6 extends FL{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return q9.fromArray(s).normalize().toArray(s),s}}const gi={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},qc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},vT={9728:Un,9729:wn,9984:L0,9985:Qc,9986:Ha,9987:Si},yT={33071:Zr,33648:au,10497:Ko},i_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...w9>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},To={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},t6={CUBICSPLINE:void 0,LINEAR:uu,STEP:cu},s_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function n6(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new qh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:As})),n.DefaultMaterial}function Ta(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Us(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function r6(n,e,t){let r=!1,i=!1,s=!1;for(let f=0,h=e.length;f<h;f++){const d=e[f];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let f=0,h=e.length;f<h;f++){const d=e[f];if(r){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(f){const h=f[0],d=f[1],p=f[2];return r&&(n.morphAttributes.position=h),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function i6(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function s6(n){let e;const t=n.extensions&&n.extensions[It.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+o_(t.attributes):e=n.indices+":"+o_(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+o_(n.targets[r]);return e}function o_(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function O1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function o6(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const a6=new ft;class l6{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new P9,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new ed(this.options.manager):this.textureLoader=new rL(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ri(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Ta(s,a,i),Us(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[f,h]of o.children.entries())s(h,a.children[f])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[It.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load($o.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=i_[i.type],a=qc[i.componentType],l=i.normalized===!0,f=new a(i.count*o);return Promise.resolve(new Gt(f,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=i_[i.type],f=qc[i.componentType],h=f.BYTES_PER_ELEMENT,d=h*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,y=i.normalized===!0;let _,x;if(m&&m!==d){const g=Math.floor(p/m),S="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let M=t.cache.get(S);M||(_=new f(a,g*m,i.count*m/h),M=new Jh(_,m/h),t.cache.add(S,M)),x=new Yo(M,l,p%m/h,y)}else a===null?_=new f(i.count*l):_=new f(a,p,i.count*l),x=new Gt(_,l,y);if(i.sparse!==void 0){const g=i_.SCALAR,S=qc[i.sparse.indices.componentType],M=i.sparse.indices.byteOffset||0,E=i.sparse.values.byteOffset||0,P=new S(o[1],M,i.sparse.count*g),T=new f(o[2],E,i.sparse.count*l);a!==null&&(x=new Gt(x.array.slice(),x.itemSize,x.normalized));for(let B=0,L=P.length;B<L;B++){const z=P[B];if(x.setX(z,T[B*l]),l>=2&&x.setY(z,T[B*l+1]),l>=3&&x.setZ(z,T[B*l+2]),l>=4&&x.setW(z,T[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const f=this.loadImageSource(t,r).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=vT[p.magFilter]||wn,h.minFilter=vT[p.minFilter]||Si,h.wrapS=yT[p.wrapS]||Ko,h.wrapT=yT[p.wrapT]||Ko,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=f,f}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",f=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){f=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let y=p;t.isImageBitmapLoader===!0&&(y=function(_){const x=new Zt(_);x.needsUpdate=!0,p(x)}),t.load($o.resolveURL(d,s.path),y,void 0,m)})}).then(function(d){return f===!0&&a.revokeObjectURL(l),Us(d,o),d.userData.mimeType=o.mimeType||o6(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[It.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[It.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[It.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===mT?Xa:Ks),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Xa?mT:R9),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new j0,Ln.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new dr,Ln.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return qh}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},f=[];if(l[It.KHR_MATERIALS_UNLIT]){const d=i[It.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),f.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Oe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Ks),a.opacity=p[3]}d.baseColorTexture!==void 0&&f.push(t.assignTexture(a,"map",d.baseColorTexture,Xa)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),f.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=xi);const h=s.alphaMode||s_.OPAQUE;if(h===s_.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===s_.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==qr&&(f.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new de(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==qr&&(f.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==qr){const d=s.emissiveFactor;a.emissive=new Oe().setRGB(d[0],d[1],d[2],Ks)}return s.emissiveTexture!==void 0&&o!==qr&&f.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Xa)),Promise.all(f).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Us(d,s),t.associations.set(d,{materials:e}),s.extensions&&Ta(i,d,s),d})}createUniqueName(e){const t=Nt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[It.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return xT(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const f=e[a],h=s6(f),d=i[h];if(d)o.push(d.promise);else{let p;f.extensions&&f.extensions[It.KHR_DRACO_MESH_COMPRESSION]?p=s(f):p=xT(new At,f,t),i[h]={primitive:f,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,f=o.length;l<f;l++){const h=o[l].material===void 0?n6(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const f=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,y=h.length;m<y;m++){const _=h[m],x=o[m];let g;const S=f[m];if(x.mode===gi.TRIANGLES||x.mode===gi.TRIANGLE_STRIP||x.mode===gi.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new hS(_,S):new En(_,S),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===gi.TRIANGLE_STRIP?g.geometry=hT(g.geometry,tS):x.mode===gi.TRIANGLE_FAN&&(g.geometry=hT(g.geometry,Qg));else if(x.mode===gi.LINES)g=new Yi(_,S);else if(x.mode===gi.LINE_STRIP)g=new no(_,S);else if(x.mode===gi.LINE_LOOP)g=new pS(_,S);else if(x.mode===gi.POINTS)g=new mS(_,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&i6(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Us(g,s),x.extensions&&Ta(i,g,x),t.assignFinalMaterial(g),d.push(g)}for(let m=0,y=d.length;m<y;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&Ta(i,d[0],s),d[0];const p=new $s;s.extensions&&Ta(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,y=d.length;m<y;m++)p.add(d[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new an(iI.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Mi(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Us(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let f=0,h=o.length;f<h;f++){const d=o[f];if(d){a.push(d);const p=new ft;s!==null&&p.fromArray(s.array,f*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new Kh(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],f=[],h=[];for(let d=0,p=i.channels.length;d<p;d++){const m=i.channels[d],y=i.samplers[m.sampler],_=m.target,x=_.node,g=i.parameters!==void 0?i.parameters[y.input]:y.input,S=i.parameters!==void 0?i.parameters[y.output]:y.output;_.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",S)),f.push(y),h.push(_))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(f),Promise.all(h)]).then(function(d){const p=d[0],m=d[1],y=d[2],_=d[3],x=d[4],g=[];for(let S=0,M=p.length;S<M;S++){const E=p[S],P=m[S],T=y[S],B=_[S],L=x[S];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const z=r._createAnimationTracks(E,P,T,B,L);if(z)for(let b=0;b<z.length;b++)g.push(z[b])}return new du(s,void 0,g)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,f=i.weights.length;l<f;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let f=0,h=a.length;f<h;f++)o.push(r.getDependency("node",a[f]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(f){const h=f[0],d=f[1],p=f[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,a6)});for(let m=0,y=d.length;m<y;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(f){return i._getNodeRef(i.cameraCache,s.camera,f)})),i._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){a.push(f)}),this.nodeCache[e]=Promise.all(a).then(function(f){let h;if(s.isBone===!0?h=new X0:f.length>1?h=new $s:f.length===1?h=f[0]:h=new Dt,h!==f[0])for(let d=0,p=f.length;d<p;d++)h.add(f[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Us(h,s),s.extensions&&Ta(r,h,s),s.matrix!==void 0){const d=new ft;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new $s;r.name&&(s.name=i.createUniqueName(r.name)),Us(s,r),r.extensions&&Ta(t,s,r);const o=r.nodes||[],a=[];for(let l=0,f=o.length;l<f;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const f=h=>{const d=new Map;for(const[p,m]of i.associations)(p instanceof Ln||p instanceof Zt)&&d.set(p,m);return h.traverse(p=>{const m=i.associations.get(p);m!=null&&d.set(p,m)}),d};return i.associations=f(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];To[s.path]===To.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let f;switch(To[s.path]){case To.weights:f=ul;break;case To.rotation:f=fl;break;case To.position:case To.scale:f=hl;break;default:switch(r.itemSize){case 1:f=ul;break;case 2:case 3:default:f=hl;break}break}const h=i.interpolation!==void 0?t6[i.interpolation]:uu,d=this._getArrayFromAccessor(r);for(let p=0,m=l.length;p<m;p++){const y=new f(l[p]+"."+To[s.path],t.array,d,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),o.push(y)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=O1(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof fl?e6:FL;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function c6(n,e,t){const r=e.attributes,i=new fr;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,f=a.max;if(l!==void 0&&f!==void 0){if(i.set(new F(l[0],l[1],l[2]),new F(f[0],f[1],f[2])),a.normalized){const h=O1(qc[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new F,l=new F;for(let f=0,h=s.length;f<h;f++){const d=s[f];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const _=O1(qc[p.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Zn;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function xT(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=F1[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Us(n,e),c6(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?r6(n,e.targets,t):n})}class u6 extends At{constructor(e,t,r,i){super();const s=[],o=[],a=[],l=new F,f=new ft;f.makeRotationFromEuler(r),f.setPosition(t);const h=new ft;h.copy(f).invert(),d(),this.setAttribute("position",new nt(s,3)),this.setAttribute("normal",new nt(o,3)),this.setAttribute("uv",new nt(a,2));function d(){let _,x=[];const g=new F,S=new F;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const M=e.geometry,E=M.attributes.position,P=M.attributes.normal;if(M.index!==null){const T=M.index;for(_=0;_<T.count;_++)g.fromBufferAttribute(E,T.getX(_)),S.fromBufferAttribute(P,T.getX(_)),p(x,g,S)}else for(_=0;_<E.count;_++)g.fromBufferAttribute(E,_),S.fromBufferAttribute(P,_),p(x,g,S);for(x=m(x,l.set(1,0,0)),x=m(x,l.set(-1,0,0)),x=m(x,l.set(0,1,0)),x=m(x,l.set(0,-1,0)),x=m(x,l.set(0,0,1)),x=m(x,l.set(0,0,-1)),_=0;_<x.length;_++){const T=x[_];a.push(.5+T.position.x/i.x,.5+T.position.y/i.y),T.position.applyMatrix4(f),s.push(T.position.x,T.position.y,T.position.z),o.push(T.normal.x,T.normal.y,T.normal.z)}}function p(_,x,g){x.applyMatrix4(e.matrixWorld),x.applyMatrix4(h),g.transformDirection(e.matrixWorld),_.push(new _T(x.clone(),g.clone()))}function m(_,x){const g=[],S=.5*Math.abs(i.dot(x));for(let M=0;M<_.length;M+=3){let E,P,T,B=0,L,z,b,R;const $=_[M+0].position.dot(x)-S,X=_[M+1].position.dot(x)-S,ee=_[M+2].position.dot(x)-S;switch(E=$>0,P=X>0,T=ee>0,B=(E?1:0)+(P?1:0)+(T?1:0),B){case 0:{g.push(_[M]),g.push(_[M+1]),g.push(_[M+2]);break}case 1:{if(E&&(L=_[M+1],z=_[M+2],b=y(_[M],L,x,S),R=y(_[M],z,x,S)),P){L=_[M],z=_[M+2],b=y(_[M+1],L,x,S),R=y(_[M+1],z,x,S),g.push(b),g.push(z.clone()),g.push(L.clone()),g.push(z.clone()),g.push(b.clone()),g.push(R);break}T&&(L=_[M],z=_[M+1],b=y(_[M+2],L,x,S),R=y(_[M+2],z,x,S)),g.push(L.clone()),g.push(z.clone()),g.push(b),g.push(R),g.push(b.clone()),g.push(z.clone());break}case 2:{E||(L=_[M].clone(),z=y(L,_[M+1],x,S),b=y(L,_[M+2],x,S),g.push(L),g.push(z),g.push(b)),P||(L=_[M+1].clone(),z=y(L,_[M+2],x,S),b=y(L,_[M],x,S),g.push(L),g.push(z),g.push(b)),T||(L=_[M+2].clone(),z=y(L,_[M],x,S),b=y(L,_[M+1],x,S),g.push(L),g.push(z),g.push(b));break}}}return g}function y(_,x,g,S){const M=_.position.dot(g)-S,E=x.position.dot(g)-S,P=M/(M-E);return new _T(new F(_.position.x+P*(x.position.x-_.position.x),_.position.y+P*(x.position.y-_.position.y),_.position.z+P*(x.position.z-_.position.z)),new F(_.normal.x+P*(x.normal.x-_.normal.x),_.normal.y+P*(x.normal.y-_.normal.y),_.normal.z+P*(x.normal.z-_.normal.z)))}}}class _T{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}const a_=new WeakMap;class f6 extends pr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new ri(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const f=t.attributeTypes[l];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=f.name)}const r=JSON.stringify(t);if(a_.has(e)){const l=a_.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((f,h)=>{i._callbacks[s]={resolve:f,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),a_.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new At;e.index&&t.setIndex(new Gt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Gt(o,a))}return t}_loadLibrary(e,t){const r=new ri(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=h6.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function h6(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,f=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=t(d,p,m,f),_=y.attributes.map(x=>x.array.buffer);y.index&&_.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},_)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,f){const h=f.attributeIDs,d=f.attributeTypes;let p,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(y===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const _={index:null,attributes:[]};for(const x in h){const g=self[d[x]];let S,M;if(f.useUniqueIDs)M=h[x],S=a.GetAttributeByUniqueId(p,M);else{if(M=a.GetAttributeId(p,o[h[x]]),M===-1)continue;S=a.GetAttribute(p,M)}_.attributes.push(i(o,a,p,x,g,S))}return y===o.TRIANGULAR_MESH&&(_.index=r(o,a,p)),o.destroy(p),_}function r(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,f,h,d){const p=d.num_components(),y=l.num_points()*p,_=y*h.BYTES_PER_ELEMENT,x=s(o,h),g=o._malloc(_);a.GetAttributeDataArrayForAllPoints(l,d,x,_,g);const S=new h(o.HEAPF32.buffer,g,y).slice();return o._free(g),{name:f,array:S,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Mm;const l_=()=>{if(Mm)return Mm;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let y=0;y<d.length;++y){const _=d.charCodeAt(y);p[y]=_>96?_-71:_>64?_-65:_>47?_+4:_>46?63:62}let m=0;for(let y=0;y<d.length;++y)p[m++]=p[y]<60?r[p[y]]:(p[y]-60)*64+p[++y];return p.buffer.slice(0,m)}function l(d,p,m,y,_,x){const g=s.exports.sbrk,S=m+3&-4,M=g(S*y),E=g(_.length),P=new Uint8Array(s.exports.memory.buffer);P.set(_,E);const T=d(M,m,y,E,_.length);if(T===0&&x&&x(M,S,y),p.set(P.subarray(M,M+m*y)),g(M-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Mm={ready:o,supported:!0,decodeVertexBuffer(d,p,m,y,_){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,y,s.exports[f[_]])},decodeIndexBuffer(d,p,m,y){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,y)},decodeIndexSequence(d,p,m,y){l(s.exports.meshopt_decodeIndexSequence,d,p,m,y)},decodeGltfBuffer(d,p,m,y,_,x){l(s.exports[h[_]],d,p,m,y,s.exports[f[x]])}},Mm},c_=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function HS(n,e){const t=fs(s=>s.gl),r=sa(ed,c_(n)?Object.values(n):n);return ce.useLayoutEffect(()=>{e==null||e(r)},[e]),ce.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(r)?s=r:r instanceof Zt?s=[r]:c_(r)&&(s=Object.values(r)),s.forEach(o=>{o instanceof Zt&&t.initTexture(o)})}},[t,r]),ce.useMemo(()=>{if(c_(n)){const s={};let o=0;for(const a in n)s[a]=r[o++];return s}else return r},[n,r])}HS.preload=n=>sa.preload(ed,n);HS.clear=n=>sa.clear(ed,n);function d6(n){return Array.isArray(n)}function u_(n=[0,0,0]){return d6(n)?n:n instanceof F||n instanceof Er?[n.x,n.y,n.z]:[n,n,n]}const p6=ce.forwardRef(function({debug:e,depthTest:t=!1,polygonOffsetFactor:r=-10,map:i,mesh:s,children:o,position:a,rotation:l,scale:f,...h},d){const p=ce.useRef(null);ce.useImperativeHandle(d,()=>p.current);const m=ce.useRef(null);return ce.useLayoutEffect(()=>{const y=(s==null?void 0:s.current)||p.current.parent,_=p.current;if(!(y instanceof En))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const x={position:new F,rotation:new Er,scale:new F(1,1,1)};if(y){hs(x,{position:a,scale:f});const g=y.matrixWorld.clone();if(y.matrixWorld.identity(),!l||typeof l=="number"){const S=new Dt;S.position.copy(x.position),S.lookAt(y.position),typeof l=="number"&&S.rotateZ(l),hs(x,{rotation:S.rotation})}else hs(x,{rotation:l});return _.geometry=new u6(y,x.position,x.rotation,x.scale),m.current&&(hs(m.current,x),m.current.traverse(S=>S.raycast=()=>null)),y.matrixWorld=g,()=>{_.geometry.dispose()}}},[s,...u_(a),...u_(f),...u_(l)]),ce.createElement("mesh",Lh({ref:p,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":r,"material-depthTest":t,"material-map":i},h),o,e&&ce.createElement("mesh",{ref:m},ce.createElement("boxGeometry",null),ce.createElement("meshNormalMaterial",{wireframe:!0}),ce.createElement("axesHelper",null)))});let wm=null,OL="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function NL(n,e,t){return r=>{t&&t(r),n&&(wm||(wm=new f6),wm.setDecoderPath(typeof n=="string"?n:OL),r.setDRACOLoader(wm)),e&&r.setMeshoptDecoder(typeof l_=="function"?l_():l_)}}function uv(n,e=!0,t=!0,r){return sa(kS,n,NL(e,t,r))}uv.preload=(n,e=!0,t=!0,r)=>sa.preload(kS,n,NL(e,t,r));uv.clear=n=>sa.clear(kS,n);uv.setDecoderPath=n=>{OL=n};const m6=ce.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...f},h)=>{const d=fs(T=>T.invalidate),p=fs(T=>T.camera),m=fs(T=>T.gl),y=fs(T=>T.events),_=fs(T=>T.setEvents),x=fs(T=>T.set),g=fs(T=>T.get),S=fs(T=>T.performance),M=e||p,E=r||y.connected||m.domElement,P=ce.useMemo(()=>new T9(M),[M]);return bL(()=>{P.enabled&&P.update()},-1),ce.useEffect(()=>(s&&P.connect(s===!0?E:s),P.connect(E),()=>void P.dispose()),[s,E,t,P,d]),ce.useEffect(()=>{const T=z=>{d(),t&&S.regress(),o&&o(z)},B=z=>{a&&a(z)},L=z=>{l&&l(z)};return P.addEventListener("change",T),P.addEventListener("start",B),P.addEventListener("end",L),()=>{P.removeEventListener("start",B),P.removeEventListener("end",L),P.removeEventListener("change",T)}},[o,a,l,P,d,_]),ce.useEffect(()=>{if(n){const T=g().controls;return x({controls:P}),()=>x({controls:T})}},[n,P]),ce.createElement("primitive",Lh({ref:h,object:P,enableDamping:i},f))});var UL={exports:{}},g6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",v6=g6,y6=v6;function kL(){}function HL(){}HL.resetWarningCache=kL;var x6=function(){function n(r,i,s,o,a,l){if(l!==y6){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:HL,resetWarningCache:kL};return t.PropTypes=t,t};UL.exports=x6();var _6=UL.exports;const Le=p0(_6),A6=""+new URL("logo-CKOiOFsQ.png",import.meta.url).href,S6=""+new URL("save-BvRz7GhI.png",import.meta.url).href,M6=""+new URL("file-DqXcCLX0.png",import.meta.url).href,w6=""+new URL("colors-Dog1YkVi.png",import.meta.url).href,E6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAABDCAYAAADHyrhzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJXSURBVHgB3duNTcMwEIbhlAnYoB2BDToCI9wIHaEjdATYJGyAmIARGOHDFjk4wk/zOU7iu1eKqtL82E+LoIZ23SgAt3nrgpfmuP/vwWPaenz1nL/WBWp4oh/S9jbM8TVt5/FOR/yddAFK8zgMk/+ti93xGf/nGuQKhHbUl86UXIJMhMidbojzPnoDyRDppk/bgTmox/RcgBCvCG2vBx7B1TRIAcRlfAIBV5MgBRAPf51IwNUUSDUIc0IBVxMg1SHMiQVcm4IsBmEuIODaBGRxCHMhAdeqIKtBmAsKuFYBWR3CXFjAtSjIZhBmAAKuRUA2hzADEXBVBWkGwgxIwFUFpDkIMzAB1yyQZiHMAAVcRSDNQ5iBCrgoEDcQZsACrkkg7iC02iBuIbRaIO4htLkgYSC0UpBwEFoByDkkhFYAEhNCWwDEJ4RWEcQ3hFYBJAaENgMkFoSWJnYCV99FDPzvEVrTf8qkmwERC6QCRAyQihC+QRaA8AlSANGDywcICt99Isj/h3yGmW/Dw4Cg0nqEexBUXphxC4KFVqjcgWDhpTo3IFhpzbJ5EKy8eNssCDZaxW4OBBsv5zcDsjWEGYeAqy5IKxBmPAKuOiCtQZhxCbjmgbQKYcYn4CoDaR3CjFPAxYF4gTDjFXBNA/EGoVUH8QqhVQPxDqHNBokCoc0CwcdHokNAaCRI/jj4rR4YCkIjQUS/RcJBaATIWQ94iwihTQS5151PUSG0KyCv450vv+x06QKVn338/KmZ7+/z47vRzod0cz/cfdntdk9dsIY53qUtA3yb4zvNLfLeAltkrQAAAABJRU5ErkJggg==",AT=({img:n,active:e,color:t,ind:r,changeTab:i})=>$e.jsx("button",{type:"button",className:`flex justify-center items-center md:w-[50px] w-[40px] md:h-[50px] h-[40px] rounded-full
      } ${!e&&"md:hover:bg-gray-700"}`,style:{backgroundColor:e?"rgb(74, 74, 74)":""},onClick:()=>{i(r)},children:$e.jsx("img",{className:"md:w-[35px] w-[30px]",draggable:!1,src:n,alt:"icon"})}),ST=({img:n,active:e,color:t,ind:r,handleClick:i})=>$e.jsx("button",{type:"button",className:`flex justify-center items-center md:w-[50px] w-[40px] md:h-[50px] h-[40px] rounded-full
      } ${!e&&"md:hover:bg-gray-700"}`,style:{backgroundColor:e?"rgb(74, 74, 74)":""},onClick:()=>{i(r)},children:$e.jsx("img",{className:"md:w-[35px] w-[30px]",draggable:!1,src:n,alt:"icon"})}),cc=({active:n,color:e,ind:t,text:r,handleClick:i})=>$e.jsx("button",{type:"button",className:`flex text-white md:text-[20px] text-[18px] justify-center items-center md:w-[50px] w-[40px] md:h-[50px] h-[40px] rounded-full
      } ${!n&&"md:hover:bg-gray-700"}`,style:{backgroundColor:n?"rgb(74, 74, 74)":""},onClick:()=>{i(t)},children:r});var _i={},rd={},b6=typeof fp=="object"&&fp&&fp.Object===Object&&fp,zL=b6,C6=zL,T6=typeof self=="object"&&self&&self.Object===Object&&self,R6=C6||T6||Function("return this")(),Ss=R6,P6=Ss,B6=P6.Symbol,id=B6,MT=id,GL=Object.prototype,I6=GL.hasOwnProperty,L6=GL.toString,wf=MT?MT.toStringTag:void 0;function D6(n){var e=I6.call(n,wf),t=n[wf];try{n[wf]=void 0;var r=!0}catch{}var i=L6.call(n);return r&&(e?n[wf]=t:delete n[wf]),i}var F6=D6,O6=Object.prototype,N6=O6.toString;function U6(n){return N6.call(n)}var k6=U6,wT=id,H6=F6,z6=k6,G6="[object Null]",V6="[object Undefined]",ET=wT?wT.toStringTag:void 0;function W6(n){return n==null?n===void 0?V6:G6:ET&&ET in Object(n)?H6(n):z6(n)}var Al=W6,$6=Array.isArray,qi=$6;function X6(n){return n!=null&&typeof n=="object"}var so=X6,j6=Al,J6=qi,K6=so,Y6="[object String]";function Q6(n){return typeof n=="string"||!J6(n)&&K6(n)&&j6(n)==Y6}var Z6=Q6;function q6(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var eV=q6,tV=eV,nV=tV(),rV=nV;function iV(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var sV=iV,oV=Al,aV=so,lV="[object Arguments]";function cV(n){return aV(n)&&oV(n)==lV}var uV=cV,bT=uV,fV=so,VL=Object.prototype,hV=VL.hasOwnProperty,dV=VL.propertyIsEnumerable,pV=bT(function(){return arguments}())?bT:function(n){return fV(n)&&hV.call(n,"callee")&&!dV.call(n,"callee")},WL=pV,i0={exports:{}};function mV(){return!1}var gV=mV;i0.exports;(function(n,e){var t=Ss,r=gV,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,f=l||r;n.exports=f})(i0,i0.exports);var zS=i0.exports,vV=9007199254740991,yV=/^(?:0|[1-9]\d*)$/;function xV(n,e){var t=typeof n;return e=e??vV,!!e&&(t=="number"||t!="symbol"&&yV.test(n))&&n>-1&&n%1==0&&n<e}var $L=xV,_V=9007199254740991;function AV(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=_V}var GS=AV,SV=Al,MV=GS,wV=so,EV="[object Arguments]",bV="[object Array]",CV="[object Boolean]",TV="[object Date]",RV="[object Error]",PV="[object Function]",BV="[object Map]",IV="[object Number]",LV="[object Object]",DV="[object RegExp]",FV="[object Set]",OV="[object String]",NV="[object WeakMap]",UV="[object ArrayBuffer]",kV="[object DataView]",HV="[object Float32Array]",zV="[object Float64Array]",GV="[object Int8Array]",VV="[object Int16Array]",WV="[object Int32Array]",$V="[object Uint8Array]",XV="[object Uint8ClampedArray]",jV="[object Uint16Array]",JV="[object Uint32Array]",sn={};sn[HV]=sn[zV]=sn[GV]=sn[VV]=sn[WV]=sn[$V]=sn[XV]=sn[jV]=sn[JV]=!0;sn[EV]=sn[bV]=sn[UV]=sn[CV]=sn[kV]=sn[TV]=sn[RV]=sn[PV]=sn[BV]=sn[IV]=sn[LV]=sn[DV]=sn[FV]=sn[OV]=sn[NV]=!1;function KV(n){return wV(n)&&MV(n.length)&&!!sn[SV(n)]}var YV=KV;function QV(n){return function(e){return n(e)}}var VS=QV,s0={exports:{}};s0.exports;(function(n,e){var t=zL,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(s0,s0.exports);var WS=s0.exports,ZV=YV,qV=VS,CT=WS,TT=CT&&CT.isTypedArray,eW=TT?qV(TT):ZV,XL=eW,tW=sV,nW=WL,rW=qi,iW=zS,sW=$L,oW=XL,aW=Object.prototype,lW=aW.hasOwnProperty;function cW(n,e){var t=rW(n),r=!t&&nW(n),i=!t&&!r&&iW(n),s=!t&&!r&&!i&&oW(n),o=t||r||i||s,a=o?tW(n.length,String):[],l=a.length;for(var f in n)(e||lW.call(n,f))&&!(o&&(f=="length"||i&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||sW(f,l)))&&a.push(f);return a}var jL=cW,uW=Object.prototype;function fW(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||uW;return n===t}var $S=fW;function hW(n,e){return function(t){return n(e(t))}}var JL=hW,dW=JL,pW=dW(Object.keys,Object),mW=pW,gW=$S,vW=mW,yW=Object.prototype,xW=yW.hasOwnProperty;function _W(n){if(!gW(n))return vW(n);var e=[];for(var t in Object(n))xW.call(n,t)&&t!="constructor"&&e.push(t);return e}var AW=_W;function SW(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var wu=SW,MW=Al,wW=wu,EW="[object AsyncFunction]",bW="[object Function]",CW="[object GeneratorFunction]",TW="[object Proxy]";function RW(n){if(!wW(n))return!1;var e=MW(n);return e==bW||e==CW||e==EW||e==TW}var KL=RW,PW=KL,BW=GS;function IW(n){return n!=null&&BW(n.length)&&!PW(n)}var fv=IW,LW=jL,DW=AW,FW=fv;function OW(n){return FW(n)?LW(n):DW(n)}var sd=OW,NW=rV,UW=sd;function kW(n,e){return n&&NW(n,e,UW)}var YL=kW;function HW(n){return n}var QL=HW,zW=QL;function GW(n){return typeof n=="function"?n:zW}var VW=GW,WW=YL,$W=VW;function XW(n,e){return n&&WW(n,$W(e))}var XS=XW,jW=JL,JW=jW(Object.getPrototypeOf,Object),jS=JW,KW=Al,YW=jS,QW=so,ZW="[object Object]",qW=Function.prototype,e7=Object.prototype,ZL=qW.toString,t7=e7.hasOwnProperty,n7=ZL.call(Object);function r7(n){if(!QW(n)||KW(n)!=ZW)return!1;var e=YW(n);if(e===null)return!0;var t=t7.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&ZL.call(t)==n7}var i7=r7;function s7(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var qL=s7;function o7(){this.__data__=[],this.size=0}var a7=o7;function l7(n,e){return n===e||n!==n&&e!==e}var JS=l7,c7=JS;function u7(n,e){for(var t=n.length;t--;)if(c7(n[t][0],e))return t;return-1}var hv=u7,f7=hv,h7=Array.prototype,d7=h7.splice;function p7(n){var e=this.__data__,t=f7(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():d7.call(e,t,1),--this.size,!0}var m7=p7,g7=hv;function v7(n){var e=this.__data__,t=g7(e,n);return t<0?void 0:e[t][1]}var y7=v7,x7=hv;function _7(n){return x7(this.__data__,n)>-1}var A7=_7,S7=hv;function M7(n,e){var t=this.__data__,r=S7(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var w7=M7,E7=a7,b7=m7,C7=y7,T7=A7,R7=w7;function Eu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Eu.prototype.clear=E7;Eu.prototype.delete=b7;Eu.prototype.get=C7;Eu.prototype.has=T7;Eu.prototype.set=R7;var dv=Eu,P7=dv;function B7(){this.__data__=new P7,this.size=0}var I7=B7;function L7(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var D7=L7;function F7(n){return this.__data__.get(n)}var O7=F7;function N7(n){return this.__data__.has(n)}var U7=N7,k7=Ss,H7=k7["__core-js_shared__"],z7=H7,f_=z7,RT=function(){var n=/[^.]+$/.exec(f_&&f_.keys&&f_.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function G7(n){return!!RT&&RT in n}var V7=G7,W7=Function.prototype,$7=W7.toString;function X7(n){if(n!=null){try{return $7.call(n)}catch{}try{return n+""}catch{}}return""}var eD=X7,j7=KL,J7=V7,K7=wu,Y7=eD,Q7=/[\\^$.*+?()[\]{}|]/g,Z7=/^\[object .+?Constructor\]$/,q7=Function.prototype,e$=Object.prototype,t$=q7.toString,n$=e$.hasOwnProperty,r$=RegExp("^"+t$.call(n$).replace(Q7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function i$(n){if(!K7(n)||J7(n))return!1;var e=j7(n)?r$:Z7;return e.test(Y7(n))}var s$=i$;function o$(n,e){return n==null?void 0:n[e]}var a$=o$,l$=s$,c$=a$;function u$(n,e){var t=c$(n,e);return l$(t)?t:void 0}var Sl=u$,f$=Sl,h$=Ss,d$=f$(h$,"Map"),KS=d$,p$=Sl,m$=p$(Object,"create"),pv=m$,PT=pv;function g$(){this.__data__=PT?PT(null):{},this.size=0}var v$=g$;function y$(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var x$=y$,_$=pv,A$="__lodash_hash_undefined__",S$=Object.prototype,M$=S$.hasOwnProperty;function w$(n){var e=this.__data__;if(_$){var t=e[n];return t===A$?void 0:t}return M$.call(e,n)?e[n]:void 0}var E$=w$,b$=pv,C$=Object.prototype,T$=C$.hasOwnProperty;function R$(n){var e=this.__data__;return b$?e[n]!==void 0:T$.call(e,n)}var P$=R$,B$=pv,I$="__lodash_hash_undefined__";function L$(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=B$&&e===void 0?I$:e,this}var D$=L$,F$=v$,O$=x$,N$=E$,U$=P$,k$=D$;function bu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}bu.prototype.clear=F$;bu.prototype.delete=O$;bu.prototype.get=N$;bu.prototype.has=U$;bu.prototype.set=k$;var H$=bu,BT=H$,z$=dv,G$=KS;function V$(){this.size=0,this.__data__={hash:new BT,map:new(G$||z$),string:new BT}}var W$=V$;function $$(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var X$=$$,j$=X$;function J$(n,e){var t=n.__data__;return j$(e)?t[typeof e=="string"?"string":"hash"]:t.map}var mv=J$,K$=mv;function Y$(n){var e=K$(this,n).delete(n);return this.size-=e?1:0,e}var Q$=Y$,Z$=mv;function q$(n){return Z$(this,n).get(n)}var eX=q$,tX=mv;function nX(n){return tX(this,n).has(n)}var rX=nX,iX=mv;function sX(n,e){var t=iX(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var oX=sX,aX=W$,lX=Q$,cX=eX,uX=rX,fX=oX;function Cu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Cu.prototype.clear=aX;Cu.prototype.delete=lX;Cu.prototype.get=cX;Cu.prototype.has=uX;Cu.prototype.set=fX;var YS=Cu,hX=dv,dX=KS,pX=YS,mX=200;function gX(n,e){var t=this.__data__;if(t instanceof hX){var r=t.__data__;if(!dX||r.length<mX-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new pX(r)}return t.set(n,e),this.size=t.size,this}var vX=gX,yX=dv,xX=I7,_X=D7,AX=O7,SX=U7,MX=vX;function Tu(n){var e=this.__data__=new yX(n);this.size=e.size}Tu.prototype.clear=xX;Tu.prototype.delete=_X;Tu.prototype.get=AX;Tu.prototype.has=SX;Tu.prototype.set=MX;var QS=Tu,wX="__lodash_hash_undefined__";function EX(n){return this.__data__.set(n,wX),this}var bX=EX;function CX(n){return this.__data__.has(n)}var TX=CX,RX=YS,PX=bX,BX=TX;function o0(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new RX;++e<t;)this.add(n[e])}o0.prototype.add=o0.prototype.push=PX;o0.prototype.has=BX;var IX=o0;function LX(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var DX=LX;function FX(n,e){return n.has(e)}var OX=FX,NX=IX,UX=DX,kX=OX,HX=1,zX=2;function GX(n,e,t,r,i,s){var o=t&HX,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var f=s.get(n),h=s.get(e);if(f&&h)return f==e&&h==n;var d=-1,p=!0,m=t&zX?new NX:void 0;for(s.set(n,e),s.set(e,n);++d<a;){var y=n[d],_=e[d];if(r)var x=o?r(_,y,d,e,n,s):r(y,_,d,n,e,s);if(x!==void 0){if(x)continue;p=!1;break}if(m){if(!UX(e,function(g,S){if(!kX(m,S)&&(y===g||i(y,g,t,r,s)))return m.push(S)})){p=!1;break}}else if(!(y===_||i(y,_,t,r,s))){p=!1;break}}return s.delete(n),s.delete(e),p}var tD=GX,VX=Ss,WX=VX.Uint8Array,nD=WX;function $X(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var XX=$X;function jX(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var JX=jX,IT=id,LT=nD,KX=JS,YX=tD,QX=XX,ZX=JX,qX=1,ej=2,tj="[object Boolean]",nj="[object Date]",rj="[object Error]",ij="[object Map]",sj="[object Number]",oj="[object RegExp]",aj="[object Set]",lj="[object String]",cj="[object Symbol]",uj="[object ArrayBuffer]",fj="[object DataView]",DT=IT?IT.prototype:void 0,h_=DT?DT.valueOf:void 0;function hj(n,e,t,r,i,s,o){switch(t){case fj:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case uj:return!(n.byteLength!=e.byteLength||!s(new LT(n),new LT(e)));case tj:case nj:case sj:return KX(+n,+e);case rj:return n.name==e.name&&n.message==e.message;case oj:case lj:return n==e+"";case ij:var a=QX;case aj:var l=r&qX;if(a||(a=ZX),n.size!=e.size&&!l)return!1;var f=o.get(n);if(f)return f==e;r|=ej,o.set(n,e);var h=YX(a(n),a(e),r,i,s,o);return o.delete(n),h;case cj:if(h_)return h_.call(n)==h_.call(e)}return!1}var dj=hj;function pj(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var rD=pj,mj=rD,gj=qi;function vj(n,e,t){var r=e(n);return gj(n)?r:mj(r,t(n))}var iD=vj;function yj(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var xj=yj;function _j(){return[]}var sD=_j,Aj=xj,Sj=sD,Mj=Object.prototype,wj=Mj.propertyIsEnumerable,FT=Object.getOwnPropertySymbols,Ej=FT?function(n){return n==null?[]:(n=Object(n),Aj(FT(n),function(e){return wj.call(n,e)}))}:Sj,ZS=Ej,bj=iD,Cj=ZS,Tj=sd;function Rj(n){return bj(n,Tj,Cj)}var oD=Rj,OT=oD,Pj=1,Bj=Object.prototype,Ij=Bj.hasOwnProperty;function Lj(n,e,t,r,i,s){var o=t&Pj,a=OT(n),l=a.length,f=OT(e),h=f.length;if(l!=h&&!o)return!1;for(var d=l;d--;){var p=a[d];if(!(o?p in e:Ij.call(e,p)))return!1}var m=s.get(n),y=s.get(e);if(m&&y)return m==e&&y==n;var _=!0;s.set(n,e),s.set(e,n);for(var x=o;++d<l;){p=a[d];var g=n[p],S=e[p];if(r)var M=o?r(S,g,p,e,n,s):r(g,S,p,n,e,s);if(!(M===void 0?g===S||i(g,S,t,r,s):M)){_=!1;break}x||(x=p=="constructor")}if(_&&!x){var E=n.constructor,P=e.constructor;E!=P&&"constructor"in n&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof P=="function"&&P instanceof P)&&(_=!1)}return s.delete(n),s.delete(e),_}var Dj=Lj,Fj=Sl,Oj=Ss,Nj=Fj(Oj,"DataView"),Uj=Nj,kj=Sl,Hj=Ss,zj=kj(Hj,"Promise"),Gj=zj,Vj=Sl,Wj=Ss,$j=Vj(Wj,"Set"),Xj=$j,jj=Sl,Jj=Ss,Kj=jj(Jj,"WeakMap"),Yj=Kj,N1=Uj,U1=KS,k1=Gj,H1=Xj,z1=Yj,aD=Al,Ru=eD,NT="[object Map]",Qj="[object Object]",UT="[object Promise]",kT="[object Set]",HT="[object WeakMap]",zT="[object DataView]",Zj=Ru(N1),qj=Ru(U1),eJ=Ru(k1),tJ=Ru(H1),nJ=Ru(z1),Fa=aD;(N1&&Fa(new N1(new ArrayBuffer(1)))!=zT||U1&&Fa(new U1)!=NT||k1&&Fa(k1.resolve())!=UT||H1&&Fa(new H1)!=kT||z1&&Fa(new z1)!=HT)&&(Fa=function(n){var e=aD(n),t=e==Qj?n.constructor:void 0,r=t?Ru(t):"";if(r)switch(r){case Zj:return zT;case qj:return NT;case eJ:return UT;case tJ:return kT;case nJ:return HT}return e});var gv=Fa,d_=QS,rJ=tD,iJ=dj,sJ=Dj,GT=gv,VT=qi,WT=zS,oJ=XL,aJ=1,$T="[object Arguments]",XT="[object Array]",Em="[object Object]",lJ=Object.prototype,jT=lJ.hasOwnProperty;function cJ(n,e,t,r,i,s){var o=VT(n),a=VT(e),l=o?XT:GT(n),f=a?XT:GT(e);l=l==$T?Em:l,f=f==$T?Em:f;var h=l==Em,d=f==Em,p=l==f;if(p&&WT(n)){if(!WT(e))return!1;o=!0,h=!1}if(p&&!h)return s||(s=new d_),o||oJ(n)?rJ(n,e,t,r,i,s):iJ(n,e,l,t,r,i,s);if(!(t&aJ)){var m=h&&jT.call(n,"__wrapped__"),y=d&&jT.call(e,"__wrapped__");if(m||y){var _=m?n.value():n,x=y?e.value():e;return s||(s=new d_),i(_,x,t,r,s)}}return p?(s||(s=new d_),sJ(n,e,t,r,i,s)):!1}var uJ=cJ,fJ=uJ,JT=so;function lD(n,e,t,r,i){return n===e?!0:n==null||e==null||!JT(n)&&!JT(e)?n!==n&&e!==e:fJ(n,e,t,r,lD,i)}var cD=lD,hJ=QS,dJ=cD,pJ=1,mJ=2;function gJ(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],f=n[l],h=a[1];if(o&&a[2]){if(f===void 0&&!(l in n))return!1}else{var d=new hJ;if(r)var p=r(f,h,l,n,e,d);if(!(p===void 0?dJ(h,f,pJ|mJ,r,d):p))return!1}}return!0}var vJ=gJ,yJ=wu;function xJ(n){return n===n&&!yJ(n)}var uD=xJ,_J=uD,AJ=sd;function SJ(n){for(var e=AJ(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,_J(i)]}return e}var MJ=SJ;function wJ(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var fD=wJ,EJ=vJ,bJ=MJ,CJ=fD;function TJ(n){var e=bJ(n);return e.length==1&&e[0][2]?CJ(e[0][0],e[0][1]):function(t){return t===n||EJ(t,n,e)}}var RJ=TJ,PJ=Al,BJ=so,IJ="[object Symbol]";function LJ(n){return typeof n=="symbol"||BJ(n)&&PJ(n)==IJ}var qS=LJ,DJ=qi,FJ=qS,OJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NJ=/^\w*$/;function UJ(n,e){if(DJ(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||FJ(n)?!0:NJ.test(n)||!OJ.test(n)||e!=null&&n in Object(e)}var eM=UJ,hD=YS,kJ="Expected a function";function tM(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(kJ);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(tM.Cache||hD),t}tM.Cache=hD;var HJ=tM,zJ=HJ,GJ=500;function VJ(n){var e=zJ(n,function(r){return t.size===GJ&&t.clear(),r}),t=e.cache;return e}var WJ=VJ,$J=WJ,XJ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jJ=/\\(\\)?/g,JJ=$J(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(XJ,function(t,r,i,s){e.push(i?s.replace(jJ,"$1"):r||t)}),e}),KJ=JJ,KT=id,YJ=qL,QJ=qi,ZJ=qS,qJ=1/0,YT=KT?KT.prototype:void 0,QT=YT?YT.toString:void 0;function dD(n){if(typeof n=="string")return n;if(QJ(n))return YJ(n,dD)+"";if(ZJ(n))return QT?QT.call(n):"";var e=n+"";return e=="0"&&1/n==-qJ?"-0":e}var eK=dD,tK=eK;function nK(n){return n==null?"":tK(n)}var rK=nK,iK=qi,sK=eM,oK=KJ,aK=rK;function lK(n,e){return iK(n)?n:sK(n,e)?[n]:oK(aK(n))}var pD=lK,cK=qS,uK=1/0;function fK(n){if(typeof n=="string"||cK(n))return n;var e=n+"";return e=="0"&&1/n==-uK?"-0":e}var vv=fK,hK=pD,dK=vv;function pK(n,e){e=hK(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[dK(e[t++])];return t&&t==r?n:void 0}var mD=pK,mK=mD;function gK(n,e,t){var r=n==null?void 0:mK(n,e);return r===void 0?t:r}var vK=gK;function yK(n,e){return n!=null&&e in Object(n)}var xK=yK,_K=pD,AK=WL,SK=qi,MK=$L,wK=GS,EK=vv;function bK(n,e,t){e=_K(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=EK(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&wK(i)&&MK(o,i)&&(SK(n)||AK(n)))}var CK=bK,TK=xK,RK=CK;function PK(n,e){return n!=null&&RK(n,e,TK)}var BK=PK,IK=cD,LK=vK,DK=BK,FK=eM,OK=uD,NK=fD,UK=vv,kK=1,HK=2;function zK(n,e){return FK(n)&&OK(e)?NK(UK(n),e):function(t){var r=LK(t,n);return r===void 0&&r===e?DK(t,n):IK(e,r,kK|HK)}}var GK=zK;function VK(n){return function(e){return e==null?void 0:e[n]}}var WK=VK,$K=mD;function XK(n){return function(e){return $K(e,n)}}var jK=XK,JK=WK,KK=jK,YK=eM,QK=vv;function ZK(n){return YK(n)?JK(QK(n)):KK(n)}var qK=ZK,eY=RJ,tY=GK,nY=QL,rY=qi,iY=qK;function sY(n){return typeof n=="function"?n:n==null?nY:typeof n=="object"?rY(n)?tY(n[0],n[1]):eY(n):iY(n)}var oY=sY,aY=fv;function lY(n,e){return function(t,r){if(t==null)return t;if(!aY(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var cY=lY,uY=YL,fY=cY,hY=fY(uY),dY=hY,pY=dY,mY=fv;function gY(n,e){var t=-1,r=mY(n)?Array(n.length):[];return pY(n,function(i,s,o){r[++t]=e(i,s,o)}),r}var vY=gY,yY=qL,xY=oY,_Y=vY,AY=qi;function SY(n,e){var t=AY(n)?yY:_Y;return t(n,xY(e))}var MY=SY;Object.defineProperty(rd,"__esModule",{value:!0});rd.flattenNames=void 0;var wY=Z6,EY=yv(wY),bY=XS,CY=yv(bY),TY=i7,RY=yv(TY),PY=MY,BY=yv(PY);function yv(n){return n&&n.__esModule?n:{default:n}}var IY=rd.flattenNames=function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return(0,BY.default)(e,function(r){Array.isArray(r)?n(r).map(function(i){return t.push(i)}):(0,RY.default)(r)?(0,CY.default)(r,function(i,s){i===!0&&t.push(s),t.push(s+"-"+i)}):(0,EY.default)(r)&&t.push(r)}),t};rd.default=IY;var od={};function LY(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var DY=LY,FY=Sl,OY=function(){try{var n=FY(Object,"defineProperty");return n({},"",{}),n}catch{}}(),NY=OY,ZT=NY;function UY(n,e,t){e=="__proto__"&&ZT?ZT(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var gD=UY,kY=gD,HY=JS,zY=Object.prototype,GY=zY.hasOwnProperty;function VY(n,e,t){var r=n[e];(!(GY.call(n,e)&&HY(r,t))||t===void 0&&!(e in n))&&kY(n,e,t)}var vD=VY,WY=vD,$Y=gD;function XY(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?$Y(t,a,l):WY(t,a,l)}return t}var xv=XY,jY=xv,JY=sd;function KY(n,e){return n&&jY(e,JY(e),n)}var YY=KY;function QY(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var ZY=QY,qY=wu,eQ=$S,tQ=ZY,nQ=Object.prototype,rQ=nQ.hasOwnProperty;function iQ(n){if(!qY(n))return tQ(n);var e=eQ(n),t=[];for(var r in n)r=="constructor"&&(e||!rQ.call(n,r))||t.push(r);return t}var sQ=iQ,oQ=jL,aQ=sQ,lQ=fv;function cQ(n){return lQ(n)?oQ(n,!0):aQ(n)}var nM=cQ,uQ=xv,fQ=nM;function hQ(n,e){return n&&uQ(e,fQ(e),n)}var dQ=hQ,a0={exports:{}};a0.exports;(function(n,e){var t=Ss,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(f,h){if(h)return f.slice();var d=f.length,p=a?a(d):new f.constructor(d);return f.copy(p),p}n.exports=l})(a0,a0.exports);var pQ=a0.exports;function mQ(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var gQ=mQ,vQ=xv,yQ=ZS;function xQ(n,e){return vQ(n,yQ(n),e)}var _Q=xQ,AQ=rD,SQ=jS,MQ=ZS,wQ=sD,EQ=Object.getOwnPropertySymbols,bQ=EQ?function(n){for(var e=[];n;)AQ(e,MQ(n)),n=SQ(n);return e}:wQ,yD=bQ,CQ=xv,TQ=yD;function RQ(n,e){return CQ(n,TQ(n),e)}var PQ=RQ,BQ=iD,IQ=yD,LQ=nM;function DQ(n){return BQ(n,LQ,IQ)}var FQ=DQ,OQ=Object.prototype,NQ=OQ.hasOwnProperty;function UQ(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&NQ.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var kQ=UQ,qT=nD;function HQ(n){var e=new n.constructor(n.byteLength);return new qT(e).set(new qT(n)),e}var rM=HQ,zQ=rM;function GQ(n,e){var t=e?zQ(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var VQ=GQ,WQ=/\w*$/;function $Q(n){var e=new n.constructor(n.source,WQ.exec(n));return e.lastIndex=n.lastIndex,e}var XQ=$Q,eR=id,tR=eR?eR.prototype:void 0,nR=tR?tR.valueOf:void 0;function jQ(n){return nR?Object(nR.call(n)):{}}var JQ=jQ,KQ=rM;function YQ(n,e){var t=e?KQ(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var QQ=YQ,ZQ=rM,qQ=VQ,eZ=XQ,tZ=JQ,nZ=QQ,rZ="[object Boolean]",iZ="[object Date]",sZ="[object Map]",oZ="[object Number]",aZ="[object RegExp]",lZ="[object Set]",cZ="[object String]",uZ="[object Symbol]",fZ="[object ArrayBuffer]",hZ="[object DataView]",dZ="[object Float32Array]",pZ="[object Float64Array]",mZ="[object Int8Array]",gZ="[object Int16Array]",vZ="[object Int32Array]",yZ="[object Uint8Array]",xZ="[object Uint8ClampedArray]",_Z="[object Uint16Array]",AZ="[object Uint32Array]";function SZ(n,e,t){var r=n.constructor;switch(e){case fZ:return ZQ(n);case rZ:case iZ:return new r(+n);case hZ:return qQ(n,t);case dZ:case pZ:case mZ:case gZ:case vZ:case yZ:case xZ:case _Z:case AZ:return nZ(n,t);case sZ:return new r;case oZ:case cZ:return new r(n);case aZ:return eZ(n);case lZ:return new r;case uZ:return tZ(n)}}var MZ=SZ,wZ=wu,rR=Object.create,EZ=function(){function n(){}return function(e){if(!wZ(e))return{};if(rR)return rR(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),bZ=EZ,CZ=bZ,TZ=jS,RZ=$S;function PZ(n){return typeof n.constructor=="function"&&!RZ(n)?CZ(TZ(n)):{}}var BZ=PZ,IZ=gv,LZ=so,DZ="[object Map]";function FZ(n){return LZ(n)&&IZ(n)==DZ}var OZ=FZ,NZ=OZ,UZ=VS,iR=WS,sR=iR&&iR.isMap,kZ=sR?UZ(sR):NZ,HZ=kZ,zZ=gv,GZ=so,VZ="[object Set]";function WZ(n){return GZ(n)&&zZ(n)==VZ}var $Z=WZ,XZ=$Z,jZ=VS,oR=WS,aR=oR&&oR.isSet,JZ=aR?jZ(aR):XZ,KZ=JZ,YZ=QS,QZ=DY,ZZ=vD,qZ=YY,eq=dQ,tq=pQ,nq=gQ,rq=_Q,iq=PQ,sq=oD,oq=FQ,aq=gv,lq=kQ,cq=MZ,uq=BZ,fq=qi,hq=zS,dq=HZ,pq=wu,mq=KZ,gq=sd,vq=nM,yq=1,xq=2,_q=4,xD="[object Arguments]",Aq="[object Array]",Sq="[object Boolean]",Mq="[object Date]",wq="[object Error]",_D="[object Function]",Eq="[object GeneratorFunction]",bq="[object Map]",Cq="[object Number]",AD="[object Object]",Tq="[object RegExp]",Rq="[object Set]",Pq="[object String]",Bq="[object Symbol]",Iq="[object WeakMap]",Lq="[object ArrayBuffer]",Dq="[object DataView]",Fq="[object Float32Array]",Oq="[object Float64Array]",Nq="[object Int8Array]",Uq="[object Int16Array]",kq="[object Int32Array]",Hq="[object Uint8Array]",zq="[object Uint8ClampedArray]",Gq="[object Uint16Array]",Vq="[object Uint32Array]",qt={};qt[xD]=qt[Aq]=qt[Lq]=qt[Dq]=qt[Sq]=qt[Mq]=qt[Fq]=qt[Oq]=qt[Nq]=qt[Uq]=qt[kq]=qt[bq]=qt[Cq]=qt[AD]=qt[Tq]=qt[Rq]=qt[Pq]=qt[Bq]=qt[Hq]=qt[zq]=qt[Gq]=qt[Vq]=!0;qt[wq]=qt[_D]=qt[Iq]=!1;function $m(n,e,t,r,i,s){var o,a=e&yq,l=e&xq,f=e&_q;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!pq(n))return n;var h=fq(n);if(h){if(o=lq(n),!a)return nq(n,o)}else{var d=aq(n),p=d==_D||d==Eq;if(hq(n))return tq(n,a);if(d==AD||d==xD||p&&!i){if(o=l||p?{}:uq(n),!a)return l?iq(n,eq(o,n)):rq(n,qZ(o,n))}else{if(!qt[d])return i?n:{};o=cq(n,d,a)}}s||(s=new YZ);var m=s.get(n);if(m)return m;s.set(n,o),mq(n)?n.forEach(function(x){o.add($m(x,e,t,x,n,s))}):dq(n)&&n.forEach(function(x,g){o.set(g,$m(x,e,t,g,n,s))});var y=f?l?oq:sq:l?vq:gq,_=h?void 0:y(n);return QZ(_||n,function(x,g){_&&(g=x,x=n[g]),ZZ(o,g,$m(x,e,t,g,n,s))}),o}var Wq=$m,$q=Wq,Xq=1,jq=4;function Jq(n){return $q(n,Xq|jq)}var Kq=Jq;Object.defineProperty(od,"__esModule",{value:!0});od.mergeClasses=void 0;var Yq=XS,Qq=SD(Yq),Zq=Kq,qq=SD(Zq),eee=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function SD(n){return n&&n.__esModule?n:{default:n}}var tee=od.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=e.default&&(0,qq.default)(e.default)||{};return t.map(function(i){var s=e[i];return s&&(0,Qq.default)(s,function(o,a){r[a]||(r[a]={}),r[a]=eee({},r[a],s[a])}),i}),r};od.default=tee;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});ad.autoprefix=void 0;var nee=XS,lR=iee(nee),ree=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function iee(n){return n&&n.__esModule?n:{default:n}}var see={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},oee=ad.autoprefix=function(e){var t={};return(0,lR.default)(e,function(r,i){var s={};(0,lR.default)(r,function(o,a){var l=see[a];l?s=ree({},s,l(o)):s[a]=o}),t[i]=s}),t};ad.default=oee;var ld={};Object.defineProperty(ld,"__esModule",{value:!0});ld.hover=void 0;var aee=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lee=ce,p_=cee(lee);function cee(n){return n&&n.__esModule?n:{default:n}}function uee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cR(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function fee(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var hee=ld.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){fee(i,r);function i(){var s,o,a,l;uee(this,i);for(var f=arguments.length,h=Array(f),d=0;d<f;d++)h[d]=arguments[d];return l=(o=(a=cR(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(h))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return p_.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},p_.default.createElement(e,aee({},a.props,a.state)))},o),cR(a,l)}return i}(p_.default.Component)};ld.default=hee;var cd={};Object.defineProperty(cd,"__esModule",{value:!0});cd.active=void 0;var dee=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pee=ce,m_=mee(pee);function mee(n){return n&&n.__esModule?n:{default:n}}function gee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function uR(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function vee(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var yee=cd.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){vee(i,r);function i(){var s,o,a,l;gee(this,i);for(var f=arguments.length,h=Array(f),d=0;d<f;d++)h[d]=arguments[d];return l=(o=(a=uR(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(h))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return m_.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},m_.default.createElement(e,dee({},a.props,a.state)))},o),uR(a,l)}return i}(m_.default.Component)};cd.default=yee;var iM={};Object.defineProperty(iM,"__esModule",{value:!0});var xee=function(e,t){var r={},i=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[o]=a};return e===0&&i("first-child"),e===t-1&&i("last-child"),(e===0||e%2===0)&&i("even"),Math.abs(e%2)===1&&i("odd"),i("nth-child",e),r};iM.default=xee;Object.defineProperty(_i,"__esModule",{value:!0});_i.ReactCSS=_i.loop=_i.handleActive=sM=_i.handleHover=_i.hover=void 0;var _ee=rd,Aee=Pu(_ee),See=od,Mee=Pu(See),wee=ad,Eee=Pu(wee),bee=ld,MD=Pu(bee),Cee=cd,Tee=Pu(Cee),Ree=iM,Pee=Pu(Ree);function Pu(n){return n&&n.__esModule?n:{default:n}}_i.hover=MD.default;var sM=_i.handleHover=MD.default;_i.handleActive=Tee.default;_i.loop=Pee.default;var Bee=_i.ReactCSS=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=(0,Aee.default)(r),o=(0,Mee.default)(e,s);return(0,Eee.default)(o)},xt=_i.default=Bee,Iee=function(e,t,r,i,s){var o=s.clientWidth,a=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=l-(s.getBoundingClientRect().left+window.pageXOffset),d=f-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var p=void 0;if(d<0?p=0:d>a?p=1:p=Math.round(d*100/a)/100,t.a!==p)return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}else{var m=void 0;if(h<0?m=0:h>o?m=1:m=Math.round(h*100/o)/100,i!==m)return{h:t.h,s:t.s,l:t.l,a:m,source:"rgb"}}return null},g_={},Lee=function(e,t,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=t,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),s.toDataURL()):null},Dee=function(e,t,r,i){var s=e+"-"+t+"-"+r+(i?"-server":"");if(g_[s])return g_[s];var o=Lee(e,t,r,i);return g_[s]=o,o},fR=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bu=function(e){var t=e.white,r=e.grey,i=e.size,s=e.renderers,o=e.borderRadius,a=e.boxShadow,l=e.children,f=xt({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+Dee(t,r,i,s.canvas)+") center left"}}});return ce.isValidElement(l)?H.cloneElement(l,fR({},l.props,{style:fR({},l.props.style,f.grid)})):H.createElement("div",{style:f.grid})};Bu.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var Fee=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Oee=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Nee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function hR(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Uee(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var oM=function(n){Uee(e,n);function e(){var t,r,i,s;Nee(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=hR(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(f){var h=Iee(f,i.props.hsl,i.props.direction,i.props.a,i.container);h&&typeof i.props.onChange=="function"&&i.props.onChange(h,f)},i.handleMouseDown=function(f){i.handleChange(f),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),hR(i,s)}return Oee(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=xt({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:Fee({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return H.createElement("div",{style:s.alpha},H.createElement("div",{style:s.checkboard},H.createElement(Bu,{renderers:this.props.renderers})),H.createElement("div",{style:s.gradient}),H.createElement("div",{style:s.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},H.createElement("div",{style:s.pointer},this.props.pointer?H.createElement(this.props.pointer,this.props):H.createElement("div",{style:s.slider}))))}}]),e}(ce.PureComponent||ce.Component),kee=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Hee(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Gee(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Vee(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Wee=1,wD=38,$ee=40,Xee=[wD,$ee],jee=function(e){return Xee.indexOf(e)>-1},Jee=function(e){return Number(String(e).replace(/%/g,""))},Kee=1,Ft=function(n){Vee(e,n);function e(t){zee(this,e);var r=Gee(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=Jee(i.target.value);if(!isNaN(s)&&jee(i.keyCode)){var o=r.getArrowOffset(),a=i.keyCode===wD?s+o:s-o;r.setUpdatedValue(a,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},r.inputId="rc-editable-input-"+Kee++,r}return kee(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return Hee({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Wee}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=xt({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return H.createElement("div",{style:i.wrap},H.createElement("input",{id:this.inputId,style:i.input,ref:function(o){return r.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?H.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(ce.PureComponent||ce.Component),Yee=function(e,t,r,i){var s=i.clientWidth,o=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=a-(i.getBoundingClientRect().left+window.pageXOffset),h=l-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var d=void 0;if(h<0)d=359;else if(h>o)d=0;else{var p=-(h*100/o)+100;d=360*p/100}if(r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var m=void 0;if(f<0)m=0;else if(f>s)m=359;else{var y=f*100/s;m=360*y/100}if(r.h!==m)return{h:m,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},Qee=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Zee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dR(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function qee(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Iu=function(n){qee(e,n);function e(){var t,r,i,s;Zee(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=dR(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(f){var h=Yee(f,i.props.direction,i.props.hsl,i.container);h&&typeof i.props.onChange=="function"&&i.props.onChange(h,f)},i.handleMouseDown=function(f){i.handleChange(f),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),dR(i,s)}return Qee(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,o=xt({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return H.createElement("div",{style:o.hue},H.createElement("div",{className:"hue-"+s,style:o.container,ref:function(l){return r.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},H.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),H.createElement("div",{style:o.pointer},this.props.pointer?H.createElement(this.props.pointer,this.props):H.createElement("div",{style:o.slider}))))}}]),e}(ce.PureComponent||ce.Component);function ete(){this.__data__=[],this.size=0}function ud(n,e){return n===e||n!==n&&e!==e}function _v(n,e){for(var t=n.length;t--;)if(ud(n[t][0],e))return t;return-1}var tte=Array.prototype,nte=tte.splice;function rte(n){var e=this.__data__,t=_v(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():nte.call(e,t,1),--this.size,!0}function ite(n){var e=this.__data__,t=_v(e,n);return t<0?void 0:e[t][1]}function ste(n){return _v(this.__data__,n)>-1}function ote(n,e){var t=this.__data__,r=_v(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function oo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}oo.prototype.clear=ete;oo.prototype.delete=rte;oo.prototype.get=ite;oo.prototype.has=ste;oo.prototype.set=ote;function ate(){this.__data__=new oo,this.size=0}function lte(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function cte(n){return this.__data__.get(n)}function ute(n){return this.__data__.has(n)}var ED=typeof global=="object"&&global&&global.Object===Object&&global,fte=typeof self=="object"&&self&&self.Object===Object&&self,es=ED||fte||Function("return this")(),Qo=es.Symbol,bD=Object.prototype,hte=bD.hasOwnProperty,dte=bD.toString,Ef=Qo?Qo.toStringTag:void 0;function pte(n){var e=hte.call(n,Ef),t=n[Ef];try{n[Ef]=void 0;var r=!0}catch{}var i=dte.call(n);return r&&(e?n[Ef]=t:delete n[Ef]),i}var mte=Object.prototype,gte=mte.toString;function vte(n){return gte.call(n)}var yte="[object Null]",xte="[object Undefined]",pR=Qo?Qo.toStringTag:void 0;function Ml(n){return n==null?n===void 0?xte:yte:pR&&pR in Object(n)?pte(n):vte(n)}function Ci(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var _te="[object AsyncFunction]",Ate="[object Function]",Ste="[object GeneratorFunction]",Mte="[object Proxy]";function aM(n){if(!Ci(n))return!1;var e=Ml(n);return e==Ate||e==Ste||e==_te||e==Mte}var v_=es["__core-js_shared__"],mR=function(){var n=/[^.]+$/.exec(v_&&v_.keys&&v_.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function wte(n){return!!mR&&mR in n}var Ete=Function.prototype,bte=Ete.toString;function wl(n){if(n!=null){try{return bte.call(n)}catch{}try{return n+""}catch{}}return""}var Cte=/[\\^$.*+?()[\]{}|]/g,Tte=/^\[object .+?Constructor\]$/,Rte=Function.prototype,Pte=Object.prototype,Bte=Rte.toString,Ite=Pte.hasOwnProperty,Lte=RegExp("^"+Bte.call(Ite).replace(Cte,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dte(n){if(!Ci(n)||wte(n))return!1;var e=aM(n)?Lte:Tte;return e.test(wl(n))}function Fte(n,e){return n==null?void 0:n[e]}function El(n,e){var t=Fte(n,e);return Dte(t)?t:void 0}var Dh=El(es,"Map"),Fh=El(Object,"create");function Ote(){this.__data__=Fh?Fh(null):{},this.size=0}function Nte(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Ute="__lodash_hash_undefined__",kte=Object.prototype,Hte=kte.hasOwnProperty;function zte(n){var e=this.__data__;if(Fh){var t=e[n];return t===Ute?void 0:t}return Hte.call(e,n)?e[n]:void 0}var Gte=Object.prototype,Vte=Gte.hasOwnProperty;function Wte(n){var e=this.__data__;return Fh?e[n]!==void 0:Vte.call(e,n)}var $te="__lodash_hash_undefined__";function Xte(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Fh&&e===void 0?$te:e,this}function dl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}dl.prototype.clear=Ote;dl.prototype.delete=Nte;dl.prototype.get=zte;dl.prototype.has=Wte;dl.prototype.set=Xte;function jte(){this.size=0,this.__data__={hash:new dl,map:new(Dh||oo),string:new dl}}function Jte(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Av(n,e){var t=n.__data__;return Jte(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Kte(n){var e=Av(this,n).delete(n);return this.size-=e?1:0,e}function Yte(n){return Av(this,n).get(n)}function Qte(n){return Av(this,n).has(n)}function Zte(n,e){var t=Av(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function ao(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ao.prototype.clear=jte;ao.prototype.delete=Kte;ao.prototype.get=Yte;ao.prototype.has=Qte;ao.prototype.set=Zte;var qte=200;function ene(n,e){var t=this.__data__;if(t instanceof oo){var r=t.__data__;if(!Dh||r.length<qte-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new ao(r)}return t.set(n,e),this.size=t.size,this}function _s(n){var e=this.__data__=new oo(n);this.size=e.size}_s.prototype.clear=ate;_s.prototype.delete=lte;_s.prototype.get=cte;_s.prototype.has=ute;_s.prototype.set=ene;var l0=function(){try{var n=El(Object,"defineProperty");return n({},"",{}),n}catch{}}();function lM(n,e,t){e=="__proto__"&&l0?l0(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function G1(n,e,t){(t!==void 0&&!ud(n[e],t)||t===void 0&&!(e in n))&&lM(n,e,t)}function tne(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(t(s[l],l,s)===!1)break}return e}}var CD=tne(),TD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,gR=TD&&typeof module=="object"&&module&&!module.nodeType&&module,nne=gR&&gR.exports===TD,vR=nne?es.Buffer:void 0;vR&&vR.allocUnsafe;function rne(n,e){return n.slice()}var c0=es.Uint8Array;function ine(n){var e=new n.constructor(n.byteLength);return new c0(e).set(new c0(n)),e}function sne(n,e){var t=ine(n.buffer);return new n.constructor(t,n.byteOffset,n.length)}function one(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var yR=Object.create,ane=function(){function n(){}return function(e){if(!Ci(e))return{};if(yR)return yR(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function RD(n,e){return function(t){return n(e(t))}}var PD=RD(Object.getPrototypeOf,Object),lne=Object.prototype;function cM(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||lne;return n===t}function cne(n){return typeof n.constructor=="function"&&!cM(n)?ane(PD(n)):{}}function Zo(n){return n!=null&&typeof n=="object"}var une="[object Arguments]";function xR(n){return Zo(n)&&Ml(n)==une}var BD=Object.prototype,fne=BD.hasOwnProperty,hne=BD.propertyIsEnumerable,u0=xR(function(){return arguments}())?xR:function(n){return Zo(n)&&fne.call(n,"callee")&&!hne.call(n,"callee")},ii=Array.isArray,dne=9007199254740991;function uM(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=dne}function Lu(n){return n!=null&&uM(n.length)&&!aM(n)}function pne(n){return Zo(n)&&Lu(n)}function mne(){return!1}var ID=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_R=ID&&typeof module=="object"&&module&&!module.nodeType&&module,gne=_R&&_R.exports===ID,AR=gne?es.Buffer:void 0,vne=AR?AR.isBuffer:void 0,f0=vne||mne,yne="[object Object]",xne=Function.prototype,_ne=Object.prototype,LD=xne.toString,Ane=_ne.hasOwnProperty,Sne=LD.call(Object);function Mne(n){if(!Zo(n)||Ml(n)!=yne)return!1;var e=PD(n);if(e===null)return!0;var t=Ane.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&LD.call(t)==Sne}var wne="[object Arguments]",Ene="[object Array]",bne="[object Boolean]",Cne="[object Date]",Tne="[object Error]",Rne="[object Function]",Pne="[object Map]",Bne="[object Number]",Ine="[object Object]",Lne="[object RegExp]",Dne="[object Set]",Fne="[object String]",One="[object WeakMap]",Nne="[object ArrayBuffer]",Une="[object DataView]",kne="[object Float32Array]",Hne="[object Float64Array]",zne="[object Int8Array]",Gne="[object Int16Array]",Vne="[object Int32Array]",Wne="[object Uint8Array]",$ne="[object Uint8ClampedArray]",Xne="[object Uint16Array]",jne="[object Uint32Array]",on={};on[kne]=on[Hne]=on[zne]=on[Gne]=on[Vne]=on[Wne]=on[$ne]=on[Xne]=on[jne]=!0;on[wne]=on[Ene]=on[Nne]=on[bne]=on[Une]=on[Cne]=on[Tne]=on[Rne]=on[Pne]=on[Bne]=on[Ine]=on[Lne]=on[Dne]=on[Fne]=on[One]=!1;function Jne(n){return Zo(n)&&uM(n.length)&&!!on[Ml(n)]}function Kne(n){return function(e){return n(e)}}var DD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,th=DD&&typeof module=="object"&&module&&!module.nodeType&&module,Yne=th&&th.exports===DD,y_=Yne&&ED.process,SR=function(){try{var n=th&&th.require&&th.require("util").types;return n||y_&&y_.binding&&y_.binding("util")}catch{}}(),MR=SR&&SR.isTypedArray,fM=MR?Kne(MR):Jne;function V1(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var Qne=Object.prototype,Zne=Qne.hasOwnProperty;function qne(n,e,t){var r=n[e];(!(Zne.call(n,e)&&ud(r,t))||t===void 0&&!(e in n))&&lM(n,e,t)}function ere(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=n[a]),i?lM(t,a,l):qne(t,a,l)}return t}function tre(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var nre=9007199254740991,rre=/^(?:0|[1-9]\d*)$/;function hM(n,e){var t=typeof n;return e=e??nre,!!e&&(t=="number"||t!="symbol"&&rre.test(n))&&n>-1&&n%1==0&&n<e}var ire=Object.prototype,sre=ire.hasOwnProperty;function FD(n,e){var t=ii(n),r=!t&&u0(n),i=!t&&!r&&f0(n),s=!t&&!r&&!i&&fM(n),o=t||r||i||s,a=o?tre(n.length,String):[],l=a.length;for(var f in n)(e||sre.call(n,f))&&!(o&&(f=="length"||i&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||hM(f,l)))&&a.push(f);return a}function ore(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var are=Object.prototype,lre=are.hasOwnProperty;function cre(n){if(!Ci(n))return ore(n);var e=cM(n),t=[];for(var r in n)r=="constructor"&&(e||!lre.call(n,r))||t.push(r);return t}function OD(n){return Lu(n)?FD(n,!0):cre(n)}function ure(n){return ere(n,OD(n))}function fre(n,e,t,r,i,s,o){var a=V1(n,t),l=V1(e,t),f=o.get(l);if(f){G1(n,t,f);return}var h=s?s(a,l,t+"",n,e,o):void 0,d=h===void 0;if(d){var p=ii(l),m=!p&&f0(l),y=!p&&!m&&fM(l);h=l,p||m||y?ii(a)?h=a:pne(a)?h=one(a):m?(d=!1,h=rne(l)):y?(d=!1,h=sne(l)):h=[]:Mne(l)||u0(l)?(h=a,u0(a)?h=ure(a):(!Ci(a)||aM(a))&&(h=cne(l))):d=!1}d&&(o.set(l,h),i(h,l,r,s,o),o.delete(l)),G1(n,t,h)}function ND(n,e,t,r,i){n!==e&&CD(e,function(s,o){if(i||(i=new _s),Ci(s))fre(n,e,o,t,ND,r,i);else{var a=r?r(V1(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),G1(n,o,a)}},OD)}function Sv(n){return n}function hre(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var wR=Math.max;function dre(n,e,t){return e=wR(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=wR(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),hre(n,this,a)}}function pre(n){return function(){return n}}var mre=l0?function(n,e){return l0(n,"toString",{configurable:!0,enumerable:!1,value:pre(e),writable:!0})}:Sv,gre=800,vre=16,yre=Date.now;function xre(n){var e=0,t=0;return function(){var r=yre(),i=vre-(r-t);if(t=r,i>0){if(++e>=gre)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var _re=xre(mre);function Are(n,e){return _re(dre(n,e,Sv),n+"")}function Sre(n,e,t){if(!Ci(t))return!1;var r=typeof e;return(r=="number"?Lu(t)&&hM(e,t.length):r=="string"&&e in t)?ud(t[e],n):!1}function Mre(n){return Are(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&Sre(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var kr=Mre(function(n,e,t){ND(n,e,t)}),fd=function(e){var t=e.zDepth,r=e.radius,i=e.background,s=e.children,o=e.styles,a=o===void 0?{}:o,l=xt(kr({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":t===1});return H.createElement("div",{style:l.wrap},H.createElement("div",{style:l.bg}),H.createElement("div",{style:l.content},s))};fd.propTypes={background:Le.string,zDepth:Le.oneOf([0,1,2,3,4,5]),radius:Le.number,styles:Le.object};fd.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var x_=function(){return es.Date.now()},wre=/\s/;function Ere(n){for(var e=n.length;e--&&wre.test(n.charAt(e)););return e}var bre=/^\s+/;function Cre(n){return n&&n.slice(0,Ere(n)+1).replace(bre,"")}var Tre="[object Symbol]";function Mv(n){return typeof n=="symbol"||Zo(n)&&Ml(n)==Tre}var ER=NaN,Rre=/^[-+]0x[0-9a-f]+$/i,Pre=/^0b[01]+$/i,Bre=/^0o[0-7]+$/i,Ire=parseInt;function bR(n){if(typeof n=="number")return n;if(Mv(n))return ER;if(Ci(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Ci(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Cre(n);var t=Pre.test(n);return t||Bre.test(n)?Ire(n.slice(2),t?2:8):Rre.test(n)?ER:+n}var Lre="Expected a function",Dre=Math.max,Fre=Math.min;function UD(n,e,t){var r,i,s,o,a,l,f=0,h=!1,d=!1,p=!0;if(typeof n!="function")throw new TypeError(Lre);e=bR(e)||0,Ci(t)&&(h=!!t.leading,d="maxWait"in t,s=d?Dre(bR(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function m(T){var B=r,L=i;return r=i=void 0,f=T,o=n.apply(L,B),o}function y(T){return f=T,a=setTimeout(g,e),h?m(T):o}function _(T){var B=T-l,L=T-f,z=e-B;return d?Fre(z,s-L):z}function x(T){var B=T-l,L=T-f;return l===void 0||B>=e||B<0||d&&L>=s}function g(){var T=x_();if(x(T))return S(T);a=setTimeout(g,_(T))}function S(T){return a=void 0,p&&r?m(T):(r=i=void 0,o)}function M(){a!==void 0&&clearTimeout(a),f=0,r=l=i=a=void 0}function E(){return a===void 0?o:S(x_())}function P(){var T=x_(),B=x(T);if(r=arguments,i=this,l=T,B){if(a===void 0)return y(l);if(d)return clearTimeout(a),a=setTimeout(g,e),m(l)}return a===void 0&&(a=setTimeout(g,e)),o}return P.cancel=M,P.flush=E,P}var Ore="Expected a function";function Nre(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(Ore);return Ci(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),UD(n,e,{leading:r,maxWait:e,trailing:i})}var Ure=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,o=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=a-(r.getBoundingClientRect().left+window.pageXOffset),h=l-(r.getBoundingClientRect().top+window.pageYOffset);f<0?f=0:f>s&&(f=s),h<0?h=0:h>o&&(h=o);var d=f/s,p=1-h/o;return{h:t.h,s:d,v:p,a:t.a,source:"hsv"}},kre=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Hre(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zre(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Gre(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var wv=function(n){Gre(e,n);function e(t){Hre(this,e);var r=zre(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,Ure(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=Nre(function(i,s,o){i(s,o)},50),r}return kre(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,o=i.white,a=i.black,l=i.pointer,f=i.circle,h=xt({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:a,pointer:l,circle:f}},{custom:!!this.props.style});return H.createElement("div",{style:h.color,ref:function(p){return r.container=p},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},H.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),H.createElement("div",{style:h.white,className:"saturation-white"},H.createElement("div",{style:h.black,className:"saturation-black"}),H.createElement("div",{style:h.pointer},this.props.pointer?H.createElement(this.props.pointer,this.props):H.createElement("div",{style:h.circle}))))}}]),e}(ce.PureComponent||ce.Component);function Vre(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var Wre=RD(Object.keys,Object),$re=Object.prototype,Xre=$re.hasOwnProperty;function jre(n){if(!cM(n))return Wre(n);var e=[];for(var t in Object(n))Xre.call(n,t)&&t!="constructor"&&e.push(t);return e}function dM(n){return Lu(n)?FD(n):jre(n)}function Jre(n,e){return n&&CD(n,e,dM)}function Kre(n,e){return function(t,r){if(t==null)return t;if(!Lu(t))return n(t,r);for(var i=t.length,s=-1,o=Object(t);++s<i&&r(o[s],s,o)!==!1;);return t}}var kD=Kre(Jre);function Yre(n){return typeof n=="function"?n:Sv}function Qre(n,e){var t=ii(n)?Vre:kD;return t(n,Yre(e))}function h0(n){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(n)}var Zre=/^\s+/,qre=/\s+$/;function it(n,e){if(n=n||"",e=e||{},n instanceof it)return n;if(!(this instanceof it))return new it(n,e);var t=eie(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}it.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,o,a;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=HD(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=TR(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=TR(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=CR(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=CR(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return RR(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return iie(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(fn(this._r,255)*100)+"%",g:Math.round(fn(this._g,255)*100)+"%",b:Math.round(fn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(fn(this._r,255)*100)+"%, "+Math.round(fn(this._g,255)*100)+"%, "+Math.round(fn(this._b,255)*100)+"%)":"rgba("+Math.round(fn(this._r,255)*100)+"%, "+Math.round(fn(this._g,255)*100)+"%, "+Math.round(fn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:gie[RR(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+PR(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=it(e);r="#"+PR(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return it(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(lie,arguments)},brighten:function(){return this._applyModification(cie,arguments)},darken:function(){return this._applyModification(uie,arguments)},desaturate:function(){return this._applyModification(sie,arguments)},saturate:function(){return this._applyModification(oie,arguments)},greyscale:function(){return this._applyModification(aie,arguments)},spin:function(){return this._applyModification(fie,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(pie,arguments)},complement:function(){return this._applyCombination(hie,arguments)},monochromatic:function(){return this._applyCombination(mie,arguments)},splitcomplement:function(){return this._applyCombination(die,arguments)},triad:function(){return this._applyCombination(BR,[3])},tetrad:function(){return this._applyCombination(BR,[4])}};it.fromRatio=function(n,e){if(h0(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=Df(n[r]));n=t}return it(n,e)};function eie(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=_ie(n)),h0(n)=="object"&&(Os(n.r)&&Os(n.g)&&Os(n.b)?(e=tie(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Os(n.h)&&Os(n.s)&&Os(n.v)?(r=Df(n.s),i=Df(n.v),e=rie(n.h,r,i),o=!0,a="hsv"):Os(n.h)&&Os(n.s)&&Os(n.l)&&(r=Df(n.s),s=Df(n.l),e=nie(n.h,r,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=HD(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function tie(n,e,t){return{r:fn(n,255)*255,g:fn(e,255)*255,b:fn(t,255)*255}}function CR(n,e,t){n=fn(n,255),e=fn(e,255),t=fn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=(r+i)/2;if(r==i)s=o=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function nie(n,e,t){var r,i,s;n=fn(n,360),e=fn(e,100),t=fn(t,100);function o(f,h,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?f+(h-f)*6*d:d<1/2?h:d<2/3?f+(h-f)*(2/3-d)*6:f}if(e===0)r=i=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=o(l,a,n+1/3),i=o(l,a,n),s=o(l,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function TR(n,e,t){n=fn(n,255),e=fn(e,255),t=fn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=r,l=r-i;if(o=r===0?0:l/r,r==i)s=0;else{switch(r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function rie(n,e,t){n=fn(n,360)*6,e=fn(e,100),t=fn(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),l=r%6,f=[t,o,s,s,a,t][l],h=[a,t,t,o,s,s][l],d=[s,s,a,t,t,o][l];return{r:f*255,g:h*255,b:d*255}}function RR(n,e,t,r){var i=[Gi(Math.round(n).toString(16)),Gi(Math.round(e).toString(16)),Gi(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function iie(n,e,t,r,i){var s=[Gi(Math.round(n).toString(16)),Gi(Math.round(e).toString(16)),Gi(Math.round(t).toString(16)),Gi(zD(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function PR(n,e,t,r){var i=[Gi(zD(r)),Gi(Math.round(n).toString(16)),Gi(Math.round(e).toString(16)),Gi(Math.round(t).toString(16))];return i.join("")}it.equals=function(n,e){return!n||!e?!1:it(n).toRgbString()==it(e).toRgbString()};it.random=function(){return it.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function sie(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.s-=e/100,t.s=Ev(t.s),it(t)}function oie(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.s+=e/100,t.s=Ev(t.s),it(t)}function aie(n){return it(n).desaturate(100)}function lie(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.l+=e/100,t.l=Ev(t.l),it(t)}function cie(n,e){e=e===0?0:e||10;var t=it(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),it(t)}function uie(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.l-=e/100,t.l=Ev(t.l),it(t)}function fie(n,e){var t=it(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,it(t)}function hie(n){var e=it(n).toHsl();return e.h=(e.h+180)%360,it(e)}function BR(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=it(n).toHsl(),r=[it(n)],i=360/e,s=1;s<e;s++)r.push(it({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function die(n){var e=it(n).toHsl(),t=e.h;return[it(n),it({h:(t+72)%360,s:e.s,l:e.l}),it({h:(t+216)%360,s:e.s,l:e.l})]}function pie(n,e,t){e=e||6,t=t||30;var r=it(n).toHsl(),i=360/t,s=[it(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(it(r));return s}function mie(n,e){e=e||6;for(var t=it(n).toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(it({h:r,s:i,v:s})),s=(s+a)%1;return o}it.mix=function(n,e,t){t=t===0?0:t||50;var r=it(n).toRgb(),i=it(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return it(o)};it.readability=function(n,e){var t=it(n),r=it(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};it.isReadable=function(n,e,t){var r=it.readability(n,e),i,s;switch(s=!1,i=Aie(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};it.mostReadable=function(n,e,t){var r=null,i=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var f=0;f<e.length;f++)s=it.readability(n,e[f]),s>i&&(i=s,r=it(e[f]));return it.isReadable(n,r,{level:a,size:l})||!o?r:(t.includeFallbackColors=!1,it.mostReadable(n,["#fff","#000"],t))};var W1=it.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},gie=it.hexNames=vie(W1);function vie(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function HD(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function fn(n,e){yie(n)&&(n="100%");var t=xie(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Ev(n){return Math.min(1,Math.max(0,n))}function Jr(n){return parseInt(n,16)}function yie(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function xie(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Gi(n){return n.length==1?"0"+n:""+n}function Df(n){return n<=1&&(n=n*100+"%"),n}function zD(n){return Math.round(parseFloat(n)*255).toString(16)}function IR(n){return Jr(n)/255}var Oi=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Os(n){return!!Oi.CSS_UNIT.exec(n)}function _ie(n){n=n.replace(Zre,"").replace(qre,"").toLowerCase();var e=!1;if(W1[n])n=W1[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Oi.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=Oi.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Oi.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=Oi.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Oi.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=Oi.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Oi.hex8.exec(n))?{r:Jr(t[1]),g:Jr(t[2]),b:Jr(t[3]),a:IR(t[4]),format:e?"name":"hex8"}:(t=Oi.hex6.exec(n))?{r:Jr(t[1]),g:Jr(t[2]),b:Jr(t[3]),format:e?"name":"hex"}:(t=Oi.hex4.exec(n))?{r:Jr(t[1]+""+t[1]),g:Jr(t[2]+""+t[2]),b:Jr(t[3]+""+t[3]),a:IR(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Oi.hex3.exec(n))?{r:Jr(t[1]+""+t[1]),g:Jr(t[2]+""+t[2]),b:Jr(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function Aie(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var LR=function(e){var t=["r","g","b","a","h","s","l","v"],r=0,i=0;return Qre(t,function(s){if(e[s]&&(r+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(i+=1)}}),r===i?e:!1},Ff=function(e,t){var r=e.hex?it(e.hex):it(e),i=r.toHsl(),s=r.toHsv(),o=r.toRgb(),a=r.toHex();i.s===0&&(i.h=t||0,s.h=t||0);var l=a==="000000"&&o.a===0;return{hsl:i,hex:l?"transparent":"#"+a,rgb:o,hsv:s,oldHue:e.h||t||i.h,source:e.source}},oa=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&it(e).isValid()},pM=function(e){if(!e)return"#fff";var t=Ff(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},__=function(e,t){var r=e.replace("°","");return it(t+" ("+r+")")._ok},bf=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sie=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Mie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wie(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Eie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Hr=function(e){var t=function(r){Eie(i,r);function i(s){Mie(this,i);var o=wie(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o.handleChange=function(a,l){var f=LR(a);if(f){var h=Ff(a,a.h||o.state.oldHue);o.setState(h),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,h,l),o.props.onChange&&o.props.onChange(h,l)}},o.handleSwatchHover=function(a,l){var f=LR(a);if(f){var h=Ff(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(h,l)}},o.state=bf({},Ff(s.color,0)),o.debounce=UD(function(a,l,f){a(l,f)},100),o}return Sie(i,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),H.createElement(e,bf({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,a){return bf({},Ff(o.color,a.oldHue))}}]),i}(ce.PureComponent||ce.Component);return t.propTypes=bf({},e.propTypes),t.defaultProps=bf({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},bie=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Cie=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Tie(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function DR(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Rie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Pie=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Rie(i,r);function i(){var s,o,a,l;Tie(this,i);for(var f=arguments.length,h=Array(f),d=0;d<f;d++)h[d]=arguments[d];return l=(o=(a=DR(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(h))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),DR(a,l)}return Cie(i,[{key:"render",value:function(){return H.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},H.createElement(e,bie({},this.props,this.state)))}}]),i}(H.Component)},FR=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bie=13,Iie=function(e){var t=e.color,r=e.style,i=e.onClick,s=i===void 0?function(){}:i,o=e.onHover,a=e.title,l=a===void 0?t:a,f=e.children,h=e.focus,d=e.focusStyle,p=d===void 0?{}:d,m=t==="transparent",y=xt({default:{swatch:FR({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,h?p:{})}}),_=function(E){return s(t,E)},x=function(E){return E.keyCode===Bie&&s(t,E)},g=function(E){return o(t,E)},S={};return o&&(S.onMouseOver=g),H.createElement("div",FR({style:y.swatch,onClick:_,title:l,tabIndex:0,onKeyDown:x},S),f,m&&H.createElement(Bu,{borderRadius:y.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const bl=Pie(Iie);var Lie=function(e){var t=e.direction,r=xt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return H.createElement("div",{style:r.picker})},Die=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},GD=function(e){var t=e.rgb,r=e.hsl,i=e.width,s=e.height,o=e.onChange,a=e.direction,l=e.style,f=e.renderers,h=e.pointer,d=e.className,p=d===void 0?"":d,m=xt({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:l}}});return H.createElement("div",{style:m.picker,className:"alpha-picker "+p},H.createElement(oM,Die({},m.alpha,{rgb:t,hsl:r,pointer:h,renderers:f,onChange:o,direction:a})))};GD.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Lie};Hr(GD);function VD(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var Fie="__lodash_hash_undefined__";function Oie(n){return this.__data__.set(n,Fie),this}function Nie(n){return this.__data__.has(n)}function d0(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new ao;++e<t;)this.add(n[e])}d0.prototype.add=d0.prototype.push=Oie;d0.prototype.has=Nie;function Uie(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function kie(n,e){return n.has(e)}var Hie=1,zie=2;function WD(n,e,t,r,i,s){var o=t&Hie,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var f=s.get(n),h=s.get(e);if(f&&h)return f==e&&h==n;var d=-1,p=!0,m=t&zie?new d0:void 0;for(s.set(n,e),s.set(e,n);++d<a;){var y=n[d],_=e[d];if(r)var x=o?r(_,y,d,e,n,s):r(y,_,d,n,e,s);if(x!==void 0){if(x)continue;p=!1;break}if(m){if(!Uie(e,function(g,S){if(!kie(m,S)&&(y===g||i(y,g,t,r,s)))return m.push(S)})){p=!1;break}}else if(!(y===_||i(y,_,t,r,s))){p=!1;break}}return s.delete(n),s.delete(e),p}function Gie(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function Vie(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var Wie=1,$ie=2,Xie="[object Boolean]",jie="[object Date]",Jie="[object Error]",Kie="[object Map]",Yie="[object Number]",Qie="[object RegExp]",Zie="[object Set]",qie="[object String]",ese="[object Symbol]",tse="[object ArrayBuffer]",nse="[object DataView]",OR=Qo?Qo.prototype:void 0,A_=OR?OR.valueOf:void 0;function rse(n,e,t,r,i,s,o){switch(t){case nse:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case tse:return!(n.byteLength!=e.byteLength||!s(new c0(n),new c0(e)));case Xie:case jie:case Yie:return ud(+n,+e);case Jie:return n.name==e.name&&n.message==e.message;case Qie:case qie:return n==e+"";case Kie:var a=Gie;case Zie:var l=r&Wie;if(a||(a=Vie),n.size!=e.size&&!l)return!1;var f=o.get(n);if(f)return f==e;r|=$ie,o.set(n,e);var h=WD(a(n),a(e),r,i,s,o);return o.delete(n),h;case ese:if(A_)return A_.call(n)==A_.call(e)}return!1}function ise(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}function sse(n,e,t){var r=e(n);return ii(n)?r:ise(r,t(n))}function ose(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function ase(){return[]}var lse=Object.prototype,cse=lse.propertyIsEnumerable,NR=Object.getOwnPropertySymbols,use=NR?function(n){return n==null?[]:(n=Object(n),ose(NR(n),function(e){return cse.call(n,e)}))}:ase;function UR(n){return sse(n,dM,use)}var fse=1,hse=Object.prototype,dse=hse.hasOwnProperty;function pse(n,e,t,r,i,s){var o=t&fse,a=UR(n),l=a.length,f=UR(e),h=f.length;if(l!=h&&!o)return!1;for(var d=l;d--;){var p=a[d];if(!(o?p in e:dse.call(e,p)))return!1}var m=s.get(n),y=s.get(e);if(m&&y)return m==e&&y==n;var _=!0;s.set(n,e),s.set(e,n);for(var x=o;++d<l;){p=a[d];var g=n[p],S=e[p];if(r)var M=o?r(S,g,p,e,n,s):r(g,S,p,n,e,s);if(!(M===void 0?g===S||i(g,S,t,r,s):M)){_=!1;break}x||(x=p=="constructor")}if(_&&!x){var E=n.constructor,P=e.constructor;E!=P&&"constructor"in n&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof P=="function"&&P instanceof P)&&(_=!1)}return s.delete(n),s.delete(e),_}var $1=El(es,"DataView"),X1=El(es,"Promise"),j1=El(es,"Set"),J1=El(es,"WeakMap"),kR="[object Map]",mse="[object Object]",HR="[object Promise]",zR="[object Set]",GR="[object WeakMap]",VR="[object DataView]",gse=wl($1),vse=wl(Dh),yse=wl(X1),xse=wl(j1),_se=wl(J1),Bo=Ml;($1&&Bo(new $1(new ArrayBuffer(1)))!=VR||Dh&&Bo(new Dh)!=kR||X1&&Bo(X1.resolve())!=HR||j1&&Bo(new j1)!=zR||J1&&Bo(new J1)!=GR)&&(Bo=function(n){var e=Ml(n),t=e==mse?n.constructor:void 0,r=t?wl(t):"";if(r)switch(r){case gse:return VR;case vse:return kR;case yse:return HR;case xse:return zR;case _se:return GR}return e});var Ase=1,WR="[object Arguments]",$R="[object Array]",bm="[object Object]",Sse=Object.prototype,XR=Sse.hasOwnProperty;function Mse(n,e,t,r,i,s){var o=ii(n),a=ii(e),l=o?$R:Bo(n),f=a?$R:Bo(e);l=l==WR?bm:l,f=f==WR?bm:f;var h=l==bm,d=f==bm,p=l==f;if(p&&f0(n)){if(!f0(e))return!1;o=!0,h=!1}if(p&&!h)return s||(s=new _s),o||fM(n)?WD(n,e,t,r,i,s):rse(n,e,l,t,r,i,s);if(!(t&Ase)){var m=h&&XR.call(n,"__wrapped__"),y=d&&XR.call(e,"__wrapped__");if(m||y){var _=m?n.value():n,x=y?e.value():e;return s||(s=new _s),i(_,x,t,r,s)}}return p?(s||(s=new _s),pse(n,e,t,r,i,s)):!1}function mM(n,e,t,r,i){return n===e?!0:n==null||e==null||!Zo(n)&&!Zo(e)?n!==n&&e!==e:Mse(n,e,t,r,mM,i)}var wse=1,Ese=2;function bse(n,e,t,r){var i=t.length,s=i;if(n==null)return!s;for(n=Object(n);i--;){var o=t[i];if(o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++i<s;){o=t[i];var a=o[0],l=n[a],f=o[1];if(o[2]){if(l===void 0&&!(a in n))return!1}else{var h=new _s,d;if(!(d===void 0?mM(f,l,wse|Ese,r,h):d))return!1}}return!0}function $D(n){return n===n&&!Ci(n)}function Cse(n){for(var e=dM(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,$D(i)]}return e}function XD(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function Tse(n){var e=Cse(n);return e.length==1&&e[0][2]?XD(e[0][0],e[0][1]):function(t){return t===n||bse(t,n,e)}}var Rse=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pse=/^\w*$/;function gM(n,e){if(ii(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Mv(n)?!0:Pse.test(n)||!Rse.test(n)||e!=null&&n in Object(e)}var Bse="Expected a function";function vM(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Bse);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(vM.Cache||ao),t}vM.Cache=ao;var Ise=500;function Lse(n){var e=vM(n,function(r){return t.size===Ise&&t.clear(),r}),t=e.cache;return e}var Dse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fse=/\\(\\)?/g,Ose=Lse(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Dse,function(t,r,i,s){e.push(i?s.replace(Fse,"$1"):r||t)}),e}),Nse=1/0,jR=Qo?Qo.prototype:void 0,JR=jR?jR.toString:void 0;function jD(n){if(typeof n=="string")return n;if(ii(n))return VD(n,jD)+"";if(Mv(n))return JR?JR.call(n):"";var e=n+"";return e=="0"&&1/n==-Nse?"-0":e}function Use(n){return n==null?"":jD(n)}function JD(n,e){return ii(n)?n:gM(n,e)?[n]:Ose(Use(n))}var kse=1/0;function bv(n){if(typeof n=="string"||Mv(n))return n;var e=n+"";return e=="0"&&1/n==-kse?"-0":e}function KD(n,e){e=JD(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[bv(e[t++])];return t&&t==r?n:void 0}function Hse(n,e,t){var r=n==null?void 0:KD(n,e);return r===void 0?t:r}function zse(n,e){return n!=null&&e in Object(n)}function Gse(n,e,t){e=JD(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=bv(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&uM(i)&&hM(o,i)&&(ii(n)||u0(n)))}function Vse(n,e){return n!=null&&Gse(n,e,zse)}var Wse=1,$se=2;function Xse(n,e){return gM(n)&&$D(e)?XD(bv(n),e):function(t){var r=Hse(t,n);return r===void 0&&r===e?Vse(t,n):mM(e,r,Wse|$se)}}function jse(n){return function(e){return e==null?void 0:e[n]}}function Jse(n){return function(e){return KD(e,n)}}function Kse(n){return gM(n)?jse(bv(n)):Jse(n)}function Yse(n){return typeof n=="function"?n:n==null?Sv:typeof n=="object"?ii(n)?Xse(n[0],n[1]):Tse(n):Kse(n)}function Qse(n,e){var t=-1,r=Lu(n)?Array(n.length):[];return kD(n,function(i,s,o){r[++t]=e(i,s,o)}),r}function Cl(n,e){var t=ii(n)?VD:Qse;return t(n,Yse(e))}var Zse=function(e){var t=e.colors,r=e.onClick,i=e.onSwatchHover,s=xt({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return H.createElement("div",{style:s.swatches},Cl(t,function(o){return H.createElement(bl,{key:o,color:o,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+o}})}),H.createElement("div",{style:s.clear}))},yM=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,f=l===void 0?{}:l,h=e.className,d=h===void 0?"":h,p=i==="transparent",m=function(x,g){oa(x)&&t({hex:x,source:"hex"},g)},y=xt(kr({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:pM(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},f),{"hide-triangle":a==="hide"});return H.createElement("div",{style:y.card,className:"block-picker "+d},H.createElement("div",{style:y.triangle}),H.createElement("div",{style:y.head},p&&H.createElement(Bu,{borderRadius:"6px 6px 0 0"}),H.createElement("div",{style:y.label},i)),H.createElement("div",{style:y.body},H.createElement(Zse,{colors:s,onClick:m,onSwatchHover:r}),H.createElement(Ft,{style:{input:y.input},value:i,onChange:m})))};yM.propTypes={width:Le.oneOfType([Le.string,Le.number]),colors:Le.arrayOf(Le.string),triangle:Le.oneOf(["top","hide"]),styles:Le.object};yM.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Hr(yM);var hc={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},dc={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},pc={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},mc={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},gc={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},vc={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},yc={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},xc={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},_c={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Of={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Ac={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Sc={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Mc={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},wc={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Ec={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},bc={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Cc={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},Tc={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},YD=function(e){var t=e.color,r=e.onClick,i=e.onSwatchHover,s=e.hover,o=e.active,a=e.circleSize,l=e.circleSpacing,f=xt({default:{swatch:{width:a,height:a,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:o});return H.createElement("div",{style:f.swatch},H.createElement(bl,{style:f.Swatch,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:f.Swatch.boxShadow+", 0 0 5px "+t}}))};YD.defaultProps={circleSize:28,circleSpacing:14};const qse=sM(YD);var xM=function(e){var t=e.width,r=e.onChange,i=e.onSwatchHover,s=e.colors,o=e.hex,a=e.circleSize,l=e.styles,f=l===void 0?{}:l,h=e.circleSpacing,d=e.className,p=d===void 0?"":d,m=xt(kr({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-h,marginBottom:-h}}},f)),y=function(x,g){return r({hex:x,source:"hex"},g)};return H.createElement("div",{style:m.card,className:"circle-picker "+p},Cl(s,function(_){return H.createElement(qse,{key:_,color:_,onClick:y,onSwatchHover:i,active:o===_.toLowerCase(),circleSize:a,circleSpacing:h})}))};xM.propTypes={width:Le.oneOfType([Le.string,Le.number]),circleSize:Le.number,circleSpacing:Le.number,styles:Le.object};xM.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[hc[500],dc[500],pc[500],mc[500],gc[500],vc[500],yc[500],xc[500],_c[500],Of[500],Ac[500],Sc[500],Mc[500],wc[500],Ec[500],bc[500],Cc[500],Tc[500]],styles:{}};Hr(xM);function KR(n){return n===void 0}var QD={};Object.defineProperty(QD,"__esModule",{value:!0});var YR=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eoe=ce,QR=toe(eoe);function toe(n){return n&&n.__esModule?n:{default:n}}function noe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Cm=24,roe=QD.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Cm:r,s=n.height,o=s===void 0?Cm:s,a=n.style,l=a===void 0?{}:a,f=noe(n,["fill","width","height","style"]);return QR.default.createElement("svg",YR({viewBox:"0 0 "+Cm+" "+Cm,style:YR({fill:t,width:i,height:o},l)},f),QR.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},ioe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function soe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ooe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function aoe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var ZD=function(n){aoe(e,n);function e(t){soe(this,e);var r=ooe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?oa(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(KR(i.s)?r.props.hsl.s:i.s),l:Number(KR(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},t.hsl.a!==1&&t.view==="hex"?r.state={view:"rgb"}:r.state={view:t.view},r}return ioe(e,[{key:"render",value:function(){var r=this,i=xt({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=H.createElement("div",{style:i.fields,className:"flexbox-fix"},H.createElement("div",{style:i.field},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=H.createElement("div",{style:i.fields,className:"flexbox-fix"},H.createElement("div",{style:i.field},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),H.createElement("div",{style:i.field},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),H.createElement("div",{style:i.field},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),H.createElement("div",{style:i.alpha},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=H.createElement("div",{style:i.fields,className:"flexbox-fix"},H.createElement("div",{style:i.field},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),H.createElement("div",{style:i.field},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),H.createElement("div",{style:i.field},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),H.createElement("div",{style:i.alpha},H.createElement(Ft,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),H.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,H.createElement("div",{style:i.toggle},H.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return r.icon=a}},H.createElement(roe,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(H.Component);ZD.defaultProps={view:"hex"};var ZR=function(){var e=xt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return H.createElement("div",{style:e.picker})},loe=function(){var e=xt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return H.createElement("div",{style:e.picker})},_M=function(e){var t=e.width,r=e.onChange,i=e.disableAlpha,s=e.rgb,o=e.hsl,a=e.hsv,l=e.hex,f=e.renderers,h=e.styles,d=h===void 0?{}:h,p=e.className,m=p===void 0?"":p,y=e.defaultView,_=xt(kr({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},d),{disableAlpha:i});return H.createElement("div",{style:_.picker,className:"chrome-picker "+m},H.createElement("div",{style:_.saturation},H.createElement(wv,{style:_.Saturation,hsl:o,hsv:a,pointer:loe,onChange:r})),H.createElement("div",{style:_.body},H.createElement("div",{style:_.controls,className:"flexbox-fix"},H.createElement("div",{style:_.color},H.createElement("div",{style:_.swatch},H.createElement("div",{style:_.active}),H.createElement(Bu,{renderers:f}))),H.createElement("div",{style:_.toggles},H.createElement("div",{style:_.hue},H.createElement(Iu,{style:_.Hue,hsl:o,pointer:ZR,onChange:r})),H.createElement("div",{style:_.alpha},H.createElement(oM,{style:_.Alpha,rgb:s,hsl:o,pointer:ZR,renderers:f,onChange:r})))),H.createElement(ZD,{rgb:s,hsl:o,hex:l,view:y,onChange:r,disableAlpha:i})))};_M.propTypes={width:Le.oneOfType([Le.string,Le.number]),disableAlpha:Le.bool,styles:Le.object,defaultView:Le.oneOf(["hex","rgb","hsl"])};_M.defaultProps={width:225,disableAlpha:!1,styles:{}};Hr(_M);var coe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.active,a=xt({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:pM(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return H.createElement(bl,{style:a.color,color:t,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},H.createElement("div",{style:a.dot}))},uoe=function(e){var t=e.hex,r=e.rgb,i=e.onChange,s=xt({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(l,f){l.r||l.g||l.b?i({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,source:"rgb"},f):i({hex:l.hex,source:"hex"},f)};return H.createElement("div",{style:s.fields,className:"flexbox-fix"},H.createElement("div",{style:s.active}),H.createElement(Ft,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:o}),H.createElement(Ft,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:o}),H.createElement(Ft,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:o}),H.createElement(Ft,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:o}))},AM=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.colors,s=e.hex,o=e.rgb,a=e.styles,l=a===void 0?{}:a,f=e.className,h=f===void 0?"":f,d=xt(kr({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),p=function(y,_){y.hex?oa(y.hex)&&t({hex:y.hex,source:"hex"},_):t(y,_)};return H.createElement(fd,{style:d.Compact,styles:l},H.createElement("div",{style:d.compact,className:"compact-picker "+h},H.createElement("div",null,Cl(i,function(m){return H.createElement(coe,{key:m,color:m,active:m.toLowerCase()===s,onClick:p,onSwatchHover:r})}),H.createElement("div",{style:d.clear})),H.createElement(uoe,{hex:s,rgb:o,onChange:p})))};AM.propTypes={colors:Le.arrayOf(Le.string),styles:Le.object};AM.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Hr(AM);var foe=function(e){var t=e.hover,r=e.color,i=e.onClick,s=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=xt({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return H.createElement("div",{style:a.swatch},H.createElement(bl,{color:r,onClick:i,onHover:s,focusStyle:o}))};const hoe=sM(foe);var SM=function(e){var t=e.width,r=e.colors,i=e.onChange,s=e.onSwatchHover,o=e.triangle,a=e.styles,l=a===void 0?{}:a,f=e.className,h=f===void 0?"":f,d=xt(kr({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),p=function(y,_){return i({hex:y,source:"hex"},_)};return H.createElement("div",{style:d.card,className:"github-picker "+h},H.createElement("div",{style:d.triangleShadow}),H.createElement("div",{style:d.triangle}),Cl(r,function(m){return H.createElement(hoe,{color:m,key:m,onClick:p,onSwatchHover:s})}))};SM.propTypes={width:Le.oneOfType([Le.string,Le.number]),colors:Le.arrayOf(Le.string),triangle:Le.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Le.object};SM.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Hr(SM);var doe=function(e){var t=e.direction,r=xt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return H.createElement("div",{style:r.picker})},poe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},MM=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.hsl,o=e.direction,a=e.pointer,l=e.styles,f=l===void 0?{}:l,h=e.className,d=h===void 0?"":h,p=xt(kr({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},f)),m=function(_){return i({a:1,h:_.h,l:.5,s:1})};return H.createElement("div",{style:p.picker,className:"hue-picker "+d},H.createElement(Iu,poe({},p.hue,{hsl:s,pointer:a,onChange:m,direction:o})))};MM.propTypes={styles:Le.object};MM.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:doe,styles:{}};Hr(MM);var moe=function(e){var t=e.onChange,r=e.hex,i=e.rgb,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,f=xt(kr({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),h=function(p,m){p.hex?oa(p.hex)&&t({hex:p.hex,source:"hex"},m):(p.r||p.g||p.b)&&t({r:p.r||i.r,g:p.g||i.g,b:p.b||i.b,source:"rgb"},m)};return H.createElement(fd,{styles:o},H.createElement("div",{style:f.material,className:"material-picker "+l},H.createElement(Ft,{style:{wrap:f.HEXwrap,input:f.HEXinput,label:f.HEXlabel},label:"hex",value:r,onChange:h}),H.createElement("div",{style:f.split,className:"flexbox-fix"},H.createElement("div",{style:f.third},H.createElement(Ft,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"r",value:i.r,onChange:h})),H.createElement("div",{style:f.third},H.createElement(Ft,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"g",value:i.g,onChange:h})),H.createElement("div",{style:f.third},H.createElement(Ft,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"b",value:i.b,onChange:h})))))};Hr(moe);var goe=function(e){var t=e.onChange,r=e.rgb,i=e.hsv,s=e.hex,o=xt({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(f,h){f["#"]?oa(f["#"])&&t({hex:f["#"],source:"hex"},h):f.r||f.g||f.b?t({r:f.r||r.r,g:f.g||r.g,b:f.b||r.b,source:"rgb"},h):(f.h||f.s||f.v)&&t({h:f.h||i.h,s:f.s||i.s,v:f.v||i.v,source:"hsv"},h)};return H.createElement("div",{style:o.fields},H.createElement(Ft,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),H.createElement(Ft,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),H.createElement(Ft,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),H.createElement("div",{style:o.divider}),H.createElement(Ft,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),H.createElement(Ft,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),H.createElement(Ft,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}),H.createElement("div",{style:o.divider}),H.createElement(Ft,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:a}),H.createElement("div",{style:o.fieldSymbols},H.createElement("div",{style:o.symbol},"°"),H.createElement("div",{style:o.symbol},"%"),H.createElement("div",{style:o.symbol},"%")))},voe=function(e){var t=e.hsl,r=xt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return H.createElement("div",{style:r.picker})},yoe=function(){var e=xt({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return H.createElement("div",{style:e.pointer},H.createElement("div",{style:e.left},H.createElement("div",{style:e.leftInside})),H.createElement("div",{style:e.right},H.createElement("div",{style:e.rightInside})))},qR=function(e){var t=e.onClick,r=e.label,i=e.children,s=e.active,o=xt({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return H.createElement("div",{style:o.button,onClick:t},r||i)},xoe=function(e){var t=e.rgb,r=e.currentColor,i=xt({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return H.createElement("div",null,H.createElement("div",{style:i.label},"new"),H.createElement("div",{style:i.swatches},H.createElement("div",{style:i.new}),H.createElement("div",{style:i.current})),H.createElement("div",{style:i.label},"current"))},_oe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Aoe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Soe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Moe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var wM=function(n){Moe(e,n);function e(t){Aoe(this,e);var r=Soe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:t.hex},r}return _oe(e,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,o=r.className,a=o===void 0?"":o,l=xt(kr({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return H.createElement("div",{style:l.picker,className:"photoshop-picker "+a},H.createElement("div",{style:l.head},this.props.header),H.createElement("div",{style:l.body,className:"flexbox-fix"},H.createElement("div",{style:l.saturation},H.createElement(wv,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:voe,onChange:this.props.onChange})),H.createElement("div",{style:l.hue},H.createElement(Iu,{direction:"vertical",hsl:this.props.hsl,pointer:yoe,onChange:this.props.onChange})),H.createElement("div",{style:l.controls},H.createElement("div",{style:l.top,className:"flexbox-fix"},H.createElement("div",{style:l.previews},H.createElement(xoe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),H.createElement("div",{style:l.actions},H.createElement(qR,{label:"OK",onClick:this.props.onAccept,active:!0}),H.createElement(qR,{label:"Cancel",onClick:this.props.onCancel}),H.createElement(goe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(H.Component);wM.propTypes={header:Le.string,styles:Le.object};wM.defaultProps={header:"Color Picker",styles:{}};Hr(wM);var woe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.disableAlpha,a=xt({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),l=function(h,d){h.hex?oa(h.hex)&&t({hex:h.hex,source:"hex"},d):h.r||h.g||h.b?t({r:h.r||r.r,g:h.g||r.g,b:h.b||r.b,a:r.a,source:"rgb"},d):h.a&&(h.a<0?h.a=0:h.a>100&&(h.a=100),h.a/=100,t({h:i.h,s:i.s,l:i.l,a:h.a,source:"rgb"},d))};return H.createElement("div",{style:a.fields,className:"flexbox-fix"},H.createElement("div",{style:a.double},H.createElement(Ft,{style:{input:a.input,label:a.label},label:"hex",value:s.replace("#",""),onChange:l})),H.createElement("div",{style:a.single},H.createElement(Ft,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:l,dragLabel:"true",dragMax:"255"})),H.createElement("div",{style:a.single},H.createElement(Ft,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:l,dragLabel:"true",dragMax:"255"})),H.createElement("div",{style:a.single},H.createElement(Ft,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:l,dragLabel:"true",dragMax:"255"})),H.createElement("div",{style:a.alpha},H.createElement(Ft,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:l,dragLabel:"true",dragMax:"100"})))},Eoe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qD=function(e){var t=e.colors,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=xt({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(f,h){i({hex:f,source:"hex"},h)};return H.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(l){var f=typeof l=="string"?{color:l}:l,h=""+f.color+(f.title||"");return H.createElement("div",{key:h,style:o.swatchWrap},H.createElement(bl,Eoe({},f,{style:o.swatch,onClick:a,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+f.color}})))}))};qD.propTypes={colors:Le.arrayOf(Le.oneOfType([Le.string,Le.shape({color:Le.string,title:Le.string})])).isRequired};var boe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},EM=function(e){var t=e.width,r=e.rgb,i=e.hex,s=e.hsv,o=e.hsl,a=e.onChange,l=e.onSwatchHover,f=e.disableAlpha,h=e.presetColors,d=e.renderers,p=e.styles,m=p===void 0?{}:p,y=e.className,_=y===void 0?"":y,x=xt(kr({default:boe({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},m),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},m),{disableAlpha:f});return H.createElement("div",{style:x.picker,className:"sketch-picker "+_},H.createElement("div",{style:x.saturation},H.createElement(wv,{style:x.Saturation,hsl:o,hsv:s,onChange:a})),H.createElement("div",{style:x.controls,className:"flexbox-fix"},H.createElement("div",{style:x.sliders},H.createElement("div",{style:x.hue},H.createElement(Iu,{style:x.Hue,hsl:o,onChange:a})),H.createElement("div",{style:x.alpha},H.createElement(oM,{style:x.Alpha,rgb:r,hsl:o,renderers:d,onChange:a}))),H.createElement("div",{style:x.color},H.createElement(Bu,null),H.createElement("div",{style:x.activeColor}))),H.createElement(woe,{rgb:r,hsl:o,hex:i,onChange:a,disableAlpha:f}),H.createElement(qD,{colors:h,onClick:a,onSwatchHover:l}))};EM.propTypes={disableAlpha:Le.bool,width:Le.oneOfType([Le.string,Le.number]),styles:Le.object};EM.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Coe=Hr(EM);var Cf=function(e){var t=e.hsl,r=e.offset,i=e.onClick,s=i===void 0?function(){}:i,o=e.active,a=e.first,l=e.last,f=xt({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:l}),h=function(p){return s({h:t.h,s:.5,l:r,source:"hsl"},p)};return H.createElement("div",{style:f.swatch,onClick:h})},Toe=function(e){var t=e.onClick,r=e.hsl,i=xt({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return H.createElement("div",{style:i.swatches},H.createElement("div",{style:i.swatch},H.createElement(Cf,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:t,first:!0})),H.createElement("div",{style:i.swatch},H.createElement(Cf,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:t})),H.createElement("div",{style:i.swatch},H.createElement(Cf,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:t})),H.createElement("div",{style:i.swatch},H.createElement(Cf,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:t})),H.createElement("div",{style:i.swatch},H.createElement(Cf,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:t,last:!0})),H.createElement("div",{style:i.clear}))},Roe=function(){var e=xt({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return H.createElement("div",{style:e.picker})},bM=function(e){var t=e.hsl,r=e.onChange,i=e.pointer,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,f=xt(kr({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return H.createElement("div",{style:f.wrap||{},className:"slider-picker "+l},H.createElement("div",{style:f.hue},H.createElement(Iu,{style:f.Hue,hsl:t,pointer:i,onChange:r})),H.createElement("div",{style:f.swatches},H.createElement(Toe,{hsl:t,onClick:r})))};bM.propTypes={styles:Le.object};bM.defaultProps={pointer:Roe,styles:{}};Hr(bM);var e3={};Object.defineProperty(e3,"__esModule",{value:!0});var e2=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Poe=ce,t2=Boe(Poe);function Boe(n){return n&&n.__esModule?n:{default:n}}function Ioe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Tm=24,Loe=e3.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Tm:r,s=n.height,o=s===void 0?Tm:s,a=n.style,l=a===void 0?{}:a,f=Ioe(n,["fill","width","height","style"]);return t2.default.createElement("svg",e2({viewBox:"0 0 "+Tm+" "+Tm,style:e2({fill:t,width:i,height:o},l)},f),t2.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Doe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.first,a=e.last,l=e.active,f=xt({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:pM(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:l,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return H.createElement(bl,{color:t,style:f.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},H.createElement("div",{style:f.check},H.createElement(Loe,null)))},Foe=function(e){var t=e.onClick,r=e.onSwatchHover,i=e.group,s=e.active,o=xt({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return H.createElement("div",{style:o.group},Cl(i,function(a,l){return H.createElement(Doe,{key:a,color:a,active:a.toLowerCase()===s,first:l===0,last:l===i.length-1,onClick:t,onSwatchHover:r})}))},CM=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.onSwatchHover,o=e.colors,a=e.hex,l=e.styles,f=l===void 0?{}:l,h=e.className,d=h===void 0?"":h,p=xt(kr({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},f)),m=function(_,x){return i({hex:_,source:"hex"},x)};return H.createElement("div",{style:p.picker,className:"swatches-picker "+d},H.createElement(fd,null,H.createElement("div",{style:p.overflow},H.createElement("div",{style:p.body},Cl(o,function(y){return H.createElement(Foe,{key:y.toString(),group:y,active:a,onClick:m,onSwatchHover:s})}),H.createElement("div",{style:p.clear})))))};CM.propTypes={width:Le.oneOfType([Le.string,Le.number]),height:Le.oneOfType([Le.string,Le.number]),colors:Le.arrayOf(Le.arrayOf(Le.string)),styles:Le.object};CM.defaultProps={width:320,height:240,colors:[[hc[900],hc[700],hc[500],hc[300],hc[100]],[dc[900],dc[700],dc[500],dc[300],dc[100]],[pc[900],pc[700],pc[500],pc[300],pc[100]],[mc[900],mc[700],mc[500],mc[300],mc[100]],[gc[900],gc[700],gc[500],gc[300],gc[100]],[vc[900],vc[700],vc[500],vc[300],vc[100]],[yc[900],yc[700],yc[500],yc[300],yc[100]],[xc[900],xc[700],xc[500],xc[300],xc[100]],[_c[900],_c[700],_c[500],_c[300],_c[100]],["#194D33",Of[700],Of[500],Of[300],Of[100]],[Ac[900],Ac[700],Ac[500],Ac[300],Ac[100]],[Sc[900],Sc[700],Sc[500],Sc[300],Sc[100]],[Mc[900],Mc[700],Mc[500],Mc[300],Mc[100]],[wc[900],wc[700],wc[500],wc[300],wc[100]],[Ec[900],Ec[700],Ec[500],Ec[300],Ec[100]],[bc[900],bc[700],bc[500],bc[300],bc[100]],[Cc[900],Cc[700],Cc[500],Cc[300],Cc[100]],[Tc[900],Tc[700],Tc[500],Tc[300],Tc[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Hr(CM);var TM=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,f=l===void 0?{}:l,h=e.className,d=h===void 0?"":h,p=xt(kr({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},f),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),m=function(_,x){oa(_)&&t({hex:_,source:"hex"},x)};return H.createElement("div",{style:p.card,className:"twitter-picker "+d},H.createElement("div",{style:p.triangleShadow}),H.createElement("div",{style:p.triangle}),H.createElement("div",{style:p.body},Cl(s,function(y,_){return H.createElement(bl,{key:_,color:y,hex:y,style:p.swatch,onClick:m,onHover:r,focusStyle:{boxShadow:"0 0 4px "+y}})}),H.createElement("div",{style:p.hash},"#"),H.createElement(Ft,{label:null,style:{input:p.input},value:i.replace("#",""),onChange:m}),H.createElement("div",{style:p.clear})))};TM.propTypes={width:Le.oneOfType([Le.string,Le.number]),triangle:Le.oneOf(["hide","top-left","top-right"]),colors:Le.arrayOf(Le.string),styles:Le.object};TM.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Hr(TM);var RM=function(e){var t=xt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return H.createElement("div",{style:t.picker})};RM.propTypes={hsl:Le.shape({h:Le.number,s:Le.number,l:Le.number,a:Le.number})};RM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var PM=function(e){var t=xt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return H.createElement("div",{style:t.picker})};PM.propTypes={hsl:Le.shape({h:Le.number,s:Le.number,l:Le.number,a:Le.number})};PM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Ooe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.hsv,a=function(m,y){if(m.hex)oa(m.hex)&&t({hex:m.hex,source:"hex"},y);else if(m.rgb){var _=m.rgb.split(",");__(m.rgb,"rgb")&&t({r:_[0],g:_[1],b:_[2],a:1,source:"rgb"},y)}else if(m.hsv){var x=m.hsv.split(",");__(m.hsv,"hsv")&&(x[2]=x[2].replace("%",""),x[1]=x[1].replace("%",""),x[0]=x[0].replace("°",""),x[1]==1?x[1]=.01:x[2]==1&&(x[2]=.01),t({h:Number(x[0]),s:Number(x[1]),v:Number(x[2]),source:"hsv"},y))}else if(m.hsl){var g=m.hsl.split(",");__(m.hsl,"hsl")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("°",""),d[1]==1?d[1]=.01:d[2]==1&&(d[2]=.01),t({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsl"},y))}},l=xt({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),f=r.r+", "+r.g+", "+r.b,h=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",d=Math.round(o.h)+"°, "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return H.createElement("div",{style:l.wrap,className:"flexbox-fix"},H.createElement("div",{style:l.fields},H.createElement("div",{style:l.double},H.createElement(Ft,{style:{input:l.input,label:l.label},label:"hex",value:s,onChange:a})),H.createElement("div",{style:l.column},H.createElement("div",{style:l.single},H.createElement(Ft,{style:{input:l.input2,label:l.label2},label:"rgb",value:f,onChange:a})),H.createElement("div",{style:l.single},H.createElement(Ft,{style:{input:l.input2,label:l.label2},label:"hsv",value:d,onChange:a})),H.createElement("div",{style:l.single},H.createElement(Ft,{style:{input:l.input2,label:l.label2},label:"hsl",value:h,onChange:a})))))},BM=function(e){var t=e.width,r=e.onChange,i=e.rgb,s=e.hsl,o=e.hsv,a=e.hex,l=e.header,f=e.styles,h=f===void 0?{}:f,d=e.className,p=d===void 0?"":d,m=xt(kr({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},h));return H.createElement("div",{style:m.picker,className:"google-picker "+p},H.createElement("div",{style:m.head},l),H.createElement("div",{style:m.swatch}),H.createElement("div",{style:m.saturation},H.createElement(wv,{hsl:s,hsv:o,pointer:RM,onChange:r})),H.createElement("div",{style:m.body},H.createElement("div",{style:m.controls,className:"flexbox-fix"},H.createElement("div",{style:m.hue},H.createElement(Iu,{style:m.Hue,hsl:s,radius:"4px",pointer:PM,onChange:r}))),H.createElement(Ooe,{rgb:i,hsl:s,hex:a,hsv:o,onChange:r})))};BM.propTypes={width:Le.oneOfType([Le.string,Le.number]),styles:Le.object,header:Le.string};BM.defaultProps={width:652,styles:{},header:"Color picker"};Hr(BM);const Noe=({color:n,changeColor:e})=>$e.jsx(Coe,{styles:{default:{picker:{background:"#111"}}},color:n,disableAlpha:!0,onChange:t=>{e(t.rgb)}}),Uoe=({img:n,setLogo:e,setFile:t,color:r,enLogo:i,setEnLogo:s})=>{const o=l=>{if(n)switch(l){case 1:e(i?"./logo.png":n),s(!i);break}},a=()=>{s(!1)};return ce.useEffect(()=>{n&&o(1)},[n]),$e.jsxs("section",{className:"flex flex-col items-center",children:[$e.jsx("input",{id:"file-upload",type:"file",accept:"image/*",className:" w-[90%] text-[13px] file:hover:bg-gray-700 file:bg-[#111] file:border-white file:border-solid file:p-1 file:px-2 file:text-white file:rounded-full file:mr-2",style:{color:"rgb(74, 74, 74)"},onChange:l=>{a(),t(l.target.files[0])}}),$e.jsx("div",{className:"flex justify-center overflow-hidden h-[210px] w-full mt-2 mb-2 select-none",children:n&&$e.jsx("img",{width:"150px",src:n,className:"text-white",draggable:!1})}),$e.jsx("div",{})]})},koe=n=>new Promise(e=>{const t=new FileReader;t.onload=()=>e(t.result),t.readAsDataURL(n)}),Hoe=()=>{const e=document.querySelector("canvas").toDataURL(),t=document.createElement("a");t.href=e,t.download="Tshirt.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)},zoe=({color:n,handleLogo:e,isLogo:t})=>{const r=i=>{switch(i){case 1:e();break;case 3:Hoe();break}};return $e.jsxs("section",{style:{borderColor:"rgb(74, 74, 74)"},className:" select-none border-[2px] bg-[#000]/50 rounded-full flex items-center justify-around z-1 bottom-[15px] left-[50%] translate-x-[-50%] md:w-[220px] md:h-[70px] w-[210px] h-[60px]",children:[$e.jsx(ST,{img:A6,active:t,color:n,ind:1,handleClick:r}),$e.jsx(ST,{img:S6,active:!1,color:n,ind:3,handleClick:r})]})},Goe=({changeColor:n,color:e,setFile:t,img:r,setLogo:i})=>{const[s,o]=ce.useState(0),[a,l]=ce.useState(!1),f=h=>{o(s===h?0:h)};return $e.jsxs($e.Fragment,{children:[$e.jsxs("section",{style:{borderColor:"rgb(74, 74, 74)"},className:"relative select-none border-[2px] bg-[#000]/50 rounded-full flex flex-col items-center justify-around z-1 md:top-[50%] top-[77%] left-[15px] translate-y-[-50%] gap-[10px] py-[10px] px-[10px]",children:[$e.jsx(AT,{img:w6,active:s===1,color:e,ind:1,changeTab:f}),$e.jsx(AT,{img:M6,active:s===2,color:e,ind:2,changeTab:f})]}),s!=0&&$e.jsxs("section",{className:"w-[220px] h-[330px] absolute bg-[#111] rounded md:top-[50%] top-[65%] left-[90px] translate-y-[-50%] ",children:[$e.jsx("div",{className:"flex justify-end",children:$e.jsx("button",{type:"button",className:"w-[30px] h-[30px] p-[6px]",onClick:()=>f(0),children:$e.jsx("img",{src:E6,alt:"close",className:"select-none"})})}),s===1&&$e.jsx(Noe,{color:e,changeColor:n}),s===2&&$e.jsx(Uoe,{img:r,setLogo:i,setFile:t,color:e,enLogo:a,setEnLogo:l})]})]})},Voe=({color:n,logoS:e,logoP:t,handleLogoP:r,handleLogoS:i})=>{const s=o=>{switch(o){case 0:case 1:case 2:r(o);break;case 3:i(0);break;case 4:i(1);break;case 5:i(2);break}};return $e.jsxs("section",{style:{borderColor:"rgb(74, 74, 74)"},className:"absolute gap-1 py-5 md:py-8 select-none border-[2px] bg-[#000]/50 rounded-full flex flex-col items-center z-1 md:top-[50%] top-[68%] right-[15px] translate-y-[-50%] md:w-[70px] w-[60px]",children:[$e.jsx("h2",{style:{color:"rgb(74, 74, 74)"},className:"md:text-[11px] text-[10px] font-bold md:mt-[-50px] md:mb-4 mt-[-40px] mb-[12px]",children:"LOGO"}),$e.jsx("h2",{style:{color:"rgb(74, 74, 74)"},className:"md:text-[11px] text-[10px] font-bold",children:"Posición"}),$e.jsx(cc,{active:t===0,color:n,ind:0,text:"I",handleClick:s}),$e.jsx(cc,{active:t===1,color:n,ind:1,text:"M",handleClick:s}),$e.jsx(cc,{active:t===2,color:n,ind:2,text:"D",handleClick:s}),$e.jsx("h2",{style:{color:"rgb(74, 74, 74)"},className:"md:text-[11px] text-[10px] font-bold mt-2",children:"Tamaño"}),$e.jsx(cc,{active:e===0,color:n,ind:3,text:"P",handleClick:s}),$e.jsx(cc,{active:e===1,color:n,ind:4,text:"M",handleClick:s}),$e.jsx(cc,{active:e===2,color:n,ind:5,text:"G",handleClick:s})]})},Woe=()=>$e.jsx(M9,{center:!0,children:$e.jsx("div",{className:"border-t-[5px] animate-spin w-20 h-20 rounded-full"})}),$oe=({isMobile:n,color:e,logo:t,isLogo:r,logoP:i,logoS:s})=>$e.jsx("div",{className:"",children:$e.jsx(d9,{shadows:!0,gl:{preserveDrawingBuffer:!0},camera:{fov:25,position:[0,5,10]},children:$e.jsxs(ce.Suspense,{fallback:$e.jsx(Woe,{}),children:[$e.jsx("hemisphereLight",{groundColor:"#111",intensity:.01}),$e.jsx(joe,{logo:t,color:e,logoP:i,logoS:s,isMobile:n,isLogo:r}),$e.jsx(m6,{target:[0,n?.8:.4,0],maxDistance:30,minDistance:8,maxPolarAngle:Math.PI/1.94,minPolarAngle:Math.PI/4,enablePan:!1})]})})}),Xoe=""+new URL("tshirt-DE-sDllK.glb",import.meta.url).href,joe=({logo:n,color:e,logoP:t,logoS:r,isMobile:i,isLogo:s})=>{const{nodes:o,materials:a}=uv(Xoe),l=HS(n);ce.useEffect(()=>{},[n]),l.colorSpace=Yr,ce.useEffect(()=>{e.r<5&&e.g<5&&e.b<5?(a.color.color.r=5,a.color.color.g=5,a.color.color.b=5):(a.color.color.r=e.r,a.color.color.g=e.g,a.color.color.b=e.b)},[e]);const f=()=>{switch(t){case 0:return-.075;case 1:return 0;case 2:return .075;default:return 0}},h=()=>{switch(r){case 0:return .09;case 1:return .12;case 2:return .17}};return $e.jsx("group",{scale:i?6:9,children:$e.jsx("mesh",{castShadow:!0,receiveShadow:!0,name:"tshirt",geometry:o.tshirt.geometry,material:a.color,position:[0,i?.35:.2,0],dispose:null,children:s&&$e.jsx(p6,{position:[f(),.08,.13],rotation:[0,0,0],scale:h(),map:l,depthTest:!0})})})},Joe=()=>{const[n,e]=ce.useState(!1),[t,r]=ce.useState({r:19,g:97,b:189}),[i,s]=ce.useState(!0),[o,a]=ce.useState(0),[l,f]=ce.useState(2),[h,d]=ce.useState("./logo.png"),[p,m]=ce.useState(null),[y,_]=ce.useState(null);ce.useRef(null),ce.useEffect(()=>{p&&koe(p).then(P=>_(P))},[p]);const x=()=>{s(!i)},g=P=>{f(P)},S=P=>{a(P)},M=P=>{r({r:P.r,g:P.g,b:P.b})};ce.useEffect(()=>{window.innerWidth<768&&e(!0)},[]);const E=()=>{window.innerWidth<768?e(!0):e(!1)};return window.addEventListener("resize",E),$e.jsxs("main",{className:"  rounded-3xl  ",children:[$e.jsx($oe,{isMobile:n,color:t,logo:h,isLogo:i,logoP:l,logoS:o}),$e.jsx(zoe,{color:t,handleLogo:x,isLogo:i}),$e.jsx(Goe,{changeColor:M,color:t,setFile:m,img:y,setLogo:d}),$e.jsx(Voe,{color:t,logoS:o,logoP:l,handleLogoP:g,handleLogoS:S})]})},Koe=()=>$e.jsx("div",{className:"slide",children:"slide"}),Yoe=()=>$e.jsx($e.Fragment,{children:$e.jsxs("main",{className:"backg",children:[$e.jsx(Koe,{}),$e.jsx(Joe,{})]})});VA(document.getElementById("root")).render($e.jsx(ce.StrictMode,{children:$e.jsx(Yoe,{})}));
